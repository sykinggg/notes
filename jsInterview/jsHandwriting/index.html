<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>js 高频手写题 | 前端 学习</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <link rel="manifest" href="/notes/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="君子藏器于身 待时而动 天下有道则见 无道则隐">
    <meta property="og:url" content="/notes/jsInterview/jsHandwriting.html">
    <meta property="og:site_name" content="前端 学习">
    <meta property="og:title" content="js 高频手写题">
    <meta property="og:description" content="js 高频手写题 1. 实现instanceOf的3种方式 注意 instanceof 运算符用于检测构造函数的 prototype 属性是否出现在某个实例对象的原型链上。MDN上 关键点: 构造函数Fn的prototype，实例对象的原型链。 所以只要遍历实例对象的原型链，挨个往上查找看是否有与Fn的prototype相等的原型，直到最顶层Object还找">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="前端 学习">
    <meta property="article:author" content="sy">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <link rel="preload" href="/notes/assets/css/0.styles.93ff9c66.css" as="style"><link rel="preload" href="/notes/assets/js/app.267b360d.js" as="script"><link rel="preload" href="/notes/assets/js/vendors~layout-Layout.3e5aefe6.js" as="script"><link rel="preload" href="/notes/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.65963550.js" as="script"><link rel="preload" href="/notes/assets/js/page-js高频手写题.6daf6608.js" as="script"><link rel="preload" href="/notes/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.8a19680c.js" as="script"><link rel="prefetch" href="/notes/assets/js/638.3032d3c6.js"><link rel="prefetch" href="/notes/assets/js/639.7d5d94de.js"><link rel="prefetch" href="/notes/assets/js/640.f08e1bc9.js"><link rel="prefetch" href="/notes/assets/js/layout-Blog.eb05d08e.js"><link rel="prefetch" href="/notes/assets/js/layout-Layout.a53d4054.js"><link rel="prefetch" href="/notes/assets/js/layout-NotFound.932ab794.js"><link rel="prefetch" href="/notes/assets/js/layout-Slide.716eb990.js"><link rel="prefetch" href="/notes/assets/js/page-$mount.f0f072f2.js"><link rel="prefetch" href="/notes/assets/js/page--0036d571.2c479ddc.js"><link rel="prefetch" href="/notes/assets/js/page--022ad8a1.08ab1bbe.js"><link rel="prefetch" href="/notes/assets/js/page--049c9a9f.39c28484.js"><link rel="prefetch" href="/notes/assets/js/page--050f4996.3f0daeef.js"><link rel="prefetch" href="/notes/assets/js/page--05ca34d9.0ea87582.js"><link rel="prefetch" href="/notes/assets/js/page--06138101.80691c41.js"><link rel="prefetch" href="/notes/assets/js/page--078553ea.e8bde841.js"><link rel="prefetch" href="/notes/assets/js/page--07c5ad21.64ac5ec9.js"><link rel="prefetch" href="/notes/assets/js/page--07f0b7af.5e1f086f.js"><link rel="prefetch" href="/notes/assets/js/page--08402fbe.62c25c39.js"><link rel="prefetch" href="/notes/assets/js/page--0a137961.69c24388.js"><link rel="prefetch" href="/notes/assets/js/page--0b6292d3.3fb88369.js"><link rel="prefetch" href="/notes/assets/js/page--0b81571e.18165ff5.js"><link rel="prefetch" href="/notes/assets/js/page--0c7d4a27.eecf40eb.js"><link rel="prefetch" href="/notes/assets/js/page--0d936993.d8a5c075.js"><link rel="prefetch" href="/notes/assets/js/page--0e573275.8756da8f.js"><link rel="prefetch" href="/notes/assets/js/page--0f2ef575.71cca216.js"><link rel="prefetch" href="/notes/assets/js/page--0fb13921.1bf9bc30.js"><link rel="prefetch" href="/notes/assets/js/page--0fe0372e.48637f0e.js"><link rel="prefetch" href="/notes/assets/js/page--10902ffe.a0ca4065.js"><link rel="prefetch" href="/notes/assets/js/page--12bc566b.c5775f29.js"><link rel="prefetch" href="/notes/assets/js/page--135834a1.c75aa68d.js"><link rel="prefetch" href="/notes/assets/js/page--15961e72.5f97f4f0.js"><link rel="prefetch" href="/notes/assets/js/page--17036b33.de237227.js"><link rel="prefetch" href="/notes/assets/js/page--172068b9.7e09b6e9.js"><link rel="prefetch" href="/notes/assets/js/page--18126b85.12fb3413.js"><link rel="prefetch" href="/notes/assets/js/page--19a1b422.6a88783c.js"><link rel="prefetch" href="/notes/assets/js/page--1a00028a.cf17fc42.js"><link rel="prefetch" href="/notes/assets/js/page--1c6aa5c2.3899b0f4.js"><link rel="prefetch" href="/notes/assets/js/page--1fece121.28ed93e2.js"><link rel="prefetch" href="/notes/assets/js/page--201cfbe1.8086c51d.js"><link rel="prefetch" href="/notes/assets/js/page--2095282b.2114b91e.js"><link rel="prefetch" href="/notes/assets/js/page--21792c01.45b9398a.js"><link rel="prefetch" href="/notes/assets/js/page--226f1079.75a7e31c.js"><link rel="prefetch" href="/notes/assets/js/page--2518076e.8d2889d4.js"><link rel="prefetch" href="/notes/assets/js/page--25cb6e5f.a11d0705.js"><link rel="prefetch" href="/notes/assets/js/page--2616bc7e.649aee88.js"><link rel="prefetch" href="/notes/assets/js/page--27a556ad.f8c8101f.js"><link rel="prefetch" href="/notes/assets/js/page--27c21126.2e864756.js"><link rel="prefetch" href="/notes/assets/js/page--28435cbb.42ca783c.js"><link rel="prefetch" href="/notes/assets/js/page--28c148fe.6dd11541.js"><link rel="prefetch" href="/notes/assets/js/page--2ae50662.6701ea62.js"><link rel="prefetch" href="/notes/assets/js/page--2c665981.64d86697.js"><link rel="prefetch" href="/notes/assets/js/page--2d021821.5c402661.js"><link rel="prefetch" href="/notes/assets/js/page--31799879.9731ae3d.js"><link rel="prefetch" href="/notes/assets/js/page--33b11326.b78e5e5c.js"><link rel="prefetch" href="/notes/assets/js/page--3477437b.7c9027a7.js"><link rel="prefetch" href="/notes/assets/js/page--34ad062f.1b0a4ffe.js"><link rel="prefetch" href="/notes/assets/js/page--357aec57.bb463634.js"><link rel="prefetch" href="/notes/assets/js/page--35f61a61.4a2711ed.js"><link rel="prefetch" href="/notes/assets/js/page--36897e27.7363c109.js"><link rel="prefetch" href="/notes/assets/js/page--36b30161.f7b8071a.js"><link rel="prefetch" href="/notes/assets/js/page--377508c1.355dae1c.js"><link rel="prefetch" href="/notes/assets/js/page--3779bcfe.c3ba0fcb.js"><link rel="prefetch" href="/notes/assets/js/page--389d5da5.a92e5f99.js"><link rel="prefetch" href="/notes/assets/js/page--38ef908f.a937e886.js"><link rel="prefetch" href="/notes/assets/js/page--39c1a916.979bff9b.js"><link rel="prefetch" href="/notes/assets/js/page--39e34c63.9e83802a.js"><link rel="prefetch" href="/notes/assets/js/page--3bbd34b1.c2cdc0e6.js"><link rel="prefetch" href="/notes/assets/js/page--3d00ca45.4cd9fedd.js"><link rel="prefetch" href="/notes/assets/js/page--3d121781.002ab678.js"><link rel="prefetch" href="/notes/assets/js/page--3d5ab373.a84d7f01.js"><link rel="prefetch" href="/notes/assets/js/page--41d1702a.c090759e.js"><link rel="prefetch" href="/notes/assets/js/page--427db7c1.770087a2.js"><link rel="prefetch" href="/notes/assets/js/page--4365fcbe.e2927640.js"><link rel="prefetch" href="/notes/assets/js/page--466a516d.06283a37.js"><link rel="prefetch" href="/notes/assets/js/page--46f53541.7837d780.js"><link rel="prefetch" href="/notes/assets/js/page--4776c269.9f9a05d1.js"><link rel="prefetch" href="/notes/assets/js/page--4803a967.9db63a04.js"><link rel="prefetch" href="/notes/assets/js/page--48c4e433.66312ec3.js"><link rel="prefetch" href="/notes/assets/js/page--48f9c9d9.7ee206b5.js"><link rel="prefetch" href="/notes/assets/js/page--4a252f57.a6360eed.js"><link rel="prefetch" href="/notes/assets/js/page--4b35cd6a.288d7e17.js"><link rel="prefetch" href="/notes/assets/js/page--4bd2c839.e7104d2b.js"><link rel="prefetch" href="/notes/assets/js/page--4be1980d.c6794c38.js"><link rel="prefetch" href="/notes/assets/js/page--4c3dfc92.d80647d1.js"><link rel="prefetch" href="/notes/assets/js/page--4c9b9bf3.518f0519.js"><link rel="prefetch" href="/notes/assets/js/page--4caf2956.6a169027.js"><link rel="prefetch" href="/notes/assets/js/page--4df59ba1.8d40d239.js"><link rel="prefetch" href="/notes/assets/js/page--4dfb2a67.fc9b72c2.js"><link rel="prefetch" href="/notes/assets/js/page--4e2425dd.4465162a.js"><link rel="prefetch" href="/notes/assets/js/page--4eb2620a.27cb7408.js"><link rel="prefetch" href="/notes/assets/js/page--4fd512b5.983274f8.js"><link rel="prefetch" href="/notes/assets/js/page--4ff1cd2e.c383df52.js"><link rel="prefetch" href="/notes/assets/js/page--505dfb41.7442abc1.js"><link rel="prefetch" href="/notes/assets/js/page--5293e923.d50ba368.js"><link rel="prefetch" href="/notes/assets/js/page--5381ba01.df0bcdb6.js"><link rel="prefetch" href="/notes/assets/js/page--550b58e9.b21a077e.js"><link rel="prefetch" href="/notes/assets/js/page--564b24b3.081ca398.js"><link rel="prefetch" href="/notes/assets/js/page--598867f3.96abbce5.js"><link rel="prefetch" href="/notes/assets/js/page--5be0cf2e.3809e728.js"><link rel="prefetch" href="/notes/assets/js/page--5c1b876b.d5b11f84.js"><link rel="prefetch" href="/notes/assets/js/page--60c3812d.e1a410d8.js"><link rel="prefetch" href="/notes/assets/js/page--6213086b.6c86cb32.js"><link rel="prefetch" href="/notes/assets/js/page--624c4841.b795c9cb.js"><link rel="prefetch" href="/notes/assets/js/page--6389398f.f6806417.js"><link rel="prefetch" href="/notes/assets/js/page--6497f0a1.1f07c786.js"><link rel="prefetch" href="/notes/assets/js/page--649d273e.9bab0aae.js"><link rel="prefetch" href="/notes/assets/js/page--663eaefe.03fe5c6e.js"><link rel="prefetch" href="/notes/assets/js/page--66f10201.f39a842f.js"><link rel="prefetch" href="/notes/assets/js/page--6877a3e2.7131fe88.js"><link rel="prefetch" href="/notes/assets/js/page--6afe7ce1.6b596c5a.js"><link rel="prefetch" href="/notes/assets/js/page--6cbf38e1.958f7891.js"><link rel="prefetch" href="/notes/assets/js/page--6ce92f3e.654df084.js"><link rel="prefetch" href="/notes/assets/js/page--6e597d21.13545f6e.js"><link rel="prefetch" href="/notes/assets/js/page--6e740896.c3cbaa6f.js"><link rel="prefetch" href="/notes/assets/js/page--6f049967.9328b70a.js"><link rel="prefetch" href="/notes/assets/js/page--6ff33237.1b0841df.js"><link rel="prefetch" href="/notes/assets/js/page--70f1ad1b.b7f17f5b.js"><link rel="prefetch" href="/notes/assets/js/page--7458eaaa.7b7d771d.js"><link rel="prefetch" href="/notes/assets/js/page--746db89a.6a0d71d1.js"><link rel="prefetch" href="/notes/assets/js/page--762ae66f.66b45ecb.js"><link rel="prefetch" href="/notes/assets/js/page--78218936.8fd65d7c.js"><link rel="prefetch" href="/notes/assets/js/page--7a6b8eb1.131c71c9.js"><link rel="prefetch" href="/notes/assets/js/page--7b0b14b7.629daecb.js"><link rel="prefetch" href="/notes/assets/js/page--7b24903e.7a4c2dd1.js"><link rel="prefetch" href="/notes/assets/js/page--7c0f4619.2aa200c7.js"><link rel="prefetch" href="/notes/assets/js/page--7c62eb01.4358ae9f.js"><link rel="prefetch" href="/notes/assets/js/page--7c8b8781.b9b447ec.js"><link rel="prefetch" href="/notes/assets/js/page--7d3b14f1.95b0dcd5.js"><link rel="prefetch" href="/notes/assets/js/page--7e94c3bb.71e1f972.js"><link rel="prefetch" href="/notes/assets/js/page--7fc7e4a1.40c88eee.js"><link rel="prefetch" href="/notes/assets/js/page--82271b92.5903bba6.js"><link rel="prefetch" href="/notes/assets/js/page--828e159e.db3c71af.js"><link rel="prefetch" href="/notes/assets/js/page--8cd36aaa.e3992344.js"><link rel="prefetch" href="/notes/assets/js/page--8e28d8be.981e16c5.js"><link rel="prefetch" href="/notes/assets/js/page--9009daaa.3393a552.js"><link rel="prefetch" href="/notes/assets/js/page--9230e83a.c0354b2d.js"><link rel="prefetch" href="/notes/assets/js/page--9fdba57e.e44dd521.js"><link rel="prefetch" href="/notes/assets/js/page--a051453e.eaaed1e0.js"><link rel="prefetch" href="/notes/assets/js/page--a1c4239e.afe9e2ae.js"><link rel="prefetch" href="/notes/assets/js/page--a8a8c1be.03994da1.js"><link rel="prefetch" href="/notes/assets/js/page--aabdd1a6.a3ee4544.js"><link rel="prefetch" href="/notes/assets/js/page--b0ec1952.2222b85f.js"><link rel="prefetch" href="/notes/assets/js/page--b5901aa6.d9b53de5.js"><link rel="prefetch" href="/notes/assets/js/page--c185ca2a.2b758e3f.js"><link rel="prefetch" href="/notes/assets/js/page--c4cd30aa.20adbbb9.js"><link rel="prefetch" href="/notes/assets/js/page--cba59586.5b9a05fd.js"><link rel="prefetch" href="/notes/assets/js/page--cc19dc5e.4ceaf4d5.js"><link rel="prefetch" href="/notes/assets/js/page--cf39bd12.91612cbd.js"><link rel="prefetch" href="/notes/assets/js/page--d0d30f3e.a168cb73.js"><link rel="prefetch" href="/notes/assets/js/page--d206ab7e.cc1723eb.js"><link rel="prefetch" href="/notes/assets/js/page--d2ed8dae.27f2906a.js"><link rel="prefetch" href="/notes/assets/js/page--d676831e.3ed172c2.js"><link rel="prefetch" href="/notes/assets/js/page--d6d819fe.ad33e3e1.js"><link rel="prefetch" href="/notes/assets/js/page--d994fd7e.a97c9aed.js"><link rel="prefetch" href="/notes/assets/js/page--dd5a1a16.c427a2cf.js"><link rel="prefetch" href="/notes/assets/js/page--df9ce13a.e0edce95.js"><link rel="prefetch" href="/notes/assets/js/page--e0b57efe.6b117b35.js"><link rel="prefetch" href="/notes/assets/js/page--eb673c12.dd5e99ef.js"><link rel="prefetch" href="/notes/assets/js/page--ebf2773e.90f1dff0.js"><link rel="prefetch" href="/notes/assets/js/page--ef64acb6.0561ab44.js"><link rel="prefetch" href="/notes/assets/js/page--f77f473e.2edcd671.js"><link rel="prefetch" href="/notes/assets/js/page--fb1d49b6.adf7a235.js"><link rel="prefetch" href="/notes/assets/js/page-1、说说你对SPA单页面的理解，它的优缺点分别是什么？.86221b01.js"><link rel="prefetch" href="/notes/assets/js/page-24个JavaScript循环遍历方法.b4274e9e.js"><link rel="prefetch" href="/notes/assets/js/page-44个Javascript变态题解析.9450a037.js"><link rel="prefetch" href="/notes/assets/js/page-49个CSS知识点.de186f91.js"><link rel="prefetch" href="/notes/assets/js/page-@charset.eceb3900.js"><link rel="prefetch" href="/notes/assets/js/page-@types.42dc4561.js"><link rel="prefetch" href="/notes/assets/js/page-@umijsplugin-dva.53e806d8.js"><link rel="prefetch" href="/notes/assets/js/page-@umijsplugin-qiankun.67dfaac8.js"><link rel="prefetch" href="/notes/assets/js/page-AMD模块.f1fd8f7c.js"><link rel="prefetch" href="/notes/assets/js/page-API.30d46497.js"><link rel="prefetch" href="/notes/assets/js/page-Arrayprototypeflat().7a85b66e.js"><link rel="prefetch" href="/notes/assets/js/page-Barrel.daf0b3d8.js"><link rel="prefetch" href="/notes/assets/js/page-Bind是有害的.a9e5f1df.js"><link rel="prefetch" href="/notes/assets/js/page-CSSGrid网格布局教程.9b7ca2e8.js"><link rel="prefetch" href="/notes/assets/js/page-CSS选择符.70c96f94.js"><link rel="prefetch" href="/notes/assets/js/page-Canvas和SVG区别.9ed7aec4.js"><link rel="prefetch" href="/notes/assets/js/page-CommonJS.9ba78b97.js"><link rel="prefetch" href="/notes/assets/js/page-Configuration.247d49ad.js"><link rel="prefetch" href="/notes/assets/js/page-Consumer向上找不到Provider的时候怎么办.c6d7465f.js"><link rel="prefetch" href="/notes/assets/js/page-ContentTypes.bcb15007.js"><link rel="prefetch" href="/notes/assets/js/page-Css单位.234e4f90.js"><link rel="prefetch" href="/notes/assets/js/page-Decorators.bbba5c8a.js"><link rel="prefetch" href="/notes/assets/js/page-Diff算法.9d011f3d.js"><link rel="prefetch" href="/notes/assets/js/page-ES10新特性（2019）.84848bfb.js"><link rel="prefetch" href="/notes/assets/js/page-ES6新特性（2015）.91795a9a.js"><link rel="prefetch" href="/notes/assets/js/page-ES7新特性（2016）.78fec664.js"><link rel="prefetch" href="/notes/assets/js/page-ES8新特性（2017）.910b5e36.js"><link rel="prefetch" href="/notes/assets/js/page-ES9新特性（2018）.ba036087.js"><link rel="prefetch" href="/notes/assets/js/page-FetchAPI教程.c8eac083.js"><link rel="prefetch" href="/notes/assets/js/page-FileReader.6a77adc0.js"><link rel="prefetch" href="/notes/assets/js/page-Flex布局教程：实例篇.042fa3da.js"><link rel="prefetch" href="/notes/assets/js/page-Flex布局教程：语法篇.ad9bdc53.js"><link rel="prefetch" href="/notes/assets/js/page-Flyweight模式.52aac770.js"><link rel="prefetch" href="/notes/assets/js/page-Fragment.8744c981.js"><link rel="prefetch" href="/notes/assets/js/page-Freshness.55d591cd.js"><link rel="prefetch" href="/notes/assets/js/page-Generator.0666c01e.js"><link rel="prefetch" href="/notes/assets/js/page-Git面试知识点.2457ee57.js"><link rel="prefetch" href="/notes/assets/js/page-HTML5datalist标签.4f1f6ff1.js"><link rel="prefetch" href="/notes/assets/js/page-HTML常用特殊字符.7d215c96.js"><link rel="prefetch" href="/notes/assets/js/page-Home.dfe3b93b.js"><link rel="prefetch" href="/notes/assets/js/page-Hook原理(副作用Hook).ca001ded.js"><link rel="prefetch" href="/notes/assets/js/page-Hook原理(概览).45d0bcd5.js"><link rel="prefetch" href="/notes/assets/js/page-Hook原理(状态Hook).04250bc1.js"><link rel="prefetch" href="/notes/assets/js/page-Hybrid.33ff0054.js"><link rel="prefetch" href="/notes/assets/js/page-ID选择器.6f079967.js"><link rel="prefetch" href="/notes/assets/js/page-ImmutableData.06542f72.js"><link rel="prefetch" href="/notes/assets/js/page-Introduction.50479470.js"><link rel="prefetch" href="/notes/assets/js/page-JSONstringify悲伤的故事.8bf62a31.js"><link rel="prefetch" href="/notes/assets/js/page-JSX和React.22364cea.js"><link rel="prefetch" href="/notes/assets/js/page-JavaScript实现双向链表.cc131c36.js"><link rel="prefetch" href="/notes/assets/js/page-JavaScript执行机制.bc57aac8.js"><link rel="prefetch" href="/notes/assets/js/page-JavaScript设计模式的分类.9a8e56f7.js"><link rel="prefetch" href="/notes/assets/js/page-MVC模式.b5d0f9c4.js"><link rel="prefetch" href="/notes/assets/js/page-MVP模式.0e1b35d9.js"><link rel="prefetch" href="/notes/assets/js/page-MVVM.b21a1be1.js"><link rel="prefetch" href="/notes/assets/js/page-Map.9a545853.js"><link rel="prefetch" href="/notes/assets/js/page-Mixin模式.d43007c2.js"><link rel="prefetch" href="/notes/assets/js/page-Modulardesign(模块化设计).de62457e.js"><link rel="prefetch" href="/notes/assets/js/page-Never.6817021c.js"><link rel="prefetch" href="/notes/assets/js/page-Objectis（）.34594768.js"><link rel="prefetch" href="/notes/assets/js/page-Portals.aa88a7b5.js"><link rel="prefetch" href="/notes/assets/js/page-ProgressEvent.567803eb.js"><link rel="prefetch" href="/notes/assets/js/page-Promise.1819afe0.js"><link rel="prefetch" href="/notes/assets/js/page-Promise面试题总结.a33dcf02.js"><link rel="prefetch" href="/notes/assets/js/page-Props(v2611).6adb1ee8.js"><link rel="prefetch" href="/notes/assets/js/page-Quirks模式是什么？它和Standards模式有什么区别.e180ba0f.js"><link rel="prefetch" href="/notes/assets/js/page-React+TypeScript规范.ef7505b4.js"><link rel="prefetch" href="/notes/assets/js/page-ReactComponent.842c3c6b.js"><link rel="prefetch" href="/notes/assets/js/page-ReactContext原理.1e602b15.js"><link rel="prefetch" href="/notes/assets/js/page-ReactJSX.48caf853.js"><link rel="prefetch" href="/notes/assets/js/page-React中的优先级管理.69dec033.js"><link rel="prefetch" href="/notes/assets/js/page-React合成事件.6b5945f8.js"><link rel="prefetch" href="/notes/assets/js/page-React工作循环(workLoop).1b5dc187.js"><link rel="prefetch" href="/notes/assets/js/page-React应用中的高频对象.b5757434.js"><link rel="prefetch" href="/notes/assets/js/page-React应用的启动过程.7629f183.js"><link rel="prefetch" href="/notes/assets/js/page-React应用的宏观包结构(web开发).e4530f08.js"><link rel="prefetch" href="/notes/assets/js/page-React引用传递ForwardingRefs.028ef4c0.js"><link rel="prefetch" href="/notes/assets/js/page-React源码解析.4f4d180f.js"><link rel="prefetch" href="/notes/assets/js/page-React算法之位运算.b36ca361.js"><link rel="prefetch" href="/notes/assets/js/page-React算法之堆排序.9d4d4026.js"><link rel="prefetch" href="/notes/assets/js/page-React算法之栈操作.065b2cff.js"><link rel="prefetch" href="/notes/assets/js/page-React算法之深度优先遍历.57e4adc5.js"><link rel="prefetch" href="/notes/assets/js/page-React算法之调和算法.48baf00c.js"><link rel="prefetch" href="/notes/assets/js/page-React算法之链表操作.cfe68940.js"><link rel="prefetch" href="/notes/assets/js/page-React调度原理(scheduler).f7c7fbaf.js"><link rel="prefetch" href="/notes/assets/js/page-React运行时优化方案.ea87fe22.js"><link rel="prefetch" href="/notes/assets/js/page-React高阶组件(HOC).6417608c.js"><link rel="prefetch" href="/notes/assets/js/page-ReflectMetadata.4b115825.js"><link rel="prefetch" href="/notes/assets/js/page-Stack.7afc956f.js"><link rel="prefetch" href="/notes/assets/js/page-StickyFooter，完美的绝对底部.0f1bfbb7.js"><link rel="prefetch" href="/notes/assets/js/page-String.710bc668.js"><link rel="prefetch" href="/notes/assets/js/page-Suspense组件.38499b9a.js"><link rel="prefetch" href="/notes/assets/js/page-Symbol.e61f7777.js"><link rel="prefetch" href="/notes/assets/js/page-Table组件性能.ba9d4eaa.js"><link rel="prefetch" href="/notes/assets/js/page-ThisType.07c23903.js"><link rel="prefetch" href="/notes/assets/js/page-TransformBuildApi.afd73148.js"><link rel="prefetch" href="/notes/assets/js/page-Truthy.f55a3fd4.js"><link rel="prefetch" href="/notes/assets/js/page-TypeScript37.f4f9958e.js"><link rel="prefetch" href="/notes/assets/js/page-TypeScript38.7784075d.js"><link rel="prefetch" href="/notes/assets/js/page-TypeScript39.473d5d76.js"><link rel="prefetch" href="/notes/assets/js/page-TypeScript中的静态构造函数.2900af9b.js"><link rel="prefetch" href="/notes/assets/js/page-VNode.40bef91b.js"><link rel="prefetch" href="/notes/assets/js/page-VirtualDOM.f3733c3d.js"><link rel="prefetch" href="/notes/assets/js/page-Vue-Router.69e0d113.js"><link rel="prefetch" href="/notes/assets/js/page-VueRouter对象.e3946cda.js"><link rel="prefetch" href="/notes/assets/js/page-Vuejs九个性能优化技巧.d4f05361.js"><link rel="prefetch" href="/notes/assets/js/page-Vuejs源码构建.bd1a70cf.js"><link rel="prefetch" href="/notes/assets/js/page-Vuejs源码目录设计.090fd4ce.js"><link rel="prefetch" href="/notes/assets/js/page-Vuex.54210457.js"><link rel="prefetch" href="/notes/assets/js/page-Vuex初始化.94f90e28.js"><link rel="prefetch" href="/notes/assets/js/page-Vue事件API.11b8d94f.js"><link rel="prefetch" href="/notes/assets/js/page-Vue实例挂载的实现.5c6b2332.js"><link rel="prefetch" href="/notes/assets/js/page-Vue模板渲染的原理.4f6b4d39.js"><link rel="prefetch" href="/notes/assets/js/page-Vue获取页面元素的相对位置.3ddd3b9f.js"><link rel="prefetch" href="/notes/assets/js/page-Webpack.2bb91f5e.js"><link rel="prefetch" href="/notes/assets/js/page-XMLHttpRequest.2fc7604b.js"><link rel="prefetch" href="/notes/assets/js/page-accesskey.64875017.js"><link rel="prefetch" href="/notes/assets/js/page-arguments[]函数参数数组.07f7de47.js"><link rel="prefetch" href="/notes/assets/js/page-asyncawait原理.47e7415b.js"><link rel="prefetch" href="/notes/assets/js/page-babel编译原理.8f33b216.js"><link rel="prefetch" href="/notes/assets/js/page-before和after中双冒号和单冒号.4c69c064.js"><link rel="prefetch" href="/notes/assets/js/page-beginWork.7bb5f16c.js"><link rel="prefetch" href="/notes/assets/js/page-codegen.eb923406.js"><link rel="prefetch" href="/notes/assets/js/page-coerceRef.81d9f652.js"><link rel="prefetch" href="/notes/assets/js/page-commitAllHostEffects.da8af34e.js"><link rel="prefetch" href="/notes/assets/js/page-commitAllLifeCycles.6640fc87.js"><link rel="prefetch" href="/notes/assets/js/page-commitBeforeMutationLifecycles.d6727071.js"><link rel="prefetch" href="/notes/assets/js/page-commitDeletion.08b66498.js"><link rel="prefetch" href="/notes/assets/js/page-commitPlacement.080e0f3b.js"><link rel="prefetch" href="/notes/assets/js/page-commitRoot.e979df86.js"><link rel="prefetch" href="/notes/assets/js/page-commitWork.e6feee88.js"><link rel="prefetch" href="/notes/assets/js/page-constructor和getInitialState.e99a10c8.js"><link rel="prefetch" href="/notes/assets/js/page-createComponent.a7db4152.js"><link rel="prefetch" href="/notes/assets/js/page-createElement.3f2c00da.js"><link rel="prefetch" href="/notes/assets/js/page-css优先级：.0755c412.js"><link rel="prefetch" href="/notes/assets/js/page-css兼容性整理.edb4805d.js"><link rel="prefetch" href="/notes/assets/js/page-css基础面试.29ae4e4f.js"><link rel="prefetch" href="/notes/assets/js/page-demo.394e8991.js"><link rel="prefetch" href="/notes/assets/js/page-device.daa9d4b8.js"><link rel="prefetch" href="/notes/assets/js/page-divonClick={handlerClick}单击单击div有什么区别.18b61b72.js"><link rel="prefetch" href="/notes/assets/js/page-es6module.8ddf932c.js"><link rel="prefetch" href="/notes/assets/js/page-event.b834a80f.js"><link rel="prefetch" href="/notes/assets/js/page-exportdefault被认为是有害的.6bdc7219.js"><link rel="prefetch" href="/notes/assets/js/page-fiber树构造(初次创建).b36916b2.js"><link rel="prefetch" href="/notes/assets/js/page-fiber树构造(基础准备).e738b6ac.js"><link rel="prefetch" href="/notes/assets/js/page-fiber树构造(对比更新).2567eb40.js"><link rel="prefetch" href="/notes/assets/js/page-fiber树渲染.3c27a06f.js"><link rel="prefetch" href="/notes/assets/js/page-fixed失效.6dee7783.js"><link rel="prefetch" href="/notes/assets/js/page-function.a013e080.js"><link rel="prefetch" href="/notes/assets/js/page-gitrebase.c557aa98.js"><link rel="prefetch" href="/notes/assets/js/page-hydrate.7902b21a.js"><link rel="prefetch" href="/notes/assets/js/page-infer.1b036d87.js"><link rel="prefetch" href="/notes/assets/js/page-inline-block元素间间距.44be3830.js"><link rel="prefetch" href="/notes/assets/js/page-invokeGuardedCallback.7d536565.js"><link rel="prefetch" href="/notes/assets/js/page-js奇怪的小问题.aea5a0c2.js"><link rel="prefetch" href="/notes/assets/js/page-js异步历史.18be3eb1.js"><link rel="prefetch" href="/notes/assets/js/page-js总结.9db5188d.js"><link rel="prefetch" href="/notes/assets/js/page-keep-alive.69dddda4.js"><link rel="prefetch" href="/notes/assets/js/page-lazycomponent.e607f480.js"><link rel="prefetch" href="/notes/assets/js/page-libdts.5256f769.js"><link rel="prefetch" href="/notes/assets/js/page-loader.0410a1d8.js"><link rel="prefetch" href="/notes/assets/js/page-matcher.587cc9b8.js"><link rel="prefetch" href="/notes/assets/js/page-module、export、import分别有什么作用？.1945f6e4.js"><link rel="prefetch" href="/notes/assets/js/page-mountIndeterminateComponent.769e240b.js"><link rel="prefetch" href="/notes/assets/js/page-mountLazyCompont.12dd5156.js"><link rel="prefetch" href="/notes/assets/js/page-newVue发生了什么.7d146148.js"><link rel="prefetch" href="/notes/assets/js/page-nextTick.dd448575.js"><link rel="prefetch" href="/notes/assets/js/page-nginx使用综合场景.fc36f310.js"><link rel="prefetch" href="/notes/assets/js/page-optimize.5d9e05ed.js"><link rel="prefetch" href="/notes/assets/js/page-parse.9f1c1502.js"><link rel="prefetch" href="/notes/assets/js/page-patch.81533081.js"><link rel="prefetch" href="/notes/assets/js/page-plugin.8a1a9a66.js"><link rel="prefetch" href="/notes/assets/js/page-plugins.9a50f946.js"><link rel="prefetch" href="/notes/assets/js/page-public设置.2c66aaee.js"><link rel="prefetch" href="/notes/assets/js/page-react-dom.1f952d1a.js"><link rel="prefetch" href="/notes/assets/js/page-react-hooks.b87e9f48.js"><link rel="prefetch" href="/notes/assets/js/page-react-hooks使用.cd49ae88.js"><link rel="prefetch" href="/notes/assets/js/page-react-hooks原理.38525a3b.js"><link rel="prefetch" href="/notes/assets/js/page-react-redux源码.87015c98.js"><link rel="prefetch" href="/notes/assets/js/page-readonly.0ea3b136.js"><link rel="prefetch" href="/notes/assets/js/page-reconcileChildren.1d941622.js"><link rel="prefetch" href="/notes/assets/js/page-reconcileChildrenArray.31eb645f.js"><link rel="prefetch" href="/notes/assets/js/page-reconcileSingleElement.842f2901.js"><link rel="prefetch" href="/notes/assets/js/page-reconciler运作流程.cf51dc24.js"><link rel="prefetch" href="/notes/assets/js/page-redux源码解读.78110dfa.js"><link rel="prefetch" href="/notes/assets/js/page-render.e98a6b9e.js"><link rel="prefetch" href="/notes/assets/js/page-resolveCurrentlyRenderingFiber.474473ef.js"><link rel="prefetch" href="/notes/assets/js/page-set.1e4251fd.js"><link rel="prefetch" href="/notes/assets/js/page-setState.301de895.js"><link rel="prefetch" href="/notes/assets/js/page-setState执行流程.f1908388.js"><link rel="prefetch" href="/notes/assets/js/page-setState背后的批量更新如何实现.c8c0f0ce.js"><link rel="prefetch" href="/notes/assets/js/page-slot.70ff425b.js"><link rel="prefetch" href="/notes/assets/js/page-suspense.f5499e6b.js"><link rel="prefetch" href="/notes/assets/js/page-throwException.4c9f92f9.js"><link rel="prefetch" href="/notes/assets/js/page-transition-group.3f0ab523.js"><link rel="prefetch" href="/notes/assets/js/page-transition.506bd7d2.js"><link rel="prefetch" href="/notes/assets/js/page-tsconfigjson的行为.2ce7b4b0.js"><link rel="prefetch" href="/notes/assets/js/page-typescript综合面试.4f0ee3f1.js"><link rel="prefetch" href="/notes/assets/js/page-update.961a3e60.js"><link rel="prefetch" href="/notes/assets/js/page-updateClassComponent.b15e5a4d.js"><link rel="prefetch" href="/notes/assets/js/page-updateContextConsumer.cc4ac38e.js"><link rel="prefetch" href="/notes/assets/js/page-updateContextProvider.f73f8878.js"><link rel="prefetch" href="/notes/assets/js/page-updateForwardRef.ed289153.js"><link rel="prefetch" href="/notes/assets/js/page-updateFragment.91c2a416.js"><link rel="prefetch" href="/notes/assets/js/page-updateFunctionalComponent.e43bb5b0.js"><link rel="prefetch" href="/notes/assets/js/page-updateHostComponent.abd8a6d3.js"><link rel="prefetch" href="/notes/assets/js/page-updateHostRoot.aec83ccf.js"><link rel="prefetch" href="/notes/assets/js/page-updateHostText.3e55a2a2.js"><link rel="prefetch" href="/notes/assets/js/page-updateMode.16a8e5e4.js"><link rel="prefetch" href="/notes/assets/js/page-updatePortalComponent.9af45250.js"><link rel="prefetch" href="/notes/assets/js/page-updateProfiler.2e14727c.js"><link rel="prefetch" href="/notes/assets/js/page-updateSuspenseComponent.e7d516f9.js"><link rel="prefetch" href="/notes/assets/js/page-useCallbackuseMemo.c253ae50.js"><link rel="prefetch" href="/notes/assets/js/page-useContext.c361ea9c.js"><link rel="prefetch" href="/notes/assets/js/page-useEffect.ed1d529c.js"><link rel="prefetch" href="/notes/assets/js/page-useState.4f0c7ad6.js"><link rel="prefetch" href="/notes/assets/js/page-v-model.0fb3b001.js"><link rel="prefetch" href="/notes/assets/js/page-vue响应式详解（重学前端-vue篇1）.aeac8eb2.js"><link rel="prefetch" href="/notes/assets/js/page-vue的优点.51f9bf45.js"><link rel="prefetch" href="/notes/assets/js/page-web工程通用脚手架工具.a4013bd7.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶1-1期】理解JavaScript中的执行上下文和执行栈.1288c6b5.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶1-2期】JavaScript深入之执行上下文栈和变量对象.9a1507a0.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶1-3期】JavaScript深入之内存空间详细图解.aef00b57.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶1-4期】JavaScript深入之带走进内存机制.90872a0f.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶1-5期】JavaScript深入之4类常见内存泄漏及如何避免.af612ce0.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶1-6期】JavaScript预编译.f211d462.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶2-1期】深入浅出图解作用域链和闭包.9d43408f.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶2-2期】JavaScript深入之从作用域链理解闭包.d5299dd9.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶2-3期】JavaScript深入之闭包面试题解.c682593d.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶3-1期】JavaScript深入之史上最全--5种this绑定全面解析.3afbb35f.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶3-2期】JavaScript深入之重新认识箭头函数的this.0ddd28bd.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶3-3期】深度广度解析call和apply原理、使用场景及实现.715e0bb8.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶3-4期】深度解析bind原理、使用场景及模拟实现.2bf0ec0c.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶3-5期】深度解析new原理及模拟实现.719ad6dc.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶4-1期】详细解析赋值、浅拷贝和深拷贝的区别.7e19d547.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶4-2期】Objectassign原理及其实现.34ab88be.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶4-3期】面试题之如何实现一个深拷贝.cde661b0.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶4-4期】Lodash是如何实现深拷贝的.b67196d8.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶5-1期】重新认识构造函数、原型和原型链.b927b9e5.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶5-2期】图解原型链及其继承优缺点.63811eda.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶5-3期】深入探究FunctionObject鸡蛋问题.c90e8781.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶6-1期】JavaScript高阶函数浅析.8dd1be55.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶6-2期】深入高阶函数应用之柯里化.54b44d71.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶6-3期】Array原型方法源码实现大解密.22360a06.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶7-1期】深入浅出节流函数throttle.c5d336b1.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶7-2期】深入浅出防抖函数debounce.f2fe40a1.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶7-3期】Throttle和Debounce在React中的应用.00677460.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶7-4期】深入篇阿里P6必会Lodash防抖节流函数实现原理.0f5d66bb.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶7-5期】浅出篇7个角度吃透Lodash防抖节流原理.d572003c.js"><link rel="prefetch" href="/notes/assets/js/page-一、Webpack原理.6124a0c5.js"><link rel="prefetch" href="/notes/assets/js/page-一、为什么JavaScript是单线程？.f57f6638.js"><link rel="prefetch" href="/notes/assets/js/page-一、概述.0f36bff1.js"><link rel="prefetch" href="/notes/assets/js/page-一、简介.482bd301.js"><link rel="prefetch" href="/notes/assets/js/page-一些不能按预期工作的代码.87c3c231.js"><link rel="prefetch" href="/notes/assets/js/page-一些常见的Feature需求.dd01a127.js"><link rel="prefetch" href="/notes/assets/js/page-一些常见的「bug」并不是bug.f4e817a3.js"><link rel="prefetch" href="/notes/assets/js/page-一正确理解react-router.50e40193.js"><link rel="prefetch" href="/notes/assets/js/page-严格模式.7bdee3f5.js"><link rel="prefetch" href="/notes/assets/js/page-中介者模式.17175b23.js"><link rel="prefetch" href="/notes/assets/js/page-事件模块的注入模式.ad66edea.js"><link rel="prefetch" href="/notes/assets/js/page-事件监听句柄.28e7b17a.js"><link rel="prefetch" href="/notes/assets/js/page-事件绑定.8d4b3a90.js"><link rel="prefetch" href="/notes/assets/js/page-事件触发.0b7ce63c.js"><link rel="prefetch" href="/notes/assets/js/page-从JavaScript迁移.0c13b949.js"><link rel="prefetch" href="/notes/assets/js/page-从new一个Vue对象开始.775e910f.js"><link rel="prefetch" href="/notes/assets/js/page-从入口开始.fc4c25a4.js"><link rel="prefetch" href="/notes/assets/js/page-代理模式.6200c4a6.js"><link rel="prefetch" href="/notes/assets/js/page-代码分割.74e3b269.js"><link rel="prefetch" href="/notes/assets/js/page-代码分离.1ed9cd89.js"><link rel="prefetch" href="/notes/assets/js/page-传参.7d220d12.js"><link rel="prefetch" href="/notes/assets/js/page-伪元素.37ef9305.js"><link rel="prefetch" href="/notes/assets/js/page-伪类.490d0939.js"><link rel="prefetch" href="/notes/assets/js/page-作用.c6773fec.js"><link rel="prefetch" href="/notes/assets/js/page-使用Es6.856e817c.js"><link rel="prefetch" href="/notes/assets/js/page-依赖收集.a0044315.js"><link rel="prefetch" href="/notes/assets/js/page-元素选择器.3469d4cd.js"><link rel="prefetch" href="/notes/assets/js/page-入口起点(entrypoints).6c6120b8.js"><link rel="prefetch" href="/notes/assets/js/page-全局属性：用于任何HTML5元素的属性.687702d2.js"><link rel="prefetch" href="/notes/assets/js/page-关于ReactHooks.892ec339.js"><link rel="prefetch" href="/notes/assets/js/page-具体使用.c6bad69f.js"><link rel="prefetch" href="/notes/assets/js/page-写一个方法去掉字符串中的空格.ae020f1b.js"><link rel="prefetch" href="/notes/assets/js/page-减少setter属性的使用.a0d3739a.js"><link rel="prefetch" href="/notes/assets/js/page-函数.9641364b.js"><link rel="prefetch" href="/notes/assets/js/page-函数参数.0a3d00d5.js"><link rel="prefetch" href="/notes/assets/js/page-函数式编程.fed06e5f.js"><link rel="prefetch" href="/notes/assets/js/page-创建event对象.77720cd5.js"><link rel="prefetch" href="/notes/assets/js/page-创建数组.a99f6b4c.js"><link rel="prefetch" href="/notes/assets/js/page-动态导入表达式.2b7b27f7.js"><link rel="prefetch" href="/notes/assets/js/page-协变与逆变.3ac511dc.js"><link rel="prefetch" href="/notes/assets/js/page-单例模式.b7a72e25.js"><link rel="prefetch" href="/notes/assets/js/page-原型模式.a6d3fa80.js"><link rel="prefetch" href="/notes/assets/js/page-原理图.9c711846.js"><link rel="prefetch" href="/notes/assets/js/page-发射器.bc601c0e.js"><link rel="prefetch" href="/notes/assets/js/page-可能不需要使用派生state.a0244b3f.js"><link rel="prefetch" href="/notes/assets/js/page-可视化拖拽组件库原理分析.1ab62cb4.js"><link rel="prefetch" href="/notes/assets/js/page-可调用的.bb22b45b.js"><link rel="prefetch" href="/notes/assets/js/page-合并配置.82af0658.js"><link rel="prefetch" href="/notes/assets/js/page-名义化类型.70ad4eb5.js"><link rel="prefetch" href="/notes/assets/js/page-后代选择器.0b953d1b.js"><link rel="prefetch" href="/notes/assets/js/page-命令模式.97f3293f.js"><link rel="prefetch" href="/notes/assets/js/page-命令行的行为.cdb32af7.js"><link rel="prefetch" href="/notes/assets/js/page-命名空间.43d378ff.js"><link rel="prefetch" href="/notes/assets/js/page-响应式对象.c0634477.js"><link rel="prefetch" href="/notes/assets/js/page-块格式化上下文.4560906d.js"><link rel="prefetch" href="/notes/assets/js/page-基于字符串的枚举.4d00ec41.js"><link rel="prefetch" href="/notes/assets/js/page-基本概念.d6006a49.js"><link rel="prefetch" href="/notes/assets/js/page-基础分类.2bed1c83.js"><link rel="prefetch" href="/notes/assets/js/page-声明空间.90ecbc00.js"><link rel="prefetch" href="/notes/assets/js/page-外观模式.413616bd.js"><link rel="prefetch" href="/notes/assets/js/page-外边距重叠.faf6842d.js"><link rel="prefetch" href="/notes/assets/js/page-大文件上传和断点续传.87883be1.js"><link rel="prefetch" href="/notes/assets/js/page-如何关闭表单自动填充.72bd6633.js"><link rel="prefetch" href="/notes/assets/js/page-子选择器.6af40eea.js"><link rel="prefetch" href="/notes/assets/js/page-字面量类型.0cda12b3.js"><link rel="prefetch" href="/notes/assets/js/page-实现一个web代码模板快速生成CLI工具.ade2703a.js"><link rel="prefetch" href="/notes/assets/js/page-对象字面量的惰性初始化.98702918.js"><link rel="prefetch" href="/notes/assets/js/page-层叠上下文.797dbb29.js"><link rel="prefetch" href="/notes/assets/js/page-展开语法.62f028af.js"><link rel="prefetch" href="/notes/assets/js/page-展示长列表.60b7b5fa.js"><link rel="prefetch" href="/notes/assets/js/page-属性选择器.51b54f33.js"><link rel="prefetch" href="/notes/assets/js/page-工具类.b573ba86.js"><link rel="prefetch" href="/notes/assets/js/page-工厂模式.2a6fa416.js"><link rel="prefetch" href="/notes/assets/js/page-布局和包含块.3013da41.js"><link rel="prefetch" href="/notes/assets/js/page-常用块级元素：.7f3d518d.js"><link rel="prefetch" href="/notes/assets/js/page-常见的Error.359ed3ab.js"><link rel="prefetch" href="/notes/assets/js/page-并发模型与事件循环.63bef303.js"><link rel="prefetch" href="/notes/assets/js/page-建造者模式.41f569bd.js"><link rel="prefetch" href="/notes/assets/js/page-开始.1d0627ae.js"><link rel="prefetch" href="/notes/assets/js/page-异常处理.acf05207.js"><link rel="prefetch" href="/notes/assets/js/page-异步组件.ec78942e.js"><link rel="prefetch" href="/notes/assets/js/page-引入.5f5697b3.js"><link rel="prefetch" href="/notes/assets/js/page-引用.ff2272d6.js"><link rel="prefetch" href="/notes/assets/js/page-引用官网.748b471d.js"><link rel="prefetch" href="/notes/assets/js/page-总结.b70592d6.js"><link rel="prefetch" href="/notes/assets/js/page-惰性初始模式.6a13cac4.js"><link rel="prefetch" href="/notes/assets/js/page-扩展.f5236fd2.js"><link rel="prefetch" href="/notes/assets/js/page-扫描器.4f02cba2.js"><link rel="prefetch" href="/notes/assets/js/page-抽象DOM树.3d6b58d6.js"><link rel="prefetch" href="/notes/assets/js/page-抽象语法树.763cfc3c.js"><link rel="prefetch" href="/notes/assets/js/page-接口.bb16079f.js"><link rel="prefetch" href="/notes/assets/js/page-插件.60fc9d3b.js"><link rel="prefetch" href="/notes/assets/js/page-操作DOM.2180b1ef.js"><link rel="prefetch" href="/notes/assets/js/page-支持JSX.e64bf5de.js"><link rel="prefetch" href="/notes/assets/js/page-改善antdTable组件的渲染效率.1d211448.js"><link rel="prefetch" href="/notes/assets/js/page-数据绑定原理.5433f87e.js"><link rel="prefetch" href="/notes/assets/js/page-数据驱动.7ba6e20c.js"><link rel="prefetch" href="/notes/assets/js/page-数组方法另一个角度总结.0aa725ab.js"><link rel="prefetch" href="/notes/assets/js/page-文档声明区别.2455e6c8.js"><link rel="prefetch" href="/notes/assets/js/page-新js环境要求.b1c1877d.js"><link rel="prefetch" href="/notes/assets/js/page-暴露模块模式.5ab83eb6.js"><link rel="prefetch" href="/notes/assets/js/page-服务器基础.e99ffb45.js"><link rel="prefetch" href="/notes/assets/js/page-术语表.b20d38d4.js"><link rel="prefetch" href="/notes/assets/js/page-构建切换.3df5dfce.js"><link rel="prefetch" href="/notes/assets/js/page-构造器模式.648b73f8.js"><link rel="prefetch" href="/notes/assets/js/page-枚举.9b43d160.js"><link rel="prefetch" href="/notes/assets/js/page-柯里化.6296ef05.js"><link rel="prefetch" href="/notes/assets/js/page-标准的CSS的盒子模型？低版本IE的盒子模型.85f54633.js"><link rel="prefetch" href="/notes/assets/js/page-检查器.48ebdf7f.js"><link rel="prefetch" href="/notes/assets/js/page-检测变化的注意事项.9034ec1b.js"><link rel="prefetch" href="/notes/assets/js/page-概念.3a1d4b11.js"><link rel="prefetch" href="/notes/assets/js/page-概览.699e609c.js"><link rel="prefetch" href="/notes/assets/js/page-模块.3f48c049.js"><link rel="prefetch" href="/notes/assets/js/page-模块化模式.b0ca3045.js"><link rel="prefetch" href="/notes/assets/js/page-泛型.004497f1.js"><link rel="prefetch" href="/notes/assets/js/page-泛型的实例化类型.0308ff10.js"><link rel="prefetch" href="/notes/assets/js/page-派发更新.497b51ac.js"><link rel="prefetch" href="/notes/assets/js/page-流动的类型.8fc087f8.js"><link rel="prefetch" href="/notes/assets/js/page-浏览器输入URL.87df6d81.js"><link rel="prefetch" href="/notes/assets/js/page-浏览器重绘与回流.c99a16e9.js"><link rel="prefetch" href="/notes/assets/js/page-深入TypeScript.be50df57.js"><link rel="prefetch" href="/notes/assets/js/page-深入响应式原理.d2e78aae.js"><link rel="prefetch" href="/notes/assets/js/page-深入源码剖析componentWillXXX为什么UNSAFE.7260206e.js"><link rel="prefetch" href="/notes/assets/js/page-混合.7bf2b9a5.js"><link rel="prefetch" href="/notes/assets/js/page-状态与副作用.334908d3.js"><link rel="prefetch" href="/notes/assets/js/page-状态函数.bc675cb1.js"><link rel="prefetch" href="/notes/assets/js/page-环境声明.e400018a.js"><link rel="prefetch" href="/notes/assets/js/page-生命周期.d5806ac2.js"><link rel="prefetch" href="/notes/assets/js/page-用递归算法实现，数组长度为5且元素的随机数在2-32间不重复的值.1da7b4f8.js"><link rel="prefetch" href="/notes/assets/js/page-相邻兄弟选择器.c60d8e9a.js"><link rel="prefetch" href="/notes/assets/js/page-知识体系.bae78d9d.js"><link rel="prefetch" href="/notes/assets/js/page-程序.3d24e629.js"><link rel="prefetch" href="/notes/assets/js/page-第10天简要描述下什么是回调函数并写一个例子出来.e5822656.js"><link rel="prefetch" href="/notes/assets/js/page-第11天简要描述下JS有哪些内置的对象.49622811.js"><link rel="prefetch" href="/notes/assets/js/page-第12天写一个获取当前url查询字符串中的参数的方法.88d26a2d.js"><link rel="prefetch" href="/notes/assets/js/page-第13天说说你对javascript的作用域的理解.39de109f.js"><link rel="prefetch" href="/notes/assets/js/page-第14天什么是闭包？优缺点分别是什么？.cb55f705.js"><link rel="prefetch" href="/notes/assets/js/page-第15天写一个数组去重的方法（支持多维数组）.974e8570.js"><link rel="prefetch" href="/notes/assets/js/page-第16天返回到顶部的方法有哪些？把其中一个方法出来.c935e0fa.js"><link rel="prefetch" href="/notes/assets/js/page-第17天typeof('abc')和typeof'abc'都是string,那么typeof是操作符还是函数？.30931dd7.js"><link rel="prefetch" href="/notes/assets/js/page-第18天你理解的usestrict;是什么使用它有什么优缺点？.2d59dea6.js"><link rel="prefetch" href="/notes/assets/js/page-第19天attribute和property有什么不同？.8707b9a7.js"><link rel="prefetch" href="/notes/assets/js/page-第1天用递归算法实现，数组长度为5且元素的随机数在2-32间不重复的值.aecf2c67.js"><link rel="prefetch" href="/notes/assets/js/page-第20天写一个验证身份证号的方法.3f6d5189.js"><link rel="prefetch" href="/notes/assets/js/page-第21天写一个方法验证是否为中文.8170ac3b.js"><link rel="prefetch" href="/notes/assets/js/page-第22天你对new操作符的理解是什么？手动实现一个new方法.42e0b49f.js"><link rel="prefetch" href="/notes/assets/js/page-第23天01+02、01+03和0102分别等于多少？并解释下为什么？.faf2d445.js"><link rel="prefetch" href="/notes/assets/js/page-第24天如何快速让一个数组乱序，写出来.8a0ff712.js"><link rel="prefetch" href="/notes/assets/js/page-第25天写一个判断设备来源的方法.f2f4be6a.js"><link rel="prefetch" href="/notes/assets/js/page-第26天说说bind、call、apply的区别？并手写实现一个bind的方法.7272540f.js"><link rel="prefetch" href="/notes/assets/js/page-第27天说说你对arguments的理解，它是数组吗？.47ed6e3d.js"><link rel="prefetch" href="/notes/assets/js/page-第28天解释下这段代码的意思！.216ea1b5.js"><link rel="prefetch" href="/notes/assets/js/page-第29天写一个获取数组的最大值、最小值的方法.89d527b9.js"><link rel="prefetch" href="/notes/assets/js/page-第2天写一个方法去掉字符串中的空格.777032b6.js"><link rel="prefetch" href="/notes/assets/js/page-第30天写一个方法判断字符串是否为回文字符串.507035af.js"><link rel="prefetch" href="/notes/assets/js/page-第3天去除字符串中最后一个指定的字符.3d67d008.js"><link rel="prefetch" href="/notes/assets/js/page-第4天写一个方法把下划线命名转成大驼峰命名.35e0e933.js"><link rel="prefetch" href="/notes/assets/js/page-第5天写一个把字符串大小写切换的方法.c3f48acd.js"><link rel="prefetch" href="/notes/assets/js/page-第6天写一个去除制表符和换行符的方法.a591a1d6.js"><link rel="prefetch" href="/notes/assets/js/page-第7天统计某一字符或字符串在另一个字符串中出现的次数.f802bbc0.js"><link rel="prefetch" href="/notes/assets/js/page-第8天写一个加密字符串的方法.56a2cddb.js"><link rel="prefetch" href="/notes/assets/js/page-第9天写一个判断数据类型的方法.4f439080.js"><link rel="prefetch" href="/notes/assets/js/page-第一套js综合基础面试题.4eb59061.js"><link rel="prefetch" href="/notes/assets/js/page-第一套webpack综合基础面试题.8b0335b1.js"><link rel="prefetch" href="/notes/assets/js/page-管理资源.d678a3aa.js"><link rel="prefetch" href="/notes/assets/js/page-类.eab50549.js"><link rel="prefetch" href="/notes/assets/js/page-类型保护.338c8e6c.js"><link rel="prefetch" href="/notes/assets/js/page-类型兼容性.22263afc.js"><link rel="prefetch" href="/notes/assets/js/page-类型守卫.f456ac70.js"><link rel="prefetch" href="/notes/assets/js/page-类型安全的EventEmitter.5654a723.js"><link rel="prefetch" href="/notes/assets/js/page-类型推断.accc93a3.js"><link rel="prefetch" href="/notes/assets/js/page-类型断言.d42224ed.js"><link rel="prefetch" href="/notes/assets/js/page-类型系统的行为.5e5abdc6.js"><link rel="prefetch" href="/notes/assets/js/page-类是有用的.ec44c79f.js"><link rel="prefetch" href="/notes/assets/js/page-类选择器.a9c07eb0.js"><link rel="prefetch" href="/notes/assets/js/page-索引签名.431dbb80.js"><link rel="prefetch" href="/notes/assets/js/page-组件化.4beeff63.js"><link rel="prefetch" href="/notes/assets/js/page-组件卸载前，加在DOM元素的监听事件和定时器要不要手动清除.b208cdd9.js"><link rel="prefetch" href="/notes/assets/js/page-组件更新.536e29b3.js"><link rel="prefetch" href="/notes/assets/js/page-组件注册.781ee487.js"><link rel="prefetch" href="/notes/assets/js/page-组件类.1baa1031.js"><link rel="prefetch" href="/notes/assets/js/page-组合模式.7dc22b1a.js"><link rel="prefetch" href="/notes/assets/js/page-绑定器.788f9a63.js"><link rel="prefetch" href="/notes/assets/js/page-结论.d9ab41a7.js"><link rel="prefetch" href="/notes/assets/js/page-编译.784edb1d.js"><link rel="prefetch" href="/notes/assets/js/page-编译上下文.e9d7a417.js"><link rel="prefetch" href="/notes/assets/js/page-编译入口.8a8978f9.js"><link rel="prefetch" href="/notes/assets/js/page-网站favicon图标.5ea66783.js"><link rel="prefetch" href="/notes/assets/js/page-自定义hooks.dcec6993.js"><link rel="prefetch" href="/notes/assets/js/page-获取localStorage和sessionStorage当前已存储大小.962d7eef.js"><link rel="prefetch" href="/notes/assets/js/page-虚拟DOM和DOM-diff.486733df.js"><link rel="prefetch" href="/notes/assets/js/page-表单数据.8066191a.js"><link rel="prefetch" href="/notes/assets/js/page-装饰器.bb1d3be0.js"><link rel="prefetch" href="/notes/assets/js/page-装饰模式.90658bc7.js"><link rel="prefetch" href="/notes/assets/js/page-观察者模式.2b718795.js"><link rel="prefetch" href="/notes/assets/js/page-解析器.18d0661f.js"><link rel="prefetch" href="/notes/assets/js/page-解读Errors.67791319.js"><link rel="prefetch" href="/notes/assets/js/page-计算属性VS侦听属性.063c128c.js"><link rel="prefetch" href="/notes/assets/js/page-认识Flow.6853527a.js"><link rel="prefetch" href="/notes/assets/js/page-评论.91e12c4c.js"><link rel="prefetch" href="/notes/assets/js/page-详解箭头函数和普通函数的区别以及箭头函数的注意事项、不适用场景.dae88787.js"><link rel="prefetch" href="/notes/assets/js/page-说说对SPA单页面的理解，它的优缺点分别是什么？.432a4981.js"><link rel="prefetch" href="/notes/assets/js/page-调和的过程.76f54bc6.js"><link rel="prefetch" href="/notes/assets/js/page-调度原理.ad81aa00.js"><link rel="prefetch" href="/notes/assets/js/page-谨慎使用--outFile.1fcdab71.js"><link rel="prefetch" href="/notes/assets/js/page-超链接target属性.cb6ab9ce.js"><link rel="prefetch" href="/notes/assets/js/page-路径切换.1a2633b2.js"><link rel="prefetch" href="/notes/assets/js/page-路由注册.da3c1360.js"><link rel="prefetch" href="/notes/assets/js/page-输出(output).0b9a9f66.js"><link rel="prefetch" href="/notes/assets/js/page-辨析联合类型.df4add95.js"><link rel="prefetch" href="/notes/assets/js/page-迭代协议.b98e8a10.js"><link rel="prefetch" href="/notes/assets/js/page-迭代器模式.a8145e3e.js"><link rel="prefetch" href="/notes/assets/js/page-适配器模式.a3091f4b.js"><link rel="prefetch" href="/notes/assets/js/page-选择器列表.a30b8971.js"><link rel="prefetch" href="/notes/assets/js/page-通用兄弟选择器.af365fc2.js"><link rel="prefetch" href="/notes/assets/js/page-通过标签语义化优化SEO.bbf9b38b.js"><link rel="prefetch" href="/notes/assets/js/page-通配选择器.75a6894c.js"><link rel="prefetch" href="/notes/assets/js/page-需求分析.23e8f15a.js"><link rel="prefetch" href="/notes/assets/js/page-非ReactJSX.dc209335.js"><link rel="prefetch" href="/notes/assets/js/page-项目性能优化.3612e6ad.js"><link rel="prefetch" href="/notes/assets/js/page-🗿HEAD.ae7f779a.js"><link rel="prefetch" href="/notes/assets/js/vendors~flowchart.3d1f4fae.js"><link rel="prefetch" href="/notes/assets/js/vendors~mermaid.a31cc7c6.js"><link rel="prefetch" href="/notes/assets/js/vendors~photo-swipe.f6f6a89f.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.93ff9c66.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/notes/" class="home-link router-link-active"><!----> <!----> <span class="site-name can-hide">前端 学习</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="js" class="dropdown-title"><span class="title"><!---->
        js
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/mozillajs/baseObject/symbol.html" class="nav-link"><!---->
  mozilla：基本对象
</a></li><li class="dropdown-item"><a href="/notes/jsInterview/baseInterview.html" class="nav-link"><!---->
  基础面试题
</a></li><li class="dropdown-item"><a href="/notes/js/stack/executionStack.html" class="nav-link"><!---->
  js 概念
</a></li><li class="dropdown-item"><a href="/notes/es6/interview1.html" class="nav-link"><!---->
  es6
</a></li><li class="dropdown-item"><a href="/notes/es7/interview1.html" class="nav-link"><!---->
  es7
</a></li><li class="dropdown-item"><a href="/notes/es8/interview1.html" class="nav-link"><!---->
  es8
</a></li><li class="dropdown-item"><a href="/notes/es9/interview1.html" class="nav-link"><!---->
  es9
</a></li><li class="dropdown-item"><a href="/notes/es10/interview1.html" class="nav-link"><!---->
  es10
</a></li><li class="dropdown-item"><a href="/notes/ts/jsx/support.html" class="nav-link"><!---->
  JSX
</a></li><li class="dropdown-item"><a href="/notes/ts/project/inDepthTs.html" class="nav-link"><!---->
  TypeScript 项目
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="css" class="dropdown-title"><span class="title"><!---->
        css
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/mozillaCss/reference/universalSelectors.html" class="nav-link"><!---->
  第 1 期：CSS API
</a></li><li class="dropdown-item"><a href="/notes/css/interview/baseCss.html" class="nav-link"><!---->
  零散记录
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="html" class="dropdown-title"><span class="title"><!---->
        html
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/html/interview/linkImport.html" class="nav-link"><!---->
  零散记录
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="端" class="dropdown-title"><span class="title"><!---->
        端
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/browser/interview/baseInterview.html" class="nav-link"><!---->
  基础浏览器
</a></li><li class="dropdown-item"><a href="/notes/http/interview/baseInterview.html" class="nav-link"><!---->
  基础http
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title"><!---->
        工具
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/webpack/interview/webpackInterview.html" class="nav-link"><!---->
  webpack
</a></li><li class="dropdown-item"><a href="/notes/esbuild/description.html" class="nav-link"><!---->
  esbuild
</a></li><li class="dropdown-item"><a href="/notes/rollup/introduction.html" class="nav-link"><!---->
  rollup
</a></li><li class="dropdown-item"><a href="/notes/git/indx.html" class="nav-link"><!---->
  git
</a></li><li class="dropdown-item"><a href="/notes/nginx/base.html" class="nav-link"><!---->
  nginx
</a></li><li class="dropdown-item"><a href="/notes/cli/base.html" class="nav-link"><!---->
  cli
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="react" class="dropdown-title"><span class="title"><!---->
        react
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/ILoveDevelop/react/principle/base.html" class="nav-link"><!---->
  react 源码阅读 代码视角
</a></li><li class="dropdown-item"><a href="/notes/react/preparation/idea.html" class="nav-link"><!---->
  react 源码阅读 思想视角
</a></li><li class="dropdown-item"><a href="/notes/react-illustration-series/main/macro-structure.html" class="nav-link"><!---->
  图解React源码
</a></li><li class="dropdown-item"><a href="/notes/umi/interview/pluginDva.html" class="nav-link"><!---->
  umi
</a></li><li class="dropdown-item"><a href="/notes/reactInterview/interview1.html" class="nav-link"><!---->
  整理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title"><!---->
        vue
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/vue/prepare/flow.html" class="nav-link"><!---->
  第 1 期：源码解读-准备工作
</a></li><li class="dropdown-item"><a href="/notes/vue/data-driven/_index.html" class="nav-link"><!---->
  第2期：源码解读-数据驱动
</a></li><li class="dropdown-item"><a href="/notes/vue/components/create-component.html" class="nav-link"><!---->
  第3期：源码解读-组件化
</a></li><li class="dropdown-item"><a href="/notes/vue/reactive/reactive-object.html" class="nav-link"><!---->
  第4期：源码解读-深入响应式原理
</a></li><li class="dropdown-item"><a href="/notes/vue/compile/entrance.html" class="nav-link"><!---->
  第5期：源码解读-编译
</a></li><li class="dropdown-item"><a href="/notes/vue/extend/event.html" class="nav-link"><!---->
  第6期：源码解读-扩展
</a></li><li class="dropdown-item"><a href="/notes/vue/vue-router/install.html" class="nav-link"><!---->
  第7期：源码解读-VueRouter
</a></li><li class="dropdown-item"><a href="/notes/vue/vuex/idex.html" class="nav-link"><!---->
  第8期：源码解读-Vuex
</a></li><li class="dropdown-item"><a href="/notes/vue/interview/baseInterview.html" class="nav-link"><!---->
  第9期：基础面试题
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="性能优化" class="dropdown-title"><span class="title"><!---->
        性能优化
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/performance/vue/vue2Base.html" class="nav-link"><!---->
  vue-性能优化
</a></li><li class="dropdown-item"><a href="/notes/performance/react/reactBase.html" class="nav-link"><!---->
  react-性能优化
</a></li><li class="dropdown-item"><a href="/notes/performance/base/drag1.html" class="nav-link"><!---->
  组件设计
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法&amp;设计" class="dropdown-title"><span class="title"><!---->
        算法&amp;设计
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/algorithm/interview/baseInterview.html" class="nav-link"><!---->
  第 1 期：基础面试题
</a></li><li class="dropdown-item"><a href="/notes/design/overview.html" class="nav-link"><!---->
  设计模式
</a></li></ul></div></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="js" class="dropdown-title"><span class="title"><!---->
      js
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/mozillajs/baseObject/symbol.html" class="nav-link"><!---->
  mozilla：基本对象
</a></li><li class="dropdown-item"><!----> <a href="/notes/jsInterview/baseInterview.html" class="nav-link"><!---->
  基础面试题
</a></li><li class="dropdown-item"><!----> <a href="/notes/js/stack/executionStack.html" class="nav-link"><!---->
  js 概念
</a></li><li class="dropdown-item"><!----> <a href="/notes/es6/interview1.html" class="nav-link"><!---->
  es6
</a></li><li class="dropdown-item"><!----> <a href="/notes/es7/interview1.html" class="nav-link"><!---->
  es7
</a></li><li class="dropdown-item"><!----> <a href="/notes/es8/interview1.html" class="nav-link"><!---->
  es8
</a></li><li class="dropdown-item"><!----> <a href="/notes/es9/interview1.html" class="nav-link"><!---->
  es9
</a></li><li class="dropdown-item"><!----> <a href="/notes/es10/interview1.html" class="nav-link"><!---->
  es10
</a></li><li class="dropdown-item"><!----> <a href="/notes/ts/jsx/support.html" class="nav-link"><!---->
  JSX
</a></li><li class="dropdown-item"><!----> <a href="/notes/ts/project/inDepthTs.html" class="nav-link"><!---->
  TypeScript 项目
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="css" class="dropdown-title"><span class="title"><!---->
      css
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/mozillaCss/reference/universalSelectors.html" class="nav-link"><!---->
  第 1 期：CSS API
</a></li><li class="dropdown-item"><!----> <a href="/notes/css/interview/baseCss.html" class="nav-link"><!---->
  零散记录
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="html" class="dropdown-title"><span class="title"><!---->
      html
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/html/interview/linkImport.html" class="nav-link"><!---->
  零散记录
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="端" class="dropdown-title"><span class="title"><!---->
      端
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/browser/interview/baseInterview.html" class="nav-link"><!---->
  基础浏览器
</a></li><li class="dropdown-item"><!----> <a href="/notes/http/interview/baseInterview.html" class="nav-link"><!---->
  基础http
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title"><!---->
      工具
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/webpack/interview/webpackInterview.html" class="nav-link"><!---->
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/notes/esbuild/description.html" class="nav-link"><!---->
  esbuild
</a></li><li class="dropdown-item"><!----> <a href="/notes/rollup/introduction.html" class="nav-link"><!---->
  rollup
</a></li><li class="dropdown-item"><!----> <a href="/notes/git/indx.html" class="nav-link"><!---->
  git
</a></li><li class="dropdown-item"><!----> <a href="/notes/nginx/base.html" class="nav-link"><!---->
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/notes/cli/base.html" class="nav-link"><!---->
  cli
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="react" class="dropdown-title"><span class="title"><!---->
      react
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/ILoveDevelop/react/principle/base.html" class="nav-link"><!---->
  react 源码阅读 代码视角
</a></li><li class="dropdown-item"><!----> <a href="/notes/react/preparation/idea.html" class="nav-link"><!---->
  react 源码阅读 思想视角
</a></li><li class="dropdown-item"><!----> <a href="/notes/react-illustration-series/main/macro-structure.html" class="nav-link"><!---->
  图解React源码
</a></li><li class="dropdown-item"><!----> <a href="/notes/umi/interview/pluginDva.html" class="nav-link"><!---->
  umi
</a></li><li class="dropdown-item"><!----> <a href="/notes/reactInterview/interview1.html" class="nav-link"><!---->
  整理
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title"><!---->
      vue
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/vue/prepare/flow.html" class="nav-link"><!---->
  第 1 期：源码解读-准备工作
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/data-driven/_index.html" class="nav-link"><!---->
  第2期：源码解读-数据驱动
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/components/create-component.html" class="nav-link"><!---->
  第3期：源码解读-组件化
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/reactive/reactive-object.html" class="nav-link"><!---->
  第4期：源码解读-深入响应式原理
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/compile/entrance.html" class="nav-link"><!---->
  第5期：源码解读-编译
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/extend/event.html" class="nav-link"><!---->
  第6期：源码解读-扩展
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/vue-router/install.html" class="nav-link"><!---->
  第7期：源码解读-VueRouter
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/vuex/idex.html" class="nav-link"><!---->
  第8期：源码解读-Vuex
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/interview/baseInterview.html" class="nav-link"><!---->
  第9期：基础面试题
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="性能优化" class="dropdown-title"><span class="title"><!---->
      性能优化
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/performance/vue/vue2Base.html" class="nav-link"><!---->
  vue-性能优化
</a></li><li class="dropdown-item"><!----> <a href="/notes/performance/react/reactBase.html" class="nav-link"><!---->
  react-性能优化
</a></li><li class="dropdown-item"><!----> <a href="/notes/performance/base/drag1.html" class="nav-link"><!---->
  组件设计
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="算法&amp;设计" class="dropdown-title"><span class="title"><!---->
      算法&amp;设计
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/algorithm/interview/baseInterview.html" class="nav-link"><!---->
  第 1 期：基础面试题
</a></li><li class="dropdown-item"><!----> <a href="/notes/design/overview.html" class="nav-link"><!---->
  设计模式
</a></li></ul></div></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable open"><!----> <span class="title">第 1 期：基础面试题</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/jsInterview/44Questions/" class="sidebar-link">44个 Javascript 变态题解析</a></li><li><a href="/notes/jsInterview/jsHandwriting/" aria-current="page" class="active sidebar-link">js 高频手写题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_1-实现instanceof的3种方式" class="sidebar-link">1. 实现instanceOf的3种方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#递归实现-方式1" class="sidebar-link heading3">递归实现(方式1)</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#遍历实现-方式2" class="sidebar-link heading3">遍历实现(方式2)</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#遍历实现-方式3" class="sidebar-link heading3">遍历实现(方式3)</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_2-实现json-stringify-超详细" class="sidebar-link">2. 实现JSON.stringify(超详细)</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_3-实现一个promise" class="sidebar-link">3. 实现一个Promise</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_4-实现多维数组扁平化的3种方式" class="sidebar-link">4. 实现多维数组扁平化的3种方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#递归实现-方式1-2" class="sidebar-link heading3">递归实现(方式1)</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#遍历实现-方式2-2" class="sidebar-link heading3">遍历实现(方式2)</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#原生flat-方式3" class="sidebar-link heading3">原生flat(方式3)</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_5-实现深拷贝" class="sidebar-link">5. 实现深拷贝</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_6-实现new操作符" class="sidebar-link">6. 实现new操作符</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_7-实现发布订阅-eventemitter" class="sidebar-link">7. 实现发布订阅(EventEmitter)</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_8-实现有并行限制的promise" class="sidebar-link">8. 实现有并行限制的Promise</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#解析" class="sidebar-link heading3">解析</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_9-手写lru算法-蚂蚁金服曾遇到过" class="sidebar-link">9. 手写LRU算法(蚂蚁金服曾遇到过)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#数组-对象实现方式" class="sidebar-link heading3">数组&amp;&amp;对象实现方式</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#map实现方式" class="sidebar-link heading3">Map实现方式</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_10-call" class="sidebar-link">10. call</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_11-apply" class="sidebar-link">11. apply</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_12-实现trim方法的两种方式" class="sidebar-link">12. 实现trim方法的两种方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#去除空格法-方式1" class="sidebar-link heading3">去除空格法(方式1)</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#字符提取法-方式2" class="sidebar-link heading3">字符提取法(方式2)</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_13-实现promise-all" class="sidebar-link">13. 实现Promise.all</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_14-实现promise-race" class="sidebar-link">14. 实现Promise.race</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_15-object-create" class="sidebar-link">15. Object.create</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_1-常规使用" class="sidebar-link heading3">1. 常规使用</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_2-创建原型为null的对象" class="sidebar-link heading3">2. 创建原型为null的对象</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_3-第二个-propertiesobject参数" class="sidebar-link heading3">3. 第二个 propertiesObject参数</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#代码实现" class="sidebar-link heading3">代码实现</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_16-快速排序" class="sidebar-link">16.快速排序</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_17-冒泡排序" class="sidebar-link">17.冒泡排序</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_18-选择排序" class="sidebar-link">18. 选择排序</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_19-插入排序" class="sidebar-link">19. 插入排序</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_20-settimeout模拟setinterval" class="sidebar-link">20. setTimeout模拟setInterval</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_21-setinterval模拟settimeout" class="sidebar-link">21. setInterval模拟setTimeout</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_22-数组去重的4种方式" class="sidebar-link">22.数组去重的4种方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#利用set实现-方式1" class="sidebar-link heading3">利用Set实现(方式1)</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#indexof去重-方式2" class="sidebar-link heading3">indexOf去重(方式2)</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#indexof去重-方式3" class="sidebar-link heading3">indexOf去重(方式3)</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#array-from去重" class="sidebar-link heading3">Array.from去重</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_23-手机号3-3-4分割" class="sidebar-link">23. 手机号3-3-4分割</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_24-千分位格式化数字" class="sidebar-link">24. 千分位格式化数字</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_25-二分查找" class="sidebar-link">25. 二分查找</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_26-版本比较的两种方式" class="sidebar-link">26. 版本比较的两种方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#详细规则" class="sidebar-link heading3">详细规则</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#源码实现" class="sidebar-link heading3">源码实现</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_27-解析-url-参数" class="sidebar-link">27. 解析 url 参数</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_28-实现获取js数据类型的通用函数" class="sidebar-link">28. 实现获取js数据类型的通用函数</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_29-字符串转化为驼峰" class="sidebar-link">29. 字符串转化为驼峰</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#_30-实现reduce" class="sidebar-link">30. 实现reduce</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#代码实现-2" class="sidebar-link heading3">代码实现</a></li><li class="sidebar-sub-header"><a href="/notes/jsInterview/jsHandwriting/#测试" class="sidebar-link heading3">测试</a></li></ul></li></ul></li><li><a href="/notes/jsInterview/jsonStringify/" class="sidebar-link">JSON.stringify 悲伤的故事</a></li><li><a href="/notes/jsInterview/useEs6/" class="sidebar-link">使用Es6</a></li><li><a href="/notes/jsInterview/asyncAwait/" class="sidebar-link">async/await原理</a></li><li><a href="/notes/jsInterview/cycle/" class="sidebar-link">24个 JavaScript 循环遍历方法</a></li><li><a href="/notes/jsInterview/cycleOtherWay/" class="sidebar-link">数组方法另一个角度总结</a></li><li><a href="/notes/jsInterview/largeFileResumableUpload/" class="sidebar-link">大文件上传和断点续传</a></li><li><a href="/notes/jsInterview/baseInterview/" class="sidebar-link">第一套js综合基础面试题</a></li><li><a href="/notes/jsInterview/babelCompile/" class="sidebar-link">babel 编译原理</a></li><li><a href="/notes/jsInterview/tsBaseInterview/" class="sidebar-link">typescript 综合面试</a></li><li><a href="/notes/jsInterview/base/" class="sidebar-link">js 总结</a></li><li><a href="/notes/jsInterview/weird/" class="sidebar-link">js 奇怪的小问题</a></li><li><a href="/notes/jsInterview/hybrid/" class="sidebar-link">Hybrid</a></li><li><a href="/notes/jsInterview/baseWebpack/" class="sidebar-link">Webpack</a></li><li><a href="/notes/jsInterview/webpackLoader/" class="sidebar-link">管理资源</a></li><li><a href="/notes/jsInterview/webpackPublic/" class="sidebar-link">public 设置</a></li><li><a href="/notes/jsInterview/codeSeparation/" class="sidebar-link">代码分离</a></li><li><a href="/notes/jsInterview/performance/" class="sidebar-link">项目性能优化</a></li><li><a href="/notes/jsInterview/spa/" class="sidebar-link">说说对 SPA 单页面的理解，它的优缺点分别是什么？</a></li><li><a href="/notes/jsInterview/promise/" class="sidebar-link">Promise 面试题总结</a></li><li><a href="/notes/jsInterview/executionMechanism/" class="sidebar-link">JavaScript 执行机制</a></li><li><a href="/notes/jsInterview/interview50/interview1/" class="sidebar-link">第1天 用递归算法实现，数组长度为5且元素的随机数在2-32间不重复的值</a></li><li><a href="/notes/jsInterview/interview50/interview2/" class="sidebar-link">第2天 写一个方法去掉字符串中的空格</a></li><li><a href="/notes/jsInterview/interview50/interview3/" class="sidebar-link">第3天 去除字符串中最后一个指定的字符</a></li><li><a href="/notes/jsInterview/interview50/interview4/" class="sidebar-link">第4天 写一个方法把下划线命名转成大驼峰命名</a></li><li><a href="/notes/jsInterview/interview50/interview5/" class="sidebar-link">第5天 写一个把字符串大小写切换的方法</a></li><li><a href="/notes/jsInterview/interview50/interview6/" class="sidebar-link">第6天 写一个去除制表符和换行符的方法</a></li><li><a href="/notes/jsInterview/interview50/interview7/" class="sidebar-link">第7天 统计某一字符或字符串在另一个字符串中出现的次数</a></li><li><a href="/notes/jsInterview/interview50/interview8/" class="sidebar-link">第8天 写一个加密字符串的方法</a></li><li><a href="/notes/jsInterview/interview50/interview9/" class="sidebar-link">第9天 写一个判断数据类型的方法</a></li><li><a href="/notes/jsInterview/interview50/interview10/" class="sidebar-link">第10天 简要描述下什么是回调函数并写一个例子出来</a></li><li><a href="/notes/jsInterview/interview50/interview11/" class="sidebar-link">第11天 简要描述下JS有哪些内置的对象</a></li><li><a href="/notes/jsInterview/interview50/interview12/" class="sidebar-link">第12天 写一个获取当前url查询字符串中的参数的方法</a></li><li><a href="/notes/jsInterview/interview50/interview13/" class="sidebar-link">第13天 说说你对javascript的作用域的理解</a></li><li><a href="/notes/jsInterview/interview50/interview14/" class="sidebar-link">第14天 什么是闭包？优缺点分别是什么？</a></li><li><a href="/notes/jsInterview/interview50/interview15/" class="sidebar-link">第15天 写一个数组去重的方法（支持多维数组）</a></li><li><a href="/notes/jsInterview/interview50/interview16/" class="sidebar-link">第16天 返回到顶部的方法有哪些？把其中一个方法出来</a></li><li><a href="/notes/jsInterview/interview50/interview17/" class="sidebar-link">第17天 typeof('abc')和typeof 'abc'都是string, 那么typeof是操作符还是函数？</a></li><li><a href="/notes/jsInterview/interview50/interview18/" class="sidebar-link">第18天 你理解的&quot;use strict&quot;;是什么?使用它有什么优缺点？</a></li><li><a href="/notes/jsInterview/interview50/interview19/" class="sidebar-link">第19天 &quot;attribute&quot;和&quot;property&quot;有什么不同？</a></li><li><a href="/notes/jsInterview/interview50/interview20/" class="sidebar-link">第20天 写一个验证身份证号的方法</a></li><li><a href="/notes/jsInterview/interview50/interview21/" class="sidebar-link">第21天 写一个方法验证是否为中文</a></li><li><a href="/notes/jsInterview/interview50/interview22/" class="sidebar-link">第22天 你对new操作符的理解是什么？手动实现一个new方法</a></li><li><a href="/notes/jsInterview/interview50/interview23/" class="sidebar-link">第23天 0.1 + 0.2、0.1 + 0.3和0.1 * 0.2分别等于多少？并解释下为什么？</a></li><li><a href="/notes/jsInterview/interview50/interview24/" class="sidebar-link">第24天 如何快速让一个数组乱序，写出来</a></li><li><a href="/notes/jsInterview/interview50/interview25/" class="sidebar-link">第25天 写一个判断设备来源的方法</a></li><li><a href="/notes/jsInterview/interview50/interview26/" class="sidebar-link">第26天 说说bind、call、apply的区别？并手写实现一个bind的方法</a></li><li><a href="/notes/jsInterview/interview50/interview27/" class="sidebar-link">第27天 说说你对arguments的理解，它是数组吗？</a></li><li><a href="/notes/jsInterview/interview50/interview28/" class="sidebar-link">第28天 解释下这段代码的意思！</a></li><li><a href="/notes/jsInterview/interview50/interview29/" class="sidebar-link">第29天 写一个获取数组的最大值、最小值的方法</a></li><li><a href="/notes/jsInterview/interview50/interview30/" class="sidebar-link">第30天 写一个方法判断字符串是否为回文字符串</a></li></ul></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb disable"><!----></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">js 高频手写题</span></h1> <div class="page-info"><!----> <!----><!----><span aria-label="Writing Date📅" data-balloon-pos="down" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2021-10-21</span></span><!----><!----><span aria-label="Reading Time⌛" data-balloon-pos="down" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon timer-icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z" fill="currentColor"></path></svg> <span>About 30 min</span> <meta property="timeRequired" content="PT30M"></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_1-实现instanceof的3种方式" class="anchor-link heading2"><div>1. 实现instanceOf的3种方式</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#递归实现-方式1" class="anchor-link heading3"><div>递归实现(方式1)</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#遍历实现-方式2" class="anchor-link heading3"><div>遍历实现(方式2)</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#遍历实现-方式3" class="anchor-link heading3"><div>遍历实现(方式3)</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_2-实现json-stringify-超详细" class="anchor-link heading2"><div>2. 实现JSON.stringify(超详细)</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_3-实现一个promise" class="anchor-link heading2"><div>3. 实现一个Promise</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_4-实现多维数组扁平化的3种方式" class="anchor-link heading2"><div>4. 实现多维数组扁平化的3种方式</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#递归实现-方式1-2" class="anchor-link heading3"><div>递归实现(方式1)</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#遍历实现-方式2-2" class="anchor-link heading3"><div>遍历实现(方式2)</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#原生flat-方式3" class="anchor-link heading3"><div>原生flat(方式3)</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_5-实现深拷贝" class="anchor-link heading2"><div>5. 实现深拷贝</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_6-实现new操作符" class="anchor-link heading2"><div>6. 实现new操作符</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_7-实现发布订阅-eventemitter" class="anchor-link heading2"><div>7. 实现发布订阅(EventEmitter)</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_8-实现有并行限制的promise" class="anchor-link heading2"><div>8. 实现有并行限制的Promise</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#解析" class="anchor-link heading3"><div>解析</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_9-手写lru算法-蚂蚁金服曾遇到过" class="anchor-link heading2"><div>9. 手写LRU算法(蚂蚁金服曾遇到过)</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#数组-对象实现方式" class="anchor-link heading3"><div>数组&amp;&amp;对象实现方式</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#map实现方式" class="anchor-link heading3"><div>Map实现方式</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_10-call" class="anchor-link heading2"><div>10. call</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_11-apply" class="anchor-link heading2"><div>11. apply</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_12-实现trim方法的两种方式" class="anchor-link heading2"><div>12. 实现trim方法的两种方式</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#去除空格法-方式1" class="anchor-link heading3"><div>去除空格法(方式1)</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#字符提取法-方式2" class="anchor-link heading3"><div>字符提取法(方式2)</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_13-实现promise-all" class="anchor-link heading2"><div>13. 实现Promise.all</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_14-实现promise-race" class="anchor-link heading2"><div>14. 实现Promise.race</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_15-object-create" class="anchor-link heading2"><div>15. Object.create</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_1-常规使用" class="anchor-link heading3"><div>1. 常规使用</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_2-创建原型为null的对象" class="anchor-link heading3"><div>2. 创建原型为null的对象</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_3-第二个-propertiesobject参数" class="anchor-link heading3"><div>3. 第二个 propertiesObject参数</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#代码实现" class="anchor-link heading3"><div>代码实现</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_16-快速排序" class="anchor-link heading2"><div>16.快速排序</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_17-冒泡排序" class="anchor-link heading2"><div>17.冒泡排序</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_18-选择排序" class="anchor-link heading2"><div>18. 选择排序</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_19-插入排序" class="anchor-link heading2"><div>19. 插入排序</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_20-settimeout模拟setinterval" class="anchor-link heading2"><div>20. setTimeout模拟setInterval</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_21-setinterval模拟settimeout" class="anchor-link heading2"><div>21. setInterval模拟setTimeout</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_22-数组去重的4种方式" class="anchor-link heading2"><div>22.数组去重的4种方式</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#利用set实现-方式1" class="anchor-link heading3"><div>利用Set实现(方式1)</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#indexof去重-方式2" class="anchor-link heading3"><div>indexOf去重(方式2)</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#indexof去重-方式3" class="anchor-link heading3"><div>indexOf去重(方式3)</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#array-from去重" class="anchor-link heading3"><div>Array.from去重</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_23-手机号3-3-4分割" class="anchor-link heading2"><div>23. 手机号3-3-4分割</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_24-千分位格式化数字" class="anchor-link heading2"><div>24. 千分位格式化数字</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_25-二分查找" class="anchor-link heading2"><div>25. 二分查找</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_26-版本比较的两种方式" class="anchor-link heading2"><div>26. 版本比较的两种方式</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#详细规则" class="anchor-link heading3"><div>详细规则</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#源码实现" class="anchor-link heading3"><div>源码实现</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_27-解析-url-参数" class="anchor-link heading2"><div>27. 解析 url 参数</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_28-实现获取js数据类型的通用函数" class="anchor-link heading2"><div>28. 实现获取js数据类型的通用函数</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_29-字符串转化为驼峰" class="anchor-link heading2"><div>29. 字符串转化为驼峰</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#_30-实现reduce" class="anchor-link heading2"><div>30. 实现reduce</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#代码实现-2" class="anchor-link heading3"><div>代码实现</div></a></li><li class="anchor"><a href="/notes/jsInterview/jsHandwriting/#测试" class="anchor-link heading3"><div>测试</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="js-高频手写题"><a href="#js-高频手写题" class="header-anchor">#</a> js 高频手写题</h1> <h2 id="_1-实现instanceof的3种方式"><a href="#_1-实现instanceof的3种方式" class="header-anchor">#</a> 1. 实现instanceOf的3种方式</h2> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p><code>instanceof</code> <strong>运算符</strong>用于检测构造函数的 <code>prototype</code> 属性是否出现在某个实例对象的原型链上。<a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2Finstanceof" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>上</p></div> <p><strong>关键点</strong>: 构造函数Fn的<code>prototype</code>，实例对象的原型链。</p> <p>所以只要遍历实例对象的原型链，挨个往上查找看是否有与Fn的<code>prototype</code>相等的原型，直到最顶层<code>Object</code>还找不到，那么就返回false。</p> <h3 id="递归实现-方式1"><a href="#递归实现-方式1" class="header-anchor">#</a> 递归实现(方式1)</h3> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">/**
 * 
 * @param {*} obj 实例对象
 * @param {*} func 构造函数
 * @returns true false
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">instanceOf1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> func</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> func<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">instanceOf1</span><span class="token punctuation">(</span>proto<span class="token punctuation">,</span> func<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token keyword">let</span> <span class="token function-variable function">Fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf1</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Object<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf1</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf1</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf1</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><h3 id="遍历实现-方式2"><a href="#遍历实现-方式2" class="header-anchor">#</a> 遍历实现(方式2)</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 
 * @param {*} obj 实例对象
 * @param {*} func 构造函数
 * @returns true false
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">instanceOf2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> func</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> proto <span class="token operator">=</span> obj

  <span class="token keyword">while</span> <span class="token punctuation">(</span>proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>proto<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> func<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token keyword">let</span> <span class="token function-variable function">Fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf2</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Object<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf2</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf2</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf2</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><h3 id="遍历实现-方式3"><a href="#遍历实现-方式3" class="header-anchor">#</a> 遍历实现(方式3)</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 
 * @param {*} obj 实例对象
 * @param {*} func 构造函数
 * @returns true false
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">instanceOf3</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> func</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> proto <span class="token operator">=</span> obj
  <span class="token comment">// 因为一定会有结束的时候（最顶层Object），所以不会是死循环</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> func<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>proto<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token keyword">let</span> <span class="token function-variable function">Fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf3</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Object<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf3</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf3</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf3</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><h2 id="_2-实现json-stringify-超详细"><a href="#_2-实现json-stringify-超详细" class="header-anchor">#</a> 2. 实现JSON.stringify(超详细)</h2> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p><code>JSON.stringify()</code>  方法将一个 JavaScript 对象或值转换为 JSON 字符串，如果指定了一个 replacer 函数，则可以选择性地替换值，或者指定的 replacer 是数组，则可选择性地仅包含数组指定的属性。<a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FJSON%2Fstringify" target="_blank" rel="noopener noreferrer">MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <p><a href="/notes/jsInterview/jsonStringify.html">详解json stringify</a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">jsonstringify</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 确认一个对象是否存在循环引用</span>
  <span class="token keyword">const</span> <span class="token function-variable function">isCyclic</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 使用Set数据类型来存储已经检测过的对象</span>
  <span class="token keyword">let</span> stackSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> detected <span class="token operator">=</span> <span class="token boolean">false</span>

  <span class="token keyword">const</span> <span class="token function-variable function">detect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 不是对象类型的话，可以直接跳过</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> obj <span class="token operator">!=</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 当要检查的对象已经存在于stackSet中时，表示存在循环引用</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>stackSet<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> detected <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 将当前obj存如stackSet</span>
    stackSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 对obj下的属性进行挨个检测</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">detect</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 平级检测完成之后，将当前对象删除，防止误判</span>
    <span class="token comment">/*
      例如：对象的属性指向同一引用，如果不删除的话，会被认为是循环引用
      let tempObj = {
        name: 'demo test'
      }
      let obj4 = {
        obj1: tempObj,
        obj2: tempObj
      }
    */</span>
    stackSet<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">detect</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

  <span class="token keyword">return</span> detected
<span class="token punctuation">}</span>

  <span class="token comment">// 特性七:</span>
  <span class="token comment">// 对包含循环引用的对象（对象之间相互引用，形成无限循环）执行此方法，会抛出错误。</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isCyclic</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'Converting circular structure to JSON'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 特性九:</span>
  <span class="token comment">// 当尝试去转换 BigInt 类型的值会抛出错误</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> data <span class="token operator">===</span> <span class="token string">'bigint'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'Do not know how to serialize a BigInt'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> type <span class="token operator">=</span> <span class="token keyword">typeof</span> data
  <span class="token keyword">const</span> commonKeys1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'undefined'</span><span class="token punctuation">,</span> <span class="token string">'function'</span><span class="token punctuation">,</span> <span class="token string">'symbol'</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> <span class="token function-variable function">getType</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\[object (.*?)\]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">'$1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 非对象</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">||</span> data <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> data
    <span class="token comment">// 特性四：</span>
    <span class="token comment">// NaN 和 Infinity 格式的数值及 null 都会被当做 null。</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result <span class="token operator">=</span> <span class="token string">'null'</span>
      <span class="token comment">// 特性一：</span>
      <span class="token comment">// `undefined`、`任意的函数`以及`symbol值`被`单独转换`时，会返回 undefined</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>commonKeys1<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 直接得到undefined，并不是一个字符串'undefined'</span>
      <span class="token keyword">return</span> <span class="token keyword">undefined</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result <span class="token operator">=</span> <span class="token string">'&quot;'</span> <span class="token operator">+</span> data <span class="token operator">+</span> <span class="token string">'&quot;'</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 特性五:</span>
    <span class="token comment">// 转换值如果有 toJSON() 方法，该方法定义什么值将被序列化</span>
    <span class="token comment">// 特性六:</span>
    <span class="token comment">// Date 日期调用了 toJSON() 将其转换为了 string 字符串（同Date.toISOString()），因此会被当做字符串处理。</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> data<span class="token punctuation">.</span>toJSON <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">jsonstringify</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> result <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">it</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 特性一:</span>
        <span class="token comment">// `undefined`、`任意的函数`以及`symbol值`出现在`数组`中时会被转换成 `null`</span>
        <span class="token keyword">return</span> commonKeys1<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> it<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">'null'</span> <span class="token operator">:</span> <span class="token function">jsonstringify</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">'</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'&quot;'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 特性二：</span>
      <span class="token comment">// 布尔值、数字、字符串的包装对象在序列化过程中会自动转换成对应的原始值。</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'boolean'</span><span class="token punctuation">,</span> <span class="token string">'number'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token function">getType</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getType</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'&quot;'</span> <span class="token operator">+</span> data <span class="token operator">+</span> <span class="token string">'&quot;'</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token comment">// 特性八</span>
        <span class="token comment">// 其他类型的对象，包括 Map/Set/WeakMap/WeakSet，仅会序列化可枚举的属性</span>
        Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// 特性三:</span>
          <span class="token comment">// 所有以symbol为属性键的属性都会被完全忽略掉，即便 replacer 参数中强制指定包含了它们。</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> key <span class="token operator">!==</span> <span class="token string">'symbol'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> value <span class="token operator">=</span> data<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
            <span class="token comment">// 特性一</span>
            <span class="token comment">// `undefined`、`任意的函数`以及`symbol值`，出现在`非数组对象`的属性值中时在序列化过程中会被忽略</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>commonKeys1<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">'</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">'&quot;'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 各种测试</span>

<span class="token comment">// 1. 测试一下基本输出</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// undefined </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'demo test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'demo test'</span><span class="token punctuation">,</span>
  <span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'demo test2'</span><span class="token punctuation">,</span>
      sex<span class="token operator">:</span> <span class="token string">'boy'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// {&quot;name&quot;:&quot;demo test2&quot;,&quot;sex&quot;:&quot;boy&quot;}</span>

<span class="token comment">// 2. 和原生的JSON.stringify转换进行比较</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;demo test&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;\w&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
<span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
<span class="token keyword">let</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'demo test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span>sym<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>sym<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
<span class="token keyword">let</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'demo test'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  attr<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'coding'</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  date<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  uni<span class="token operator">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">sayHi</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  info<span class="token operator">:</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
    intro<span class="token operator">:</span> <span class="token punctuation">{</span>
      money<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
      job<span class="token operator">:</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  pakingObj<span class="token operator">:</span> <span class="token punctuation">{</span>
    boolean<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    string<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'demo test'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    number<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// {&quot;name&quot;:&quot;demo test&quot;,&quot;age&quot;:18,&quot;attr&quot;:[&quot;coding&quot;,123],&quot;date&quot;:&quot;2021-10-06T14:59:58.306Z&quot;,&quot;info&quot;:{&quot;age&quot;:16,&quot;intro&quot;:{&quot;job&quot;:null}},&quot;pakingObj&quot;:{&quot;boolean&quot;:false,&quot;string&quot;:&quot;demo test&quot;,&quot;number&quot;:1}}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// {&quot;name&quot;:&quot;demo test&quot;,&quot;age&quot;:18,&quot;attr&quot;:[&quot;coding&quot;,123],&quot;date&quot;:&quot;2021-10-06T14:59:58.306Z&quot;,&quot;info&quot;:{&quot;age&quot;:16,&quot;intro&quot;:{&quot;job&quot;:null}},&quot;pakingObj&quot;:{&quot;boolean&quot;:false,&quot;string&quot;:&quot;demo test&quot;,&quot;number&quot;:1}}</span>

<span class="token comment">// 3. 测试可遍历对象</span>
<span class="token keyword">let</span> enumerableObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>enumerableObj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> <span class="token string">'demo test'</span><span class="token punctuation">,</span>
    enumerable<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  sex<span class="token operator">:</span> <span class="token punctuation">{</span>
    value<span class="token operator">:</span> <span class="token string">'boy'</span><span class="token punctuation">,</span>
    enumerable<span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span>enumerableObj<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// {&quot;name&quot;:&quot;demo test&quot;}</span>

<span class="token comment">// 4. 测试循环引用和Bigint</span>

<span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'aa'</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'demo test'</span><span class="token punctuation">,</span> a<span class="token operator">:</span> obj1<span class="token punctuation">,</span> b<span class="token operator">:</span> obj1 <span class="token punctuation">}</span>
obj2<span class="token punctuation">.</span>obj <span class="token operator">=</span> obj2

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// TypeError: Converting circular structure to JSON</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonStringify</span><span class="token punctuation">(</span><span class="token function">BigInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// TypeError: Do not know how to serialize a BigInt</span>
</code></pre></div><h2 id="_3-实现一个promise"><a href="#_3-实现一个promise" class="header-anchor">#</a> 3. 实现一个Promise</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">MyPromise</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">exe</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 最后的值，Promise .then或者.catch接收的值</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">undefined</span>
    <span class="token comment">// 状态：三种状态 pending success failure</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">'pending'</span>
    <span class="token comment">// 成功的函数队列</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>successQueue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token comment">// 失败的函数队列</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>failureQueue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> <span class="token function-variable function">resolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token function-variable function">doResolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 将缓存的函数队列挨个执行，并且将状态和值设置好</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">'success'</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value
  
          <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>successQueue<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> cb <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>successQueue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  
            cb <span class="token operator">&amp;&amp;</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token function">setTimeout</span><span class="token punctuation">(</span>doResolve<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> <span class="token function-variable function">reject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 基本同resolve</span>
      <span class="token keyword">const</span> <span class="token function-variable function">doReject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">'failure'</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value
  
          <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>failureQueue<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> cb <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>failureQueue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  
            cb <span class="token operator">&amp;&amp;</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token function">setTimeout</span><span class="token punctuation">(</span>doReject<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">exe</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token function">then</span> <span class="token punctuation">(</span><span class="token function-variable function">success</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> value<span class="token punctuation">,</span> <span class="token function-variable function">failure</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// .then返回的是一个新的Promise</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 包装回到函数</span>
      <span class="token keyword">const</span> <span class="token function-variable function">successFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">success</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
          <span class="token comment">// 如果结果值是一个Promise，那么需要将这个Promise的值继续往下传递，否则直接resolve即可</span>
          result <span class="token keyword">instanceof</span> <span class="token class-name">MyPromise</span> <span class="token operator">?</span> result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 基本筒成功回调函数的封装</span>
      <span class="token keyword">const</span> <span class="token function-variable function">failureFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">failure</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
          
          result <span class="token keyword">instanceof</span> <span class="token class-name">MyPromise</span> <span class="token operator">?</span> result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 如果Promise的状态还未结束，则将成功和失败的函数缓存到队列里</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>successQueue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>successFn<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>failureQueue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>failureFn<span class="token punctuation">)</span>
        <span class="token comment">// 如果已经成功结束，直接执行成功回调 </span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'success'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">success</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果已经失败，直接执行失败回调</span>
        <span class="token function">failure</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 其他函数就不一一实现了</span>
  <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
<span class="token comment">// 以下举个例子，验证一下以上实现的结果</span>
<span class="token keyword">const</span> pro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>reject<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

pro
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2_1'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> newPro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2_2'</span><span class="token punctuation">)</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span>reject<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2_3'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> newPro
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2_4'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2_5'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
  
pro
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3_1'</span><span class="token punctuation">)</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3_2'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3_3'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3_4'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
<span class="token comment">// 2_1</span>
<span class="token comment">// 2_2</span>
<span class="token comment">// 2_3</span>
<span class="token comment">// 3_1</span>
<span class="token comment">// 3_4</span>
<span class="token comment">// 2_5</span>
</code></pre></div><h2 id="_4-实现多维数组扁平化的3种方式"><a href="#_4-实现多维数组扁平化的3种方式" class="header-anchor">#</a> 4. 实现多维数组扁平化的3种方式</h2> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>业务和面试中都经常会遇到，将多维数组扁平化是必备的技能</p></div> <h3 id="递归实现-方式1-2"><a href="#递归实现-方式1-2" class="header-anchor">#</a> 递归实现(方式1)</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 
 * @param {*} array 深层嵌套的数据
 * @returns array 新数组
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">flat1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> array<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result<span class="token punctuation">,</span> it</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">flat1</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token operator">:</span> it<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token number">8</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span>
<span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flat1</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3, 4, 5, 6, 7, 8]</span>
</code></pre></div><h3 id="遍历实现-方式2-2"><a href="#遍历实现-方式2-2" class="header-anchor">#</a> 遍历实现(方式2)</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 
 * @param {*} array 深层嵌套的数据
 * @returns array 新数组
 */</span>
 
<span class="token keyword">const</span> <span class="token function-variable function">flat2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token comment">// 展开一层</span>
  <span class="token keyword">const</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token operator">...</span>array <span class="token punctuation">]</span>
  
  <span class="token keyword">while</span> <span class="token punctuation">(</span>stack<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 取出最后一个元素</span>
    <span class="token keyword">const</span> val <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// 遇到是数组的情况，往stack后面推入</span>
      stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>val<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 往数组前面推入</span>
      result<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
<span class="token comment">// 测试</span>
<span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token number">8</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span>
<span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flat2</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3, 4, 5, 6, 7, 8]</span>
</code></pre></div><h3 id="原生flat-方式3"><a href="#原生flat-方式3" class="header-anchor">#</a> 原生flat(方式3)</h3> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>借助原生<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/flat" target="_blank" rel="noopener noreferrer">flat<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>函数,将需要展开的层，指定为Infinity即无限层，也就可以拍平了,算是一个思路。</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 
 * @param {*} array 深层嵌套的数据
 * @returns 新数组
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">flat3</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> array<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 测试</span>
<span class="token keyword">let</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token number">8</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span>
<span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flat3</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3, 4, 5, 6, 7, 8]</span>
</code></pre></div><h2 id="_5-实现深拷贝"><a href="#_5-实现深拷贝" class="header-anchor">#</a> 5. 实现深拷贝</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> deepClone <span class="token operator">=</span> <span class="token punctuation">(</span>target<span class="token punctuation">,</span> cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">isObject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span> obj <span class="token operator">!==</span> <span class="token keyword">null</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isObject</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 解决循环引用</span>
    <span class="token keyword">const</span> cacheTarget <span class="token operator">=</span> cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
    <span class="token comment">// 已经存在直接返回，无需再次解析</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cacheTarget<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> cacheTarget
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> cloneTarget <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> cloneTarget<span class="token punctuation">)</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> value <span class="token operator">=</span> target<span class="token punctuation">[</span> key <span class="token punctuation">]</span> 
        cloneTarget<span class="token punctuation">[</span> key <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">isObject</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> cache<span class="token punctuation">)</span> <span class="token operator">:</span> value
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> cloneTarget
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> target
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span>
  field1<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  field2<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  field3<span class="token operator">:</span> <span class="token punctuation">{</span>
      child<span class="token operator">:</span> <span class="token string">'child'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  field4<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  f<span class="token operator">:</span> <span class="token punctuation">{</span> f<span class="token operator">:</span> <span class="token punctuation">{</span> f<span class="token operator">:</span> <span class="token punctuation">{</span> f<span class="token operator">:</span> <span class="token punctuation">{</span> f<span class="token operator">:</span> <span class="token punctuation">{</span> f<span class="token operator">:</span> <span class="token punctuation">{</span> f<span class="token operator">:</span> <span class="token punctuation">{</span> f<span class="token operator">:</span> <span class="token punctuation">{</span> f<span class="token operator">:</span> <span class="token punctuation">{</span> f<span class="token operator">:</span> <span class="token punctuation">{</span> f<span class="token operator">:</span> <span class="token punctuation">{</span> f<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

target<span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>

<span class="token keyword">const</span> result1 <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result1<span class="token punctuation">)</span>
</code></pre></div><p><img src="/notes/assets/js/523de06ab4fe457ca804053f4265ceb9_tplv-k3u1fbpfcp-watermark.webp" alt=""></p> <h2 id="_6-实现new操作符"><a href="#_6-实现new操作符" class="header-anchor">#</a> 6. 实现new操作符</h2> <p><strong>思路</strong>： 在实现new之前，我们先了解一下new的执行过程</p> <p><code>new</code> 关键字会进行如下的操作：</p> <ol><li><p>创建一个空的简单JavaScript对象（即 <code>{}</code> ）；</p></li> <li><p>为步骤1新创建的对象添加属性 <strong>proto</strong> ，将该属性链接至构造函数的原型对象</p></li> <li><p>将步骤1新创建的对象作为<code>this</code>的上下文,执行该函数 ；</p></li> <li><p>如果该函数没有返回对象，则返回<code>this</code>。</p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">const</span> <span class="token function-variable function">_new</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token comment">// 步骤1和步骤2</span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>func<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
  <span class="token comment">// 也可以通过下面的代码进行模拟</span>
  <span class="token comment">/**
  let Ctor = function () {}

  Ctor.prototype = func.prototype
  Ctor.prototype.constructor = func

  let obj = new Ctor()
 */</span>
  <span class="token comment">// 步骤3</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
  <span class="token comment">// 步骤4</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> result <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span> result <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> result <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> result
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token keyword">let</span> <span class="token function-variable function">Person</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> sex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">showInfo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sex<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token function">_new</span><span class="token punctuation">(</span>Person<span class="token punctuation">,</span> <span class="token string">'qianlongo'</span><span class="token punctuation">,</span> <span class="token string">'sex'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span>

<span class="token comment">// Person { name: 'demo test', sex: 'sex' }</span>
</code></pre></div><h2 id="_7-实现发布订阅-eventemitter"><a href="#_7-实现发布订阅-eventemitter" class="header-anchor">#</a> 7. 实现发布订阅(EventEmitter)</h2> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>发布订阅相信大家一定不会陌生，实际工作也经常会遇到，比如Vue的<code>EventBus</code>, <code>$on</code>, <code>$emit</code>等。接下来咱们实现一把试试</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">EventEmitter</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>events <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 事件监听</span>
  <span class="token function">on</span> <span class="token punctuation">(</span><span class="token parameter">evt<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span> evt <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span> evt <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span> evt <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token keyword">this</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 发布事件</span>
  <span class="token function">emit</span> <span class="token punctuation">(</span><span class="token parameter">evt<span class="token punctuation">,</span> <span class="token operator">...</span>payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> callbacks <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span> evt <span class="token punctuation">]</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>callbacks<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      callbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">cb</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> payload<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token keyword">this</span>
  <span class="token punctuation">}</span> 
  <span class="token comment">// 删除订阅</span>
  <span class="token function">off</span> <span class="token punctuation">(</span><span class="token parameter">evt<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// 啥都没传，所有的事件都取消</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> evt <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>events
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> evt <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 删除指定事件的回调 </span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span> evt <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span> evt <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> cb <span class="token operator">!==</span> callback<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 删除整个事件</span>
        <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span> evt <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token keyword">this</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 只进行一次的事件订阅</span>
  <span class="token function">once</span> <span class="token punctuation">(</span><span class="token parameter">evt<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">proxyCallback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>payload</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> payload<span class="token punctuation">)</span>
      <span class="token comment">// 回调函数执行完成之后就删除事件订阅</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>evt<span class="token punctuation">,</span> proxyCallback<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>evt<span class="token punctuation">,</span> proxyCallback<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token keyword">const</span> e1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">e1Callback1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> sex</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> <span class="token string">'evt1---callback1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">e1Callback2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> sex</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> <span class="token string">'evt1---callback2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">e1Callback3</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> sex</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> <span class="token string">'evt1---callback3'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

e1<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'evt1'</span><span class="token punctuation">,</span> e1Callback1<span class="token punctuation">)</span>
e1<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'evt1'</span><span class="token punctuation">,</span> e1Callback2<span class="token punctuation">)</span>
<span class="token comment">// 只执行一次回调</span>
e1<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">'evt1'</span><span class="token punctuation">,</span> e1Callback3<span class="token punctuation">)</span>

e1<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'evt1'</span><span class="token punctuation">,</span> <span class="token string">'demo test'</span><span class="token punctuation">,</span> <span class="token string">'boy'</span><span class="token punctuation">)</span>
<span class="token comment">// demo test boy evt1---callback1</span>
<span class="token comment">// demo test boy evt1---callback2</span>
<span class="token comment">// demo test boy evt1---callback3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'------尝试删除e1Callback1------'</span><span class="token punctuation">)</span>
<span class="token comment">// 移除e1Callback1</span>
e1<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">'evt1'</span><span class="token punctuation">,</span> e1Callback1<span class="token punctuation">)</span>
e1<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'evt1'</span><span class="token punctuation">,</span> <span class="token string">'demo test'</span><span class="token punctuation">,</span> <span class="token string">'boy'</span><span class="token punctuation">)</span>
<span class="token comment">// demo test boy evt1---callback2</span>
</code></pre></div><h2 id="_8-实现有并行限制的promise"><a href="#_8-实现有并行限制的promise" class="header-anchor">#</a> 8. 实现有并行限制的Promise</h2> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>这是一道广大网友真实遇到题目，我们先看一下题意</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*
JS实现一个带并发限制的异步调度器Scheduler，保证同时运行的任务最多有两个。
完善下面代码的Scheduler类，使以下程序能够正常输出：
class Scheduler {
  add(promiseCreator) { ... }
  // ...
}
   
const timeout = time =&gt; {
  return new Promise(resolve =&gt; {
    setTimeout(resolve, time)
  }
})
  
const scheduler = new Scheduler()
  
const addTask = (time,order) =&gt; {
  scheduler.add(() =&gt; timeout(time).then(()=&gt;console.log(order)))
}

addTask(1000, '1')
addTask(500, '2')
addTask(300, '3')
addTask(400, '4')

// output: 2 3 1 4
整个的完整执行流程：

起始1、2两个任务开始执行
500ms时，2任务执行完毕，输出2，任务3开始执行
800ms时，3任务执行完毕，输出3，任务4开始执行
1000ms时，1任务执行完毕，输出1，此时只剩下4任务在执行
1200ms时，4任务执行完毕，输出4
*/</span>
</code></pre></div><h3 id="解析"><a href="#解析" class="header-anchor">#</a> 解析</h3> <p>看完题目之后，大概会这几个问题存在</p> <ol><li><p>如何才能保证同时只有2个任务在处于执行中？</p></li> <li><p>当某个任务执行结束之后，下一步如何知道应该执行哪个任务？</p></li></ol> <p><strong>问题1</strong>：只需要用一个计数器来控制即可，每开始一个任务计数器+1，结束之后计数器-1，保证计数器一定&lt;=2。</p> <p><strong>问题2</strong>：按照题目要求，任务的执行是有顺序的，只是任务的结束时间是不确定的，所以下一个任务一定是按照这样的顺序来</p> <p><code>任务1 =&gt; 任务2 =&gt; 任务3 =&gt; 任务4</code></p> <p>利用数组队列的性质，将任务挨个推入队列，前面的任务执行结束之后，将队首的任务取出来执行即可。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Scheduler</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>maxCount <span class="token operator">=</span> <span class="token number">2</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>runCount <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// promiseCreator执行后返回的是一个Promise</span>
  <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">promiseCreator</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 小于等于2，直接执行</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>promiseCreator<span class="token punctuation">)</span>
    <span class="token comment">// 每次添加的时候都会尝试去执行任务</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">runQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">runQueue</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 队列中还有任务才会被执行</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>queue<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>runCount <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 执行先加入队列的函数</span>
      <span class="token keyword">const</span> promiseCreator <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// 开始执行任务 计数+1    </span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>runCount <span class="token operator">+=</span> <span class="token number">1</span>
      <span class="token comment">// 假设任务都执行成功，当然也可以做一下catch</span>
      <span class="token function">promiseCreator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 任务执行完毕，计数-1</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>runCount <span class="token operator">-=</span> <span class="token number">1</span>
        <span class="token comment">// 尝试进行下一次任务</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">runQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
   
<span class="token keyword">const</span> <span class="token function-variable function">timeout</span> <span class="token operator">=</span> <span class="token parameter">time</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> time<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
  
<span class="token keyword">const</span> scheduler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scheduler</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  
<span class="token keyword">const</span> <span class="token function-variable function">addTask</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">time<span class="token punctuation">,</span>order</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  scheduler<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">timeout</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">addTask</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span>
<span class="token function">addTask</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">)</span>
<span class="token function">addTask</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">)</span>
<span class="token function">addTask</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token string">'4'</span><span class="token punctuation">)</span>

<span class="token comment">// 2</span>
<span class="token comment">// 3</span>
<span class="token comment">// 1</span>
<span class="token comment">// 4</span>
</code></pre></div><h2 id="_9-手写lru算法-蚂蚁金服曾遇到过"><a href="#_9-手写lru算法-蚂蚁金服曾遇到过" class="header-anchor">#</a> 9. 手写LRU算法(蚂蚁金服曾遇到过)</h2> <p>大致题意</p> <p><a href="https://leetcode-cn.com/problems/lru-cache/" target="_blank" rel="noopener noreferrer">leetCode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>运用你所掌握的数据结构，设计和实现一个  LRU (最近最少使用) 缓存机制 。 实现 LRUCache 类：</p> <ol><li><p>LRUCache(int capacity) 以<code>正整数</code>作为容量 capacity 初始化 LRU 缓存</p></li> <li><p>int get(int key) <code>如果关键字 key 存在于缓存中，则返回关键字的值，否则返回 -1</code> 。</p></li> <li><p>void put(int key, int value) <code>如果关键字已经存在，则变更其数据值；如果关键字不存在，则插入该组「关键字-值」。当缓存容量达到上限时，它应该在写入新数据之前删除最久未使用的数据值</code>，从而为新的数据值留出空间。</p></li></ol> <p>题目要求的1和2相对简单，主要是条件3，<code>当缓存容量达到上限时，它应该在写入新数据之前删除最久未使用的数据值</code>。容量和条件1相呼应，关键是怎么理解<strong>最久未使用</strong>呢?</p> <ol><li><p>读和写都是在使用数据</p></li> <li><p>假设不管是读还是写，我们都把对应的<code>key</code>值放到数组的末尾，那么是不是意味着数组的头部就是最久未使用的了呢？</p></li></ol> <h3 id="数组-对象实现方式"><a href="#数组-对象实现方式" class="header-anchor">#</a> 数组&amp;&amp;对象实现方式</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">LRUCache</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">capacity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 用数组记录读和写的顺序</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>keys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token comment">// 用对象来保存key value值</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">// 容量</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>capacity <span class="token operator">=</span> capacity
<span class="token punctuation">}</span>

<span class="token class-name">LRUCache</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">get</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 如果存在</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 先删除原来的位置</span>
    <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>keys<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
    <span class="token comment">// 再移动到最后一个，以保持最新访问</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>keys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
    <span class="token comment">// 返回值</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token class-name">LRUCache</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">put</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 存在的时候先更新值</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value
    <span class="token comment">// 再更新位置到最后一个</span>
    <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>keys<span class="token punctuation">,</span> key<span class="token punctuation">)</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>keys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 不存在的时候加入</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>keys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value
    <span class="token comment">// 容量如果超过了最大值，则删除最久未使用的（也就是数组中的第一个key）</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>keys<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>capacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">removeCache</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>keys<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>keys<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 移出数组中的key</span>
<span class="token keyword">function</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> index <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 移除缓存中 key</span>
<span class="token keyword">function</span> <span class="token function">removeCache</span><span class="token punctuation">(</span><span class="token parameter">cache<span class="token punctuation">,</span> keys<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token function">remove</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> lRUCache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LRUCache</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 缓存是 {1=1}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 缓存是 {1=1, 2=2}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 返回 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 该操作会使得关键字 2 作废，缓存是 {1=1, 3=3}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 返回 -1 (未找到)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 该操作会使得关键字 1 作废，缓存是 {4=4, 3=3}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>   <span class="token comment">// 返回 -1 (未找到)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 返回 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>   <span class="token comment">// 返回 4</span>
</code></pre></div><h3 id="map实现方式"><a href="#map实现方式" class="header-anchor">#</a> Map实现方式</h3> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>第一种实现方式，我们借助了数组来存储每次key被访问（get、set）的顺序，这样实现比较麻烦一些，有没有其他方案，让我们更加便捷一些，不需要额外维护数组呢？借助<code>Map</code>设置值时可以保持顺序性，处理LRU算法将会及其方便</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @param {number} capacity
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">LRUCache</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">capacity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>capacity <span class="token operator">=</span> capacity
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/** 
 * @param {number} key
 * @return {number}
 */</span>
<span class="token class-name">LRUCache</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">get</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
    <span class="token comment">// 更新位置</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>

    <span class="token keyword">return</span> value
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/** 
 * @param {number} key 
 * @param {number} value
 * @return {void}
 */</span>
<span class="token class-name">LRUCache</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">put</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 已经存在的情况下，更新其位置到”最新“即可</span>
  <span class="token comment">// 先删除，后插入</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 插入数据前先判断，size是否符合capacity</span>
    <span class="token comment">// 已经&gt;=capacity，需要把最开始插入的数据删除掉</span>
    <span class="token comment">// keys()方法得到一个可遍历对象,执行next()拿到一个形如{ value: 'xxx', done: false }的对象</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span>size <span class="token operator">&gt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>capacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> lRUCache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LRUCache</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 缓存是 {1=1}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 缓存是 {1=1, 2=2}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 返回 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 该操作会使得关键字 2 作废，缓存是 {1=1, 3=3}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 返回 -1 (未找到)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 该操作会使得关键字 1 作废，缓存是 {4=4, 3=3}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>   <span class="token comment">// 返回 -1 (未找到)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 返回 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>   <span class="token comment">// 返回 4</span>
</code></pre></div><h2 id="_10-call"><a href="#_10-call" class="header-anchor">#</a> 10. call</h2> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call" target="_blank" rel="noopener noreferrer">mdn call<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>上是这样描述call的, <code>call</code> 方法使用一个指定的 <code>this</code> 值和单独给出的一个或多个参数来调用一个函数。 所以关键点是<code>指定的this</code>和<code>一个或者多个参数</code>,只要了解了this的基本用法，实现起来就简单多了。</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 
 * @param {*} ctx 函数执行上下文this
 * @param  {...any} args 参数列表
 * @returns 函数执行的结果
 */</span>
 
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myCall</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 简单处理未传ctx上下文，或者传的是null和undefined等场景</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ctx <span class="token operator">=</span> <span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">?</span> window <span class="token operator">:</span> global
  <span class="token punctuation">}</span>
  <span class="token comment">// 暴力处理 ctx有可能传非对象</span>
  ctx <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
  <span class="token comment">// 用Symbol生成唯一的key</span>
  <span class="token keyword">const</span> fnName <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// 这里的this，即要调用的函数</span>
  ctx<span class="token punctuation">[</span> fnName <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span>
  <span class="token comment">// 将args展开，并且调用fnName函数，此时fnName函数内部的this也就是ctx了</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> ctx<span class="token punctuation">[</span> fnName <span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
  <span class="token comment">// 用完之后，将fnName从上下文ctx中删除</span>
  <span class="token keyword">delete</span> ctx<span class="token punctuation">[</span> fnName <span class="token punctuation">]</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> sex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> sex<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

fn<span class="token punctuation">.</span><span class="token function">myCall</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'demo test'</span><span class="token punctuation">)</span>
<span class="token comment">// window demo test boy</span>
fn<span class="token punctuation">.</span><span class="token function">myCall</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'demo test'</span><span class="token punctuation">,</span> sex<span class="token operator">:</span> <span class="token string">'boy'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'demo test'</span><span class="token punctuation">)</span>
<span class="token comment">// { name: 'demo test', sex: 'boy' } demo test boy</span>
</code></pre></div><h2 id="_11-apply"><a href="#_11-apply" class="header-anchor">#</a> 11. apply</h2> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>该方法的语法和作用与 <code>call</code> 方法类似，只有一个区别，就是 <code>call</code> 方法接受的是<strong>一个参数列表</strong>，而 <code>apply</code> 方法接受的是<strong>一个包含多个参数的数组</strong>。</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 
 * @param {*} ctx 函数执行上下文this
 * @param {*} args  参数列表
 * @returns 函数执行的结果
 */</span>
<span class="token comment">// 唯一的区别在这里，不需要...args变成数组 </span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myApply</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ctx <span class="token operator">=</span> <span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">?</span> window <span class="token operator">:</span> global
  <span class="token punctuation">}</span>

  ctx <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>

  <span class="token keyword">const</span> fnName <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  ctx<span class="token punctuation">[</span> fnName <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span>
  <span class="token comment">// 将args参数数组，展开为多个参数，供函数调用</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> ctx<span class="token punctuation">[</span> fnName <span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>

  <span class="token keyword">delete</span> ctx<span class="token punctuation">[</span> fnName <span class="token punctuation">]</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> sex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> sex<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

fn<span class="token punctuation">.</span><span class="token function">myApply</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'demo test'</span><span class="token punctuation">,</span> <span class="token string">'boy'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// window demo test boy</span>
fn<span class="token punctuation">.</span><span class="token function">myApply</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'demo test'</span><span class="token punctuation">,</span> sex<span class="token operator">:</span> <span class="token string">'boy'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'demo test'</span><span class="token punctuation">,</span> <span class="token string">'boy'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// { name: 'demo test', sex: 'boy' } demo test boy</span>
</code></pre></div><h2 id="_12-实现trim方法的两种方式"><a href="#_12-实现trim方法的两种方式" class="header-anchor">#</a> 12. 实现trim方法的两种方式</h2> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p><code>trim</code> 方法会从一个字符串的两端删除空白字符。在这个上下文中的空白字符是所有的空白字符 (space, tab, no-break space 等) 以及所有行终止符字符（如 LF，CR等）</p></div> <p><strong>思路</strong>： 初看题目我们脑海中闪过的做法是把<code>空格部分删除掉，保留非空格的部分</code>，但是也可以换一种思路，也可以把<code>非空格的部分提取出来，不管空格的部分</code>。接下来我们来写一下两种trim方法的实现</p> <h3 id="去除空格法-方式1"><a href="#去除空格法-方式1" class="header-anchor">#</a> 去除空格法(方式1)</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">trim</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\s*|\s*$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token string">' demo test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// demo test </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token string">'demo test '</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// demo test </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token string">' demo test '</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// demo test </span>
</code></pre></div><h3 id="字符提取法-方式2"><a href="#字符提取法-方式2" class="header-anchor">#</a> 字符提取法(方式2)</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">trim</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\s*(.*?)\s*$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'$1'</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span> 

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token string">' demo test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// demo test </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token string">'demo test '</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// demo test </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token string">' demo test '</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// demo test </span>
</code></pre></div><h2 id="_13-实现promise-all"><a href="#_13-实现promise-all" class="header-anchor">#</a> 13. 实现Promise.all</h2> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>Promise.all() 方法接收一个promise的iterable类型（注：Array，Map，Set都属于ES6的iterable类型）的输入，并且只返回一个<code>Promise</code>实例， 那个输入的所有promise的resolve回调的结果是一个数组。这个<code>Promise</code>的resolve回调执行是在所有输入的promise的resolve回调都结束，或者输入的iterable里没有promise了的时候。它的reject回调执行是，只要任何一个输入的promise的reject回调执行或者输入不合法的promise就会立即抛出错误，并且reject的是第一个抛出的错误信息。</p></div> <p>上面是<code>MDN</code>上关于<code>Promise.all</code>的描述，咋一看有点懵逼，我们一起总结一下关键点</p> <ol><li><p><code>Promise.all</code>接收一个数组，数组里面可以是Promise实例也可以不是</p></li> <li><p><code>Promise.all</code> 等待所有都完成（或第一个失败）</p></li> <li><p><code>Promise.all</code>执行的结果也是一个Promise</p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function-variable function">myAll</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 符合条件3，返回一个Promise</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">rs<span class="token punctuation">,</span> rj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> len <span class="token operator">=</span> promises<span class="token punctuation">.</span>length

    promises<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 符合条件1，将数组里的项通过Promise.resolve进行包装</span>
      Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        count <span class="token operator">+=</span> <span class="token number">1</span>
        result<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token operator">=</span> res
        <span class="token comment">// 符合条件2 等待所有都完成</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">===</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">rs</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 符合条件2  只要一个失败就都失败</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>rj<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p1 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token number">2</span>
<span class="token keyword">let</span> p3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> p4 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'出错啦'</span><span class="token punctuation">)</span>

Promise<span class="token punctuation">.</span><span class="token function">myAll</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ 1, 2, 3 ]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


Promise<span class="token punctuation">.</span><span class="token function">myAll</span><span class="token punctuation">(</span><span class="token punctuation">[</span> p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// [ 1, 2, 3 ]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'err'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


Promise<span class="token punctuation">.</span><span class="token function">myAll</span><span class="token punctuation">(</span><span class="token punctuation">[</span> p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p4 <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'err'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span> <span class="token comment">// err 出错啦</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_14-实现promise-race"><a href="#_14-实现promise-race" class="header-anchor">#</a> 14. 实现Promise.race</h2> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p><code>Promise.race(iterable)</code> 方法返回一个 promise，一旦迭代器中的某个promise解决或拒绝，返回的 promise就会解决或拒绝。</p></div> <div class="language-js extra-class"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function-variable function">myRace</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 返回一个新的Promise</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">rs<span class="token punctuation">,</span> rj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    promises<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 包装一下promises中的项，防止非Promise .then出错</span>
      <span class="token comment">// 只要有任意一个完成了或者拒绝了，race也就结束了</span>
      Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>rs<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>rj<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> promise1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> promise2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Promise<span class="token punctuation">.</span><span class="token function">myRace</span><span class="token punctuation">(</span><span class="token punctuation">[</span>promise1<span class="token punctuation">,</span> promise2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 因为promise2更快所以打印出2</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token comment">// 2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Promise<span class="token punctuation">.</span><span class="token function">myRace</span><span class="token punctuation">(</span><span class="token punctuation">[</span>promise1<span class="token punctuation">,</span> promise2<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 3比其他两个更快</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token comment">// 3</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_15-object-create"><a href="#_15-object-create" class="header-anchor">#</a> 15. Object.create</h2> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p><code>Object.create()</code> 方法创建一个新对象，使用现有的对象来提供新创建的对象的__proto__。</p></div> <h3 id="_1-常规使用"><a href="#_1-常规使用" class="header-anchor">#</a> 1. 常规使用</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Object.create使用</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">showName</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> me <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>

me<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'demo test'</span> 
me<span class="token punctuation">.</span><span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// demo test</span>
</code></pre></div><p>可以看到<code>person</code>作为<code>me</code>实例的原型存在,原型上有<code>showName</code>方法</p> <p><img src="/notes/assets/js/1634172151785.jpg" alt=""></p> <h3 id="_2-创建原型为null的对象"><a href="#_2-创建原型为null的对象" class="header-anchor">#</a> 2. 创建原型为null的对象</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> emptyObj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>emptyObj<span class="token punctuation">)</span>
</code></pre></div><p><img src="/notes/assets/js/1634172243291.jpg" alt=""></p> <h3 id="_3-第二个-propertiesobject参数"><a href="#_3-第二个-propertiesobject参数" class="header-anchor">#</a> 3. 第二个 propertiesObject参数</h3> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>可选。需要传入一个对象，该对象的属性类型参照<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperties" target="_blank" rel="noopener noreferrer">Object.defineProperties()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的第二个参数。如果该参数被指定且不为 <code>undefined</code>，该传入对象的自有可枚举属性(即其自身定义的属性，而不是其原型链上的枚举属性)将为新创建的对象添加指定的属性值和对应的属性描述符。</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> o <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// foo会成为所创建对象的数据属性</span>
  foo<span class="token operator">:</span> <span class="token punctuation">{</span>
    writable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 可以修改</span>
    configurable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 可以配置</span>
    enumerable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 可以遍历</span>
    value<span class="token operator">:</span> <span class="token string">&quot;hello&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// bar会成为所创建对象的访问器属性</span>
  bar<span class="token operator">:</span> <span class="token punctuation">{</span>
    configurable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Setting `o.bar` to&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 无法进行修改</span>
o<span class="token punctuation">.</span>bar <span class="token operator">=</span> <span class="token string">'demo test'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>foo<span class="token punctuation">)</span> <span class="token comment">// hello</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>bar<span class="token punctuation">)</span> <span class="token comment">// 10</span>
<span class="token comment">// 遍历测试</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> o<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// foo hello</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="代码实现"><a href="#代码实现" class="header-anchor">#</a> 代码实现</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">create</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">prop<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">[</span> <span class="token string">'object'</span><span class="token punctuation">,</span> <span class="token string">'function'</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> prop<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Object prototype may only be an Object or null: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>prop<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 创建构造函数</span>
  <span class="token keyword">const</span> <span class="token function-variable function">Ctor</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">// 赋值原型</span>
  <span class="token class-name">Ctor</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> prop
  <span class="token comment">// 创建实例</span>
  <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ctor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// 支持第二个参数</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> props<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 支持空原型</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>prop <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> obj
<span class="token punctuation">}</span>

<span class="token comment">// 用前面的例子做测试</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">showName</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> me2 <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>

me2<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'demo test'</span>
me2<span class="token punctuation">.</span><span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// demo test</span>

<span class="token keyword">const</span> emptyObj2 <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>emptyObj2<span class="token punctuation">)</span>

<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// foo会成为所创建对象的数据属性</span>
  foo<span class="token operator">:</span> <span class="token punctuation">{</span>
    writable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    configurable<span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    value<span class="token operator">:</span> <span class="token string">&quot;hello&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// bar会成为所创建对象的访问器属性</span>
  bar<span class="token operator">:</span> <span class="token punctuation">{</span>
    configurable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Setting `o.bar` to&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> o2 <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> props<span class="token punctuation">)</span> <span class="token comment">// 请看下面的截图</span>
<span class="token comment">// 无法修改</span>
o2<span class="token punctuation">.</span>bar <span class="token operator">=</span> <span class="token string">'demo test'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o2<span class="token punctuation">.</span>foo<span class="token punctuation">)</span> <span class="token comment">// hello</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o2<span class="token punctuation">.</span>bar<span class="token punctuation">)</span> <span class="token comment">// 10</span>
</code></pre></div><p><img src="/notes/assets/js/1634172505328.jpg" alt=""></p> <h2 id="_16-快速排序"><a href="#_16-快速排序" class="header-anchor">#</a> 16.快速排序</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">quickSort</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> length <span class="token operator">=</span> array<span class="token punctuation">.</span>length

  <span class="token keyword">if</span> <span class="token punctuation">(</span>length <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> array
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> midIndex <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> midValue <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>midIndex<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span> <span class="token number">0</span> <span class="token punctuation">]</span>
  <span class="token keyword">let</span> leftArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">let</span> rightArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> curValue <span class="token operator">=</span> array<span class="token punctuation">[</span> index <span class="token punctuation">]</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>curValue <span class="token operator">&lt;=</span> midValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      leftArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>curValue<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      rightArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>curValue<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    index<span class="token operator">++</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token function">quickSort</span><span class="token punctuation">(</span>leftArray<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span> midValue <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">quickSort</span><span class="token punctuation">(</span>rightArray<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">34</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">quickSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [-10, 1, 1, 5, 10, 34]</span>
</code></pre></div><h2 id="_17-冒泡排序"><a href="#_17-冒泡排序" class="header-anchor">#</a> 17.冒泡排序</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 1. 从第一个元素开始，比较相邻的两个元素，前者大就交换位置
 * 2. 每次遍历结束，都能找到一个最大值
 * 3. 如果还有没排序的元素继续1
 * 
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">swap</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span> array<span class="token punctuation">[</span> b <span class="token punctuation">]</span><span class="token punctuation">,</span> array<span class="token punctuation">[</span> a <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span> array<span class="token punctuation">[</span> a <span class="token punctuation">]</span><span class="token punctuation">,</span> array<span class="token punctuation">[</span> b <span class="token punctuation">]</span> <span class="token punctuation">]</span>
<span class="token keyword">const</span> <span class="token function-variable function">bubbleSort</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> length <span class="token operator">=</span> array<span class="token punctuation">.</span>length
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>array<span class="token punctuation">[</span> j <span class="token punctuation">]</span> <span class="token operator">&gt;</span> array<span class="token punctuation">[</span> j <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">swap</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> j<span class="token punctuation">,</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> array
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">bubbleSort</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//  [-1, 2, 10, 10]</span>
</code></pre></div><h2 id="_18-选择排序"><a href="#_18-选择排序" class="header-anchor">#</a> 18. 选择排序</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 1. 取出未排序的第一个元素，遍历该元素之后的部分并进行比较。第一次就是取第一个元素
 * 2. 如果有更小的就交换位置
 */</span>

<span class="token keyword">const</span> <span class="token function-variable function">swap</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span> array<span class="token punctuation">[</span> b <span class="token punctuation">]</span><span class="token punctuation">,</span> array<span class="token punctuation">[</span> a <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span> array<span class="token punctuation">[</span> a <span class="token punctuation">]</span><span class="token punctuation">,</span> array<span class="token punctuation">[</span> b <span class="token punctuation">]</span> <span class="token punctuation">]</span>
<span class="token keyword">const</span> <span class="token function-variable function">selectSort</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> length <span class="token operator">=</span> array<span class="token punctuation">.</span>length

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> minIndex <span class="token operator">=</span> i

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>array<span class="token punctuation">[</span> j <span class="token punctuation">]</span> <span class="token operator">&lt;</span> array<span class="token punctuation">[</span> minIndex <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        minIndex <span class="token operator">=</span> j
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>minIndex <span class="token operator">!==</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">swap</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> i<span class="token punctuation">,</span> minIndex<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> array
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">selectSort</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// [-1, 2, 10, 10]</span>
</code></pre></div><h2 id="_19-插入排序"><a href="#_19-插入排序" class="header-anchor">#</a> 19. 插入排序</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 插入排序</span>
<span class="token comment">/**
 * 记住你是怎么打牌的就知道插入排序怎么实现了
 * 1. 首先有一个有序的序列，可以认为第一个元素就是已排序的序列
 * 2. 从未排序序列中取一个元素出来，往有序序列中找到合适的位置，如果该位置比元素大，则后移动, 否则继续往前找
 */</span>

<span class="token keyword">const</span> <span class="token function-variable function">insertSort</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> length <span class="token operator">=</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> j <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span>
    <span class="token keyword">const</span> curValue <span class="token operator">=</span> array<span class="token punctuation">[</span> i <span class="token punctuation">]</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span>j <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> array<span class="token punctuation">[</span> j <span class="token punctuation">]</span> <span class="token operator">&gt;</span> curValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      array<span class="token punctuation">[</span> j <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">]</span> <span class="token operator">=</span> array<span class="token punctuation">[</span> j <span class="token punctuation">]</span>
      j<span class="token operator">--</span>
    <span class="token punctuation">}</span>

    array<span class="token punctuation">[</span> j <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">]</span> <span class="token operator">=</span> curValue
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> array
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">insertSort</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [-1, 2, 10, 10]</span>
</code></pre></div><h2 id="_20-settimeout模拟setinterval"><a href="#_20-settimeout模拟setinterval" class="header-anchor">#</a> 20. setTimeout模拟setInterval</h2> <p><strong>描述</strong>： 使用<code>setTimeout</code>模拟实现<code>setInterval</code>的功能</p> <p><strong>思路</strong>： 当然这里不是完全的实现，比如<code>setInterval</code>执行之后得到的是一个数字id，这一点我们就不模拟了，关闭定时器的方法则通过返回一个函数来进行</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">simulateSetInterval</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> timeout</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token keyword">const</span> <span class="token function-variable function">interval</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// timeout时间之后会执行真正的函数func</span>
      <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// 同时再次调用interval本身，是不是有点setInterval的感觉啦</span>
      <span class="token function">interval</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> timeout<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 开始执行 </span>
  <span class="token function">interval</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// 返回用于关闭定时器的函数 </span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> cancel <span class="token operator">=</span> <span class="token function">simulateSetInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'一秒之后关闭定时器'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
</code></pre></div><p>可以看到1被打印出了3次，第1000毫秒的时候定时器被关闭，1也就没有继续打印了。</p> <p><img src="/notes/assets/js/1634172723686.jpg" alt=""></p> <h2 id="_21-setinterval模拟settimeout"><a href="#_21-setinterval模拟settimeout" class="header-anchor">#</a> 21. setInterval模拟setTimeout</h2> <p><strong>描述</strong>： 使用<code>setInterval</code>模拟实现<code>setTimeout</code>的功能</p> <p><strong>思路</strong>： <code>setTimeout</code>的特性是在指定的时间内只执行一次，我们只要在<code>setInterval</code>内部执行callback之后，把定时器关掉即可</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">simulateSetTimeout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> timeout</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span>

  timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 关闭定时器，保证只执行一次fn，也就达到了setTimeout的效果了</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
    <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> timeout<span class="token punctuation">)</span>
  <span class="token comment">// 返回用于关闭定时器的方法</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> cancel <span class="token operator">=</span> <span class="token function">simulateSetTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>

<span class="token comment">// 一秒后打印出1</span>
</code></pre></div><h2 id="_22-数组去重的4种方式"><a href="#_22-数组去重的4种方式" class="header-anchor">#</a> 22.数组去重的4种方式</h2> <h3 id="利用set实现-方式1"><a href="#利用set实现-方式1" class="header-anchor">#</a> 利用Set实现(方式1)</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">uniqueArray1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span> <span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token keyword">let</span> testArray <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">uniqueArray1</span><span class="token punctuation">(</span>testArray<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3, 4]</span>
</code></pre></div><h3 id="indexof去重-方式2"><a href="#indexof去重-方式2" class="header-anchor">#</a> indexOf去重(方式2)</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">uniqueArray2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  array<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">it<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">uniqueArray2</span><span class="token punctuation">(</span>testArray<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3, 4]</span>
</code></pre></div><h3 id="indexof去重-方式3"><a href="#indexof去重-方式3" class="header-anchor">#</a> indexOf去重(方式3)</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">uniqueArray3</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> array<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">it<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> array<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token operator">===</span> i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">uniqueArray3</span><span class="token punctuation">(</span>testArray<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3, 4]</span>
</code></pre></div><h3 id="array-from去重"><a href="#array-from去重" class="header-anchor">#</a> Array.from去重</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">uniqueArray4</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">uniqueArray4</span><span class="token punctuation">(</span>testArray<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3, 4]</span>
</code></pre></div><h2 id="_23-手机号3-3-4分割"><a href="#_23-手机号3-3-4分割" class="header-anchor">#</a> 23. 手机号3-3-4分割</h2> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>手机号按照例如<code>183-7980-2267</code>进行分割处理</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 适合纯11位手机</span>
<span class="token keyword">const</span> splitMobile <span class="token operator">=</span> <span class="token punctuation">(</span>mobile<span class="token punctuation">,</span> format <span class="token operator">=</span> <span class="token string">'-'</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>mobile<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?=(\d{4})+$)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> format<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 适合11位以内的分割</span>
<span class="token keyword">const</span> splitMobile2 <span class="token operator">=</span> <span class="token punctuation">(</span>mobile<span class="token punctuation">,</span> format <span class="token operator">=</span> <span class="token string">'-'</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>mobile<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=(\d{3}))</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> format<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=([\d\-]{8}))</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> format<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">splitMobile</span><span class="token punctuation">(</span><span class="token number">18379802267</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 183-7980-2267</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">splitMobile2</span><span class="token punctuation">(</span><span class="token number">18379876545</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 183-7987-6545</span>
</code></pre></div><h2 id="_24-千分位格式化数字"><a href="#_24-千分位格式化数字" class="header-anchor">#</a> 24. 千分位格式化数字</h2> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>将<code>123456789</code>变成<code>123,456,789</code> 且要支持小数</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 金额转千分位</span>
<span class="token keyword">const</span> <span class="token function-variable function">formatPrice</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  number <span class="token operator">=</span> <span class="token string">''</span> <span class="token operator">+</span> number

  <span class="token keyword">const</span> <span class="token punctuation">[</span> integer<span class="token punctuation">,</span> decimal <span class="token operator">=</span> <span class="token string">''</span> <span class="token punctuation">]</span> <span class="token operator">=</span> number<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> integer<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\B(?=(\d{3})+$)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>decimal <span class="token operator">?</span> <span class="token string">'.'</span> <span class="token operator">+</span> decimal <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">formatPrice</span><span class="token punctuation">(</span><span class="token number">123456789.3343</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 123,456,789.3343</span>
</code></pre></div><h2 id="_25-二分查找"><a href="#_25-二分查找" class="header-anchor">#</a> 25. 二分查找</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 704. 二分查找</span>
<span class="token comment">/**
 * 
给定一个 n 个元素有序的（升序）整型数组 nums 和一个目标值 target  ，写一个函数搜索 nums 中的 target，如果目标值存在返回下标，否则返回 -1。


示例 1:

输入: nums = [-1,0,3,5,9,12], target = 9
输出: 4
解释: 9 出现在 nums 中并且下标为 4
示例 2:

输入: nums = [-1,0,3,5,9,12], target = 2
输出: -1
解释: 2 不存在 nums 中因此返回 -1
 

提示：

你可以假设 nums 中的所有元素是不重复的。
n 将在 [1, 10000]之间。
nums 的每个元素都将在 [-9999, 9999]之间。
 */</span>


<span class="token keyword">const</span> <span class="token function-variable function">search</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">let</span> j <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>
  <span class="token keyword">let</span> midIndex <span class="token operator">=</span> <span class="token number">0</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    midIndex <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">+</span> j<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> midValue <span class="token operator">=</span> nums<span class="token punctuation">[</span> midIndex <span class="token punctuation">]</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>midValue <span class="token operator">===</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> midIndex
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>midValue <span class="token operator">&lt;</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      i <span class="token operator">=</span> midIndex <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      j <span class="token operator">=</span> midIndex <span class="token operator">-</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 4</span>
</code></pre></div><h2 id="_26-版本比较的两种方式"><a href="#_26-版本比较的两种方式" class="header-anchor">#</a> 26. 版本比较的两种方式</h2> <h3 id="详细规则"><a href="#详细规则" class="header-anchor">#</a> 详细规则</h3> <div class="language-js extra-class"><pre class="language-js"><code>给你两个版本号 version1 和 version2 ，请你比较它们。

版本号由一个或多个修订号组成，各修订号由一个 <span class="token string">'.'</span> 连接。每个修订号由 多位数字 组成，可能包含 前导零 。每个版本号至少包含一个字符。修订号从左到右编号，下标从 <span class="token number">0</span> 开始，最左边的修订号下标为 <span class="token number">0</span> ，下一个修订号下标为 <span class="token number">1</span> ，以此类推。例如，<span class="token number">2.5</span><span class="token number">.33</span> 和 <span class="token number">0.1</span> 都是有效的版本号。

比较版本号时，请按从左到右的顺序依次比较它们的修订号。比较修订号时，只需比较 忽略任何前导零后的整数值 。也就是说，修订号 <span class="token number">1</span> 和修订号 <span class="token number">001</span> 相等 。如果版本号没有指定某个下标处的修订号，则该修订号视为 <span class="token number">0</span> 。例如，版本 <span class="token number">1.0</span> 小于版本 <span class="token number">1.1</span> ，因为它们下标为 <span class="token number">0</span> 的修订号相同，而下标为 <span class="token number">1</span> 的修订号分别为 <span class="token number">0</span> 和 <span class="token number">1</span> ，<span class="token number">0</span> <span class="token operator">&lt;</span> <span class="token number">1</span> 。

返回规则如下：

如果 version1 <span class="token operator">&gt;</span> version2 返回 <span class="token number">1</span>，
如果 version1 <span class="token operator">&lt;</span> version2 返回 <span class="token operator">-</span><span class="token number">1</span>，
除此之外返回 <span class="token number">0</span>。
</code></pre></div><h3 id="源码实现"><a href="#源码实现" class="header-anchor">#</a> 源码实现</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 比较版本号</span>

<span class="token keyword">const</span> <span class="token function-variable function">compareVersion</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">version1<span class="token punctuation">,</span> version2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  version1 <span class="token operator">=</span> version1<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span>
  version2 <span class="token operator">=</span> version2<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> len1 <span class="token operator">=</span> version1<span class="token punctuation">.</span>length
  <span class="token keyword">const</span> len2 <span class="token operator">=</span> version2<span class="token punctuation">.</span>length
  <span class="token keyword">let</span> maxLen <span class="token operator">=</span> len1
  <span class="token keyword">const</span> <span class="token function-variable function">fillZero</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array<span class="token punctuation">,</span> len</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>len<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      array<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>len1 <span class="token operator">&lt;</span> len2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fillZero</span><span class="token punctuation">(</span>version1<span class="token punctuation">,</span> len2 <span class="token operator">-</span> len1<span class="token punctuation">)</span>
    maxLen <span class="token operator">=</span> len2
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>len1 <span class="token operator">&gt;</span> len2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fillZero</span><span class="token punctuation">(</span>version2<span class="token punctuation">,</span> len1 <span class="token operator">-</span> len2<span class="token punctuation">)</span>
    maxLen <span class="token operator">=</span> len1
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> maxLen<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>version1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>version2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> a <span class="token operator">===</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// i++</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token number">0</span>
<span class="token punctuation">}</span>

<span class="token comment">// 也可以不补零</span>
<span class="token keyword">const</span> <span class="token function-variable function">compareVersion</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">version1<span class="token punctuation">,</span> version2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  version1 <span class="token operator">=</span> version1<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span>
  version2 <span class="token operator">=</span> version2<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> maxLen <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>version1<span class="token punctuation">.</span>length<span class="token punctuation">,</span> version2<span class="token punctuation">.</span>length<span class="token punctuation">)</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> maxLen<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>version1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">??</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>version2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">??</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> a <span class="token operator">===</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// i++</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token number">0</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">compareVersion</span><span class="token punctuation">(</span><span class="token string">'1.0'</span><span class="token punctuation">,</span> <span class="token string">'1.0.0'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 扩展1比较多个版本号并排序</span>

<span class="token keyword">const</span> <span class="token function-variable function">compareMoreVersion</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">versions</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> versions<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">compareVersion</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">compareMoreVersion</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'1.0'</span><span class="token punctuation">,</span> <span class="token string">'3.1'</span><span class="token punctuation">,</span> <span class="token string">'1.01'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_27-解析-url-参数"><a href="#_27-解析-url-参数" class="header-anchor">#</a> 27. 解析 url 参数</h2> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>根据<code>name</code>获取<code>url</code>上的<code>search</code>参数值</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">getQueryByName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> queryNameRegex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[?&amp;]</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=([^&amp;]*)(&amp;|$)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> queryNameMatch <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>queryNameRegex<span class="token punctuation">)</span>
  <span class="token comment">// 一般都会通过decodeURIComponent解码处理</span>
  <span class="token keyword">return</span> queryNameMatch <span class="token operator">?</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>queryNameMatch<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">''</span>
<span class="token punctuation">}</span>

<span class="token comment">// https://www.baidu.com/?name=demo%20test&amp;sex=boy</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getQueryByName</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getQueryByName</span><span class="token punctuation">(</span><span class="token string">'sex'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// demo test boy</span>
</code></pre></div><h2 id="_28-实现获取js数据类型的通用函数"><a href="#_28-实现获取js数据类型的通用函数" class="header-anchor">#</a> 28. 实现获取js数据类型的通用函数</h2> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>实现一个通用函数判断数据类型</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">getType</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> r <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>

  <span class="token keyword">return</span> r<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\[object (.*?)\]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">'$1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// number</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token string">'demo test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// string</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// boolean</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'demo test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// symbol</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// array</span>
</code></pre></div><h2 id="_29-字符串转化为驼峰"><a href="#_29-字符串转化为驼峰" class="header-anchor">#</a> 29. 字符串转化为驼峰</h2> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>如下规则，将对应字符串变成驼峰写法</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1.</span> foo <span class="token parameter">Bar</span> <span class="token operator">=&gt;</span> fooBar

<span class="token number">2.</span> foo<span class="token operator">-</span>bar<span class="token operator">--</span><span class="token operator">--</span> <span class="token operator">=&gt;</span> fooBar

<span class="token number">3.</span> <span class="token parameter">foo_bar__</span> <span class="token operator">=&gt;</span> fooBar
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">camelCase</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> camelCaseRegex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[-_\s]+(.)?</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>

  <span class="token keyword">return</span> string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>camelCaseRegex<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> char</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> char <span class="token operator">?</span> char<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">''</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">camelCase</span><span class="token punctuation">(</span><span class="token string">'foo Bar'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// fooBar </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">camelCase</span><span class="token punctuation">(</span><span class="token string">'foo-bar--'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// fooBar </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">camelCase</span><span class="token punctuation">(</span><span class="token string">'foo_bar__'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// fooBar</span>
</code></pre></div><h2 id="_30-实现reduce"><a href="#_30-实现reduce" class="header-anchor">#</a> 30. 实现reduce</h2> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p><code>reduce</code> 方法对数组中的每个元素执行一个由您提供的<strong>reducer</strong>函数(升序执行)，将其结果汇总为单个返回值 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce" target="_blank" rel="noopener noreferrer">mdn<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> sum <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> prev <span class="token operator">+</span> cur<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span> <span class="token comment">// 10</span>

<span class="token comment">// 初始设置</span>
prev <span class="token operator">=</span> initialValue <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> cur <span class="token operator">=</span> <span class="token number">2</span>

<span class="token comment">// 第一次迭代</span>
prev <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span>  <span class="token number">3</span><span class="token punctuation">,</span> cur <span class="token operator">=</span> <span class="token number">3</span>

<span class="token comment">// 第二次迭代</span>
prev <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">=</span>  <span class="token number">6</span><span class="token punctuation">,</span> cur <span class="token operator">=</span> <span class="token number">4</span>

<span class="token comment">// 第三次迭代</span>
prev <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">6</span> <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">=</span>  <span class="token number">10</span><span class="token punctuation">,</span> cur <span class="token operator">=</span> <span class="token keyword">undefined</span> <span class="token punctuation">(</span>退出<span class="token punctuation">)</span>
</code></pre></div><h3 id="代码实现-2"><a href="#代码实现-2" class="header-anchor">#</a> 代码实现</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">reduce2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> initValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>callback<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is not a function</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> pre <span class="token operator">=</span> initValue
  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">const</span> length <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> pre <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pre <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    i <span class="token operator">=</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      pre <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span>pre<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    i<span class="token operator">++</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> pre
<span class="token punctuation">}</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">]</span> 

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">reduce2</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result<span class="token punctuation">,</span> it</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  result <span class="token operator">+=</span> it
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="测试"><a href="#测试" class="header-anchor">#</a> 测试</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> sum <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reduce2</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> prev <span class="token operator">+</span> cur<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span> <span class="token comment">// 10</span>
</code></pre></div></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><div class="edit-link"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon edit-icon"><path d="M117.953 696.992 64.306 959.696l265.931-49.336 450.204-452.505-212.284-213.376-450.204 452.513zm496.384-296.326L219.039 797.993l-46.108-46.34L568.233 354.33l46.104 46.335zm345.357-122.99-114.45 115.04-212.288-213.377 114.45-115.035 212.288 213.371zm0 0" fill="currentColor"></path></svg> <a href="https://github.com/sykinggg/notes/edit/main/docs/jsInterview/jsHandwriting.md" target="_blank" rel="noopener noreferrer">Edit this page</a></div> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">October 21, 2021 06:45</span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/notes/jsInterview/44Questions/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 0 1-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 0 1 9.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        44个 Javascript 变态题解析
      </a></span> <span class="next"><a href="/notes/jsInterview/jsonStringify/">
        JSON.stringify 悲伤的故事
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 0 1-18.616.092 15.368 15.368 0 0 1-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 0 1 5.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 0 1 5.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button class="pswp__button pswp__button--close"></button> <button class="pswp__button pswp__button--share"></button> <button class="pswp__button pswp__button--fs"></button> <button class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button class="pswp__button pswp__button--arrow--left"></button> <button class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><div class="my-popup" style="display:none;" data-v-5f98aac3><div class="my-popup-container" data-v-5f98aac3><div class="my-popup-exit" data-v-5f98aac3></div> <img src="" alt data-v-5f98aac3></div></div></div></div>
    <script src="/notes/assets/js/app.267b360d.js" defer></script><script src="/notes/assets/js/vendors~layout-Layout.3e5aefe6.js" defer></script><script src="/notes/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.65963550.js" defer></script><script src="/notes/assets/js/page-js高频手写题.6daf6608.js" defer></script><script src="/notes/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.8a19680c.js" defer></script>
  </body>
</html>
