<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.43">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>js 高频手写题 | </title><meta name="description" content="君子藏器于身 待时而动 天下有道则见 无道则隐">
    <link rel="modulepreload" href="/notes/assets/app.a6d8e189.js"><link rel="modulepreload" href="/notes/assets/jsHandwriting.html.19ab43fc.js"><link rel="modulepreload" href="/notes/assets/jsHandwriting.html.21d702b1.js"><link rel="prefetch" href="/notes/assets/index.html.e5e32dff.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.53187fd3.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.21947b0b.js"><link rel="prefetch" href="/notes/assets/base.html.a2c64d88.js"><link rel="prefetch" href="/notes/assets/customCli.html.585d5031.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.4d252f2a.js"><link rel="prefetch" href="/notes/assets/adapter.html.7b40b76b.js"><link rel="prefetch" href="/notes/assets/amd.html.566d1d82.js"><link rel="prefetch" href="/notes/assets/builder.html.6a706a5d.js"><link rel="prefetch" href="/notes/assets/censorJquery.html.17a7b82b.js"><link rel="prefetch" href="/notes/assets/combination.html.db0c0488.js"><link rel="prefetch" href="/notes/assets/command.html.baceea9c.js"><link rel="prefetch" href="/notes/assets/commonJS.html.22302f58.js"><link rel="prefetch" href="/notes/assets/constructor.html.97b4c4d1.js"><link rel="prefetch" href="/notes/assets/decoration.html.d9c64ddb.js"><link rel="prefetch" href="/notes/assets/esHarmony.html.429f381e.js"><link rel="prefetch" href="/notes/assets/exposed.html.8df2c0bf.js"><link rel="prefetch" href="/notes/assets/exterior.html.cbec9227.js"><link rel="prefetch" href="/notes/assets/factory.html.6c42e1aa.js"><link rel="prefetch" href="/notes/assets/flyweight.html.3a76a406.js"><link rel="prefetch" href="/notes/assets/functionalProgramming.html.5b9cc46e.js"><link rel="prefetch" href="/notes/assets/intermediary.html.2c4ff01b.js"><link rel="prefetch" href="/notes/assets/iterator.html.dffa1e2e.js"><link rel="prefetch" href="/notes/assets/lazyInitial.html.c84e3779.js"><link rel="prefetch" href="/notes/assets/mixin.html.c671c1f8.js"><link rel="prefetch" href="/notes/assets/module.html.37300240.js"><link rel="prefetch" href="/notes/assets/mvc.html.4c3c67cb.js"><link rel="prefetch" href="/notes/assets/mvp.html.4b38bc24.js"><link rel="prefetch" href="/notes/assets/mvvm.html.4177c1cd.js"><link rel="prefetch" href="/notes/assets/observer.html.5253faba.js"><link rel="prefetch" href="/notes/assets/outward.html.680d632e.js"><link rel="prefetch" href="/notes/assets/overview.html.ab4d86d5.js"><link rel="prefetch" href="/notes/assets/prototype.html.a8ec3ff6.js"><link rel="prefetch" href="/notes/assets/proxy.html.5d2156e6.js"><link rel="prefetch" href="/notes/assets/singleton.html.ddb65c82.js"><link rel="prefetch" href="/notes/assets/axios.html.cab310c7.js"><link rel="prefetch" href="/notes/assets/createUnderscore.html.7b532e1c.js"><link rel="prefetch" href="/notes/assets/jquery.html.6799bbfb.js"><link rel="prefetch" href="/notes/assets/lodash.html.4e637e73.js"><link rel="prefetch" href="/notes/assets/sentry.html.339b798b.js"><link rel="prefetch" href="/notes/assets/underscore.html.0e40e320.js"><link rel="prefetch" href="/notes/assets/vuex.html.7eb4e3db.js"><link rel="prefetch" href="/notes/assets/customCli.html.47953fbc.js"><link rel="prefetch" href="/notes/assets/description.html.4f345395.js"><link rel="prefetch" href="/notes/assets/indx.html.47c895d7.js"><link rel="prefetch" href="/notes/assets/rebase.html.760a9f22.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.aa7c3d15.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.0ff2a956.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.b8d12045.js"><link rel="prefetch" href="/notes/assets/44Questions.html.027f5824.js"><link rel="prefetch" href="/notes/assets/asyncAwait.html.91994a9f.js"><link rel="prefetch" href="/notes/assets/babelCompile.html.e3111ffa.js"><link rel="prefetch" href="/notes/assets/base.html.0f2229f3.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.65b5b2b7.js"><link rel="prefetch" href="/notes/assets/baseWebpack.html.e073981e.js"><link rel="prefetch" href="/notes/assets/codeSeparation.html.f02b6fd3.js"><link rel="prefetch" href="/notes/assets/cycle.html.1376554d.js"><link rel="prefetch" href="/notes/assets/cycleOtherWay.html.a0248552.js"><link rel="prefetch" href="/notes/assets/executionMechanism.html.fd731b3c.js"><link rel="prefetch" href="/notes/assets/hybrid.html.79623b35.js"><link rel="prefetch" href="/notes/assets/jsonStringify.html.94e2c6e2.js"><link rel="prefetch" href="/notes/assets/largeFileResumableUpload.html.a3e9f3b0.js"><link rel="prefetch" href="/notes/assets/performance.html.97817b69.js"><link rel="prefetch" href="/notes/assets/promise.html.d165dd6b.js"><link rel="prefetch" href="/notes/assets/promiseAll.html.b8b28c90.js"><link rel="prefetch" href="/notes/assets/spa.html.c2361f5e.js"><link rel="prefetch" href="/notes/assets/tsBaseInterview.html.49ff7b25.js"><link rel="prefetch" href="/notes/assets/useEs6.html.61f70826.js"><link rel="prefetch" href="/notes/assets/webAnimations.html.84cb12fa.js"><link rel="prefetch" href="/notes/assets/webpackInterview.html.b214a5a9.js"><link rel="prefetch" href="/notes/assets/webpackLoader.html.8f266e15.js"><link rel="prefetch" href="/notes/assets/webpackPublic.html.3f08805a.js"><link rel="prefetch" href="/notes/assets/weird.html.5f93ea11.js"><link rel="prefetch" href="/notes/assets/es10News.html.a6da9b89.js"><link rel="prefetch" href="/notes/assets/es6Interview1.html.1a4a01da.js"><link rel="prefetch" href="/notes/assets/es6Interview2.html.bd14b106.js"><link rel="prefetch" href="/notes/assets/es6Interview3.html.9c29fb02.js"><link rel="prefetch" href="/notes/assets/es6News.html.f832f091.js"><link rel="prefetch" href="/notes/assets/es7News.html.7b72511d.js"><link rel="prefetch" href="/notes/assets/es8News.html.dcc965c5.js"><link rel="prefetch" href="/notes/assets/es9News.html.e4817ff0.js"><link rel="prefetch" href="/notes/assets/base.html.ba26d34e.js"><link rel="prefetch" href="/notes/assets/nginxComprehensiveScene.html.9a7cb22f.js"><link rel="prefetch" href="/notes/assets/commonlyUsed.html.cedb361c.js"><link rel="prefetch" href="/notes/assets/inelegantHook.html.c6352676.js"><link rel="prefetch" href="/notes/assets/interview1.html.113c46a7.js"><link rel="prefetch" href="/notes/assets/interview2.html.52161d42.js"><link rel="prefetch" href="/notes/assets/interview3.html.a3de2bcd.js"><link rel="prefetch" href="/notes/assets/interview4.html.0c9e4aad.js"><link rel="prefetch" href="/notes/assets/base.html.1e5dcdbb.js"><link rel="prefetch" href="/notes/assets/introduction.html.4ecc771c.js"><link rel="prefetch" href="/notes/assets/base.html.5cf4607a.js"><link rel="prefetch" href="/notes/assets/summarize.html.380ae7bd.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.0525c9ef.js"><link rel="prefetch" href="/notes/assets/index.html.4d1221b0.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.40250cdb.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.52aa2360.js"><link rel="prefetch" href="/notes/assets/bigDataRender.html.7d72ffe3.js"><link rel="prefetch" href="/notes/assets/progress.html.59ec74e3.js"><link rel="prefetch" href="/notes/assets/quirksStandards.html.0e3ca1f8.js"><link rel="prefetch" href="/notes/assets/redrawReflow.html.f1043490.js"><link rel="prefetch" href="/notes/assets/storageSpace.html.dec7ccfc.js"><link rel="prefetch" href="/notes/assets/webComLink.html.6ee97897.js"><link rel="prefetch" href="/notes/assets/webUrl.html.e79ca591.js"><link rel="prefetch" href="/notes/assets/spanWidthHeight.html.97404399.js"><link rel="prefetch" href="/notes/assets/baseCss.html.9b82626d.js"><link rel="prefetch" href="/notes/assets/blockFormattingContext.html.218287b5.js"><link rel="prefetch" href="/notes/assets/containingBlock.html.10b6403f.js"><link rel="prefetch" href="/notes/assets/cssBeforeAfter.html.5072a1b5.js"><link rel="prefetch" href="/notes/assets/cssBoxModal.html.24ef947e.js"><link rel="prefetch" href="/notes/assets/cssCollapsing.html.3152bb99.js"><link rel="prefetch" href="/notes/assets/cssCompatible.html.1f585578.js"><link rel="prefetch" href="/notes/assets/cssFlexDemo.html.cde23cde.js"><link rel="prefetch" href="/notes/assets/cssFlexLayout.html.3e5d4487.js"><link rel="prefetch" href="/notes/assets/cssGridLayout.html.98329f89.js"><link rel="prefetch" href="/notes/assets/cssHack.html.3c721194.js"><link rel="prefetch" href="/notes/assets/cssInlineBlock.html.6b8bd7a4.js"><link rel="prefetch" href="/notes/assets/cssPriority.html.b15f2b6d.js"><link rel="prefetch" href="/notes/assets/cssPseudo.html.78763d64.js"><link rel="prefetch" href="/notes/assets/cssPseudoClass.html.b650c990.js"><link rel="prefetch" href="/notes/assets/cssSelector.html.3d67ef54.js"><link rel="prefetch" href="/notes/assets/cssTutorial.html.35c75777.js"><link rel="prefetch" href="/notes/assets/fieldInvalid.html.2f1813b7.js"><link rel="prefetch" href="/notes/assets/frame.html.dc5bf905.js"><link rel="prefetch" href="/notes/assets/knowledgePoints.html.ec12b979.js"><link rel="prefetch" href="/notes/assets/linkImport.html.f03be5d9.js"><link rel="prefetch" href="/notes/assets/stackingContext.html.64b28ca2.js"><link rel="prefetch" href="/notes/assets/tools.html.5d8943b8.js"><link rel="prefetch" href="/notes/assets/units.html.2dbb4d98.js"><link rel="prefetch" href="/notes/assets/transform.html.9948d2c9.js"><link rel="prefetch" href="/notes/assets/content.html.34fee20a.js"><link rel="prefetch" href="/notes/assets/plugins.html.65a204bb.js"><link rel="prefetch" href="/notes/assets/accesskey.html.8ebb8c73.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.41d48db1.js"><link rel="prefetch" href="/notes/assets/canvasSvg.html.a0e1946b.js"><link rel="prefetch" href="/notes/assets/deviceAPI.html.bcdbce3a.js"><link rel="prefetch" href="/notes/assets/globalAttr.html.e03c3886.js"><link rel="prefetch" href="/notes/assets/htmlDatalist.html.e5e807a4.js"><link rel="prefetch" href="/notes/assets/htmlElement.html.9d5fe839.js"><link rel="prefetch" href="/notes/assets/interview10.html.53161aff.js"><link rel="prefetch" href="/notes/assets/interview11.html.11b10083.js"><link rel="prefetch" href="/notes/assets/interview12.html.a71f0636.js"><link rel="prefetch" href="/notes/assets/interview13.html.b7c5fc96.js"><link rel="prefetch" href="/notes/assets/interview14.html.e41c1245.js"><link rel="prefetch" href="/notes/assets/interview15.html.a0a7f963.js"><link rel="prefetch" href="/notes/assets/interview16.html.6ce9ff60.js"><link rel="prefetch" href="/notes/assets/interview17.html.e97cb484.js"><link rel="prefetch" href="/notes/assets/interview18.html.48948d8d.js"><link rel="prefetch" href="/notes/assets/interview19.html.c828173f.js"><link rel="prefetch" href="/notes/assets/interview20.html.41185797.js"><link rel="prefetch" href="/notes/assets/interview21.html.99413275.js"><link rel="prefetch" href="/notes/assets/interview22.html.64342faa.js"><link rel="prefetch" href="/notes/assets/interview23.html.aee138f4.js"><link rel="prefetch" href="/notes/assets/interview24.html.3391e4c6.js"><link rel="prefetch" href="/notes/assets/interview25.html.7ebfe835.js"><link rel="prefetch" href="/notes/assets/interview26.html.14fe344c.js"><link rel="prefetch" href="/notes/assets/interview27.html.e21ec796.js"><link rel="prefetch" href="/notes/assets/interview28.html.c62820fb.js"><link rel="prefetch" href="/notes/assets/interview29.html.60c3f984.js"><link rel="prefetch" href="/notes/assets/interview30.html.7d32fce4.js"><link rel="prefetch" href="/notes/assets/interview31.html.a49224b7.js"><link rel="prefetch" href="/notes/assets/interview32.html.fa03f4e0.js"><link rel="prefetch" href="/notes/assets/interview33.html.fddd3c8d.js"><link rel="prefetch" href="/notes/assets/interview34.html.cff4a724.js"><link rel="prefetch" href="/notes/assets/interview35.html.3f15d85b.js"><link rel="prefetch" href="/notes/assets/interview36.html.497f5979.js"><link rel="prefetch" href="/notes/assets/interview37.html.16c76c2f.js"><link rel="prefetch" href="/notes/assets/interview38.html.25f00468.js"><link rel="prefetch" href="/notes/assets/interview39.html.ca20cec7.js"><link rel="prefetch" href="/notes/assets/interview40.html.a5d3bd6f.js"><link rel="prefetch" href="/notes/assets/interview41.html.f7a813b8.js"><link rel="prefetch" href="/notes/assets/interview42.html.2b486c1a.js"><link rel="prefetch" href="/notes/assets/interview43.html.d18323b1.js"><link rel="prefetch" href="/notes/assets/interview44.html.8e5017d9.js"><link rel="prefetch" href="/notes/assets/interview45.html.2d6cc982.js"><link rel="prefetch" href="/notes/assets/interview46.html.096655b2.js"><link rel="prefetch" href="/notes/assets/interview47.html.cb980cad.js"><link rel="prefetch" href="/notes/assets/interview48.html.c3d39795.js"><link rel="prefetch" href="/notes/assets/interview49.html.9ad94a2f.js"><link rel="prefetch" href="/notes/assets/interview5.html.95b58b57.js"><link rel="prefetch" href="/notes/assets/interview50.html.9ecec4f1.js"><link rel="prefetch" href="/notes/assets/interview51.html.c5569464.js"><link rel="prefetch" href="/notes/assets/interview52.html.5e31854b.js"><link rel="prefetch" href="/notes/assets/interview53.html.1add2fe6.js"><link rel="prefetch" href="/notes/assets/interview54.html.592e8dfc.js"><link rel="prefetch" href="/notes/assets/interview55.html.ca339486.js"><link rel="prefetch" href="/notes/assets/interview56.html.a61d790e.js"><link rel="prefetch" href="/notes/assets/interview57.html.47d24726.js"><link rel="prefetch" href="/notes/assets/interview58.html.e3e33c9a.js"><link rel="prefetch" href="/notes/assets/interview59.html.937c2e84.js"><link rel="prefetch" href="/notes/assets/interview6.html.596da4ea.js"><link rel="prefetch" href="/notes/assets/interview7.html.dce0dfeb.js"><link rel="prefetch" href="/notes/assets/interview8.html.ba7c26da.js"><link rel="prefetch" href="/notes/assets/interview9.html.9e115ec9.js"><link rel="prefetch" href="/notes/assets/linkImport.html.257bb3c7.js"><link rel="prefetch" href="/notes/assets/offlineStorage.html.0bea7837.js"><link rel="prefetch" href="/notes/assets/regular.html.fc794cdc.js"><link rel="prefetch" href="/notes/assets/shake.html.68e25748.js"><link rel="prefetch" href="/notes/assets/webWorker.html.d4fa9d39.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.3c908a85.js"><link rel="prefetch" href="/notes/assets/cors.html.50c4b8e7.js"><link rel="prefetch" href="/notes/assets/crossDomainCookie.html.2cac082a.js"><link rel="prefetch" href="/notes/assets/fetch.html.fd22db11.js"><link rel="prefetch" href="/notes/assets/nestAxios.html.3f45d909.js"><link rel="prefetch" href="/notes/assets/debounce.html.00f2d211.js"><link rel="prefetch" href="/notes/assets/lodashPrinciple.html.96190afe.js"><link rel="prefetch" href="/notes/assets/lodashThrottleDebounce.html.e89c59ea.js"><link rel="prefetch" href="/notes/assets/throttle.html.bbb71910.js"><link rel="prefetch" href="/notes/assets/throttleDebounceReact.html.be6c5a6e.js"><link rel="prefetch" href="/notes/assets/cloneIntroduction.html.eee3d490.js"><link rel="prefetch" href="/notes/assets/deepClone.html.bc3aefe1.js"><link rel="prefetch" href="/notes/assets/lodashDeepClone.html.76ca7181.js"><link rel="prefetch" href="/notes/assets/objectAssign.html.5574dfbd.js"><link rel="prefetch" href="/notes/assets/arraySourceCode.html.fe05d97d.js"><link rel="prefetch" href="/notes/assets/baseHigh.html.e427b6e5.js"><link rel="prefetch" href="/notes/assets/currying.html.70ab42c5.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.6fe1d4f0.js"><link rel="prefetch" href="/notes/assets/eventLoop.html.afbac7e8.js"><link rel="prefetch" href="/notes/assets/iife.html.ab9cc7cd.js"><link rel="prefetch" href="/notes/assets/interview1.html.409349b1.js"><link rel="prefetch" href="/notes/assets/jsCompatible.html.e28d6729.js"><link rel="prefetch" href="/notes/assets/baseProyotype.html.c46f919f.js"><link rel="prefetch" href="/notes/assets/functionObjectResource.html.41d778f2.js"><link rel="prefetch" href="/notes/assets/prototypeInherit.html.68288c3f.js"><link rel="prefetch" href="/notes/assets/closureInterview.html.cd9acf2d.js"><link rel="prefetch" href="/notes/assets/scopeChain.html.0000e285.js"><link rel="prefetch" href="/notes/assets/understandingClosures.html.5633454f.js"><link rel="prefetch" href="/notes/assets/executionStack.html.37d49b45.js"><link rel="prefetch" href="/notes/assets/memoryLeak.html.755c85dd.js"><link rel="prefetch" href="/notes/assets/memoryMechanism.html.73d84217.js"><link rel="prefetch" href="/notes/assets/memorySpace.html.7d57990c.js"><link rel="prefetch" href="/notes/assets/precompiled.html.479e2fc5.js"><link rel="prefetch" href="/notes/assets/variableObject.html.5a40d87b.js"><link rel="prefetch" href="/notes/assets/arrowFunctionThis.html.7e189b05.js"><link rel="prefetch" href="/notes/assets/bindSimulation.html.e1d0d986.js"><link rel="prefetch" href="/notes/assets/callApply.html.1bbbb223.js"><link rel="prefetch" href="/notes/assets/newSimulation.html.d70b56ee.js"><link rel="prefetch" href="/notes/assets/thisBind.html.5ace5b71.js"><link rel="prefetch" href="/notes/assets/interview1.html.c296e653.js"><link rel="prefetch" href="/notes/assets/interview10.html.b45980ab.js"><link rel="prefetch" href="/notes/assets/interview11.html.40a6458a.js"><link rel="prefetch" href="/notes/assets/interview12.html.1cef9635.js"><link rel="prefetch" href="/notes/assets/interview13.html.66099216.js"><link rel="prefetch" href="/notes/assets/interview14.html.328cee73.js"><link rel="prefetch" href="/notes/assets/interview15.html.7b03b859.js"><link rel="prefetch" href="/notes/assets/interview16.html.e5ecfeff.js"><link rel="prefetch" href="/notes/assets/interview17.html.cc3d7d72.js"><link rel="prefetch" href="/notes/assets/interview18.html.dfd8e71e.js"><link rel="prefetch" href="/notes/assets/interview19.html.5b301493.js"><link rel="prefetch" href="/notes/assets/interview2.html.b2870393.js"><link rel="prefetch" href="/notes/assets/interview20.html.17243f17.js"><link rel="prefetch" href="/notes/assets/interview21.html.7550153f.js"><link rel="prefetch" href="/notes/assets/interview22.html.4b5d2d97.js"><link rel="prefetch" href="/notes/assets/interview23.html.df48f020.js"><link rel="prefetch" href="/notes/assets/interview24.html.54fa0570.js"><link rel="prefetch" href="/notes/assets/interview25.html.80efef28.js"><link rel="prefetch" href="/notes/assets/interview26.html.021989cc.js"><link rel="prefetch" href="/notes/assets/interview27.html.f35245fb.js"><link rel="prefetch" href="/notes/assets/interview28.html.eb36de7b.js"><link rel="prefetch" href="/notes/assets/interview29.html.7f7332fd.js"><link rel="prefetch" href="/notes/assets/interview3.html.c8a16fda.js"><link rel="prefetch" href="/notes/assets/interview30.html.125f22b5.js"><link rel="prefetch" href="/notes/assets/interview4.html.6ed6c2d6.js"><link rel="prefetch" href="/notes/assets/interview5.html.8d4e4e60.js"><link rel="prefetch" href="/notes/assets/interview6.html.6e850b94.js"><link rel="prefetch" href="/notes/assets/interview7.html.29b16799.js"><link rel="prefetch" href="/notes/assets/interview8.html.2a42b4b0.js"><link rel="prefetch" href="/notes/assets/interview9.html.c6d1c06f.js"><link rel="prefetch" href="/notes/assets/adjacentSiblingCombinator.html.2217f329.js"><link rel="prefetch" href="/notes/assets/attributeSelectors.html.f5e372dc.js"><link rel="prefetch" href="/notes/assets/charset.html.8e174f4c.js"><link rel="prefetch" href="/notes/assets/childCombinator.html.34098fec.js"><link rel="prefetch" href="/notes/assets/classSelectors.html.20b91899.js"><link rel="prefetch" href="/notes/assets/descendantCombinator.html.568ab75f.js"><link rel="prefetch" href="/notes/assets/generalSiblingCombinator.html.8d1271c3.js"><link rel="prefetch" href="/notes/assets/iDSelectors.html.1de7d5df.js"><link rel="prefetch" href="/notes/assets/pseudoClasses.html.3b91f392.js"><link rel="prefetch" href="/notes/assets/pseudoElements.html.c6cae51d.js"><link rel="prefetch" href="/notes/assets/selectorList.html.1f5aae11.js"><link rel="prefetch" href="/notes/assets/typeSelectors.html.99b4add0.js"><link rel="prefetch" href="/notes/assets/universalSelectors.html.ed40adba.js"><link rel="prefetch" href="/notes/assets/IterationProtocols.html.195444c3.js"><link rel="prefetch" href="/notes/assets/arrayFlat.html.66625492.js"><link rel="prefetch" href="/notes/assets/asyncHistory.html.158b0c55.js"><link rel="prefetch" href="/notes/assets/eventLoop.html.0a0720b6.js"><link rel="prefetch" href="/notes/assets/fileReader.html.76387c51.js"><link rel="prefetch" href="/notes/assets/formData.html.abcffe23.js"><link rel="prefetch" href="/notes/assets/functionGenerator.html.7cea8daf.js"><link rel="prefetch" href="/notes/assets/generator.html.3c2b2c21.js"><link rel="prefetch" href="/notes/assets/intersectionObserver.html.c07467f1.js"><link rel="prefetch" href="/notes/assets/map.html.ba1e252c.js"><link rel="prefetch" href="/notes/assets/promise.html.7ca305f9.js"><link rel="prefetch" href="/notes/assets/set.html.16058582.js"><link rel="prefetch" href="/notes/assets/string.html.19384e82.js"><link rel="prefetch" href="/notes/assets/symbol.html.5f97c582.js"><link rel="prefetch" href="/notes/assets/xMLHttpRequest.html.f55fdc19.js"><link rel="prefetch" href="/notes/assets/spreadSyntax.html.7cf14250.js"><link rel="prefetch" href="/notes/assets/strictMode.html.f5a164c3.js"><link rel="prefetch" href="/notes/assets/cache.html.ba36d6fb.js"><link rel="prefetch" href="/notes/assets/drag1.html.9e652494.js"><link rel="prefetch" href="/notes/assets/oneLineCode.html.b0d45ea8.js"><link rel="prefetch" href="/notes/assets/oneLineCodeArray.html.85ce4d5a.js"><link rel="prefetch" href="/notes/assets/oneLineCodeDOM.html.17250460.js"><link rel="prefetch" href="/notes/assets/oneLineCodeDateTime.html.9776089a.js"><link rel="prefetch" href="/notes/assets/oneLineCodeFunction.html.5c4baa61.js"><link rel="prefetch" href="/notes/assets/oneLineCodeMath.html.a24a953a.js"><link rel="prefetch" href="/notes/assets/oneLineCodeMisc.html.425c9d74.js"><link rel="prefetch" href="/notes/assets/oneLineCodeNumber.html.ac840eea.js"><link rel="prefetch" href="/notes/assets/oneLineCodeObject.html.9e0f20ac.js"><link rel="prefetch" href="/notes/assets/oneLineCodeRandom.html.0ad03f59.js"><link rel="prefetch" href="/notes/assets/oneLineCodeString.html.6c2d2e48.js"><link rel="prefetch" href="/notes/assets/oneLineCodeValidator.html.b3228672.js"><link rel="prefetch" href="/notes/assets/typeScriptCache.html.7aa7f085.js"><link rel="prefetch" href="/notes/assets/reactBase.html.b28f1bf8.js"><link rel="prefetch" href="/notes/assets/reactTypescript.html.3b964c58.js"><link rel="prefetch" href="/notes/assets/vue2Base.html.544d19ba.js"><link rel="prefetch" href="/notes/assets/vue2Table.html.0ba44fb1.js"><link rel="prefetch" href="/notes/assets/vue2offsetTop.html.5402aec2.js"><link rel="prefetch" href="/notes/assets/componentWillXXX.html.4c864035.js"><link rel="prefetch" href="/notes/assets/disrupt.html.fc48b8af.js"><link rel="prefetch" href="/notes/assets/lane.html.63a5eecf.js"><link rel="prefetch" href="/notes/assets/prepare.html.35d7d595.js"><link rel="prefetch" href="/notes/assets/redux.html.2493be7e.js"><link rel="prefetch" href="/notes/assets/scheduler.html.23075f67.js"><link rel="prefetch" href="/notes/assets/multi.html.e92574d2.js"><link rel="prefetch" href="/notes/assets/one.html.9d952a16.js"><link rel="prefetch" href="/notes/assets/prepare.html.56067a86.js"><link rel="prefetch" href="/notes/assets/create.html.0bc3f090.js"><link rel="prefetch" href="/notes/assets/prepare.html.92ca1a1e.js"><link rel="prefetch" href="/notes/assets/structure.html.8de61853.js"><link rel="prefetch" href="/notes/assets/useeffect.html.df92a925.js"><link rel="prefetch" href="/notes/assets/usememo.html.437a6aed.js"><link rel="prefetch" href="/notes/assets/useref.html.a8c7940f.js"><link rel="prefetch" href="/notes/assets/usestate.html.8da9d799.js"><link rel="prefetch" href="/notes/assets/file.html.e88880d5.js"><link rel="prefetch" href="/notes/assets/idea.html.aa0f95e7.js"><link rel="prefetch" href="/notes/assets/jsx.html.b8e30671.js"><link rel="prefetch" href="/notes/assets/newConstructure.html.862be1d3.js"><link rel="prefetch" href="/notes/assets/oldConstructure.html.380c865e.js"><link rel="prefetch" href="/notes/assets/source.html.ca0fd7d2.js"><link rel="prefetch" href="/notes/assets/summary.html.ae62b44a.js"><link rel="prefetch" href="/notes/assets/basePrinciple.html.09481f7f.js"><link rel="prefetch" href="/notes/assets/componentApi.html.0f322ec6.js"><link rel="prefetch" href="/notes/assets/domApi.html.8d473b4b.js"><link rel="prefetch" href="/notes/assets/hoc.html.f5b2aa66.js"><link rel="prefetch" href="/notes/assets/hookApi.html.df6d2615.js"><link rel="prefetch" href="/notes/assets/hookCustom.html.502225f2.js"><link rel="prefetch" href="/notes/assets/hookPrinciple.html.26280e27.js"><link rel="prefetch" href="/notes/assets/hookUse.html.8eac1c83.js"><link rel="prefetch" href="/notes/assets/reactKeeplive.html.2f554af7.js"><link rel="prefetch" href="/notes/assets/reactRedux.html.134987ac.js"><link rel="prefetch" href="/notes/assets/reactRouter.html.e2a75ca7.js"><link rel="prefetch" href="/notes/assets/toolApi.html.ad44e65a.js"><link rel="prefetch" href="/notes/assets/beginWork.html.c87d0308.js"><link rel="prefetch" href="/notes/assets/completeWork.html.aa6cbf1f.js"><link rel="prefetch" href="/notes/assets/doubleBuffer.html.d52918e2.js"><link rel="prefetch" href="/notes/assets/fiber-mental.html.bef45234.js"><link rel="prefetch" href="/notes/assets/fiber.html.1483dbe2.js"><link rel="prefetch" href="/notes/assets/reconciler.html.b8f9298e.js"><link rel="prefetch" href="/notes/assets/beforeMutation.html.7be27320.js"><link rel="prefetch" href="/notes/assets/layout.html.a4dd1d18.js"><link rel="prefetch" href="/notes/assets/mutation.html.2dc9bc0e.js"><link rel="prefetch" href="/notes/assets/prepare.html.282f80ae.js"><link rel="prefetch" href="/notes/assets/mental.html.10eaf210.js"><link rel="prefetch" href="/notes/assets/prepare.html.2b9d575d.js"><link rel="prefetch" href="/notes/assets/priority.html.fb2ee431.js"><link rel="prefetch" href="/notes/assets/reactdom.html.2bd257c8.js"><link rel="prefetch" href="/notes/assets/setstate.html.b048a49a.js"><link rel="prefetch" href="/notes/assets/update.html.0f14ee3f.js"><link rel="prefetch" href="/notes/assets/bitfiled.html.0696bca0.js"><link rel="prefetch" href="/notes/assets/dfs.html.0222160b.js"><link rel="prefetch" href="/notes/assets/diff.html.c861486f.js"><link rel="prefetch" href="/notes/assets/heapsort.html.813ec255.js"><link rel="prefetch" href="/notes/assets/linkedlist.html.b9a05b39.js"><link rel="prefetch" href="/notes/assets/stack.html.4bac2f66.js"><link rel="prefetch" href="/notes/assets/bootstrap.html.f0a21832.js"><link rel="prefetch" href="/notes/assets/context.html.5213e4d4.js"><link rel="prefetch" href="/notes/assets/fibertree-commit.html.72ca1ab8.js"><link rel="prefetch" href="/notes/assets/fibertree-create.html.3ad2871c.js"><link rel="prefetch" href="/notes/assets/fibertree-prepare.html.f5a41814.js"><link rel="prefetch" href="/notes/assets/fibertree-update.html.4a485e0c.js"><link rel="prefetch" href="/notes/assets/hook-effect.html.8d2ea294.js"><link rel="prefetch" href="/notes/assets/hook-state.html.0d2b0908.js"><link rel="prefetch" href="/notes/assets/hook-summary.html.aee25904.js"><link rel="prefetch" href="/notes/assets/macro-structure.html.038bcbf6.js"><link rel="prefetch" href="/notes/assets/object-structure.html.27d191c3.js"><link rel="prefetch" href="/notes/assets/priority.html.c3068403.js"><link rel="prefetch" href="/notes/assets/reconciler-workflow.html.a6408e25.js"><link rel="prefetch" href="/notes/assets/scheduler.html.dbcbbbe7.js"><link rel="prefetch" href="/notes/assets/state-effects.html.35a57d3b.js"><link rel="prefetch" href="/notes/assets/synthetic-event.html.dbaad71f.js"><link rel="prefetch" href="/notes/assets/workloop.html.23542eb0.js"><link rel="prefetch" href="/notes/assets/ast.html.b6c6e7a5.js"><link rel="prefetch" href="/notes/assets/binder.html.3add67cf.js"><link rel="prefetch" href="/notes/assets/checker.html.aa7a4fe0.js"><link rel="prefetch" href="/notes/assets/emitter.html.8b18a104.js"><link rel="prefetch" href="/notes/assets/overview.html.9f765f7c.js"><link rel="prefetch" href="/notes/assets/parser.html.45809a8e.js"><link rel="prefetch" href="/notes/assets/program.html.2e8577af.js"><link rel="prefetch" href="/notes/assets/scanner.html.0e52cef3.js"><link rel="prefetch" href="/notes/assets/common.html.7ff50c22.js"><link rel="prefetch" href="/notes/assets/interpreting.html.640974b6.js"><link rel="prefetch" href="/notes/assets/class.html.56041a21.js"><link rel="prefetch" href="/notes/assets/commandline-behavior.html.b5e17ae7.js"><link rel="prefetch" href="/notes/assets/comments.html.724e56b5.js"><link rel="prefetch" href="/notes/assets/common-bug-not-bugs.html.bda56914.js"><link rel="prefetch" href="/notes/assets/common-feature-request.html.d91306a3.js"><link rel="prefetch" href="/notes/assets/decorators.html.0792f156.js"><link rel="prefetch" href="/notes/assets/enums.html.94806105.js"><link rel="prefetch" href="/notes/assets/function.html.9303f624.js"><link rel="prefetch" href="/notes/assets/generics.html.5a217485.js"><link rel="prefetch" href="/notes/assets/glossary-and-terms.html.fc013a53.js"><link rel="prefetch" href="/notes/assets/jsx-and-react.html.06db73ae.js"><link rel="prefetch" href="/notes/assets/modules.html.735fba1e.js"><link rel="prefetch" href="/notes/assets/thing-that-dont-work.html.5d6b281d.js"><link rel="prefetch" href="/notes/assets/tsconfig-behavior.html.8d1b5bf3.js"><link rel="prefetch" href="/notes/assets/type-guards.html.45e9be72.js"><link rel="prefetch" href="/notes/assets/type-system-behavior.html.1d2f38ef.js"><link rel="prefetch" href="/notes/assets/nonReactJSX.html.5803c838.js"><link rel="prefetch" href="/notes/assets/reactJSX.html.d2e905f6.js"><link rel="prefetch" href="/notes/assets/support.html.cacf88ab.js"><link rel="prefetch" href="/notes/assets/typescript-3.7.html.ddd77423.js"><link rel="prefetch" href="/notes/assets/typescript-3.8.html.4c809fb9.js"><link rel="prefetch" href="/notes/assets/typescript-3.9.html.402b0676.js"><link rel="prefetch" href="/notes/assets/compilationContext.html.e810fa11.js"><link rel="prefetch" href="/notes/assets/declarationspaces.html.13dbf655.js"><link rel="prefetch" href="/notes/assets/dynamicImportExpressions.html.84834f71.js"><link rel="prefetch" href="/notes/assets/inDepthTs.html.a1e38dfe.js"><link rel="prefetch" href="/notes/assets/modules.html.54c06f4d.js"><link rel="prefetch" href="/notes/assets/namespaces.html.a1e9515c.js"><link rel="prefetch" href="/notes/assets/unknownAny.html.2c6e3da6.js"><link rel="prefetch" href="/notes/assets/avoidExportDefault.html.53f85703.js"><link rel="prefetch" href="/notes/assets/barrel.html.139c236f.js"><link rel="prefetch" href="/notes/assets/bind.html.f5aaaac0.js"><link rel="prefetch" href="/notes/assets/buildToggles.html.d8da50e4.js"><link rel="prefetch" href="/notes/assets/classAreUseful.html.d7bae9a9.js"><link rel="prefetch" href="/notes/assets/covarianceAndContravariance.html.b2a695b4.js"><link rel="prefetch" href="/notes/assets/createArrays.html.58ea0a96.js"><link rel="prefetch" href="/notes/assets/curry.html.93930603.js"><link rel="prefetch" href="/notes/assets/functionParameters.html.54af2211.js"><link rel="prefetch" href="/notes/assets/infer.html.e6cad365.js"><link rel="prefetch" href="/notes/assets/lazyObjectLiteralInitialization.html.661ccf8e.js"><link rel="prefetch" href="/notes/assets/limitPropertySetters.html.00db3d15.js"><link rel="prefetch" href="/notes/assets/metadata.html.6ff861fa.js"><link rel="prefetch" href="/notes/assets/nominalTyping.html.a4afb87e.js"><link rel="prefetch" href="/notes/assets/outFileCaution.html.20331d2d.js"><link rel="prefetch" href="/notes/assets/singletonPatern.html.c56c87ed.js"><link rel="prefetch" href="/notes/assets/statefulFunctions.html.b4ae5019.js"><link rel="prefetch" href="/notes/assets/staticConstructors.html.ec876aca.js"><link rel="prefetch" href="/notes/assets/stringBasedEmuns.html.7ff11b83.js"><link rel="prefetch" href="/notes/assets/truthy.html.a795b032.js"><link rel="prefetch" href="/notes/assets/typeInstantiation.html.e5999eea.js"><link rel="prefetch" href="/notes/assets/typesafeEventEmitter.html.4d1eb40b.js"><link rel="prefetch" href="/notes/assets/ambient.html.8e1046ea.js"><link rel="prefetch" href="/notes/assets/callable.html.0e168556.js"><link rel="prefetch" href="/notes/assets/discrominatedUnion.html.7f609982.js"><link rel="prefetch" href="/notes/assets/enums.html.bfc061f9.js"><link rel="prefetch" href="/notes/assets/exceptionsHanding.html.1188b985.js"><link rel="prefetch" href="/notes/assets/freshness.html.9af6b82e.js"><link rel="prefetch" href="/notes/assets/functions.html.239836d8.js"><link rel="prefetch" href="/notes/assets/generices.html.35d8f045.js"><link rel="prefetch" href="/notes/assets/indexSignatures.html.1a156c52.js"><link rel="prefetch" href="/notes/assets/interfaces.html.c71c1347.js"><link rel="prefetch" href="/notes/assets/lib.html.b59fe319.js"><link rel="prefetch" href="/notes/assets/literals.html.f7609265.js"><link rel="prefetch" href="/notes/assets/migrating.html.2c9942f3.js"><link rel="prefetch" href="/notes/assets/mixins.html.a9d774b6.js"><link rel="prefetch" href="/notes/assets/movingTypes.html.af93c58f.js"><link rel="prefetch" href="/notes/assets/neverType.html.4bec8c63.js"><link rel="prefetch" href="/notes/assets/overview.html.80c1fbd6.js"><link rel="prefetch" href="/notes/assets/readonly.html.86bf5a91.js"><link rel="prefetch" href="/notes/assets/thisType.html.f8a9f193.js"><link rel="prefetch" href="/notes/assets/typeAssertion.html.2c4a1d87.js"><link rel="prefetch" href="/notes/assets/typeCompatibility.html.7ef3c043.js"><link rel="prefetch" href="/notes/assets/typeGuard.html.3cac3318.js"><link rel="prefetch" href="/notes/assets/typeInference.html.872467ea.js"><link rel="prefetch" href="/notes/assets/types.html.438fa5b6.js"><link rel="prefetch" href="/notes/assets/pluginDva.html.119c4ee2.js"><link rel="prefetch" href="/notes/assets/pluginQiankun.html.ede15d85.js"><link rel="prefetch" href="/notes/assets/codegen.html.9899ff8b.js"><link rel="prefetch" href="/notes/assets/entrance.html.8205d22a.js"><link rel="prefetch" href="/notes/assets/optimize.html.a869783a.js"><link rel="prefetch" href="/notes/assets/outline.html.8bf89a6b.js"><link rel="prefetch" href="/notes/assets/parse.html.e323e1a9.js"><link rel="prefetch" href="/notes/assets/async-component.html.98db9ff4.js"><link rel="prefetch" href="/notes/assets/component-register.html.ce753ce2.js"><link rel="prefetch" href="/notes/assets/create-component.html.26e9cc41.js"><link rel="prefetch" href="/notes/assets/lifecycle.html.c76ae353.js"><link rel="prefetch" href="/notes/assets/merge-option.html.7e75c4c6.js"><link rel="prefetch" href="/notes/assets/outline.html.45bde7ff.js"><link rel="prefetch" href="/notes/assets/patch.html.231ffc11.js"><link rel="prefetch" href="/notes/assets/_index.html.ff76bfab.js"><link rel="prefetch" href="/notes/assets/create-element.html.e38cc5d0.js"><link rel="prefetch" href="/notes/assets/mounted.html.ec726d78.js"><link rel="prefetch" href="/notes/assets/new-vue.html.9056c88a.js"><link rel="prefetch" href="/notes/assets/render.html.52fefdc0.js"><link rel="prefetch" href="/notes/assets/update.html.8bd73e1d.js"><link rel="prefetch" href="/notes/assets/virtual-dom.html.0deb8902.js"><link rel="prefetch" href="/notes/assets/event.html.0b4c3126.js"><link rel="prefetch" href="/notes/assets/keep-alive.html.84216677.js"><link rel="prefetch" href="/notes/assets/outline.html.317d0444.js"><link rel="prefetch" href="/notes/assets/slot.html.3d1dcec9.js"><link rel="prefetch" href="/notes/assets/tansition-group.html.aa34ec26.js"><link rel="prefetch" href="/notes/assets/tansition.html.da3b6662.js"><link rel="prefetch" href="/notes/assets/v-model.html.b3610d00.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.20347b3d.js"><link rel="prefetch" href="/notes/assets/baseInterviewSecond.html.6cc75e07.js"><link rel="prefetch" href="/notes/assets/componentCommunication.html.93f71ac3.js"><link rel="prefetch" href="/notes/assets/detailedResponsiveness.html.5fd773bd.js"><link rel="prefetch" href="/notes/assets/diff.html.3ac3df77.js"><link rel="prefetch" href="/notes/assets/eventBinding.html.46e9cb33.js"><link rel="prefetch" href="/notes/assets/eventMechanism.html.e884d85c.js"><link rel="prefetch" href="/notes/assets/key.html.50fbef1a.js"><link rel="prefetch" href="/notes/assets/knowledgeSystem.html.4f6a03b8.js"><link rel="prefetch" href="/notes/assets/slot.html.54d2dc08.js"><link rel="prefetch" href="/notes/assets/sourceCodeAsyncDomUpdateNextTick.html.25fccaed.js"><link rel="prefetch" href="/notes/assets/sourceCodeElementBroadcastDispatch.html.1d6bf64f.js"><link rel="prefetch" href="/notes/assets/sourceCodeKeepAlive.html.a868f2e9.js"><link rel="prefetch" href="/notes/assets/sourceCodeResponsiveness.html.f39d2c00.js"><link rel="prefetch" href="/notes/assets/sourceCodeTemplateCompilation.html.aa6873a9.js"><link rel="prefetch" href="/notes/assets/sourceCodeTemplateDom.html.73f7427d.js"><link rel="prefetch" href="/notes/assets/sourceCodeVuex.html.8a9e96e8.js"><link rel="prefetch" href="/notes/assets/templateCompilation.html.e6171674.js"><link rel="prefetch" href="/notes/assets/vNode.html.8181fb33.js"><link rel="prefetch" href="/notes/assets/vNodeDiff.html.d9d8664d.js"><link rel="prefetch" href="/notes/assets/build.html.5a109691.js"><link rel="prefetch" href="/notes/assets/directory.html.122f8239.js"><link rel="prefetch" href="/notes/assets/entrance.html.684da85c.js"><link rel="prefetch" href="/notes/assets/flow.html.07a9984c.js"><link rel="prefetch" href="/notes/assets/component-update.html.d045f043.js"><link rel="prefetch" href="/notes/assets/computed-watcher.html.3d2db117.js"><link rel="prefetch" href="/notes/assets/getters.html.aebd2ace.js"><link rel="prefetch" href="/notes/assets/next-tick.html.815d53ef.js"><link rel="prefetch" href="/notes/assets/outline.html.0956ca80.js"><link rel="prefetch" href="/notes/assets/props.html.4a012203.js"><link rel="prefetch" href="/notes/assets/questions.html.800c371c.js"><link rel="prefetch" href="/notes/assets/reactive-object.html.f647642d.js"><link rel="prefetch" href="/notes/assets/setters.html.01ba90ca.js"><link rel="prefetch" href="/notes/assets/summary.html.14dda540.js"><link rel="prefetch" href="/notes/assets/install.html.0146f736.js"><link rel="prefetch" href="/notes/assets/matcher.html.0a1f68c0.js"><link rel="prefetch" href="/notes/assets/outline.html.42f34faf.js"><link rel="prefetch" href="/notes/assets/router.html.d78ef736.js"><link rel="prefetch" href="/notes/assets/transition-to.html.8863f272.js"><link rel="prefetch" href="/notes/assets/api.html.ca451d86.js"><link rel="prefetch" href="/notes/assets/idex.html.067bc1d1.js"><link rel="prefetch" href="/notes/assets/init.html.34c4b5ff.js"><link rel="prefetch" href="/notes/assets/plugin.html.b165e6ae.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.f55a54a7.js"><link rel="prefetch" href="/notes/assets/configuration.html.a25d1c11.js"><link rel="prefetch" href="/notes/assets/entryPoints.html.2dcd36f1.js"><link rel="prefetch" href="/notes/assets/loader.html.ab32c971.js"><link rel="prefetch" href="/notes/assets/output.html.abd08f4d.js"><link rel="prefetch" href="/notes/assets/plugin.html.12bfcb86.js"><link rel="prefetch" href="/notes/assets/webpackInterview.html.e5cd94da.js"><link rel="prefetch" href="/notes/assets/reactApi.html.b21a352b.js"><link rel="prefetch" href="/notes/assets/reactChildren.html.314a3e0f.js"><link rel="prefetch" href="/notes/assets/reactElement.html.c326afb7.js"><link rel="prefetch" href="/notes/assets/reactFiber.html.06a16ab8.js"><link rel="prefetch" href="/notes/assets/commitAllHostEffects.html.592dc2b1.js"><link rel="prefetch" href="/notes/assets/commitAllLifeCycles.html.8032bb9c.js"><link rel="prefetch" href="/notes/assets/commitBeforeMutationLifecycles.html.b240d9c2.js"><link rel="prefetch" href="/notes/assets/commitDeletion.html.969efebb.js"><link rel="prefetch" href="/notes/assets/commitPlacement.html.5fa08268.js"><link rel="prefetch" href="/notes/assets/commitRoot.html.b55f50d2.js"><link rel="prefetch" href="/notes/assets/commitWork.html.3ed03c6c.js"><link rel="prefetch" href="/notes/assets/invokeGuardedCallback.html.f89157c5.js"><link rel="prefetch" href="/notes/assets/expirationTime.html.19d99961.js"><link rel="prefetch" href="/notes/assets/reactDomRender.html.7281246e.js"><link rel="prefetch" href="/notes/assets/setStateForceUpdate.html.19346c99.js"><link rel="prefetch" href="/notes/assets/context.html.8abe1e6c.js"><link rel="prefetch" href="/notes/assets/evenInit.html.696f7e31.js"><link rel="prefetch" href="/notes/assets/eventBind.html.0efb2368.js"><link rel="prefetch" href="/notes/assets/eventCreateEventObject.html.10367552.js"><link rel="prefetch" href="/notes/assets/eventDispath.html.f49dfba1.js"><link rel="prefetch" href="/notes/assets/hydrate.html.1a3d6ad3.js"><link rel="prefetch" href="/notes/assets/ref.html.4580de8d.js"><link rel="prefetch" href="/notes/assets/suspense.html.38e3e989.js"><link rel="prefetch" href="/notes/assets/suspenseLazy.html.44128125.js"><link rel="prefetch" href="/notes/assets/suspenseWork.html.efeba255.js"><link rel="prefetch" href="/notes/assets/hooksCommon.html.783885f3.js"><link rel="prefetch" href="/notes/assets/hooksOther.html.61efdaa6.js"><link rel="prefetch" href="/notes/assets/start.html.b8c6acc2.js"><link rel="prefetch" href="/notes/assets/useEffect.html.a2659d58.js"><link rel="prefetch" href="/notes/assets/useState.html.b628aa01.js"><link rel="prefetch" href="/notes/assets/base.html.d70e39a8.js"><link rel="prefetch" href="/notes/assets/commpontDiff.html.85fea2d1.js"><link rel="prefetch" href="/notes/assets/componentUpdate.html.d3d70891.js"><link rel="prefetch" href="/notes/assets/renderProcess.html.07d222f3.js"><link rel="prefetch" href="/notes/assets/schedulingPrinciple.html.b0d0b281.js"><link rel="prefetch" href="/notes/assets/beginWork.html.7dd2d6ee.js"><link rel="prefetch" href="/notes/assets/globalVariable.html.aeb87cf3.js"><link rel="prefetch" href="/notes/assets/mountIndeterminateComponent.html.df01a636.js"><link rel="prefetch" href="/notes/assets/mountLazyCompont.html.d8d7476d.js"><link rel="prefetch" href="/notes/assets/performUnitOfWork.html.f059413c.js"><link rel="prefetch" href="/notes/assets/performWork.html.98ea55c4.js"><link rel="prefetch" href="/notes/assets/reactScheduler.html.60551e9d.js"><link rel="prefetch" href="/notes/assets/reconcileChildren.html.87f49cd1.js"><link rel="prefetch" href="/notes/assets/reconcileChildrenArray.html.d629cdfe.js"><link rel="prefetch" href="/notes/assets/reconcileSingleElement.html.754a842a.js"><link rel="prefetch" href="/notes/assets/renderRoot.html.a264f633.js"><link rel="prefetch" href="/notes/assets/scheduleWork.html.1f5fda5d.js"><link rel="prefetch" href="/notes/assets/throwException.html.f998d796.js"><link rel="prefetch" href="/notes/assets/updateClassComponent.html.0738b35d.js"><link rel="prefetch" href="/notes/assets/updateContextConsumer.html.07d0e40e.js"><link rel="prefetch" href="/notes/assets/updateContextProvider.html.f7bb0ee2.js"><link rel="prefetch" href="/notes/assets/updateForwardRef.html.b222eead.js"><link rel="prefetch" href="/notes/assets/updateFragment.html.91bff584.js"><link rel="prefetch" href="/notes/assets/updateFunctionalComponent.html.6547e5b1.js"><link rel="prefetch" href="/notes/assets/updateHostComponent.html.dce28500.js"><link rel="prefetch" href="/notes/assets/updateHostRoot.html.182d191b.js"><link rel="prefetch" href="/notes/assets/updateHostText.html.0bb779b6.js"><link rel="prefetch" href="/notes/assets/updateMode.html.68367dfb.js"><link rel="prefetch" href="/notes/assets/updatePortalComponent.html.9e7516cb.js"><link rel="prefetch" href="/notes/assets/updateProfiler.html.3953d623.js"><link rel="prefetch" href="/notes/assets/updateSuspenseComponent.html.362e2bd6.js"><link rel="prefetch" href="/notes/assets/interview1.html.b8176efe.js"><link rel="prefetch" href="/notes/assets/interview2.html.9b55c63b.js"><link rel="prefetch" href="/notes/assets/interview3.html.7a32737a.js"><link rel="prefetch" href="/notes/assets/interview51.html.e0f1f1a9.js"><link rel="prefetch" href="/notes/assets/interview52.html.80a1c513.js"><link rel="prefetch" href="/notes/assets/interview53.html.e78dc6a9.js"><link rel="prefetch" href="/notes/assets/interview54.html.deca415d.js"><link rel="prefetch" href="/notes/assets/interview55.html.fcf9381c.js"><link rel="prefetch" href="/notes/assets/interview56.html.8a71c67d.js"><link rel="prefetch" href="/notes/assets/interview57.html.99a46bb3.js"><link rel="prefetch" href="/notes/assets/interview1.html.1c1620b6.js"><link rel="prefetch" href="/notes/assets/interview10.html.de12a786.js"><link rel="prefetch" href="/notes/assets/interview11.html.e5f55a61.js"><link rel="prefetch" href="/notes/assets/interview12.html.1d481617.js"><link rel="prefetch" href="/notes/assets/interview13.html.8f2ec9c4.js"><link rel="prefetch" href="/notes/assets/interview14.html.6a97d43f.js"><link rel="prefetch" href="/notes/assets/interview15.html.ea06eddf.js"><link rel="prefetch" href="/notes/assets/interview16.html.739e3c51.js"><link rel="prefetch" href="/notes/assets/interview17.html.43b3bc2b.js"><link rel="prefetch" href="/notes/assets/interview18.html.d30d7b68.js"><link rel="prefetch" href="/notes/assets/interview19.html.9199cb94.js"><link rel="prefetch" href="/notes/assets/interview2.html.bdb636fb.js"><link rel="prefetch" href="/notes/assets/interview20.html.6937d525.js"><link rel="prefetch" href="/notes/assets/interview21.html.5d7264d1.js"><link rel="prefetch" href="/notes/assets/interview22.html.8704f59e.js"><link rel="prefetch" href="/notes/assets/interview23.html.63866971.js"><link rel="prefetch" href="/notes/assets/interview24.html.1ac65b32.js"><link rel="prefetch" href="/notes/assets/interview25.html.f93ef969.js"><link rel="prefetch" href="/notes/assets/interview26.html.7a1fbae8.js"><link rel="prefetch" href="/notes/assets/interview27.html.d771e053.js"><link rel="prefetch" href="/notes/assets/interview28.html.f4f84cfa.js"><link rel="prefetch" href="/notes/assets/interview29.html.90be3a41.js"><link rel="prefetch" href="/notes/assets/interview3.html.7fa3cac1.js"><link rel="prefetch" href="/notes/assets/interview30.html.d03a8e7c.js"><link rel="prefetch" href="/notes/assets/interview31.html.7ac8311e.js"><link rel="prefetch" href="/notes/assets/interview32.html.088d8d14.js"><link rel="prefetch" href="/notes/assets/interview33.html.4ca3d654.js"><link rel="prefetch" href="/notes/assets/interview34.html.c1bbfc25.js"><link rel="prefetch" href="/notes/assets/interview35.html.896279c7.js"><link rel="prefetch" href="/notes/assets/interview36.html.618f381d.js"><link rel="prefetch" href="/notes/assets/interview37.html.cc02df1c.js"><link rel="prefetch" href="/notes/assets/interview38.html.59985330.js"><link rel="prefetch" href="/notes/assets/interview39.html.3f4fe19e.js"><link rel="prefetch" href="/notes/assets/interview4.html.d61a3a7b.js"><link rel="prefetch" href="/notes/assets/interview40.html.2856af7d.js"><link rel="prefetch" href="/notes/assets/interview41.html.21164101.js"><link rel="prefetch" href="/notes/assets/interview42.html.61a9ccf9.js"><link rel="prefetch" href="/notes/assets/interview43.html.4466c286.js"><link rel="prefetch" href="/notes/assets/interview44.html.2dde0fc6.js"><link rel="prefetch" href="/notes/assets/interview45.html.8603f33b.js"><link rel="prefetch" href="/notes/assets/interview46.html.72132218.js"><link rel="prefetch" href="/notes/assets/interview47.html.bdc94146.js"><link rel="prefetch" href="/notes/assets/interview48.html.20775404.js"><link rel="prefetch" href="/notes/assets/interview49.html.774090d1.js"><link rel="prefetch" href="/notes/assets/interview5.html.a7e22b93.js"><link rel="prefetch" href="/notes/assets/interview50.html.4288eaed.js"><link rel="prefetch" href="/notes/assets/interview6.html.1359f807.js"><link rel="prefetch" href="/notes/assets/interview7.html.7b05d73e.js"><link rel="prefetch" href="/notes/assets/interview8.html.675124a5.js"><link rel="prefetch" href="/notes/assets/interview9.html.46502504.js"><link rel="prefetch" href="/notes/assets/404.html.93146c89.js"><link rel="prefetch" href="/notes/assets/index.html.fe731a68.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.b80ee296.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.a9a3805e.js"><link rel="prefetch" href="/notes/assets/base.html.e4c04700.js"><link rel="prefetch" href="/notes/assets/customCli.html.22eacdb5.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.fa31fc77.js"><link rel="prefetch" href="/notes/assets/adapter.html.5e05b8e7.js"><link rel="prefetch" href="/notes/assets/amd.html.27956217.js"><link rel="prefetch" href="/notes/assets/builder.html.5206e00b.js"><link rel="prefetch" href="/notes/assets/censorJquery.html.e06dc225.js"><link rel="prefetch" href="/notes/assets/combination.html.08ce9ee5.js"><link rel="prefetch" href="/notes/assets/command.html.185f49ae.js"><link rel="prefetch" href="/notes/assets/commonJS.html.6c1a2389.js"><link rel="prefetch" href="/notes/assets/constructor.html.fd284450.js"><link rel="prefetch" href="/notes/assets/decoration.html.0f31ab6c.js"><link rel="prefetch" href="/notes/assets/esHarmony.html.5573349a.js"><link rel="prefetch" href="/notes/assets/exposed.html.34886811.js"><link rel="prefetch" href="/notes/assets/exterior.html.a42e9054.js"><link rel="prefetch" href="/notes/assets/factory.html.bd3b9aec.js"><link rel="prefetch" href="/notes/assets/flyweight.html.a7f57e1b.js"><link rel="prefetch" href="/notes/assets/functionalProgramming.html.8da58976.js"><link rel="prefetch" href="/notes/assets/intermediary.html.baddc613.js"><link rel="prefetch" href="/notes/assets/iterator.html.611aadd5.js"><link rel="prefetch" href="/notes/assets/lazyInitial.html.2f5ddade.js"><link rel="prefetch" href="/notes/assets/mixin.html.1302ff92.js"><link rel="prefetch" href="/notes/assets/module.html.1661f5cb.js"><link rel="prefetch" href="/notes/assets/mvc.html.8c339742.js"><link rel="prefetch" href="/notes/assets/mvp.html.90a1dad9.js"><link rel="prefetch" href="/notes/assets/mvvm.html.b45202c5.js"><link rel="prefetch" href="/notes/assets/observer.html.bb602b90.js"><link rel="prefetch" href="/notes/assets/outward.html.a74b61b4.js"><link rel="prefetch" href="/notes/assets/overview.html.549c3c03.js"><link rel="prefetch" href="/notes/assets/prototype.html.e3be60dd.js"><link rel="prefetch" href="/notes/assets/proxy.html.a9898c30.js"><link rel="prefetch" href="/notes/assets/singleton.html.4716e1d1.js"><link rel="prefetch" href="/notes/assets/axios.html.b20c0ed0.js"><link rel="prefetch" href="/notes/assets/createUnderscore.html.73299f52.js"><link rel="prefetch" href="/notes/assets/jquery.html.4510f0d0.js"><link rel="prefetch" href="/notes/assets/lodash.html.369465ce.js"><link rel="prefetch" href="/notes/assets/sentry.html.67d8a163.js"><link rel="prefetch" href="/notes/assets/underscore.html.e2303bc7.js"><link rel="prefetch" href="/notes/assets/vuex.html.f3aba5e7.js"><link rel="prefetch" href="/notes/assets/customCli.html.eebbe6b7.js"><link rel="prefetch" href="/notes/assets/description.html.3cfdc5e4.js"><link rel="prefetch" href="/notes/assets/indx.html.90f769b9.js"><link rel="prefetch" href="/notes/assets/rebase.html.96f8396d.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.dc4c44a6.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.26e36bd3.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.e0716d44.js"><link rel="prefetch" href="/notes/assets/44Questions.html.7cae0b48.js"><link rel="prefetch" href="/notes/assets/asyncAwait.html.f2af51e6.js"><link rel="prefetch" href="/notes/assets/babelCompile.html.1d838ed2.js"><link rel="prefetch" href="/notes/assets/base.html.078e7f28.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.b2a4b821.js"><link rel="prefetch" href="/notes/assets/baseWebpack.html.c675f04f.js"><link rel="prefetch" href="/notes/assets/codeSeparation.html.aafe95d8.js"><link rel="prefetch" href="/notes/assets/cycle.html.c3c01f40.js"><link rel="prefetch" href="/notes/assets/cycleOtherWay.html.17e6e244.js"><link rel="prefetch" href="/notes/assets/executionMechanism.html.cfa68400.js"><link rel="prefetch" href="/notes/assets/hybrid.html.9f3dc407.js"><link rel="prefetch" href="/notes/assets/jsonStringify.html.289b4ef2.js"><link rel="prefetch" href="/notes/assets/largeFileResumableUpload.html.bbc23367.js"><link rel="prefetch" href="/notes/assets/performance.html.fec6f730.js"><link rel="prefetch" href="/notes/assets/promise.html.dd8c8f70.js"><link rel="prefetch" href="/notes/assets/promiseAll.html.d7714793.js"><link rel="prefetch" href="/notes/assets/spa.html.bd8d4784.js"><link rel="prefetch" href="/notes/assets/tsBaseInterview.html.d6422d1c.js"><link rel="prefetch" href="/notes/assets/useEs6.html.9bb90421.js"><link rel="prefetch" href="/notes/assets/webAnimations.html.a5941eee.js"><link rel="prefetch" href="/notes/assets/webpackInterview.html.04d365d9.js"><link rel="prefetch" href="/notes/assets/webpackLoader.html.b434f11d.js"><link rel="prefetch" href="/notes/assets/webpackPublic.html.aa0a09d4.js"><link rel="prefetch" href="/notes/assets/weird.html.caf6fe0e.js"><link rel="prefetch" href="/notes/assets/es10News.html.23d27d5e.js"><link rel="prefetch" href="/notes/assets/es6Interview1.html.87d5b679.js"><link rel="prefetch" href="/notes/assets/es6Interview2.html.f5811d4a.js"><link rel="prefetch" href="/notes/assets/es6Interview3.html.d3bd496e.js"><link rel="prefetch" href="/notes/assets/es6News.html.3d76ef55.js"><link rel="prefetch" href="/notes/assets/es7News.html.f97b5641.js"><link rel="prefetch" href="/notes/assets/es8News.html.dc256afa.js"><link rel="prefetch" href="/notes/assets/es9News.html.6716b1f6.js"><link rel="prefetch" href="/notes/assets/base.html.f4a8fe37.js"><link rel="prefetch" href="/notes/assets/nginxComprehensiveScene.html.c714bfd1.js"><link rel="prefetch" href="/notes/assets/commonlyUsed.html.49cf5cb8.js"><link rel="prefetch" href="/notes/assets/inelegantHook.html.d793c474.js"><link rel="prefetch" href="/notes/assets/interview1.html.6e421aed.js"><link rel="prefetch" href="/notes/assets/interview2.html.f0afdb4e.js"><link rel="prefetch" href="/notes/assets/interview3.html.2893bd75.js"><link rel="prefetch" href="/notes/assets/interview4.html.7e289098.js"><link rel="prefetch" href="/notes/assets/base.html.7156893e.js"><link rel="prefetch" href="/notes/assets/introduction.html.6270fa5e.js"><link rel="prefetch" href="/notes/assets/base.html.9d13ca5b.js"><link rel="prefetch" href="/notes/assets/summarize.html.8e1398f0.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.c096e4b5.js"><link rel="prefetch" href="/notes/assets/index.html.cf2e28ca.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.17b5600c.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.d0f6dd29.js"><link rel="prefetch" href="/notes/assets/bigDataRender.html.c628330f.js"><link rel="prefetch" href="/notes/assets/progress.html.c001cf9c.js"><link rel="prefetch" href="/notes/assets/quirksStandards.html.9adbb4b8.js"><link rel="prefetch" href="/notes/assets/redrawReflow.html.f7a98f83.js"><link rel="prefetch" href="/notes/assets/storageSpace.html.35523635.js"><link rel="prefetch" href="/notes/assets/webComLink.html.076002cf.js"><link rel="prefetch" href="/notes/assets/webUrl.html.601f3c7d.js"><link rel="prefetch" href="/notes/assets/spanWidthHeight.html.b9b6432a.js"><link rel="prefetch" href="/notes/assets/baseCss.html.fea9833a.js"><link rel="prefetch" href="/notes/assets/blockFormattingContext.html.151c6313.js"><link rel="prefetch" href="/notes/assets/containingBlock.html.7633c0fd.js"><link rel="prefetch" href="/notes/assets/cssBeforeAfter.html.fd25f54b.js"><link rel="prefetch" href="/notes/assets/cssBoxModal.html.3411b1ee.js"><link rel="prefetch" href="/notes/assets/cssCollapsing.html.a603e98d.js"><link rel="prefetch" href="/notes/assets/cssCompatible.html.71c6ab71.js"><link rel="prefetch" href="/notes/assets/cssFlexDemo.html.fb872d08.js"><link rel="prefetch" href="/notes/assets/cssFlexLayout.html.0f167e5a.js"><link rel="prefetch" href="/notes/assets/cssGridLayout.html.5e6995ca.js"><link rel="prefetch" href="/notes/assets/cssHack.html.8299616b.js"><link rel="prefetch" href="/notes/assets/cssInlineBlock.html.28d48106.js"><link rel="prefetch" href="/notes/assets/cssPriority.html.e1fa5c3b.js"><link rel="prefetch" href="/notes/assets/cssPseudo.html.e632fa4f.js"><link rel="prefetch" href="/notes/assets/cssPseudoClass.html.0e39a8bf.js"><link rel="prefetch" href="/notes/assets/cssSelector.html.0e8b529f.js"><link rel="prefetch" href="/notes/assets/cssTutorial.html.2ee1774e.js"><link rel="prefetch" href="/notes/assets/fieldInvalid.html.1987f413.js"><link rel="prefetch" href="/notes/assets/frame.html.d7a10730.js"><link rel="prefetch" href="/notes/assets/knowledgePoints.html.9fde1900.js"><link rel="prefetch" href="/notes/assets/linkImport.html.0058bbdc.js"><link rel="prefetch" href="/notes/assets/stackingContext.html.5fd68493.js"><link rel="prefetch" href="/notes/assets/tools.html.661c48fd.js"><link rel="prefetch" href="/notes/assets/units.html.dba69635.js"><link rel="prefetch" href="/notes/assets/transform.html.03a55987.js"><link rel="prefetch" href="/notes/assets/content.html.277b760c.js"><link rel="prefetch" href="/notes/assets/plugins.html.84a5fa14.js"><link rel="prefetch" href="/notes/assets/accesskey.html.1b38e9ee.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.e4eff942.js"><link rel="prefetch" href="/notes/assets/canvasSvg.html.ddf5f677.js"><link rel="prefetch" href="/notes/assets/deviceAPI.html.37478fb6.js"><link rel="prefetch" href="/notes/assets/globalAttr.html.1545856e.js"><link rel="prefetch" href="/notes/assets/htmlDatalist.html.a1dba46d.js"><link rel="prefetch" href="/notes/assets/htmlElement.html.182db0aa.js"><link rel="prefetch" href="/notes/assets/interview10.html.fac9e613.js"><link rel="prefetch" href="/notes/assets/interview11.html.c511875f.js"><link rel="prefetch" href="/notes/assets/interview12.html.28671749.js"><link rel="prefetch" href="/notes/assets/interview13.html.f59f567f.js"><link rel="prefetch" href="/notes/assets/interview14.html.51e169a0.js"><link rel="prefetch" href="/notes/assets/interview15.html.38363c2f.js"><link rel="prefetch" href="/notes/assets/interview16.html.e8b6f494.js"><link rel="prefetch" href="/notes/assets/interview17.html.c12370c6.js"><link rel="prefetch" href="/notes/assets/interview18.html.1f3f6e25.js"><link rel="prefetch" href="/notes/assets/interview19.html.edc5e10e.js"><link rel="prefetch" href="/notes/assets/interview20.html.f4c2a23f.js"><link rel="prefetch" href="/notes/assets/interview21.html.e4f45c3c.js"><link rel="prefetch" href="/notes/assets/interview22.html.6354e6f0.js"><link rel="prefetch" href="/notes/assets/interview23.html.f2160193.js"><link rel="prefetch" href="/notes/assets/interview24.html.1e460f90.js"><link rel="prefetch" href="/notes/assets/interview25.html.0c1b8a23.js"><link rel="prefetch" href="/notes/assets/interview26.html.9745abf2.js"><link rel="prefetch" href="/notes/assets/interview27.html.7a8ed7cb.js"><link rel="prefetch" href="/notes/assets/interview28.html.3512c30b.js"><link rel="prefetch" href="/notes/assets/interview29.html.28ad7109.js"><link rel="prefetch" href="/notes/assets/interview30.html.59d56caa.js"><link rel="prefetch" href="/notes/assets/interview31.html.7a6c8379.js"><link rel="prefetch" href="/notes/assets/interview32.html.c3373f18.js"><link rel="prefetch" href="/notes/assets/interview33.html.23891783.js"><link rel="prefetch" href="/notes/assets/interview34.html.b08cb30b.js"><link rel="prefetch" href="/notes/assets/interview35.html.f9fb69dd.js"><link rel="prefetch" href="/notes/assets/interview36.html.0502efa3.js"><link rel="prefetch" href="/notes/assets/interview37.html.42b9b7ad.js"><link rel="prefetch" href="/notes/assets/interview38.html.60a3ab7a.js"><link rel="prefetch" href="/notes/assets/interview39.html.7d2e86eb.js"><link rel="prefetch" href="/notes/assets/interview40.html.6b7cc7e5.js"><link rel="prefetch" href="/notes/assets/interview41.html.f257a45c.js"><link rel="prefetch" href="/notes/assets/interview42.html.725ffde0.js"><link rel="prefetch" href="/notes/assets/interview43.html.5683217a.js"><link rel="prefetch" href="/notes/assets/interview44.html.93bc0682.js"><link rel="prefetch" href="/notes/assets/interview45.html.aa7951f0.js"><link rel="prefetch" href="/notes/assets/interview46.html.4f3e5811.js"><link rel="prefetch" href="/notes/assets/interview47.html.b08054d7.js"><link rel="prefetch" href="/notes/assets/interview48.html.aacab9a0.js"><link rel="prefetch" href="/notes/assets/interview49.html.563bb340.js"><link rel="prefetch" href="/notes/assets/interview5.html.ee675d13.js"><link rel="prefetch" href="/notes/assets/interview50.html.f82e825b.js"><link rel="prefetch" href="/notes/assets/interview51.html.7a896921.js"><link rel="prefetch" href="/notes/assets/interview52.html.86863786.js"><link rel="prefetch" href="/notes/assets/interview53.html.0fac675b.js"><link rel="prefetch" href="/notes/assets/interview54.html.21f1899e.js"><link rel="prefetch" href="/notes/assets/interview55.html.8cccb27b.js"><link rel="prefetch" href="/notes/assets/interview56.html.18dd4f18.js"><link rel="prefetch" href="/notes/assets/interview57.html.641a7c2b.js"><link rel="prefetch" href="/notes/assets/interview58.html.bfb9be25.js"><link rel="prefetch" href="/notes/assets/interview59.html.935420b0.js"><link rel="prefetch" href="/notes/assets/interview6.html.95556a5a.js"><link rel="prefetch" href="/notes/assets/interview7.html.682b86e5.js"><link rel="prefetch" href="/notes/assets/interview8.html.70b3f32c.js"><link rel="prefetch" href="/notes/assets/interview9.html.a6c6e9c9.js"><link rel="prefetch" href="/notes/assets/linkImport.html.8da43728.js"><link rel="prefetch" href="/notes/assets/offlineStorage.html.80493980.js"><link rel="prefetch" href="/notes/assets/regular.html.d49a578e.js"><link rel="prefetch" href="/notes/assets/shake.html.4a6d66c8.js"><link rel="prefetch" href="/notes/assets/webWorker.html.0d429dc0.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.2ed7b391.js"><link rel="prefetch" href="/notes/assets/cors.html.8636ea22.js"><link rel="prefetch" href="/notes/assets/crossDomainCookie.html.cc9ca866.js"><link rel="prefetch" href="/notes/assets/fetch.html.d235a684.js"><link rel="prefetch" href="/notes/assets/nestAxios.html.bd31920d.js"><link rel="prefetch" href="/notes/assets/debounce.html.453b29d3.js"><link rel="prefetch" href="/notes/assets/lodashPrinciple.html.db70483e.js"><link rel="prefetch" href="/notes/assets/lodashThrottleDebounce.html.0a4cd605.js"><link rel="prefetch" href="/notes/assets/throttle.html.059f62fd.js"><link rel="prefetch" href="/notes/assets/throttleDebounceReact.html.77db3cb7.js"><link rel="prefetch" href="/notes/assets/cloneIntroduction.html.0cf63a53.js"><link rel="prefetch" href="/notes/assets/deepClone.html.52ba6ce5.js"><link rel="prefetch" href="/notes/assets/lodashDeepClone.html.eedbe06d.js"><link rel="prefetch" href="/notes/assets/objectAssign.html.703a76d6.js"><link rel="prefetch" href="/notes/assets/arraySourceCode.html.346491cd.js"><link rel="prefetch" href="/notes/assets/baseHigh.html.a944206e.js"><link rel="prefetch" href="/notes/assets/currying.html.47571bc7.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.68abb360.js"><link rel="prefetch" href="/notes/assets/eventLoop.html.83da91fb.js"><link rel="prefetch" href="/notes/assets/iife.html.879fe622.js"><link rel="prefetch" href="/notes/assets/interview1.html.cf8bd4b8.js"><link rel="prefetch" href="/notes/assets/jsCompatible.html.3a822573.js"><link rel="prefetch" href="/notes/assets/baseProyotype.html.9e9c3053.js"><link rel="prefetch" href="/notes/assets/functionObjectResource.html.dc1034f1.js"><link rel="prefetch" href="/notes/assets/prototypeInherit.html.2fde0fa4.js"><link rel="prefetch" href="/notes/assets/closureInterview.html.3623e4fc.js"><link rel="prefetch" href="/notes/assets/scopeChain.html.b57eb1c9.js"><link rel="prefetch" href="/notes/assets/understandingClosures.html.c83a63d5.js"><link rel="prefetch" href="/notes/assets/executionStack.html.c44e7a14.js"><link rel="prefetch" href="/notes/assets/memoryLeak.html.7c29f03e.js"><link rel="prefetch" href="/notes/assets/memoryMechanism.html.2cdf5dd7.js"><link rel="prefetch" href="/notes/assets/memorySpace.html.a98e89ad.js"><link rel="prefetch" href="/notes/assets/precompiled.html.025f6256.js"><link rel="prefetch" href="/notes/assets/variableObject.html.23e45516.js"><link rel="prefetch" href="/notes/assets/arrowFunctionThis.html.5d0b43bc.js"><link rel="prefetch" href="/notes/assets/bindSimulation.html.5b8e1e35.js"><link rel="prefetch" href="/notes/assets/callApply.html.b24d1072.js"><link rel="prefetch" href="/notes/assets/newSimulation.html.d5973283.js"><link rel="prefetch" href="/notes/assets/thisBind.html.88704bd6.js"><link rel="prefetch" href="/notes/assets/interview1.html.5eaa6b7a.js"><link rel="prefetch" href="/notes/assets/interview10.html.d38a2d57.js"><link rel="prefetch" href="/notes/assets/interview11.html.afeb85d9.js"><link rel="prefetch" href="/notes/assets/interview12.html.5037e3d9.js"><link rel="prefetch" href="/notes/assets/interview13.html.2244cd0a.js"><link rel="prefetch" href="/notes/assets/interview14.html.f1347c7a.js"><link rel="prefetch" href="/notes/assets/interview15.html.9b9709dd.js"><link rel="prefetch" href="/notes/assets/interview16.html.c0a9fbab.js"><link rel="prefetch" href="/notes/assets/interview17.html.7d9ef19c.js"><link rel="prefetch" href="/notes/assets/interview18.html.276de16b.js"><link rel="prefetch" href="/notes/assets/interview19.html.6ffc1d19.js"><link rel="prefetch" href="/notes/assets/interview2.html.55c58a53.js"><link rel="prefetch" href="/notes/assets/interview20.html.cbdd7473.js"><link rel="prefetch" href="/notes/assets/interview21.html.5e502248.js"><link rel="prefetch" href="/notes/assets/interview22.html.7be10b23.js"><link rel="prefetch" href="/notes/assets/interview23.html.26e2334e.js"><link rel="prefetch" href="/notes/assets/interview24.html.fd999f85.js"><link rel="prefetch" href="/notes/assets/interview25.html.faa3b46c.js"><link rel="prefetch" href="/notes/assets/interview26.html.9e3d1049.js"><link rel="prefetch" href="/notes/assets/interview27.html.c1e7456f.js"><link rel="prefetch" href="/notes/assets/interview28.html.9cb63231.js"><link rel="prefetch" href="/notes/assets/interview29.html.a995d8e5.js"><link rel="prefetch" href="/notes/assets/interview3.html.a0185425.js"><link rel="prefetch" href="/notes/assets/interview30.html.1b305e02.js"><link rel="prefetch" href="/notes/assets/interview4.html.e5d7b33e.js"><link rel="prefetch" href="/notes/assets/interview5.html.247cddad.js"><link rel="prefetch" href="/notes/assets/interview6.html.f78cad96.js"><link rel="prefetch" href="/notes/assets/interview7.html.4f63e760.js"><link rel="prefetch" href="/notes/assets/interview8.html.b1a49c1b.js"><link rel="prefetch" href="/notes/assets/interview9.html.9dde09ac.js"><link rel="prefetch" href="/notes/assets/adjacentSiblingCombinator.html.6752de17.js"><link rel="prefetch" href="/notes/assets/attributeSelectors.html.521ac97e.js"><link rel="prefetch" href="/notes/assets/charset.html.27865e32.js"><link rel="prefetch" href="/notes/assets/childCombinator.html.a0682b50.js"><link rel="prefetch" href="/notes/assets/classSelectors.html.7d43332f.js"><link rel="prefetch" href="/notes/assets/descendantCombinator.html.c794930d.js"><link rel="prefetch" href="/notes/assets/generalSiblingCombinator.html.1bac4a9d.js"><link rel="prefetch" href="/notes/assets/iDSelectors.html.015bb9b9.js"><link rel="prefetch" href="/notes/assets/pseudoClasses.html.64d51fc5.js"><link rel="prefetch" href="/notes/assets/pseudoElements.html.fd0cc7ae.js"><link rel="prefetch" href="/notes/assets/selectorList.html.04299cc9.js"><link rel="prefetch" href="/notes/assets/typeSelectors.html.6010437b.js"><link rel="prefetch" href="/notes/assets/universalSelectors.html.dee5fec4.js"><link rel="prefetch" href="/notes/assets/IterationProtocols.html.ee5ae73a.js"><link rel="prefetch" href="/notes/assets/arrayFlat.html.ecebfa5d.js"><link rel="prefetch" href="/notes/assets/asyncHistory.html.55e03b25.js"><link rel="prefetch" href="/notes/assets/eventLoop.html.9b76a0fd.js"><link rel="prefetch" href="/notes/assets/fileReader.html.3be8cb41.js"><link rel="prefetch" href="/notes/assets/formData.html.02a2b92a.js"><link rel="prefetch" href="/notes/assets/functionGenerator.html.d81f0f10.js"><link rel="prefetch" href="/notes/assets/generator.html.02728b85.js"><link rel="prefetch" href="/notes/assets/intersectionObserver.html.b41f01b1.js"><link rel="prefetch" href="/notes/assets/map.html.869fb789.js"><link rel="prefetch" href="/notes/assets/promise.html.550342c1.js"><link rel="prefetch" href="/notes/assets/set.html.e77846cd.js"><link rel="prefetch" href="/notes/assets/string.html.59b40ffc.js"><link rel="prefetch" href="/notes/assets/symbol.html.751962a8.js"><link rel="prefetch" href="/notes/assets/xMLHttpRequest.html.76b7f660.js"><link rel="prefetch" href="/notes/assets/spreadSyntax.html.807a83ef.js"><link rel="prefetch" href="/notes/assets/strictMode.html.34b27b79.js"><link rel="prefetch" href="/notes/assets/cache.html.c6522965.js"><link rel="prefetch" href="/notes/assets/drag1.html.5cc3b0da.js"><link rel="prefetch" href="/notes/assets/oneLineCode.html.2e606e52.js"><link rel="prefetch" href="/notes/assets/oneLineCodeArray.html.4048850e.js"><link rel="prefetch" href="/notes/assets/oneLineCodeDOM.html.88806006.js"><link rel="prefetch" href="/notes/assets/oneLineCodeDateTime.html.dea33f74.js"><link rel="prefetch" href="/notes/assets/oneLineCodeFunction.html.f0e6dfbc.js"><link rel="prefetch" href="/notes/assets/oneLineCodeMath.html.8b8558ad.js"><link rel="prefetch" href="/notes/assets/oneLineCodeMisc.html.81b2b576.js"><link rel="prefetch" href="/notes/assets/oneLineCodeNumber.html.9d9b981a.js"><link rel="prefetch" href="/notes/assets/oneLineCodeObject.html.ddd23dc0.js"><link rel="prefetch" href="/notes/assets/oneLineCodeRandom.html.1877ebd8.js"><link rel="prefetch" href="/notes/assets/oneLineCodeString.html.33b48cfc.js"><link rel="prefetch" href="/notes/assets/oneLineCodeValidator.html.bb23bc9a.js"><link rel="prefetch" href="/notes/assets/typeScriptCache.html.9d7cd13d.js"><link rel="prefetch" href="/notes/assets/reactBase.html.624b081e.js"><link rel="prefetch" href="/notes/assets/reactTypescript.html.b25b56c1.js"><link rel="prefetch" href="/notes/assets/vue2Base.html.78c1dccc.js"><link rel="prefetch" href="/notes/assets/vue2Table.html.6a5dd9e9.js"><link rel="prefetch" href="/notes/assets/vue2offsetTop.html.a980a13b.js"><link rel="prefetch" href="/notes/assets/componentWillXXX.html.46e64cd9.js"><link rel="prefetch" href="/notes/assets/disrupt.html.80ba103e.js"><link rel="prefetch" href="/notes/assets/lane.html.4e140709.js"><link rel="prefetch" href="/notes/assets/prepare.html.d05a2549.js"><link rel="prefetch" href="/notes/assets/redux.html.027fa9fb.js"><link rel="prefetch" href="/notes/assets/scheduler.html.708be132.js"><link rel="prefetch" href="/notes/assets/multi.html.bee1a26f.js"><link rel="prefetch" href="/notes/assets/one.html.8267d54d.js"><link rel="prefetch" href="/notes/assets/prepare.html.6bbe6381.js"><link rel="prefetch" href="/notes/assets/create.html.0e33ff65.js"><link rel="prefetch" href="/notes/assets/prepare.html.64188691.js"><link rel="prefetch" href="/notes/assets/structure.html.499da036.js"><link rel="prefetch" href="/notes/assets/useeffect.html.d331ff87.js"><link rel="prefetch" href="/notes/assets/usememo.html.f0a17878.js"><link rel="prefetch" href="/notes/assets/useref.html.6a788b1f.js"><link rel="prefetch" href="/notes/assets/usestate.html.c146198b.js"><link rel="prefetch" href="/notes/assets/file.html.1566405b.js"><link rel="prefetch" href="/notes/assets/idea.html.d348b032.js"><link rel="prefetch" href="/notes/assets/jsx.html.bfe0b6ee.js"><link rel="prefetch" href="/notes/assets/newConstructure.html.863ee8cc.js"><link rel="prefetch" href="/notes/assets/oldConstructure.html.4edb6b27.js"><link rel="prefetch" href="/notes/assets/source.html.2392f4c5.js"><link rel="prefetch" href="/notes/assets/summary.html.ff57867d.js"><link rel="prefetch" href="/notes/assets/basePrinciple.html.eba582cd.js"><link rel="prefetch" href="/notes/assets/componentApi.html.87fb9c52.js"><link rel="prefetch" href="/notes/assets/domApi.html.ed0705f7.js"><link rel="prefetch" href="/notes/assets/hoc.html.769ebb6d.js"><link rel="prefetch" href="/notes/assets/hookApi.html.83072269.js"><link rel="prefetch" href="/notes/assets/hookCustom.html.9b805ed8.js"><link rel="prefetch" href="/notes/assets/hookPrinciple.html.715c94ed.js"><link rel="prefetch" href="/notes/assets/hookUse.html.65779c25.js"><link rel="prefetch" href="/notes/assets/reactKeeplive.html.eba4d295.js"><link rel="prefetch" href="/notes/assets/reactRedux.html.b905a858.js"><link rel="prefetch" href="/notes/assets/reactRouter.html.b4038950.js"><link rel="prefetch" href="/notes/assets/toolApi.html.9993b95d.js"><link rel="prefetch" href="/notes/assets/beginWork.html.48be20a6.js"><link rel="prefetch" href="/notes/assets/completeWork.html.326c7689.js"><link rel="prefetch" href="/notes/assets/doubleBuffer.html.099882d2.js"><link rel="prefetch" href="/notes/assets/fiber-mental.html.ec68a17a.js"><link rel="prefetch" href="/notes/assets/fiber.html.7bd1ad17.js"><link rel="prefetch" href="/notes/assets/reconciler.html.a9f754b9.js"><link rel="prefetch" href="/notes/assets/beforeMutation.html.78330410.js"><link rel="prefetch" href="/notes/assets/layout.html.920feb57.js"><link rel="prefetch" href="/notes/assets/mutation.html.cbbfab65.js"><link rel="prefetch" href="/notes/assets/prepare.html.4c9c9cee.js"><link rel="prefetch" href="/notes/assets/mental.html.acc27a56.js"><link rel="prefetch" href="/notes/assets/prepare.html.5ab8d805.js"><link rel="prefetch" href="/notes/assets/priority.html.faf96498.js"><link rel="prefetch" href="/notes/assets/reactdom.html.aa87707b.js"><link rel="prefetch" href="/notes/assets/setstate.html.17936fb0.js"><link rel="prefetch" href="/notes/assets/update.html.ee65b408.js"><link rel="prefetch" href="/notes/assets/bitfiled.html.341ae1c9.js"><link rel="prefetch" href="/notes/assets/dfs.html.cdad358f.js"><link rel="prefetch" href="/notes/assets/diff.html.dd373fe7.js"><link rel="prefetch" href="/notes/assets/heapsort.html.95b7507a.js"><link rel="prefetch" href="/notes/assets/linkedlist.html.fcd5e258.js"><link rel="prefetch" href="/notes/assets/stack.html.ed9c5f4c.js"><link rel="prefetch" href="/notes/assets/bootstrap.html.469f6050.js"><link rel="prefetch" href="/notes/assets/context.html.fc072afb.js"><link rel="prefetch" href="/notes/assets/fibertree-commit.html.e7a14211.js"><link rel="prefetch" href="/notes/assets/fibertree-create.html.4100460c.js"><link rel="prefetch" href="/notes/assets/fibertree-prepare.html.b44bcc96.js"><link rel="prefetch" href="/notes/assets/fibertree-update.html.83b19f13.js"><link rel="prefetch" href="/notes/assets/hook-effect.html.7daeffa9.js"><link rel="prefetch" href="/notes/assets/hook-state.html.88056ea5.js"><link rel="prefetch" href="/notes/assets/hook-summary.html.0eb9c43d.js"><link rel="prefetch" href="/notes/assets/macro-structure.html.e599c5d1.js"><link rel="prefetch" href="/notes/assets/object-structure.html.1ee943b8.js"><link rel="prefetch" href="/notes/assets/priority.html.cdee8eb4.js"><link rel="prefetch" href="/notes/assets/reconciler-workflow.html.d4121555.js"><link rel="prefetch" href="/notes/assets/scheduler.html.fc484dc1.js"><link rel="prefetch" href="/notes/assets/state-effects.html.e1a2824b.js"><link rel="prefetch" href="/notes/assets/synthetic-event.html.cb72042f.js"><link rel="prefetch" href="/notes/assets/workloop.html.2130df22.js"><link rel="prefetch" href="/notes/assets/ast.html.b400a256.js"><link rel="prefetch" href="/notes/assets/binder.html.03e242a3.js"><link rel="prefetch" href="/notes/assets/checker.html.af0c8d66.js"><link rel="prefetch" href="/notes/assets/emitter.html.60750975.js"><link rel="prefetch" href="/notes/assets/overview.html.744f86fe.js"><link rel="prefetch" href="/notes/assets/parser.html.eecb5d49.js"><link rel="prefetch" href="/notes/assets/program.html.d41b0b19.js"><link rel="prefetch" href="/notes/assets/scanner.html.3f807fb2.js"><link rel="prefetch" href="/notes/assets/common.html.371c51c8.js"><link rel="prefetch" href="/notes/assets/interpreting.html.1a87553f.js"><link rel="prefetch" href="/notes/assets/class.html.3005ef11.js"><link rel="prefetch" href="/notes/assets/commandline-behavior.html.4a278b6a.js"><link rel="prefetch" href="/notes/assets/comments.html.a687597c.js"><link rel="prefetch" href="/notes/assets/common-bug-not-bugs.html.1f6f9373.js"><link rel="prefetch" href="/notes/assets/common-feature-request.html.0932dc0b.js"><link rel="prefetch" href="/notes/assets/decorators.html.d8ea07c8.js"><link rel="prefetch" href="/notes/assets/enums.html.528b2c83.js"><link rel="prefetch" href="/notes/assets/function.html.61eebf3d.js"><link rel="prefetch" href="/notes/assets/generics.html.f37bbb2f.js"><link rel="prefetch" href="/notes/assets/glossary-and-terms.html.51c2c8b3.js"><link rel="prefetch" href="/notes/assets/jsx-and-react.html.e7589a6b.js"><link rel="prefetch" href="/notes/assets/modules.html.c8a2f74b.js"><link rel="prefetch" href="/notes/assets/thing-that-dont-work.html.d8d152c7.js"><link rel="prefetch" href="/notes/assets/tsconfig-behavior.html.64b8ebbd.js"><link rel="prefetch" href="/notes/assets/type-guards.html.10ed4360.js"><link rel="prefetch" href="/notes/assets/type-system-behavior.html.e75f83e0.js"><link rel="prefetch" href="/notes/assets/nonReactJSX.html.2f79853f.js"><link rel="prefetch" href="/notes/assets/reactJSX.html.58a73adf.js"><link rel="prefetch" href="/notes/assets/support.html.ff7e625e.js"><link rel="prefetch" href="/notes/assets/typescript-3.7.html.ea404e48.js"><link rel="prefetch" href="/notes/assets/typescript-3.8.html.a9599a8f.js"><link rel="prefetch" href="/notes/assets/typescript-3.9.html.4e54a9a9.js"><link rel="prefetch" href="/notes/assets/compilationContext.html.ccf51f0e.js"><link rel="prefetch" href="/notes/assets/declarationspaces.html.57154145.js"><link rel="prefetch" href="/notes/assets/dynamicImportExpressions.html.9cb6f2ec.js"><link rel="prefetch" href="/notes/assets/inDepthTs.html.3ed991b1.js"><link rel="prefetch" href="/notes/assets/modules.html.9349b344.js"><link rel="prefetch" href="/notes/assets/namespaces.html.2c417047.js"><link rel="prefetch" href="/notes/assets/unknownAny.html.368ae4db.js"><link rel="prefetch" href="/notes/assets/avoidExportDefault.html.211c6d7a.js"><link rel="prefetch" href="/notes/assets/barrel.html.3e49ad2e.js"><link rel="prefetch" href="/notes/assets/bind.html.884a0f96.js"><link rel="prefetch" href="/notes/assets/buildToggles.html.9249ab95.js"><link rel="prefetch" href="/notes/assets/classAreUseful.html.09e32082.js"><link rel="prefetch" href="/notes/assets/covarianceAndContravariance.html.b4a2bc3d.js"><link rel="prefetch" href="/notes/assets/createArrays.html.3fe4bfd7.js"><link rel="prefetch" href="/notes/assets/curry.html.bb078cb8.js"><link rel="prefetch" href="/notes/assets/functionParameters.html.86e08278.js"><link rel="prefetch" href="/notes/assets/infer.html.8fc8b8d7.js"><link rel="prefetch" href="/notes/assets/lazyObjectLiteralInitialization.html.deef35e2.js"><link rel="prefetch" href="/notes/assets/limitPropertySetters.html.8d4b11c4.js"><link rel="prefetch" href="/notes/assets/metadata.html.4986b16a.js"><link rel="prefetch" href="/notes/assets/nominalTyping.html.b2da4104.js"><link rel="prefetch" href="/notes/assets/outFileCaution.html.3e44b52b.js"><link rel="prefetch" href="/notes/assets/singletonPatern.html.1b83f5dd.js"><link rel="prefetch" href="/notes/assets/statefulFunctions.html.b5c489f7.js"><link rel="prefetch" href="/notes/assets/staticConstructors.html.47d6c76b.js"><link rel="prefetch" href="/notes/assets/stringBasedEmuns.html.f84babf2.js"><link rel="prefetch" href="/notes/assets/truthy.html.f3fa251a.js"><link rel="prefetch" href="/notes/assets/typeInstantiation.html.5789d056.js"><link rel="prefetch" href="/notes/assets/typesafeEventEmitter.html.598e3cba.js"><link rel="prefetch" href="/notes/assets/ambient.html.8b2a1a18.js"><link rel="prefetch" href="/notes/assets/callable.html.6bdddb9e.js"><link rel="prefetch" href="/notes/assets/discrominatedUnion.html.4ce620c5.js"><link rel="prefetch" href="/notes/assets/enums.html.f633a2a4.js"><link rel="prefetch" href="/notes/assets/exceptionsHanding.html.d9ce1a99.js"><link rel="prefetch" href="/notes/assets/freshness.html.efa5ccab.js"><link rel="prefetch" href="/notes/assets/functions.html.871418f2.js"><link rel="prefetch" href="/notes/assets/generices.html.b06a67ff.js"><link rel="prefetch" href="/notes/assets/indexSignatures.html.373d3332.js"><link rel="prefetch" href="/notes/assets/interfaces.html.60e289d6.js"><link rel="prefetch" href="/notes/assets/lib.html.8a7bfa15.js"><link rel="prefetch" href="/notes/assets/literals.html.7490b426.js"><link rel="prefetch" href="/notes/assets/migrating.html.8a864bbf.js"><link rel="prefetch" href="/notes/assets/mixins.html.46d66d87.js"><link rel="prefetch" href="/notes/assets/movingTypes.html.dc928b15.js"><link rel="prefetch" href="/notes/assets/neverType.html.7f7571b1.js"><link rel="prefetch" href="/notes/assets/overview.html.0a339e08.js"><link rel="prefetch" href="/notes/assets/readonly.html.a7f3322a.js"><link rel="prefetch" href="/notes/assets/thisType.html.a93e875e.js"><link rel="prefetch" href="/notes/assets/typeAssertion.html.4bab3146.js"><link rel="prefetch" href="/notes/assets/typeCompatibility.html.577683e8.js"><link rel="prefetch" href="/notes/assets/typeGuard.html.4b47469d.js"><link rel="prefetch" href="/notes/assets/typeInference.html.f9f49371.js"><link rel="prefetch" href="/notes/assets/types.html.d28467f7.js"><link rel="prefetch" href="/notes/assets/pluginDva.html.124b82dc.js"><link rel="prefetch" href="/notes/assets/pluginQiankun.html.71fa386d.js"><link rel="prefetch" href="/notes/assets/codegen.html.9206928a.js"><link rel="prefetch" href="/notes/assets/entrance.html.87f26a1c.js"><link rel="prefetch" href="/notes/assets/optimize.html.f6a400f3.js"><link rel="prefetch" href="/notes/assets/outline.html.4518262e.js"><link rel="prefetch" href="/notes/assets/parse.html.faa15069.js"><link rel="prefetch" href="/notes/assets/async-component.html.ceb20d35.js"><link rel="prefetch" href="/notes/assets/component-register.html.e8e00e3e.js"><link rel="prefetch" href="/notes/assets/create-component.html.48027a69.js"><link rel="prefetch" href="/notes/assets/lifecycle.html.48ac433f.js"><link rel="prefetch" href="/notes/assets/merge-option.html.b8007d63.js"><link rel="prefetch" href="/notes/assets/outline.html.45842f27.js"><link rel="prefetch" href="/notes/assets/patch.html.7bb30a9e.js"><link rel="prefetch" href="/notes/assets/_index.html.1f6ea5c3.js"><link rel="prefetch" href="/notes/assets/create-element.html.a152c748.js"><link rel="prefetch" href="/notes/assets/mounted.html.64becaec.js"><link rel="prefetch" href="/notes/assets/new-vue.html.a57ae88b.js"><link rel="prefetch" href="/notes/assets/render.html.7fddf8ac.js"><link rel="prefetch" href="/notes/assets/update.html.03315720.js"><link rel="prefetch" href="/notes/assets/virtual-dom.html.b04d33df.js"><link rel="prefetch" href="/notes/assets/event.html.28b67869.js"><link rel="prefetch" href="/notes/assets/keep-alive.html.7cdcedf8.js"><link rel="prefetch" href="/notes/assets/outline.html.d50fcc7b.js"><link rel="prefetch" href="/notes/assets/slot.html.a5b32e85.js"><link rel="prefetch" href="/notes/assets/tansition-group.html.07c59cdb.js"><link rel="prefetch" href="/notes/assets/tansition.html.dcf06e2e.js"><link rel="prefetch" href="/notes/assets/v-model.html.88138a43.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.333348e1.js"><link rel="prefetch" href="/notes/assets/baseInterviewSecond.html.e32b5f96.js"><link rel="prefetch" href="/notes/assets/componentCommunication.html.22ef8606.js"><link rel="prefetch" href="/notes/assets/detailedResponsiveness.html.4d10183f.js"><link rel="prefetch" href="/notes/assets/diff.html.15c056b6.js"><link rel="prefetch" href="/notes/assets/eventBinding.html.2f5b7fc9.js"><link rel="prefetch" href="/notes/assets/eventMechanism.html.33d5ea3a.js"><link rel="prefetch" href="/notes/assets/key.html.739c3c67.js"><link rel="prefetch" href="/notes/assets/knowledgeSystem.html.13d45b9f.js"><link rel="prefetch" href="/notes/assets/slot.html.160195f4.js"><link rel="prefetch" href="/notes/assets/sourceCodeAsyncDomUpdateNextTick.html.c472008b.js"><link rel="prefetch" href="/notes/assets/sourceCodeElementBroadcastDispatch.html.cd147411.js"><link rel="prefetch" href="/notes/assets/sourceCodeKeepAlive.html.d4683109.js"><link rel="prefetch" href="/notes/assets/sourceCodeResponsiveness.html.dd3c8d7c.js"><link rel="prefetch" href="/notes/assets/sourceCodeTemplateCompilation.html.06067411.js"><link rel="prefetch" href="/notes/assets/sourceCodeTemplateDom.html.96f21c0f.js"><link rel="prefetch" href="/notes/assets/sourceCodeVuex.html.452f57ce.js"><link rel="prefetch" href="/notes/assets/templateCompilation.html.49d22423.js"><link rel="prefetch" href="/notes/assets/vNode.html.642a75dc.js"><link rel="prefetch" href="/notes/assets/vNodeDiff.html.37dea167.js"><link rel="prefetch" href="/notes/assets/build.html.f1d8e283.js"><link rel="prefetch" href="/notes/assets/directory.html.bdc23a19.js"><link rel="prefetch" href="/notes/assets/entrance.html.c226e526.js"><link rel="prefetch" href="/notes/assets/flow.html.6a5090bb.js"><link rel="prefetch" href="/notes/assets/component-update.html.82b6205c.js"><link rel="prefetch" href="/notes/assets/computed-watcher.html.26dd2306.js"><link rel="prefetch" href="/notes/assets/getters.html.9b5bf449.js"><link rel="prefetch" href="/notes/assets/next-tick.html.832b2544.js"><link rel="prefetch" href="/notes/assets/outline.html.247750bd.js"><link rel="prefetch" href="/notes/assets/props.html.0d0b6bab.js"><link rel="prefetch" href="/notes/assets/questions.html.4913a974.js"><link rel="prefetch" href="/notes/assets/reactive-object.html.902e4005.js"><link rel="prefetch" href="/notes/assets/setters.html.f95414b6.js"><link rel="prefetch" href="/notes/assets/summary.html.3402b560.js"><link rel="prefetch" href="/notes/assets/install.html.fe0eb0ac.js"><link rel="prefetch" href="/notes/assets/matcher.html.beef4e5e.js"><link rel="prefetch" href="/notes/assets/outline.html.0092bd1e.js"><link rel="prefetch" href="/notes/assets/router.html.40cacf03.js"><link rel="prefetch" href="/notes/assets/transition-to.html.27ec532b.js"><link rel="prefetch" href="/notes/assets/api.html.781f9919.js"><link rel="prefetch" href="/notes/assets/idex.html.fd8a2725.js"><link rel="prefetch" href="/notes/assets/init.html.b4723dfb.js"><link rel="prefetch" href="/notes/assets/plugin.html.f10b5499.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.975b47dd.js"><link rel="prefetch" href="/notes/assets/configuration.html.b281a6f6.js"><link rel="prefetch" href="/notes/assets/entryPoints.html.37c3daf8.js"><link rel="prefetch" href="/notes/assets/loader.html.0ee9f618.js"><link rel="prefetch" href="/notes/assets/output.html.eb71ccdf.js"><link rel="prefetch" href="/notes/assets/plugin.html.cb1b0b59.js"><link rel="prefetch" href="/notes/assets/webpackInterview.html.3a154eb0.js"><link rel="prefetch" href="/notes/assets/reactApi.html.c8744e85.js"><link rel="prefetch" href="/notes/assets/reactChildren.html.f5776ec8.js"><link rel="prefetch" href="/notes/assets/reactElement.html.d4731e40.js"><link rel="prefetch" href="/notes/assets/reactFiber.html.218d6731.js"><link rel="prefetch" href="/notes/assets/commitAllHostEffects.html.970eac2a.js"><link rel="prefetch" href="/notes/assets/commitAllLifeCycles.html.e41302a1.js"><link rel="prefetch" href="/notes/assets/commitBeforeMutationLifecycles.html.ca8bb2bc.js"><link rel="prefetch" href="/notes/assets/commitDeletion.html.adde4740.js"><link rel="prefetch" href="/notes/assets/commitPlacement.html.9fcbc252.js"><link rel="prefetch" href="/notes/assets/commitRoot.html.59f0f8ab.js"><link rel="prefetch" href="/notes/assets/commitWork.html.151c7557.js"><link rel="prefetch" href="/notes/assets/invokeGuardedCallback.html.ec7c2dc3.js"><link rel="prefetch" href="/notes/assets/expirationTime.html.f618dc28.js"><link rel="prefetch" href="/notes/assets/reactDomRender.html.960931f2.js"><link rel="prefetch" href="/notes/assets/setStateForceUpdate.html.6c083638.js"><link rel="prefetch" href="/notes/assets/context.html.a10525df.js"><link rel="prefetch" href="/notes/assets/evenInit.html.21781f9e.js"><link rel="prefetch" href="/notes/assets/eventBind.html.81d434ca.js"><link rel="prefetch" href="/notes/assets/eventCreateEventObject.html.ee33e75c.js"><link rel="prefetch" href="/notes/assets/eventDispath.html.955f987f.js"><link rel="prefetch" href="/notes/assets/hydrate.html.956d9100.js"><link rel="prefetch" href="/notes/assets/ref.html.d5cf7e46.js"><link rel="prefetch" href="/notes/assets/suspense.html.65be2fc0.js"><link rel="prefetch" href="/notes/assets/suspenseLazy.html.e5680fbe.js"><link rel="prefetch" href="/notes/assets/suspenseWork.html.fac205f7.js"><link rel="prefetch" href="/notes/assets/hooksCommon.html.65080171.js"><link rel="prefetch" href="/notes/assets/hooksOther.html.570e91a5.js"><link rel="prefetch" href="/notes/assets/start.html.af4ca005.js"><link rel="prefetch" href="/notes/assets/useEffect.html.370659b8.js"><link rel="prefetch" href="/notes/assets/useState.html.a1c463ad.js"><link rel="prefetch" href="/notes/assets/base.html.0cdd85bb.js"><link rel="prefetch" href="/notes/assets/commpontDiff.html.d572c430.js"><link rel="prefetch" href="/notes/assets/componentUpdate.html.9ec691f9.js"><link rel="prefetch" href="/notes/assets/renderProcess.html.fb9f4238.js"><link rel="prefetch" href="/notes/assets/schedulingPrinciple.html.f7faecdd.js"><link rel="prefetch" href="/notes/assets/beginWork.html.07467e4f.js"><link rel="prefetch" href="/notes/assets/globalVariable.html.0493971a.js"><link rel="prefetch" href="/notes/assets/mountIndeterminateComponent.html.8af88ec9.js"><link rel="prefetch" href="/notes/assets/mountLazyCompont.html.fedf4af9.js"><link rel="prefetch" href="/notes/assets/performUnitOfWork.html.85abea4f.js"><link rel="prefetch" href="/notes/assets/performWork.html.df7ca8a7.js"><link rel="prefetch" href="/notes/assets/reactScheduler.html.89c7632b.js"><link rel="prefetch" href="/notes/assets/reconcileChildren.html.a7636b48.js"><link rel="prefetch" href="/notes/assets/reconcileChildrenArray.html.a48175f4.js"><link rel="prefetch" href="/notes/assets/reconcileSingleElement.html.8bb5ff2e.js"><link rel="prefetch" href="/notes/assets/renderRoot.html.d2e36335.js"><link rel="prefetch" href="/notes/assets/scheduleWork.html.c6a5836c.js"><link rel="prefetch" href="/notes/assets/throwException.html.83ee3ea3.js"><link rel="prefetch" href="/notes/assets/updateClassComponent.html.7ef13aa3.js"><link rel="prefetch" href="/notes/assets/updateContextConsumer.html.d28d0732.js"><link rel="prefetch" href="/notes/assets/updateContextProvider.html.8e3034bf.js"><link rel="prefetch" href="/notes/assets/updateForwardRef.html.f982e019.js"><link rel="prefetch" href="/notes/assets/updateFragment.html.d751c72a.js"><link rel="prefetch" href="/notes/assets/updateFunctionalComponent.html.10a8fc18.js"><link rel="prefetch" href="/notes/assets/updateHostComponent.html.a9131d9c.js"><link rel="prefetch" href="/notes/assets/updateHostRoot.html.0287bbb9.js"><link rel="prefetch" href="/notes/assets/updateHostText.html.689102a7.js"><link rel="prefetch" href="/notes/assets/updateMode.html.bdc59166.js"><link rel="prefetch" href="/notes/assets/updatePortalComponent.html.7fca5d24.js"><link rel="prefetch" href="/notes/assets/updateProfiler.html.1f9c1711.js"><link rel="prefetch" href="/notes/assets/updateSuspenseComponent.html.d6f9ffce.js"><link rel="prefetch" href="/notes/assets/interview1.html.b57a775e.js"><link rel="prefetch" href="/notes/assets/interview2.html.c99b58d8.js"><link rel="prefetch" href="/notes/assets/interview3.html.496f5dd7.js"><link rel="prefetch" href="/notes/assets/interview51.html.26128fe9.js"><link rel="prefetch" href="/notes/assets/interview52.html.8de22d29.js"><link rel="prefetch" href="/notes/assets/interview53.html.d5ed1de1.js"><link rel="prefetch" href="/notes/assets/interview54.html.21aa3465.js"><link rel="prefetch" href="/notes/assets/interview55.html.f1bf8aa4.js"><link rel="prefetch" href="/notes/assets/interview56.html.973fb6c9.js"><link rel="prefetch" href="/notes/assets/interview57.html.55c8138e.js"><link rel="prefetch" href="/notes/assets/interview1.html.9803147f.js"><link rel="prefetch" href="/notes/assets/interview10.html.3bd06693.js"><link rel="prefetch" href="/notes/assets/interview11.html.87295979.js"><link rel="prefetch" href="/notes/assets/interview12.html.197f78df.js"><link rel="prefetch" href="/notes/assets/interview13.html.51064b87.js"><link rel="prefetch" href="/notes/assets/interview14.html.aed0258d.js"><link rel="prefetch" href="/notes/assets/interview15.html.6317d62f.js"><link rel="prefetch" href="/notes/assets/interview16.html.a599e16c.js"><link rel="prefetch" href="/notes/assets/interview17.html.c41ca13d.js"><link rel="prefetch" href="/notes/assets/interview18.html.94361f24.js"><link rel="prefetch" href="/notes/assets/interview19.html.befd810d.js"><link rel="prefetch" href="/notes/assets/interview2.html.e5266962.js"><link rel="prefetch" href="/notes/assets/interview20.html.102d5835.js"><link rel="prefetch" href="/notes/assets/interview21.html.e00c409b.js"><link rel="prefetch" href="/notes/assets/interview22.html.224a0d1d.js"><link rel="prefetch" href="/notes/assets/interview23.html.24bb951a.js"><link rel="prefetch" href="/notes/assets/interview24.html.5df11ec5.js"><link rel="prefetch" href="/notes/assets/interview25.html.ab3e8b6e.js"><link rel="prefetch" href="/notes/assets/interview26.html.e11aeaa4.js"><link rel="prefetch" href="/notes/assets/interview27.html.f4876d6f.js"><link rel="prefetch" href="/notes/assets/interview28.html.9280820a.js"><link rel="prefetch" href="/notes/assets/interview29.html.d6cfc607.js"><link rel="prefetch" href="/notes/assets/interview3.html.79df1aa5.js"><link rel="prefetch" href="/notes/assets/interview30.html.6cff6821.js"><link rel="prefetch" href="/notes/assets/interview31.html.b9fc4058.js"><link rel="prefetch" href="/notes/assets/interview32.html.9d6d2851.js"><link rel="prefetch" href="/notes/assets/interview33.html.7ae29338.js"><link rel="prefetch" href="/notes/assets/interview34.html.a888cef4.js"><link rel="prefetch" href="/notes/assets/interview35.html.6f6b4076.js"><link rel="prefetch" href="/notes/assets/interview36.html.500618fd.js"><link rel="prefetch" href="/notes/assets/interview37.html.4db25f34.js"><link rel="prefetch" href="/notes/assets/interview38.html.4d84d1f3.js"><link rel="prefetch" href="/notes/assets/interview39.html.cd63c417.js"><link rel="prefetch" href="/notes/assets/interview4.html.6c5c1680.js"><link rel="prefetch" href="/notes/assets/interview40.html.2da218f1.js"><link rel="prefetch" href="/notes/assets/interview41.html.a3484c8b.js"><link rel="prefetch" href="/notes/assets/interview42.html.8ab232c9.js"><link rel="prefetch" href="/notes/assets/interview43.html.689e0e72.js"><link rel="prefetch" href="/notes/assets/interview44.html.5125344a.js"><link rel="prefetch" href="/notes/assets/interview45.html.7200c09f.js"><link rel="prefetch" href="/notes/assets/interview46.html.1e589add.js"><link rel="prefetch" href="/notes/assets/interview47.html.6dfa952f.js"><link rel="prefetch" href="/notes/assets/interview48.html.833f1ab9.js"><link rel="prefetch" href="/notes/assets/interview49.html.9edc7685.js"><link rel="prefetch" href="/notes/assets/interview5.html.f419469d.js"><link rel="prefetch" href="/notes/assets/interview50.html.780a3fad.js"><link rel="prefetch" href="/notes/assets/interview6.html.7031ad0e.js"><link rel="prefetch" href="/notes/assets/interview7.html.d29fe602.js"><link rel="prefetch" href="/notes/assets/interview8.html.f8287f38.js"><link rel="prefetch" href="/notes/assets/interview9.html.fe6fe8cc.js"><link rel="prefetch" href="/notes/assets/404.html.53392900.js"><link rel="prefetch" href="/notes/assets/404.717ff6a0.js"><link rel="prefetch" href="/notes/assets/Layout.77a7a3a5.js">
    <link rel="stylesheet" href="/notes/assets/style.524e36e5.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/notes/" class=""><!----><!----></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">js 高频手写题 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_1-实现instanceof的3种方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 实现instanceOf的3种方式"><!--[--><!--]--> 1. 实现instanceOf的3种方式 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#递归实现-方式1" class="router-link-active router-link-exact-active sidebar-item" aria-label="递归实现(方式1)"><!--[--><!--]--> 递归实现(方式1) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#遍历实现-方式2" class="router-link-active router-link-exact-active sidebar-item" aria-label="遍历实现(方式2)"><!--[--><!--]--> 遍历实现(方式2) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#遍历实现-方式3" class="router-link-active router-link-exact-active sidebar-item" aria-label="遍历实现(方式3)"><!--[--><!--]--> 遍历实现(方式3) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_2-实现json-stringify-超详细" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. 实现JSON.stringify(超详细)"><!--[--><!--]--> 2. 实现JSON.stringify(超详细) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_3-实现一个promise" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. 实现一个Promise"><!--[--><!--]--> 3. 实现一个Promise <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_4-实现多维数组扁平化的3种方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="4. 实现多维数组扁平化的3种方式"><!--[--><!--]--> 4. 实现多维数组扁平化的3种方式 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#递归实现-方式1-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="递归实现(方式1)"><!--[--><!--]--> 递归实现(方式1) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#遍历实现-方式2-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="遍历实现(方式2)"><!--[--><!--]--> 遍历实现(方式2) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#原生flat-方式3" class="router-link-active router-link-exact-active sidebar-item" aria-label="原生flat(方式3)"><!--[--><!--]--> 原生flat(方式3) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_5-实现深拷贝" class="router-link-active router-link-exact-active sidebar-item" aria-label="5. 实现深拷贝"><!--[--><!--]--> 5. 实现深拷贝 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_6-实现new操作符" class="router-link-active router-link-exact-active sidebar-item" aria-label="6. 实现new操作符"><!--[--><!--]--> 6. 实现new操作符 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_7-实现发布订阅-eventemitter" class="router-link-active router-link-exact-active sidebar-item" aria-label="7. 实现发布订阅(EventEmitter)"><!--[--><!--]--> 7. 实现发布订阅(EventEmitter) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_8-实现有并行限制的promise" class="router-link-active router-link-exact-active sidebar-item" aria-label="8. 实现有并行限制的Promise"><!--[--><!--]--> 8. 实现有并行限制的Promise <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#解析" class="router-link-active router-link-exact-active sidebar-item" aria-label="解析"><!--[--><!--]--> 解析 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_9-手写lru算法-蚂蚁金服曾遇到过" class="router-link-active router-link-exact-active sidebar-item" aria-label="9. 手写LRU算法(蚂蚁金服曾遇到过)"><!--[--><!--]--> 9. 手写LRU算法(蚂蚁金服曾遇到过) <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#数组-对象实现方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="数组&amp;&amp;对象实现方式"><!--[--><!--]--> 数组&amp;&amp;对象实现方式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#map实现方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="Map实现方式"><!--[--><!--]--> Map实现方式 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_10-call" class="router-link-active router-link-exact-active sidebar-item" aria-label="10. call"><!--[--><!--]--> 10. call <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_11-apply" class="router-link-active router-link-exact-active sidebar-item" aria-label="11. apply"><!--[--><!--]--> 11. apply <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_12-实现trim方法的两种方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="12. 实现trim方法的两种方式"><!--[--><!--]--> 12. 实现trim方法的两种方式 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#去除空格法-方式1" class="router-link-active router-link-exact-active sidebar-item" aria-label="去除空格法(方式1)"><!--[--><!--]--> 去除空格法(方式1) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#字符提取法-方式2" class="router-link-active router-link-exact-active sidebar-item" aria-label="字符提取法(方式2)"><!--[--><!--]--> 字符提取法(方式2) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_13-实现promise-all" class="router-link-active router-link-exact-active sidebar-item" aria-label="13. 实现Promise.all"><!--[--><!--]--> 13. 实现Promise.all <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_14-实现promise-race" class="router-link-active router-link-exact-active sidebar-item" aria-label="14. 实现Promise.race"><!--[--><!--]--> 14. 实现Promise.race <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_15-object-create" class="router-link-active router-link-exact-active sidebar-item" aria-label="15. Object.create"><!--[--><!--]--> 15. Object.create <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_1-常规使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 常规使用"><!--[--><!--]--> 1. 常规使用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_2-创建原型为null的对象" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. 创建原型为null的对象"><!--[--><!--]--> 2. 创建原型为null的对象 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_3-第二个-propertiesobject参数" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. 第二个 propertiesObject参数"><!--[--><!--]--> 3. 第二个 propertiesObject参数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#代码实现" class="router-link-active router-link-exact-active sidebar-item" aria-label="代码实现"><!--[--><!--]--> 代码实现 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_16-快速排序" class="router-link-active router-link-exact-active sidebar-item" aria-label="16.快速排序"><!--[--><!--]--> 16.快速排序 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_17-冒泡排序" class="router-link-active router-link-exact-active sidebar-item" aria-label="17.冒泡排序"><!--[--><!--]--> 17.冒泡排序 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_18-选择排序" class="router-link-active router-link-exact-active sidebar-item" aria-label="18. 选择排序"><!--[--><!--]--> 18. 选择排序 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_19-插入排序" class="router-link-active router-link-exact-active sidebar-item" aria-label="19. 插入排序"><!--[--><!--]--> 19. 插入排序 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_20-settimeout模拟setinterval" class="router-link-active router-link-exact-active sidebar-item" aria-label="20. setTimeout模拟setInterval"><!--[--><!--]--> 20. setTimeout模拟setInterval <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_21-setinterval模拟settimeout" class="router-link-active router-link-exact-active sidebar-item" aria-label="21. setInterval模拟setTimeout"><!--[--><!--]--> 21. setInterval模拟setTimeout <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_22-数组去重的4种方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="22.数组去重的4种方式"><!--[--><!--]--> 22.数组去重的4种方式 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#利用set实现-方式1" class="router-link-active router-link-exact-active sidebar-item" aria-label="利用Set实现(方式1)"><!--[--><!--]--> 利用Set实现(方式1) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#indexof去重-方式2" class="router-link-active router-link-exact-active sidebar-item" aria-label="indexOf去重(方式2)"><!--[--><!--]--> indexOf去重(方式2) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#indexof去重-方式3" class="router-link-active router-link-exact-active sidebar-item" aria-label="indexOf去重(方式3)"><!--[--><!--]--> indexOf去重(方式3) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#array-from去重" class="router-link-active router-link-exact-active sidebar-item" aria-label="Array.from去重"><!--[--><!--]--> Array.from去重 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_23-手机号3-3-4分割" class="router-link-active router-link-exact-active sidebar-item" aria-label="23. 手机号3-3-4分割"><!--[--><!--]--> 23. 手机号3-3-4分割 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_24-千分位格式化数字" class="router-link-active router-link-exact-active sidebar-item" aria-label="24. 千分位格式化数字"><!--[--><!--]--> 24. 千分位格式化数字 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_25-二分查找" class="router-link-active router-link-exact-active sidebar-item" aria-label="25. 二分查找"><!--[--><!--]--> 25. 二分查找 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_26-版本比较的两种方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="26. 版本比较的两种方式"><!--[--><!--]--> 26. 版本比较的两种方式 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#详细规则" class="router-link-active router-link-exact-active sidebar-item" aria-label="详细规则"><!--[--><!--]--> 详细规则 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#源码实现" class="router-link-active router-link-exact-active sidebar-item" aria-label="源码实现"><!--[--><!--]--> 源码实现 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_27-解析-url-参数" class="router-link-active router-link-exact-active sidebar-item" aria-label="27. 解析 url 参数"><!--[--><!--]--> 27. 解析 url 参数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_28-实现获取js数据类型的通用函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="28. 实现获取js数据类型的通用函数"><!--[--><!--]--> 28. 实现获取js数据类型的通用函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_29-字符串转化为驼峰" class="router-link-active router-link-exact-active sidebar-item" aria-label="29. 字符串转化为驼峰"><!--[--><!--]--> 29. 字符串转化为驼峰 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#_30-实现reduce" class="router-link-active router-link-exact-active sidebar-item" aria-label="30. 实现reduce"><!--[--><!--]--> 30. 实现reduce <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#代码实现-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="代码实现"><!--[--><!--]--> 代码实现 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsInterview/jsHandwriting.html#测试" class="router-link-active router-link-exact-active sidebar-item" aria-label="测试"><!--[--><!--]--> 测试 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="js-高频手写题" tabindex="-1"><a class="header-anchor" href="#js-高频手写题" aria-hidden="true">#</a> js 高频手写题</h1><h2 id="_1-实现instanceof的3种方式" tabindex="-1"><a class="header-anchor" href="#_1-实现instanceof的3种方式" aria-hidden="true">#</a> 1. 实现instanceOf的3种方式</h2><div class="custom-container tip"><p class="custom-container-title">注意</p><p><code>instanceof</code> <strong>运算符</strong>用于检测构造函数的 <code>prototype</code> 属性是否出现在某个实例对象的原型链上。<a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2Finstanceof" target="_blank" rel="noopener noreferrer">MDN<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>上</p></div><p><strong>关键点</strong>: 构造函数Fn的<code>prototype</code>，实例对象的原型链。</p><p>所以只要遍历实例对象的原型链，挨个往上查找看是否有与Fn的<code>prototype</code>相等的原型，直到最顶层<code>Object</code>还找不到，那么就返回false。</p><h3 id="递归实现-方式1" tabindex="-1"><a class="header-anchor" href="#递归实现-方式1" aria-hidden="true">#</a> 递归实现(方式1)</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token doc-comment comment">/**
 * 
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">obj</span> 实例对象
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">func</span> 构造函数
 * <span class="token keyword">@returns</span> true false
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">instanceOf1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> func</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> func<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">instanceOf1</span><span class="token punctuation">(</span>proto<span class="token punctuation">,</span> func<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token keyword">let</span> <span class="token function-variable function">Fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf1</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Object<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf1</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf1</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf1</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="遍历实现-方式2" tabindex="-1"><a class="header-anchor" href="#遍历实现-方式2" aria-hidden="true">#</a> 遍历实现(方式2)</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * 
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">obj</span> 实例对象
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">func</span> 构造函数
 * <span class="token keyword">@returns</span> true false
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">instanceOf2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> func</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> proto <span class="token operator">=</span> obj

  <span class="token keyword">while</span> <span class="token punctuation">(</span>proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>proto<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> func<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token keyword">let</span> <span class="token function-variable function">Fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf2</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Object<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf2</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf2</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf2</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="遍历实现-方式3" tabindex="-1"><a class="header-anchor" href="#遍历实现-方式3" aria-hidden="true">#</a> 遍历实现(方式3)</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * 
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">obj</span> 实例对象
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">func</span> 构造函数
 * <span class="token keyword">@returns</span> true false
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">instanceOf3</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> func</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> proto <span class="token operator">=</span> obj
  <span class="token comment">// 因为一定会有结束的时候（最顶层Object），所以不会是死循环</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> func<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>proto<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token keyword">let</span> <span class="token function-variable function">Fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf3</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Object<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf3</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf3</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf3</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">instanceOf3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> Fn<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h2 id="_2-实现json-stringify-超详细" tabindex="-1"><a class="header-anchor" href="#_2-实现json-stringify-超详细" aria-hidden="true">#</a> 2. 实现JSON.stringify(超详细)</h2><div class="custom-container tip"><p class="custom-container-title">注意</p><p><code>JSON.stringify()</code> 方法将一个 JavaScript 对象或值转换为 JSON 字符串，如果指定了一个 replacer 函数，则可以选择性地替换值，或者指定的 replacer 是数组，则可选择性地仅包含数组指定的属性。<a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FJSON%2Fstringify" target="_blank" rel="noopener noreferrer">MDN<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><p><a href="/notes/jsInterview/jsonStringify.html" class="">详解json stringify</a></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">jsonstringify</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 确认一个对象是否存在循环引用</span>
  <span class="token keyword">const</span> <span class="token function-variable function">isCyclic</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 使用Set数据类型来存储已经检测过的对象</span>
  <span class="token keyword">let</span> stackSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> detected <span class="token operator">=</span> <span class="token boolean">false</span>

  <span class="token keyword">const</span> <span class="token function-variable function">detect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 不是对象类型的话，可以直接跳过</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> obj <span class="token operator">!=</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 当要检查的对象已经存在于stackSet中时，表示存在循环引用</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>stackSet<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> detected <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 将当前obj存如stackSet</span>
    stackSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 对obj下的属性进行挨个检测</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">detect</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 平级检测完成之后，将当前对象删除，防止误判</span>
    <span class="token comment">/*
      例如：对象的属性指向同一引用，如果不删除的话，会被认为是循环引用
      let tempObj = {
        name: &#39;demo test&#39;
      }
      let obj4 = {
        obj1: tempObj,
        obj2: tempObj
      }
    */</span>
    stackSet<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">detect</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

  <span class="token keyword">return</span> detected
<span class="token punctuation">}</span>

  <span class="token comment">// 特性七:</span>
  <span class="token comment">// 对包含循环引用的对象（对象之间相互引用，形成无限循环）执行此方法，会抛出错误。</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isCyclic</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&#39;Converting circular structure to JSON&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 特性九:</span>
  <span class="token comment">// 当尝试去转换 BigInt 类型的值会抛出错误</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> data <span class="token operator">===</span> <span class="token string">&#39;bigint&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&#39;Do not know how to serialize a BigInt&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> type <span class="token operator">=</span> <span class="token keyword">typeof</span> data
  <span class="token keyword">const</span> commonKeys1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;undefined&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;function&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;symbol&#39;</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> <span class="token function-variable function">getType</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\[object (.*?)\]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;$1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 非对象</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">!==</span> <span class="token string">&#39;object&#39;</span> <span class="token operator">||</span> data <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> data
    <span class="token comment">// 特性四：</span>
    <span class="token comment">// NaN 和 Infinity 格式的数值及 null 都会被当做 null。</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result <span class="token operator">=</span> <span class="token string">&#39;null&#39;</span>
      <span class="token comment">// 特性一：</span>
      <span class="token comment">// `undefined`、`任意的函数`以及`symbol值`被`单独转换`时，会返回 undefined</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>commonKeys1<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 直接得到undefined，并不是一个字符串&#39;undefined&#39;</span>
      <span class="token keyword">return</span> <span class="token keyword">undefined</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result <span class="token operator">=</span> <span class="token string">&#39;&quot;&#39;</span> <span class="token operator">+</span> data <span class="token operator">+</span> <span class="token string">&#39;&quot;&#39;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 特性五:</span>
    <span class="token comment">// 转换值如果有 toJSON() 方法，该方法定义什么值将被序列化</span>
    <span class="token comment">// 特性六:</span>
    <span class="token comment">// Date 日期调用了 toJSON() 将其转换为了 string 字符串（同Date.toISOString()），因此会被当做字符串处理。</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> data<span class="token punctuation">.</span>toJSON <span class="token operator">===</span> <span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">jsonstringify</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> result <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">it</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 特性一:</span>
        <span class="token comment">// `undefined`、`任意的函数`以及`symbol值`出现在`数组`中时会被转换成 `null`</span>
        <span class="token keyword">return</span> commonKeys1<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> it<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&#39;null&#39;</span> <span class="token operator">:</span> <span class="token function">jsonstringify</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&#39;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#39;&quot;&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 特性二：</span>
      <span class="token comment">// 布尔值、数字、字符串的包装对象在序列化过程中会自动转换成对应的原始值。</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;boolean&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;number&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token function">getType</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getType</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&#39;&quot;&#39;</span> <span class="token operator">+</span> data <span class="token operator">+</span> <span class="token string">&#39;&quot;&#39;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token comment">// 特性八</span>
        <span class="token comment">// 其他类型的对象，包括 Map/Set/WeakMap/WeakSet，仅会序列化可枚举的属性</span>
        Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// 特性三:</span>
          <span class="token comment">// 所有以symbol为属性键的属性都会被完全忽略掉，即便 replacer 参数中强制指定包含了它们。</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> key <span class="token operator">!==</span> <span class="token string">&#39;symbol&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> value <span class="token operator">=</span> data<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
            <span class="token comment">// 特性一</span>
            <span class="token comment">// `undefined`、`任意的函数`以及`symbol值`，出现在`非数组对象`的属性值中时在序列化过程中会被忽略</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>commonKeys1<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&#39;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;&quot;&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 各种测试</span>

<span class="token comment">// 1. 测试一下基本输出</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// undefined </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;demo test&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;demo test&#39;</span><span class="token punctuation">,</span>
  <span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;demo test2&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token string">&#39;boy&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// {&quot;name&quot;:&quot;demo test2&quot;,&quot;sex&quot;:&quot;boy&quot;}</span>

<span class="token comment">// 2. 和原生的JSON.stringify转换进行比较</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;demo test&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;\w&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
<span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
<span class="token keyword">let</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;demo test&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span>sym<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>sym<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
<span class="token keyword">let</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// true</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;demo test&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token literal-property property">attr</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;coding&#39;</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">uni</span><span class="token operator">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">sayHi</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">info</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
    <span class="token literal-property property">intro</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">money</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
      <span class="token literal-property property">job</span><span class="token operator">:</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">pakingObj</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">boolean</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">string</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&#39;demo test&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// {&quot;name&quot;:&quot;demo test&quot;,&quot;age&quot;:18,&quot;attr&quot;:[&quot;coding&quot;,123],&quot;date&quot;:&quot;2021-10-06T14:59:58.306Z&quot;,&quot;info&quot;:{&quot;age&quot;:16,&quot;intro&quot;:{&quot;job&quot;:null}},&quot;pakingObj&quot;:{&quot;boolean&quot;:false,&quot;string&quot;:&quot;demo test&quot;,&quot;number&quot;:1}}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// {&quot;name&quot;:&quot;demo test&quot;,&quot;age&quot;:18,&quot;attr&quot;:[&quot;coding&quot;,123],&quot;date&quot;:&quot;2021-10-06T14:59:58.306Z&quot;,&quot;info&quot;:{&quot;age&quot;:16,&quot;intro&quot;:{&quot;job&quot;:null}},&quot;pakingObj&quot;:{&quot;boolean&quot;:false,&quot;string&quot;:&quot;demo test&quot;,&quot;number&quot;:1}}</span>

<span class="token comment">// 3. 测试可遍历对象</span>
<span class="token keyword">let</span> enumerableObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>enumerableObj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;demo test&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;boy&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span>enumerableObj<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// {&quot;name&quot;:&quot;demo test&quot;}</span>

<span class="token comment">// 4. 测试循环引用和Bigint</span>

<span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">&#39;aa&#39;</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;demo test&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">a</span><span class="token operator">:</span> obj1<span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> obj1 <span class="token punctuation">}</span>
obj2<span class="token punctuation">.</span>obj <span class="token operator">=</span> obj2

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonstringify</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// TypeError: Converting circular structure to JSON</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">jsonStringify</span><span class="token punctuation">(</span><span class="token function">BigInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// TypeError: Do not know how to serialize a BigInt</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br></div></div><h2 id="_3-实现一个promise" tabindex="-1"><a class="header-anchor" href="#_3-实现一个promise" aria-hidden="true">#</a> 3. 实现一个Promise</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">MyPromise</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">exe</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 最后的值，Promise .then或者.catch接收的值</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">undefined</span>
    <span class="token comment">// 状态：三种状态 pending success failure</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">&#39;pending&#39;</span>
    <span class="token comment">// 成功的函数队列</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>successQueue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token comment">// 失败的函数队列</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>failureQueue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> <span class="token function-variable function">resolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token function-variable function">doResolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 将缓存的函数队列挨个执行，并且将状态和值设置好</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">&#39;pending&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">&#39;success&#39;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value
  
          <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>successQueue<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> cb <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>successQueue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  
            cb <span class="token operator">&amp;&amp;</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token function">setTimeout</span><span class="token punctuation">(</span>doResolve<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> <span class="token function-variable function">reject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 基本同resolve</span>
      <span class="token keyword">const</span> <span class="token function-variable function">doReject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">&#39;pending&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">&#39;failure&#39;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value
  
          <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>failureQueue<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> cb <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>failureQueue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  
            cb <span class="token operator">&amp;&amp;</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token function">setTimeout</span><span class="token punctuation">(</span>doReject<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">exe</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token function">then</span> <span class="token punctuation">(</span><span class="token function-variable function">success</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> value<span class="token punctuation">,</span> <span class="token function-variable function">failure</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// .then返回的是一个新的Promise</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 包装回到函数</span>
      <span class="token keyword">const</span> <span class="token function-variable function">successFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">success</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
          <span class="token comment">// 如果结果值是一个Promise，那么需要将这个Promise的值继续往下传递，否则直接resolve即可</span>
          result <span class="token keyword">instanceof</span> <span class="token class-name">MyPromise</span> <span class="token operator">?</span> result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 基本筒成功回调函数的封装</span>
      <span class="token keyword">const</span> <span class="token function-variable function">failureFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">failure</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
          
          result <span class="token keyword">instanceof</span> <span class="token class-name">MyPromise</span> <span class="token operator">?</span> result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 如果Promise的状态还未结束，则将成功和失败的函数缓存到队列里</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">&#39;pending&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>successQueue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>successFn<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>failureQueue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>failureFn<span class="token punctuation">)</span>
        <span class="token comment">// 如果已经成功结束，直接执行成功回调 </span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">&#39;success&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">success</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果已经失败，直接执行失败回调</span>
        <span class="token function">failure</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 其他函数就不一一实现了</span>
  <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> 
<span class="token comment">// 以下举个例子，验证一下以上实现的结果</span>
<span class="token keyword">const</span> pro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>reject<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

pro
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;2_1&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> newPro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;2_2&#39;</span><span class="token punctuation">)</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span>reject<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;2_3&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> newPro
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;2_4&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;2_5&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
  
pro
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;3_1&#39;</span><span class="token punctuation">)</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;3_2&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;3_3&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;3_4&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
<span class="token comment">// 2_1</span>
<span class="token comment">// 2_2</span>
<span class="token comment">// 2_3</span>
<span class="token comment">// 3_1</span>
<span class="token comment">// 3_4</span>
<span class="token comment">// 2_5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br></div></div><h2 id="_4-实现多维数组扁平化的3种方式" tabindex="-1"><a class="header-anchor" href="#_4-实现多维数组扁平化的3种方式" aria-hidden="true">#</a> 4. 实现多维数组扁平化的3种方式</h2><div class="custom-container tip"><p class="custom-container-title">注意</p><p>业务和面试中都经常会遇到，将多维数组扁平化是必备的技能</p></div><h3 id="递归实现-方式1-1" tabindex="-1"><a class="header-anchor" href="#递归实现-方式1-1" aria-hidden="true">#</a> 递归实现(方式1)</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * 
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">array</span> 深层嵌套的数据
 * <span class="token keyword">@returns</span> array 新数组
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">flat1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> array<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result<span class="token punctuation">,</span> it</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">flat1</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token operator">:</span> it<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token number">8</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span>
<span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flat1</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3, 4, 5, 6, 7, 8]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="遍历实现-方式2-1" tabindex="-1"><a class="header-anchor" href="#遍历实现-方式2-1" aria-hidden="true">#</a> 遍历实现(方式2)</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * 
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">array</span> 深层嵌套的数据
 * <span class="token keyword">@returns</span> array 新数组
 */</span>
 
<span class="token keyword">const</span> <span class="token function-variable function">flat2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token comment">// 展开一层</span>
  <span class="token keyword">const</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token operator">...</span>array <span class="token punctuation">]</span>
  
  <span class="token keyword">while</span> <span class="token punctuation">(</span>stack<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 取出最后一个元素</span>
    <span class="token keyword">const</span> val <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// 遇到是数组的情况，往stack后面推入</span>
      stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>val<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 往数组前面推入</span>
      result<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
<span class="token comment">// 测试</span>
<span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token number">8</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span>
<span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flat2</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3, 4, 5, 6, 7, 8]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="原生flat-方式3" tabindex="-1"><a class="header-anchor" href="#原生flat-方式3" aria-hidden="true">#</a> 原生flat(方式3)</h3><div class="custom-container tip"><p class="custom-container-title">注意</p><p>借助原生<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/flat" target="_blank" rel="noopener noreferrer">flat<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>函数,将需要展开的层，指定为Infinity即无限层，也就可以拍平了,算是一个思路。</p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * 
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">array</span> 深层嵌套的数据
 * <span class="token keyword">@returns</span> 新数组
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">flat3</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> array<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 测试</span>
<span class="token keyword">let</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token number">8</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span>
<span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flat3</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3, 4, 5, 6, 7, 8]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="_5-实现深拷贝" tabindex="-1"><a class="header-anchor" href="#_5-实现深拷贝" aria-hidden="true">#</a> 5. 实现深拷贝</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> deepClone <span class="token operator">=</span> <span class="token punctuation">(</span>target<span class="token punctuation">,</span> cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">isObject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">&#39;object&#39;</span> <span class="token operator">&amp;&amp;</span> obj <span class="token operator">!==</span> <span class="token keyword">null</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isObject</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 解决循环引用</span>
    <span class="token keyword">const</span> cacheTarget <span class="token operator">=</span> cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
    <span class="token comment">// 已经存在直接返回，无需再次解析</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cacheTarget<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> cacheTarget
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> cloneTarget <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> cloneTarget<span class="token punctuation">)</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> value <span class="token operator">=</span> target<span class="token punctuation">[</span> key <span class="token punctuation">]</span> 
        cloneTarget<span class="token punctuation">[</span> key <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">isObject</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> cache<span class="token punctuation">)</span> <span class="token operator">:</span> value
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> cloneTarget
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> target
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">field1</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">field2</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token literal-property property">field3</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token string">&#39;child&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">field4</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">f</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">f</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">f</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">f</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">f</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">f</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">f</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">f</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">f</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">f</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">f</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">f</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

target<span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>

<span class="token keyword">const</span> result1 <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result1<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><img src="/notes/assets/js/523de06ab4fe457ca804053f4265ceb9_tplv-k3u1fbpfcp-watermark.webp" alt="demo"><h2 id="_6-实现new操作符" tabindex="-1"><a class="header-anchor" href="#_6-实现new操作符" aria-hidden="true">#</a> 6. 实现new操作符</h2><p><strong>思路</strong>： 在实现new之前，我们先了解一下new的执行过程</p><p><code>new</code> 关键字会进行如下的操作：</p><ol><li><p>创建一个空的简单JavaScript对象（即 <code>{}</code> ）；</p></li><li><p>为步骤1新创建的对象添加属性 <strong>proto</strong> ，将该属性链接至构造函数的原型对象</p></li><li><p>将步骤1新创建的对象作为<code>this</code>的上下文,执行该函数 ；</p></li><li><p>如果该函数没有返回对象，则返回<code>this</code>。</p></li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">const</span> <span class="token function-variable function">_new</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token comment">// 步骤1和步骤2</span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>func<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
  <span class="token comment">// 也可以通过下面的代码进行模拟</span>
  <span class="token doc-comment comment">/**
  let Ctor = function () <span class="token punctuation">{</span><span class="token punctuation">}</span>

  Ctor.prototype = func.prototype
  Ctor.prototype.constructor = func

  let obj = new Ctor()
 */</span>
  <span class="token comment">// 步骤3</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
  <span class="token comment">// 步骤4</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> result <span class="token operator">===</span> <span class="token string">&#39;object&#39;</span> <span class="token operator">&amp;&amp;</span> result <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> result <span class="token operator">===</span> <span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> result
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token keyword">let</span> <span class="token function-variable function">Person</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> sex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">showInfo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sex<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token function">_new</span><span class="token punctuation">(</span>Person<span class="token punctuation">,</span> <span class="token string">&#39;qianlongo&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;sex&#39;</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span>

<span class="token comment">// Person { name: &#39;demo test&#39;, sex: &#39;sex&#39; }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h2 id="_7-实现发布订阅-eventemitter" tabindex="-1"><a class="header-anchor" href="#_7-实现发布订阅-eventemitter" aria-hidden="true">#</a> 7. 实现发布订阅(EventEmitter)</h2><div class="custom-container tip"><p class="custom-container-title">注意</p><p>发布订阅相信大家一定不会陌生，实际工作也经常会遇到，比如Vue的<code>EventBus</code>, <code>$on</code>, <code>$emit</code>等。接下来咱们实现一把试试</p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">EventEmitter</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>events <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 事件监听</span>
  <span class="token function">on</span> <span class="token punctuation">(</span><span class="token parameter">evt<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span> evt <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span> evt <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span> evt <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token keyword">this</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 发布事件</span>
  <span class="token function">emit</span> <span class="token punctuation">(</span><span class="token parameter">evt<span class="token punctuation">,</span> <span class="token operator">...</span>payload</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> callbacks <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span> evt <span class="token punctuation">]</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>callbacks<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      callbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">cb</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> payload<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token keyword">this</span>
  <span class="token punctuation">}</span> 
  <span class="token comment">// 删除订阅</span>
  <span class="token function">off</span> <span class="token punctuation">(</span><span class="token parameter">evt<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// 啥都没传，所有的事件都取消</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> evt <span class="token operator">===</span> <span class="token string">&#39;undefined&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>events
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> evt <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 删除指定事件的回调 </span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">===</span> <span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span> evt <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span> evt <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> cb <span class="token operator">!==</span> callback<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 删除整个事件</span>
        <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span> evt <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token keyword">this</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 只进行一次的事件订阅</span>
  <span class="token function">once</span> <span class="token punctuation">(</span><span class="token parameter">evt<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">proxyCallback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>payload</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> payload<span class="token punctuation">)</span>
      <span class="token comment">// 回调函数执行完成之后就删除事件订阅</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>evt<span class="token punctuation">,</span> proxyCallback<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>evt<span class="token punctuation">,</span> proxyCallback<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token keyword">const</span> e1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">e1Callback1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> sex</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> <span class="token string">&#39;evt1---callback1&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">e1Callback2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> sex</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> <span class="token string">&#39;evt1---callback2&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">e1Callback3</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> sex</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> <span class="token string">&#39;evt1---callback3&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

e1<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;evt1&#39;</span><span class="token punctuation">,</span> e1Callback1<span class="token punctuation">)</span>
e1<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;evt1&#39;</span><span class="token punctuation">,</span> e1Callback2<span class="token punctuation">)</span>
<span class="token comment">// 只执行一次回调</span>
e1<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">&#39;evt1&#39;</span><span class="token punctuation">,</span> e1Callback3<span class="token punctuation">)</span>

e1<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;evt1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;demo test&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;boy&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// demo test boy evt1---callback1</span>
<span class="token comment">// demo test boy evt1---callback2</span>
<span class="token comment">// demo test boy evt1---callback3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;------尝试删除e1Callback1------&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// 移除e1Callback1</span>
e1<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">&#39;evt1&#39;</span><span class="token punctuation">,</span> e1Callback1<span class="token punctuation">)</span>
e1<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;evt1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;demo test&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;boy&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// demo test boy evt1---callback2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br></div></div><h2 id="_8-实现有并行限制的promise" tabindex="-1"><a class="header-anchor" href="#_8-实现有并行限制的promise" aria-hidden="true">#</a> 8. 实现有并行限制的Promise</h2><div class="custom-container tip"><p class="custom-container-title">注意</p><p>这是一道广大网友真实遇到题目，我们先看一下题意</p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/*
JS实现一个带并发限制的异步调度器Scheduler，保证同时运行的任务最多有两个。
完善下面代码的Scheduler类，使以下程序能够正常输出：
class Scheduler {
  add(promiseCreator) { ... }
  // ...
}
   
const timeout = time =&gt; {
  return new Promise(resolve =&gt; {
    setTimeout(resolve, time)
  }
})
  
const scheduler = new Scheduler()
  
const addTask = (time,order) =&gt; {
  scheduler.add(() =&gt; timeout(time).then(()=&gt;console.log(order)))
}

addTask(1000, &#39;1&#39;)
addTask(500, &#39;2&#39;)
addTask(300, &#39;3&#39;)
addTask(400, &#39;4&#39;)

// output: 2 3 1 4
整个的完整执行流程：

起始1、2两个任务开始执行
500ms时，2任务执行完毕，输出2，任务3开始执行
800ms时，3任务执行完毕，输出3，任务4开始执行
1000ms时，1任务执行完毕，输出1，此时只剩下4任务在执行
1200ms时，4任务执行完毕，输出4
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="解析" tabindex="-1"><a class="header-anchor" href="#解析" aria-hidden="true">#</a> 解析</h3><p>看完题目之后，大概会这几个问题存在</p><ol><li><p>如何才能保证同时只有2个任务在处于执行中？</p></li><li><p>当某个任务执行结束之后，下一步如何知道应该执行哪个任务？</p></li></ol><p><strong>问题1</strong>：只需要用一个计数器来控制即可，每开始一个任务计数器+1，结束之后计数器-1，保证计数器一定&lt;=2。</p><p><strong>问题2</strong>：按照题目要求，任务的执行是有顺序的，只是任务的结束时间是不确定的，所以下一个任务一定是按照这样的顺序来</p><p><code>任务1 =&gt; 任务2 =&gt; 任务3 =&gt; 任务4</code></p><p>利用数组队列的性质，将任务挨个推入队列，前面的任务执行结束之后，将队首的任务取出来执行即可。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Scheduler</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>maxCount <span class="token operator">=</span> <span class="token number">2</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>runCount <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// promiseCreator执行后返回的是一个Promise</span>
  <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">promiseCreator</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 小于等于2，直接执行</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>promiseCreator<span class="token punctuation">)</span>
    <span class="token comment">// 每次添加的时候都会尝试去执行任务</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">runQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">runQueue</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 队列中还有任务才会被执行</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>queue<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>runCount <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 执行先加入队列的函数</span>
      <span class="token keyword">const</span> promiseCreator <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// 开始执行任务 计数+1    </span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>runCount <span class="token operator">+=</span> <span class="token number">1</span>
      <span class="token comment">// 假设任务都执行成功，当然也可以做一下catch</span>
      <span class="token function">promiseCreator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 任务执行完毕，计数-1</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>runCount <span class="token operator">-=</span> <span class="token number">1</span>
        <span class="token comment">// 尝试进行下一次任务</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">runQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
   
<span class="token keyword">const</span> <span class="token function-variable function">timeout</span> <span class="token operator">=</span> <span class="token parameter">time</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> time<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
  
<span class="token keyword">const</span> scheduler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scheduler</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  
<span class="token keyword">const</span> <span class="token function-variable function">addTask</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">time<span class="token punctuation">,</span>order</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  scheduler<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">timeout</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">addTask</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&#39;1&#39;</span><span class="token punctuation">)</span>
<span class="token function">addTask</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token string">&#39;2&#39;</span><span class="token punctuation">)</span>
<span class="token function">addTask</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token string">&#39;3&#39;</span><span class="token punctuation">)</span>
<span class="token function">addTask</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token string">&#39;4&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// 2</span>
<span class="token comment">// 3</span>
<span class="token comment">// 1</span>
<span class="token comment">// 4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h2 id="_9-手写lru算法-蚂蚁金服曾遇到过" tabindex="-1"><a class="header-anchor" href="#_9-手写lru算法-蚂蚁金服曾遇到过" aria-hidden="true">#</a> 9. 手写LRU算法(蚂蚁金服曾遇到过)</h2><p>大致题意</p><p><a href="https://leetcode-cn.com/problems/lru-cache/" target="_blank" rel="noopener noreferrer">leetCode<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>运用你所掌握的数据结构，设计和实现一个 LRU (最近最少使用) 缓存机制 。 实现 LRUCache 类：</p><ol><li><p>LRUCache(int capacity) 以<code>正整数</code>作为容量 capacity 初始化 LRU 缓存</p></li><li><p>int get(int key) <code>如果关键字 key 存在于缓存中，则返回关键字的值，否则返回 -1</code> 。</p></li><li><p>void put(int key, int value) <code>如果关键字已经存在，则变更其数据值；如果关键字不存在，则插入该组「关键字-值」。当缓存容量达到上限时，它应该在写入新数据之前删除最久未使用的数据值</code>，从而为新的数据值留出空间。</p></li></ol><p>题目要求的1和2相对简单，主要是条件3，<code>当缓存容量达到上限时，它应该在写入新数据之前删除最久未使用的数据值</code>。容量和条件1相呼应，关键是怎么理解<strong>最久未使用</strong>呢?</p><ol><li><p>读和写都是在使用数据</p></li><li><p>假设不管是读还是写，我们都把对应的<code>key</code>值放到数组的末尾，那么是不是意味着数组的头部就是最久未使用的了呢？</p></li></ol><h3 id="数组-对象实现方式" tabindex="-1"><a class="header-anchor" href="#数组-对象实现方式" aria-hidden="true">#</a> 数组&amp;&amp;对象实现方式</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">LRUCache</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">capacity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 用数组记录读和写的顺序</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>keys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token comment">// 用对象来保存key value值</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">// 容量</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>capacity <span class="token operator">=</span> capacity
<span class="token punctuation">}</span>

<span class="token class-name">LRUCache</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">get</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 如果存在</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 先删除原来的位置</span>
    <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>keys<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
    <span class="token comment">// 再移动到最后一个，以保持最新访问</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>keys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
    <span class="token comment">// 返回值</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token class-name">LRUCache</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">put</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 存在的时候先更新值</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value
    <span class="token comment">// 再更新位置到最后一个</span>
    <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>keys<span class="token punctuation">,</span> key<span class="token punctuation">)</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>keys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 不存在的时候加入</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>keys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value
    <span class="token comment">// 容量如果超过了最大值，则删除最久未使用的（也就是数组中的第一个key）</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>keys<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>capacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">removeCache</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>keys<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>keys<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 移出数组中的key</span>
<span class="token keyword">function</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> index <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 移除缓存中 key</span>
<span class="token keyword">function</span> <span class="token function">removeCache</span><span class="token punctuation">(</span><span class="token parameter">cache<span class="token punctuation">,</span> keys<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token function">remove</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> lRUCache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LRUCache</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 缓存是 {1=1}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 缓存是 {1=1, 2=2}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 返回 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 该操作会使得关键字 2 作废，缓存是 {1=1, 3=3}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 返回 -1 (未找到)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 该操作会使得关键字 1 作废，缓存是 {4=4, 3=3}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>   <span class="token comment">// 返回 -1 (未找到)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 返回 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>   <span class="token comment">// 返回 4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br></div></div><h3 id="map实现方式" tabindex="-1"><a class="header-anchor" href="#map实现方式" aria-hidden="true">#</a> Map实现方式</h3><div class="custom-container tip"><p class="custom-container-title">注意</p><p>第一种实现方式，我们借助了数组来存储每次key被访问（get、set）的顺序，这样实现比较麻烦一些，有没有其他方案，让我们更加便捷一些，不需要额外维护数组呢？借助<code>Map</code>设置值时可以保持顺序性，处理LRU算法将会及其方便</p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>number<span class="token punctuation">}</span></span> <span class="token parameter">capacity</span>
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">LRUCache</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">capacity</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>capacity <span class="token operator">=</span> capacity
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/** 
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>number<span class="token punctuation">}</span></span> <span class="token parameter">key</span>
 * <span class="token keyword">@return</span> <span class="token class-name"><span class="token punctuation">{</span>number<span class="token punctuation">}</span></span>
 */</span>
<span class="token class-name">LRUCache</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">get</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
    <span class="token comment">// 更新位置</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>

    <span class="token keyword">return</span> value
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/** 
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>number<span class="token punctuation">}</span></span> <span class="token parameter">key</span> 
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>number<span class="token punctuation">}</span></span> <span class="token parameter">value</span>
 * <span class="token keyword">@return</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token keyword">void</span><span class="token punctuation">}</span></span>
 */</span>
<span class="token class-name">LRUCache</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">put</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 已经存在的情况下，更新其位置到”最新“即可</span>
  <span class="token comment">// 先删除，后插入</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 插入数据前先判断，size是否符合capacity</span>
    <span class="token comment">// 已经&gt;=capacity，需要把最开始插入的数据删除掉</span>
    <span class="token comment">// keys()方法得到一个可遍历对象,执行next()拿到一个形如{ value: &#39;xxx&#39;, done: false }的对象</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span>size <span class="token operator">&gt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>capacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> lRUCache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LRUCache</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 缓存是 {1=1}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 缓存是 {1=1, 2=2}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 返回 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 该操作会使得关键字 2 作废，缓存是 {1=1, 3=3}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 返回 -1 (未找到)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 该操作会使得关键字 1 作废，缓存是 {4=4, 3=3}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>   <span class="token comment">// 返回 -1 (未找到)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 返回 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lRUCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>   <span class="token comment">// 返回 4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><h2 id="_10-call" tabindex="-1"><a class="header-anchor" href="#_10-call" aria-hidden="true">#</a> 10. call</h2><div class="custom-container tip"><p class="custom-container-title">注意</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call" target="_blank" rel="noopener noreferrer">mdn call<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>上是这样描述call的, <code>call</code> 方法使用一个指定的 <code>this</code> 值和单独给出的一个或多个参数来调用一个函数。 所以关键点是<code>指定的this</code>和<code>一个或者多个参数</code>,只要了解了this的基本用法，实现起来就简单多了。</p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * 
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">ctx</span> 函数执行上下文this
 * <span class="token keyword">@param</span>  <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">...</span>any<span class="token punctuation">}</span></span> <span class="token parameter">args</span> 参数列表
 * <span class="token keyword">@returns</span> 函数执行的结果
 */</span>
 
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myCall</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 简单处理未传ctx上下文，或者传的是null和undefined等场景</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ctx <span class="token operator">=</span> <span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">&#39;undefined&#39;</span> <span class="token operator">?</span> window <span class="token operator">:</span> global
  <span class="token punctuation">}</span>
  <span class="token comment">// 暴力处理 ctx有可能传非对象</span>
  ctx <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
  <span class="token comment">// 用Symbol生成唯一的key</span>
  <span class="token keyword">const</span> fnName <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// 这里的this，即要调用的函数</span>
  ctx<span class="token punctuation">[</span> fnName <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span>
  <span class="token comment">// 将args展开，并且调用fnName函数，此时fnName函数内部的this也就是ctx了</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> ctx<span class="token punctuation">[</span> fnName <span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
  <span class="token comment">// 用完之后，将fnName从上下文ctx中删除</span>
  <span class="token keyword">delete</span> ctx<span class="token punctuation">[</span> fnName <span class="token punctuation">]</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> sex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> sex<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

fn<span class="token punctuation">.</span><span class="token function">myCall</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;demo test&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// window demo test boy</span>
fn<span class="token punctuation">.</span><span class="token function">myCall</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;demo test&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token string">&#39;boy&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#39;demo test&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// { name: &#39;demo test&#39;, sex: &#39;boy&#39; } demo test boy</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="_11-apply" tabindex="-1"><a class="header-anchor" href="#_11-apply" aria-hidden="true">#</a> 11. apply</h2><div class="custom-container tip"><p class="custom-container-title">注意</p><p>该方法的语法和作用与 <code>call</code> 方法类似，只有一个区别，就是 <code>call</code> 方法接受的是<strong>一个参数列表</strong>，而 <code>apply</code> 方法接受的是<strong>一个包含多个参数的数组</strong>。</p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * 
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">ctx</span> 函数执行上下文this
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">args</span>  参数列表
 * <span class="token keyword">@returns</span> 函数执行的结果
 */</span>
<span class="token comment">// 唯一的区别在这里，不需要...args变成数组 </span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myApply</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ctx <span class="token operator">=</span> <span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">&#39;undefined&#39;</span> <span class="token operator">?</span> window <span class="token operator">:</span> global
  <span class="token punctuation">}</span>

  ctx <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>

  <span class="token keyword">const</span> fnName <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  ctx<span class="token punctuation">[</span> fnName <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span>
  <span class="token comment">// 将args参数数组，展开为多个参数，供函数调用</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> ctx<span class="token punctuation">[</span> fnName <span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>

  <span class="token keyword">delete</span> ctx<span class="token punctuation">[</span> fnName <span class="token punctuation">]</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> sex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> sex<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

fn<span class="token punctuation">.</span><span class="token function">myApply</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;demo test&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;boy&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// window demo test boy</span>
fn<span class="token punctuation">.</span><span class="token function">myApply</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;demo test&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token string">&#39;boy&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;demo test&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;boy&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// { name: &#39;demo test&#39;, sex: &#39;boy&#39; } demo test boy</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h2 id="_12-实现trim方法的两种方式" tabindex="-1"><a class="header-anchor" href="#_12-实现trim方法的两种方式" aria-hidden="true">#</a> 12. 实现trim方法的两种方式</h2><div class="custom-container tip"><p class="custom-container-title">注意</p><p><code>trim</code> 方法会从一个字符串的两端删除空白字符。在这个上下文中的空白字符是所有的空白字符 (space, tab, no-break space 等) 以及所有行终止符字符（如 LF，CR等）</p></div><p><strong>思路</strong>： 初看题目我们脑海中闪过的做法是把<code>空格部分删除掉，保留非空格的部分</code>，但是也可以换一种思路，也可以把<code>非空格的部分提取出来，不管空格的部分</code>。接下来我们来写一下两种trim方法的实现</p><h3 id="去除空格法-方式1" tabindex="-1"><a class="header-anchor" href="#去除空格法-方式1" aria-hidden="true">#</a> 去除空格法(方式1)</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">trim</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\s*|\s*$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token string">&#39; demo test&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// demo test </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token string">&#39;demo test &#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// demo test </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token string">&#39; demo test &#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// demo test </span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="字符提取法-方式2" tabindex="-1"><a class="header-anchor" href="#字符提取法-方式2" aria-hidden="true">#</a> 字符提取法(方式2)</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">trim</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\s*(.*?)\s*$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#39;$1&#39;</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span> 

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token string">&#39; demo test&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// demo test </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token string">&#39;demo test &#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// demo test </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token string">&#39; demo test &#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// demo test </span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_13-实现promise-all" tabindex="-1"><a class="header-anchor" href="#_13-实现promise-all" aria-hidden="true">#</a> 13. 实现Promise.all</h2><div class="custom-container tip"><p class="custom-container-title">注意</p><p>Promise.all() 方法接收一个promise的iterable类型（注：Array，Map，Set都属于ES6的iterable类型）的输入，并且只返回一个<code>Promise</code>实例， 那个输入的所有promise的resolve回调的结果是一个数组。这个<code>Promise</code>的resolve回调执行是在所有输入的promise的resolve回调都结束，或者输入的iterable里没有promise了的时候。它的reject回调执行是，只要任何一个输入的promise的reject回调执行或者输入不合法的promise就会立即抛出错误，并且reject的是第一个抛出的错误信息。</p></div><p>上面是<code>MDN</code>上关于<code>Promise.all</code>的描述，咋一看有点懵逼，我们一起总结一下关键点</p><ol><li><p><code>Promise.all</code>接收一个数组，数组里面可以是Promise实例也可以不是</p></li><li><p><code>Promise.all</code> 等待所有都完成（或第一个失败）</p></li><li><p><code>Promise.all</code>执行的结果也是一个Promise</p></li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Promise<span class="token punctuation">.</span><span class="token function-variable function">myAll</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 符合条件3，返回一个Promise</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">rs<span class="token punctuation">,</span> rj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">const</span> len <span class="token operator">=</span> promises<span class="token punctuation">.</span>length

    promises<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 符合条件1，将数组里的项通过Promise.resolve进行包装</span>
      Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        count <span class="token operator">+=</span> <span class="token number">1</span>
        result<span class="token punctuation">[</span> i <span class="token punctuation">]</span> <span class="token operator">=</span> res
        <span class="token comment">// 符合条件2 等待所有都完成</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">===</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">rs</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 符合条件2  只要一个失败就都失败</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>rj<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p1 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token number">2</span>
<span class="token keyword">let</span> p3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> p4 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#39;出错啦&#39;</span><span class="token punctuation">)</span>

Promise<span class="token punctuation">.</span><span class="token function">myAll</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ 1, 2, 3 ]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


Promise<span class="token punctuation">.</span><span class="token function">myAll</span><span class="token punctuation">(</span><span class="token punctuation">[</span> p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// [ 1, 2, 3 ]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;err&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


Promise<span class="token punctuation">.</span><span class="token function">myAll</span><span class="token punctuation">(</span><span class="token punctuation">[</span> p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p4 <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;err&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span> <span class="token comment">// err 出错啦</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h2 id="_14-实现promise-race" tabindex="-1"><a class="header-anchor" href="#_14-实现promise-race" aria-hidden="true">#</a> 14. 实现Promise.race</h2><div class="custom-container tip"><p class="custom-container-title">注意</p><p><code>Promise.race(iterable)</code> 方法返回一个 promise，一旦迭代器中的某个promise解决或拒绝，返回的 promise就会解决或拒绝。</p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Promise<span class="token punctuation">.</span><span class="token function-variable function">myRace</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 返回一个新的Promise</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">rs<span class="token punctuation">,</span> rj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    promises<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 包装一下promises中的项，防止非Promise .then出错</span>
      <span class="token comment">// 只要有任意一个完成了或者拒绝了，race也就结束了</span>
      Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>rs<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>rj<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> promise1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> promise2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Promise<span class="token punctuation">.</span><span class="token function">myRace</span><span class="token punctuation">(</span><span class="token punctuation">[</span>promise1<span class="token punctuation">,</span> promise2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 因为promise2更快所以打印出2</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token comment">// 2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Promise<span class="token punctuation">.</span><span class="token function">myRace</span><span class="token punctuation">(</span><span class="token punctuation">[</span>promise1<span class="token punctuation">,</span> promise2<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 3比其他两个更快</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token comment">// 3</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="_15-object-create" tabindex="-1"><a class="header-anchor" href="#_15-object-create" aria-hidden="true">#</a> 15. Object.create</h2><div class="custom-container tip"><p class="custom-container-title">注意</p><p><code>Object.create()</code> 方法创建一个新对象，使用现有的对象来提供新创建的对象的__proto__。</p></div><h3 id="_1-常规使用" tabindex="-1"><a class="header-anchor" href="#_1-常规使用" aria-hidden="true">#</a> 1. 常规使用</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Object.create使用</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">showName</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> me <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>

me<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;demo test&#39;</span> 
me<span class="token punctuation">.</span><span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// demo test</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>可以看到<code>person</code>作为<code>me</code>实例的原型存在,原型上有<code>showName</code>方法</p><img src="/notes/assets/js/1634172151785.jpg" alt="demo"><h3 id="_2-创建原型为null的对象" tabindex="-1"><a class="header-anchor" href="#_2-创建原型为null的对象" aria-hidden="true">#</a> 2. 创建原型为null的对象</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> emptyObj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>emptyObj<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><img src="/notes/assets/js/1634172243291.jpg" alt="demo"><h3 id="_3-第二个-propertiesobject参数" tabindex="-1"><a class="header-anchor" href="#_3-第二个-propertiesobject参数" aria-hidden="true">#</a> 3. 第二个 propertiesObject参数</h3><div class="custom-container tip"><p class="custom-container-title">注意</p><p>可选。需要传入一个对象，该对象的属性类型参照<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperties" target="_blank" rel="noopener noreferrer">Object.defineProperties()<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>的第二个参数。如果该参数被指定且不为 <code>undefined</code>，该传入对象的自有可枚举属性(即其自身定义的属性，而不是其原型链上的枚举属性)将为新创建的对象添加指定的属性值和对应的属性描述符。</p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> o <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// foo会成为所创建对象的数据属性</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">writable</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 可以修改</span>
    <span class="token literal-property property">configurable</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 可以配置</span>
    <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 可以遍历</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;hello&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// bar会成为所创建对象的访问器属性</span>
  <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Setting `o.bar` to&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 无法进行修改</span>
o<span class="token punctuation">.</span>bar <span class="token operator">=</span> <span class="token string">&#39;demo test&#39;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>foo<span class="token punctuation">)</span> <span class="token comment">// hello</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>bar<span class="token punctuation">)</span> <span class="token comment">// 10</span>
<span class="token comment">// 遍历测试</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> o<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// foo hello</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="代码实现" tabindex="-1"><a class="header-anchor" href="#代码实现" aria-hidden="true">#</a> 代码实现</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">create</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">prop<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">[</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;function&#39;</span> <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> prop<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Object prototype may only be an Object or null: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>prop<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 创建构造函数</span>
  <span class="token keyword">const</span> <span class="token function-variable function">Ctor</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">// 赋值原型</span>
  <span class="token class-name">Ctor</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> prop
  <span class="token comment">// 创建实例</span>
  <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ctor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// 支持第二个参数</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> props<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 支持空原型</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>prop <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> obj
<span class="token punctuation">}</span>

<span class="token comment">// 用前面的例子做测试</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">showName</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> me2 <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>

me2<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;demo test&#39;</span>
me2<span class="token punctuation">.</span><span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// demo test</span>

<span class="token keyword">const</span> emptyObj2 <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>emptyObj2<span class="token punctuation">)</span>

<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// foo会成为所创建对象的数据属性</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">writable</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">configurable</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&quot;hello&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// bar会成为所创建对象的访问器属性</span>
  <span class="token literal-property property">bar</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Setting `o.bar` to&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> o2 <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> props<span class="token punctuation">)</span> <span class="token comment">// 请看下面的截图</span>
<span class="token comment">// 无法修改</span>
o2<span class="token punctuation">.</span>bar <span class="token operator">=</span> <span class="token string">&#39;demo test&#39;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o2<span class="token punctuation">.</span>foo<span class="token punctuation">)</span> <span class="token comment">// hello</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o2<span class="token punctuation">.</span>bar<span class="token punctuation">)</span> <span class="token comment">// 10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><img src="/notes/assets/js/1634172505328.jpg" alt="demo"><h2 id="_16-快速排序" tabindex="-1"><a class="header-anchor" href="#_16-快速排序" aria-hidden="true">#</a> 16.快速排序</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">quickSort</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> length <span class="token operator">=</span> array<span class="token punctuation">.</span>length

  <span class="token keyword">if</span> <span class="token punctuation">(</span>length <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> array
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> midIndex <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> midValue <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>midIndex<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span> <span class="token number">0</span> <span class="token punctuation">]</span>
  <span class="token keyword">let</span> leftArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">let</span> rightArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> curValue <span class="token operator">=</span> array<span class="token punctuation">[</span> index <span class="token punctuation">]</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>curValue <span class="token operator">&lt;=</span> midValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      leftArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>curValue<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      rightArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>curValue<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    index<span class="token operator">++</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token function">quickSort</span><span class="token punctuation">(</span>leftArray<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span> midValue <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">quickSort</span><span class="token punctuation">(</span>rightArray<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">34</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">quickSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [-10, 1, 1, 5, 10, 34]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="_17-冒泡排序" tabindex="-1"><a class="header-anchor" href="#_17-冒泡排序" aria-hidden="true">#</a> 17.冒泡排序</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * 1. 从第一个元素开始，比较相邻的两个元素，前者大就交换位置
 * 2. 每次遍历结束，都能找到一个最大值
 * 3. 如果还有没排序的元素继续1
 * 
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">swap</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span> array<span class="token punctuation">[</span> b <span class="token punctuation">]</span><span class="token punctuation">,</span> array<span class="token punctuation">[</span> a <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span> array<span class="token punctuation">[</span> a <span class="token punctuation">]</span><span class="token punctuation">,</span> array<span class="token punctuation">[</span> b <span class="token punctuation">]</span> <span class="token punctuation">]</span>
<span class="token keyword">const</span> <span class="token function-variable function">bubbleSort</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> length <span class="token operator">=</span> array<span class="token punctuation">.</span>length
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>array<span class="token punctuation">[</span> j <span class="token punctuation">]</span> <span class="token operator">&gt;</span> array<span class="token punctuation">[</span> j <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">swap</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> j<span class="token punctuation">,</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> array
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">bubbleSort</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//  [-1, 2, 10, 10]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="_18-选择排序" tabindex="-1"><a class="header-anchor" href="#_18-选择排序" aria-hidden="true">#</a> 18. 选择排序</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * 1. 取出未排序的第一个元素，遍历该元素之后的部分并进行比较。第一次就是取第一个元素
 * 2. 如果有更小的就交换位置
 */</span>

<span class="token keyword">const</span> <span class="token function-variable function">swap</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span> array<span class="token punctuation">[</span> b <span class="token punctuation">]</span><span class="token punctuation">,</span> array<span class="token punctuation">[</span> a <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span> array<span class="token punctuation">[</span> a <span class="token punctuation">]</span><span class="token punctuation">,</span> array<span class="token punctuation">[</span> b <span class="token punctuation">]</span> <span class="token punctuation">]</span>
<span class="token keyword">const</span> <span class="token function-variable function">selectSort</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> length <span class="token operator">=</span> array<span class="token punctuation">.</span>length

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> minIndex <span class="token operator">=</span> i

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>array<span class="token punctuation">[</span> j <span class="token punctuation">]</span> <span class="token operator">&lt;</span> array<span class="token punctuation">[</span> minIndex <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        minIndex <span class="token operator">=</span> j
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>minIndex <span class="token operator">!==</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">swap</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> i<span class="token punctuation">,</span> minIndex<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> array
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">selectSort</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// [-1, 2, 10, 10]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="_19-插入排序" tabindex="-1"><a class="header-anchor" href="#_19-插入排序" aria-hidden="true">#</a> 19. 插入排序</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 插入排序</span>
<span class="token doc-comment comment">/**
 * 记住你是怎么打牌的就知道插入排序怎么实现了
 * 1. 首先有一个有序的序列，可以认为第一个元素就是已排序的序列
 * 2. 从未排序序列中取一个元素出来，往有序序列中找到合适的位置，如果该位置比元素大，则后移动, 否则继续往前找
 */</span>

<span class="token keyword">const</span> <span class="token function-variable function">insertSort</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> length <span class="token operator">=</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> j <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span>
    <span class="token keyword">const</span> curValue <span class="token operator">=</span> array<span class="token punctuation">[</span> i <span class="token punctuation">]</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span>j <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> array<span class="token punctuation">[</span> j <span class="token punctuation">]</span> <span class="token operator">&gt;</span> curValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      array<span class="token punctuation">[</span> j <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">]</span> <span class="token operator">=</span> array<span class="token punctuation">[</span> j <span class="token punctuation">]</span>
      j<span class="token operator">--</span>
    <span class="token punctuation">}</span>

    array<span class="token punctuation">[</span> j <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">]</span> <span class="token operator">=</span> curValue
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> array
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">insertSort</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [-1, 2, 10, 10]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="_20-settimeout模拟setinterval" tabindex="-1"><a class="header-anchor" href="#_20-settimeout模拟setinterval" aria-hidden="true">#</a> 20. setTimeout模拟setInterval</h2><p><strong>描述</strong>： 使用<code>setTimeout</code>模拟实现<code>setInterval</code>的功能</p><p><strong>思路</strong>： 当然这里不是完全的实现，比如<code>setInterval</code>执行之后得到的是一个数字id，这一点我们就不模拟了，关闭定时器的方法则通过返回一个函数来进行</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">simulateSetInterval</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> timeout</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token keyword">const</span> <span class="token function-variable function">interval</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// timeout时间之后会执行真正的函数func</span>
      <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// 同时再次调用interval本身，是不是有点setInterval的感觉啦</span>
      <span class="token function">interval</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> timeout<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 开始执行 </span>
  <span class="token function">interval</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// 返回用于关闭定时器的函数 </span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> cancel <span class="token operator">=</span> <span class="token function">simulateSetInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;一秒之后关闭定时器&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>可以看到1被打印出了3次，第1000毫秒的时候定时器被关闭，1也就没有继续打印了。</p><img src="/notes/assets/js/1634172723686.jpg" alt="demo"><h2 id="_21-setinterval模拟settimeout" tabindex="-1"><a class="header-anchor" href="#_21-setinterval模拟settimeout" aria-hidden="true">#</a> 21. setInterval模拟setTimeout</h2><p><strong>描述</strong>： 使用<code>setInterval</code>模拟实现<code>setTimeout</code>的功能</p><p><strong>思路</strong>： <code>setTimeout</code>的特性是在指定的时间内只执行一次，我们只要在<code>setInterval</code>内部执行callback之后，把定时器关掉即可</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">simulateSetTimeout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> timeout</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span>

  timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 关闭定时器，保证只执行一次fn，也就达到了setTimeout的效果了</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
    <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> timeout<span class="token punctuation">)</span>
  <span class="token comment">// 返回用于关闭定时器的方法</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> cancel <span class="token operator">=</span> <span class="token function">simulateSetTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>

<span class="token comment">// 一秒后打印出1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="_22-数组去重的4种方式" tabindex="-1"><a class="header-anchor" href="#_22-数组去重的4种方式" aria-hidden="true">#</a> 22.数组去重的4种方式</h2><h3 id="利用set实现-方式1" tabindex="-1"><a class="header-anchor" href="#利用set实现-方式1" aria-hidden="true">#</a> 利用Set实现(方式1)</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">uniqueArray1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span> <span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token keyword">let</span> testArray <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">uniqueArray1</span><span class="token punctuation">(</span>testArray<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3, 4]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="indexof去重-方式2" tabindex="-1"><a class="header-anchor" href="#indexof去重-方式2" aria-hidden="true">#</a> indexOf去重(方式2)</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">uniqueArray2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  array<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">it<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">uniqueArray2</span><span class="token punctuation">(</span>testArray<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3, 4]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="indexof去重-方式3" tabindex="-1"><a class="header-anchor" href="#indexof去重-方式3" aria-hidden="true">#</a> indexOf去重(方式3)</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">uniqueArray3</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> array<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">it<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> array<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token operator">===</span> i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">uniqueArray3</span><span class="token punctuation">(</span>testArray<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3, 4]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="array-from去重" tabindex="-1"><a class="header-anchor" href="#array-from去重" aria-hidden="true">#</a> Array.from去重</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">uniqueArray4</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">uniqueArray4</span><span class="token punctuation">(</span>testArray<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [1, 2, 3, 4]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_23-手机号3-3-4分割" tabindex="-1"><a class="header-anchor" href="#_23-手机号3-3-4分割" aria-hidden="true">#</a> 23. 手机号3-3-4分割</h2><div class="custom-container tip"><p class="custom-container-title">注意</p><p>手机号按照例如<code>183-7980-2267</code>进行分割处理</p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 适合纯11位手机</span>
<span class="token keyword">const</span> splitMobile <span class="token operator">=</span> <span class="token punctuation">(</span>mobile<span class="token punctuation">,</span> format <span class="token operator">=</span> <span class="token string">&#39;-&#39;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>mobile<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?=(\d{4})+$)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> format<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 适合11位以内的分割</span>
<span class="token keyword">const</span> splitMobile2 <span class="token operator">=</span> <span class="token punctuation">(</span>mobile<span class="token punctuation">,</span> format <span class="token operator">=</span> <span class="token string">&#39;-&#39;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>mobile<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=(\d{3}))</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> format<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=([\d\-]{8}))</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> format<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">splitMobile</span><span class="token punctuation">(</span><span class="token number">18379802267</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 183-7980-2267</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">splitMobile2</span><span class="token punctuation">(</span><span class="token number">18379876545</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 183-7987-6545</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_24-千分位格式化数字" tabindex="-1"><a class="header-anchor" href="#_24-千分位格式化数字" aria-hidden="true">#</a> 24. 千分位格式化数字</h2><div class="custom-container tip"><p class="custom-container-title">注意</p><p>将<code>123456789</code>变成<code>123,456,789</code> 且要支持小数</p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 金额转千分位</span>
<span class="token keyword">const</span> <span class="token function-variable function">formatPrice</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  number <span class="token operator">=</span> <span class="token string">&#39;&#39;</span> <span class="token operator">+</span> number

  <span class="token keyword">const</span> <span class="token punctuation">[</span> integer<span class="token punctuation">,</span> decimal <span class="token operator">=</span> <span class="token string">&#39;&#39;</span> <span class="token punctuation">]</span> <span class="token operator">=</span> number<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;.&#39;</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> integer<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\B(?=(\d{3})+$)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>decimal <span class="token operator">?</span> <span class="token string">&#39;.&#39;</span> <span class="token operator">+</span> decimal <span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">formatPrice</span><span class="token punctuation">(</span><span class="token number">123456789.3343</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 123,456,789.3343</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_25-二分查找" tabindex="-1"><a class="header-anchor" href="#_25-二分查找" aria-hidden="true">#</a> 25. 二分查找</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 704. 二分查找</span>
<span class="token doc-comment comment">/**
 * 
给定一个 n 个元素有序的（升序）整型数组 nums 和一个目标值 target  ，写一个函数搜索 nums 中的 target，如果目标值存在返回下标，否则返回 -1。


示例 1:

输入: nums = [-1,0,3,5,9,12], target = 9
输出: 4
解释: 9 出现在 nums 中并且下标为 4
示例 2:

输入: nums = [-1,0,3,5,9,12], target = 2
输出: -1
解释: 2 不存在 nums 中因此返回 -1
 

提示：

你可以假设 nums 中的所有元素是不重复的。
n 将在 [1, 10000]之间。
nums 的每个元素都将在 [-9999, 9999]之间。
 */</span>


<span class="token keyword">const</span> <span class="token function-variable function">search</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">let</span> j <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>
  <span class="token keyword">let</span> midIndex <span class="token operator">=</span> <span class="token number">0</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    midIndex <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">+</span> j<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> midValue <span class="token operator">=</span> nums<span class="token punctuation">[</span> midIndex <span class="token punctuation">]</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>midValue <span class="token operator">===</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> midIndex
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>midValue <span class="token operator">&lt;</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      i <span class="token operator">=</span> midIndex <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      j <span class="token operator">=</span> midIndex <span class="token operator">-</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h2 id="_26-版本比较的两种方式" tabindex="-1"><a class="header-anchor" href="#_26-版本比较的两种方式" aria-hidden="true">#</a> 26. 版本比较的两种方式</h2><h3 id="详细规则" tabindex="-1"><a class="header-anchor" href="#详细规则" aria-hidden="true">#</a> 详细规则</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>给你两个版本号 version1 和 version2 ，请你比较它们。

版本号由一个或多个修订号组成，各修订号由一个 <span class="token string">&#39;.&#39;</span> 连接。每个修订号由 多位数字 组成，可能包含 前导零 。每个版本号至少包含一个字符。修订号从左到右编号，下标从 <span class="token number">0</span> 开始，最左边的修订号下标为 <span class="token number">0</span> ，下一个修订号下标为 <span class="token number">1</span> ，以此类推。例如，<span class="token number">2.5</span><span class="token number">.33</span> 和 <span class="token number">0.1</span> 都是有效的版本号。

比较版本号时，请按从左到右的顺序依次比较它们的修订号。比较修订号时，只需比较 忽略任何前导零后的整数值 。也就是说，修订号 <span class="token number">1</span> 和修订号 <span class="token number">001</span> 相等 。如果版本号没有指定某个下标处的修订号，则该修订号视为 <span class="token number">0</span> 。例如，版本 <span class="token number">1.0</span> 小于版本 <span class="token number">1.1</span> ，因为它们下标为 <span class="token number">0</span> 的修订号相同，而下标为 <span class="token number">1</span> 的修订号分别为 <span class="token number">0</span> 和 <span class="token number">1</span> ，<span class="token number">0</span> <span class="token operator">&lt;</span> <span class="token number">1</span> 。

返回规则如下：

如果 version1 <span class="token operator">&gt;</span> version2 返回 <span class="token number">1</span>，
如果 version1 <span class="token operator">&lt;</span> version2 返回 <span class="token operator">-</span><span class="token number">1</span>，
除此之外返回 <span class="token number">0</span>。
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="源码实现" tabindex="-1"><a class="header-anchor" href="#源码实现" aria-hidden="true">#</a> 源码实现</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 比较版本号</span>

<span class="token keyword">const</span> <span class="token function-variable function">compareVersion</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">version1<span class="token punctuation">,</span> version2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  version1 <span class="token operator">=</span> version1<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;.&#39;</span><span class="token punctuation">)</span>
  version2 <span class="token operator">=</span> version2<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;.&#39;</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> len1 <span class="token operator">=</span> version1<span class="token punctuation">.</span>length
  <span class="token keyword">const</span> len2 <span class="token operator">=</span> version2<span class="token punctuation">.</span>length
  <span class="token keyword">let</span> maxLen <span class="token operator">=</span> len1
  <span class="token keyword">const</span> <span class="token function-variable function">fillZero</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array<span class="token punctuation">,</span> len</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>len<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      array<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>len1 <span class="token operator">&lt;</span> len2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fillZero</span><span class="token punctuation">(</span>version1<span class="token punctuation">,</span> len2 <span class="token operator">-</span> len1<span class="token punctuation">)</span>
    maxLen <span class="token operator">=</span> len2
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>len1 <span class="token operator">&gt;</span> len2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fillZero</span><span class="token punctuation">(</span>version2<span class="token punctuation">,</span> len1 <span class="token operator">-</span> len2<span class="token punctuation">)</span>
    maxLen <span class="token operator">=</span> len1
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> maxLen<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>version1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>version2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> a <span class="token operator">===</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// i++</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token number">0</span>
<span class="token punctuation">}</span>

<span class="token comment">// 也可以不补零</span>
<span class="token keyword">const</span> <span class="token function-variable function">compareVersion</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">version1<span class="token punctuation">,</span> version2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  version1 <span class="token operator">=</span> version1<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;.&#39;</span><span class="token punctuation">)</span>
  version2 <span class="token operator">=</span> version2<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;.&#39;</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> maxLen <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>version1<span class="token punctuation">.</span>length<span class="token punctuation">,</span> version2<span class="token punctuation">.</span>length<span class="token punctuation">)</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> maxLen<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>version1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">??</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>version2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">??</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> a <span class="token operator">===</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// i++</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token number">0</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">compareVersion</span><span class="token punctuation">(</span><span class="token string">&#39;1.0&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;1.0.0&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 扩展1比较多个版本号并排序</span>

<span class="token keyword">const</span> <span class="token function-variable function">compareMoreVersion</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">versions</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> versions<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">compareVersion</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">compareMoreVersion</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;1.0&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;3.1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;1.01&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br></div></div><h2 id="_27-解析-url-参数" tabindex="-1"><a class="header-anchor" href="#_27-解析-url-参数" aria-hidden="true">#</a> 27. 解析 url 参数</h2><div class="custom-container tip"><p class="custom-container-title">注意</p><p>根据<code>name</code>获取<code>url</code>上的<code>search</code>参数值</p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">getQueryByName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> queryNameRegex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[?&amp;]</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=([^&amp;]*)(&amp;|$)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> queryNameMatch <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>queryNameRegex<span class="token punctuation">)</span>
  <span class="token comment">// 一般都会通过decodeURIComponent解码处理</span>
  <span class="token keyword">return</span> queryNameMatch <span class="token operator">?</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>queryNameMatch<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
<span class="token punctuation">}</span>

<span class="token comment">// https://www.baidu.com/?name=demo%20test&amp;sex=boy</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getQueryByName</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getQueryByName</span><span class="token punctuation">(</span><span class="token string">&#39;sex&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// demo test boy</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_28-实现获取js数据类型的通用函数" tabindex="-1"><a class="header-anchor" href="#_28-实现获取js数据类型的通用函数" aria-hidden="true">#</a> 28. 实现获取js数据类型的通用函数</h2><div class="custom-container tip"><p class="custom-container-title">注意</p><p>实现一个通用函数判断数据类型</p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">getType</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> r <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>

  <span class="token keyword">return</span> r<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\[object (.*?)\]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;$1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// number</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token string">&#39;demo test&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// string</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// boolean</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;demo test&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// symbol</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// array</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_29-字符串转化为驼峰" tabindex="-1"><a class="header-anchor" href="#_29-字符串转化为驼峰" aria-hidden="true">#</a> 29. 字符串转化为驼峰</h2><div class="custom-container tip"><p class="custom-container-title">注意</p><p>如下规则，将对应字符串变成驼峰写法</p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1.</span> foo <span class="token parameter">Bar</span> <span class="token operator">=&gt;</span> fooBar

<span class="token number">2.</span> foo<span class="token operator">-</span>bar<span class="token operator">--</span><span class="token operator">--</span> <span class="token operator">=&gt;</span> fooBar

<span class="token number">3.</span> <span class="token parameter">foo_bar__</span> <span class="token operator">=&gt;</span> fooBar
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">camelCase</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> camelCaseRegex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[-_\s]+(.)?</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>

  <span class="token keyword">return</span> string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>camelCaseRegex<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> char</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> char <span class="token operator">?</span> char<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">camelCase</span><span class="token punctuation">(</span><span class="token string">&#39;foo Bar&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// fooBar </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">camelCase</span><span class="token punctuation">(</span><span class="token string">&#39;foo-bar--&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// fooBar </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">camelCase</span><span class="token punctuation">(</span><span class="token string">&#39;foo_bar__&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// fooBar</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="_30-实现reduce" tabindex="-1"><a class="header-anchor" href="#_30-实现reduce" aria-hidden="true">#</a> 30. 实现reduce</h2><div class="custom-container tip"><p class="custom-container-title">注意</p><p><code>reduce</code> 方法对数组中的每个元素执行一个由您提供的<strong>reducer</strong>函数(升序执行)，将其结果汇总为单个返回值 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce" target="_blank" rel="noopener noreferrer">mdn<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> sum <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> prev <span class="token operator">+</span> cur<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span> <span class="token comment">// 10</span>

<span class="token comment">// 初始设置</span>
prev <span class="token operator">=</span> initialValue <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> cur <span class="token operator">=</span> <span class="token number">2</span>

<span class="token comment">// 第一次迭代</span>
prev <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span>  <span class="token number">3</span><span class="token punctuation">,</span> cur <span class="token operator">=</span> <span class="token number">3</span>

<span class="token comment">// 第二次迭代</span>
prev <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">=</span>  <span class="token number">6</span><span class="token punctuation">,</span> cur <span class="token operator">=</span> <span class="token number">4</span>

<span class="token comment">// 第三次迭代</span>
prev <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">6</span> <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">=</span>  <span class="token number">10</span><span class="token punctuation">,</span> cur <span class="token operator">=</span> <span class="token keyword">undefined</span> <span class="token punctuation">(</span>退出<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="代码实现-1" tabindex="-1"><a class="header-anchor" href="#代码实现-1" aria-hidden="true">#</a> 代码实现</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">reduce2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> initValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">!==</span> <span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>callback<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is not a function</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> pre <span class="token operator">=</span> initValue
  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">const</span> length <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> pre <span class="token operator">===</span> <span class="token string">&#39;undefined&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pre <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    i <span class="token operator">=</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      pre <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span>pre<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span> i <span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    i<span class="token operator">++</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> pre
<span class="token punctuation">}</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">]</span> 

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">reduce2</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result<span class="token punctuation">,</span> it</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  result <span class="token operator">+=</span> it
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="测试" tabindex="-1"><a class="header-anchor" href="#测试" aria-hidden="true">#</a> 测试</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> sum <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reduce2</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> prev <span class="token operator">+</span> cur<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span> <span class="token comment">// 10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: dean@57blocks.com">DeanSui</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/notes/assets/app.a6d8e189.js" defer></script>
  </body>
</html>
