<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.46">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>fiber 树渲染 | </title><meta name="description" content="君子藏器于身 待时而动 天下有道则见 无道则隐">
    <link rel="modulepreload" href="/notes/assets/app.e9fd9ffa.js"><link rel="modulepreload" href="/notes/assets/fibertree-commit.html.8b0645c4.js"><link rel="modulepreload" href="/notes/assets/fibertree-commit.html.838d32d9.js"><link rel="prefetch" href="/notes/assets/index.html.5fd94bab.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.a6abb857.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.ae77e968.js"><link rel="prefetch" href="/notes/assets/base.html.3d754fa5.js"><link rel="prefetch" href="/notes/assets/customCli.html.36e53760.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.2d46cabb.js"><link rel="prefetch" href="/notes/assets/adapter.html.5a9d6af2.js"><link rel="prefetch" href="/notes/assets/amd.html.2bea2db4.js"><link rel="prefetch" href="/notes/assets/builder.html.729f6b2e.js"><link rel="prefetch" href="/notes/assets/censorJquery.html.39371bf2.js"><link rel="prefetch" href="/notes/assets/combination.html.d817f852.js"><link rel="prefetch" href="/notes/assets/command.html.b4ecb5f8.js"><link rel="prefetch" href="/notes/assets/commonJS.html.0798834e.js"><link rel="prefetch" href="/notes/assets/constructor.html.30e7985e.js"><link rel="prefetch" href="/notes/assets/decoration.html.71ad24e0.js"><link rel="prefetch" href="/notes/assets/esHarmony.html.7c39ce29.js"><link rel="prefetch" href="/notes/assets/exposed.html.cb9784d3.js"><link rel="prefetch" href="/notes/assets/exterior.html.404cbc0a.js"><link rel="prefetch" href="/notes/assets/factory.html.c6fa80a5.js"><link rel="prefetch" href="/notes/assets/flyweight.html.d6fcb6c1.js"><link rel="prefetch" href="/notes/assets/functionalProgramming.html.1195cfd1.js"><link rel="prefetch" href="/notes/assets/intermediary.html.dec9cb53.js"><link rel="prefetch" href="/notes/assets/iterator.html.95b44153.js"><link rel="prefetch" href="/notes/assets/lazyInitial.html.5cde602d.js"><link rel="prefetch" href="/notes/assets/mixin.html.9c154f1d.js"><link rel="prefetch" href="/notes/assets/module.html.0f568c6d.js"><link rel="prefetch" href="/notes/assets/mvc.html.7795f31a.js"><link rel="prefetch" href="/notes/assets/mvp.html.b2ac7e69.js"><link rel="prefetch" href="/notes/assets/mvvm.html.b2ea5257.js"><link rel="prefetch" href="/notes/assets/observer.html.2e944745.js"><link rel="prefetch" href="/notes/assets/outward.html.9caf1ef6.js"><link rel="prefetch" href="/notes/assets/overview.html.f5d3c45f.js"><link rel="prefetch" href="/notes/assets/prototype.html.721f6b79.js"><link rel="prefetch" href="/notes/assets/proxy.html.53d7bdce.js"><link rel="prefetch" href="/notes/assets/singleton.html.b6dd9543.js"><link rel="prefetch" href="/notes/assets/axios.html.65151ad6.js"><link rel="prefetch" href="/notes/assets/createUnderscore.html.31b0b486.js"><link rel="prefetch" href="/notes/assets/jquery.html.531d64e8.js"><link rel="prefetch" href="/notes/assets/lodash.html.4b2564ab.js"><link rel="prefetch" href="/notes/assets/sentry.html.e888b325.js"><link rel="prefetch" href="/notes/assets/underscore.html.6110ee50.js"><link rel="prefetch" href="/notes/assets/vuex.html.fc16ecfa.js"><link rel="prefetch" href="/notes/assets/customCli.html.51768ec9.js"><link rel="prefetch" href="/notes/assets/description.html.766a5b08.js"><link rel="prefetch" href="/notes/assets/indx.html.9df0d7fc.js"><link rel="prefetch" href="/notes/assets/rebase.html.e99965ec.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.325841e6.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.1fae09b0.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.a531b81d.js"><link rel="prefetch" href="/notes/assets/44Questions.html.cfcba87e.js"><link rel="prefetch" href="/notes/assets/asyncAwait.html.f0015aa3.js"><link rel="prefetch" href="/notes/assets/babelCompile.html.77d68e32.js"><link rel="prefetch" href="/notes/assets/base.html.33fa02fb.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.c24e8ade.js"><link rel="prefetch" href="/notes/assets/baseWebpack.html.292b14cb.js"><link rel="prefetch" href="/notes/assets/codeSeparation.html.9d879cd5.js"><link rel="prefetch" href="/notes/assets/cycle.html.137809e7.js"><link rel="prefetch" href="/notes/assets/cycleOtherWay.html.ada0833d.js"><link rel="prefetch" href="/notes/assets/executionMechanism.html.951d5374.js"><link rel="prefetch" href="/notes/assets/hybrid.html.b0b3d836.js"><link rel="prefetch" href="/notes/assets/jsHandwriting.html.19b021ba.js"><link rel="prefetch" href="/notes/assets/jsonStringify.html.52da0969.js"><link rel="prefetch" href="/notes/assets/largeFileResumableUpload.html.508feaaf.js"><link rel="prefetch" href="/notes/assets/performance.html.68c4fc21.js"><link rel="prefetch" href="/notes/assets/promise.html.3b0b5c5e.js"><link rel="prefetch" href="/notes/assets/promiseAll.html.1b4e5e96.js"><link rel="prefetch" href="/notes/assets/spa.html.938883e6.js"><link rel="prefetch" href="/notes/assets/tsBaseInterview.html.bb72859b.js"><link rel="prefetch" href="/notes/assets/useEs6.html.7d7e4a2c.js"><link rel="prefetch" href="/notes/assets/webAnimations.html.6661a43e.js"><link rel="prefetch" href="/notes/assets/webpackInterview.html.3a3d02ad.js"><link rel="prefetch" href="/notes/assets/webpackLoader.html.6cfc263d.js"><link rel="prefetch" href="/notes/assets/webpackPublic.html.ec37b3f0.js"><link rel="prefetch" href="/notes/assets/weird.html.26aa839f.js"><link rel="prefetch" href="/notes/assets/es10News.html.291746c2.js"><link rel="prefetch" href="/notes/assets/es11News.html.8eff96d2.js"><link rel="prefetch" href="/notes/assets/es6Interview1.html.2b11b6e0.js"><link rel="prefetch" href="/notes/assets/es6Interview2.html.2b98737a.js"><link rel="prefetch" href="/notes/assets/es6Interview3.html.9ccf5fb1.js"><link rel="prefetch" href="/notes/assets/es6News.html.a9d31612.js"><link rel="prefetch" href="/notes/assets/es7News.html.9b4781b3.js"><link rel="prefetch" href="/notes/assets/es8News.html.9307577a.js"><link rel="prefetch" href="/notes/assets/es9News.html.6ac1e35c.js"><link rel="prefetch" href="/notes/assets/base.html.4c28f783.js"><link rel="prefetch" href="/notes/assets/nginxComprehensiveScene.html.f320dc2a.js"><link rel="prefetch" href="/notes/assets/commonlyUsed.html.3492e665.js"><link rel="prefetch" href="/notes/assets/inelegantHook.html.b55d7207.js"><link rel="prefetch" href="/notes/assets/interview1.html.2e20a58d.js"><link rel="prefetch" href="/notes/assets/interview2.html.9f5ee4a9.js"><link rel="prefetch" href="/notes/assets/interview3.html.c36fc333.js"><link rel="prefetch" href="/notes/assets/interview4.html.e024e4f1.js"><link rel="prefetch" href="/notes/assets/base.html.ad052a66.js"><link rel="prefetch" href="/notes/assets/introduction.html.5494f7c1.js"><link rel="prefetch" href="/notes/assets/base.html.d6e33357.js"><link rel="prefetch" href="/notes/assets/summarize.html.ad4e1588.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.6fc18be1.js"><link rel="prefetch" href="/notes/assets/index.html.dd06691f.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.675a8c87.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.78dd0170.js"><link rel="prefetch" href="/notes/assets/bigDataRender.html.d1f6216b.js"><link rel="prefetch" href="/notes/assets/progress.html.c7533ef6.js"><link rel="prefetch" href="/notes/assets/quirksStandards.html.1cab042f.js"><link rel="prefetch" href="/notes/assets/redrawReflow.html.2c7ff78e.js"><link rel="prefetch" href="/notes/assets/storageSpace.html.f29e9739.js"><link rel="prefetch" href="/notes/assets/webComLink.html.f667a10d.js"><link rel="prefetch" href="/notes/assets/webUrl.html.a93630bb.js"><link rel="prefetch" href="/notes/assets/spanWidthHeight.html.e4ad25d8.js"><link rel="prefetch" href="/notes/assets/baseCss.html.ec237054.js"><link rel="prefetch" href="/notes/assets/blockFormattingContext.html.9ab811ce.js"><link rel="prefetch" href="/notes/assets/containingBlock.html.9e23e696.js"><link rel="prefetch" href="/notes/assets/cssBeforeAfter.html.502b8b57.js"><link rel="prefetch" href="/notes/assets/cssBoxModal.html.cbe3c632.js"><link rel="prefetch" href="/notes/assets/cssCollapsing.html.a7d77cae.js"><link rel="prefetch" href="/notes/assets/cssCompatible.html.2377bc79.js"><link rel="prefetch" href="/notes/assets/cssFlexDemo.html.3eaeadc9.js"><link rel="prefetch" href="/notes/assets/cssFlexLayout.html.fc0f35eb.js"><link rel="prefetch" href="/notes/assets/cssGridLayout.html.8a22c979.js"><link rel="prefetch" href="/notes/assets/cssHack.html.3acfa041.js"><link rel="prefetch" href="/notes/assets/cssInlineBlock.html.3c2bf647.js"><link rel="prefetch" href="/notes/assets/cssPriority.html.20999d4d.js"><link rel="prefetch" href="/notes/assets/cssPseudo.html.10c6046c.js"><link rel="prefetch" href="/notes/assets/cssPseudoClass.html.1efe0528.js"><link rel="prefetch" href="/notes/assets/cssSelector.html.4c005d78.js"><link rel="prefetch" href="/notes/assets/cssTutorial.html.e9db71fd.js"><link rel="prefetch" href="/notes/assets/fieldInvalid.html.c03e5356.js"><link rel="prefetch" href="/notes/assets/frame.html.a01f241f.js"><link rel="prefetch" href="/notes/assets/knowledgePoints.html.63fc8117.js"><link rel="prefetch" href="/notes/assets/linkImport.html.c753a459.js"><link rel="prefetch" href="/notes/assets/stackingContext.html.61c46214.js"><link rel="prefetch" href="/notes/assets/tools.html.053a5b49.js"><link rel="prefetch" href="/notes/assets/units.html.b9e11db9.js"><link rel="prefetch" href="/notes/assets/transform.html.344d9c0e.js"><link rel="prefetch" href="/notes/assets/content.html.07e14491.js"><link rel="prefetch" href="/notes/assets/plugins.html.574ca307.js"><link rel="prefetch" href="/notes/assets/accesskey.html.bf424b11.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.adab2861.js"><link rel="prefetch" href="/notes/assets/canvasSvg.html.87df6fba.js"><link rel="prefetch" href="/notes/assets/deviceAPI.html.bf65293f.js"><link rel="prefetch" href="/notes/assets/globalAttr.html.f4ac6831.js"><link rel="prefetch" href="/notes/assets/htmlDatalist.html.3f218328.js"><link rel="prefetch" href="/notes/assets/htmlElement.html.d7b24e52.js"><link rel="prefetch" href="/notes/assets/interview10.html.89a58f87.js"><link rel="prefetch" href="/notes/assets/interview11.html.b7962668.js"><link rel="prefetch" href="/notes/assets/interview12.html.85c95a5c.js"><link rel="prefetch" href="/notes/assets/interview13.html.88df657a.js"><link rel="prefetch" href="/notes/assets/interview14.html.39d2f828.js"><link rel="prefetch" href="/notes/assets/interview15.html.aaef0b52.js"><link rel="prefetch" href="/notes/assets/interview16.html.ff167a6b.js"><link rel="prefetch" href="/notes/assets/interview17.html.c9001163.js"><link rel="prefetch" href="/notes/assets/interview18.html.880e3d1e.js"><link rel="prefetch" href="/notes/assets/interview19.html.1958d466.js"><link rel="prefetch" href="/notes/assets/interview20.html.21e48354.js"><link rel="prefetch" href="/notes/assets/interview21.html.6023e07c.js"><link rel="prefetch" href="/notes/assets/interview22.html.4677d656.js"><link rel="prefetch" href="/notes/assets/interview23.html.b8220b4c.js"><link rel="prefetch" href="/notes/assets/interview24.html.7f19c01b.js"><link rel="prefetch" href="/notes/assets/interview25.html.9ac61831.js"><link rel="prefetch" href="/notes/assets/interview26.html.377dde62.js"><link rel="prefetch" href="/notes/assets/interview27.html.5e98aced.js"><link rel="prefetch" href="/notes/assets/interview28.html.c1bfe472.js"><link rel="prefetch" href="/notes/assets/interview29.html.f741b535.js"><link rel="prefetch" href="/notes/assets/interview30.html.9696b49d.js"><link rel="prefetch" href="/notes/assets/interview31.html.4119a1a0.js"><link rel="prefetch" href="/notes/assets/interview32.html.117b8ee8.js"><link rel="prefetch" href="/notes/assets/interview33.html.f8e21947.js"><link rel="prefetch" href="/notes/assets/interview34.html.535144fb.js"><link rel="prefetch" href="/notes/assets/interview35.html.f2e76b28.js"><link rel="prefetch" href="/notes/assets/interview36.html.1f550f8d.js"><link rel="prefetch" href="/notes/assets/interview37.html.4000dac3.js"><link rel="prefetch" href="/notes/assets/interview38.html.e91632bf.js"><link rel="prefetch" href="/notes/assets/interview39.html.21e7baea.js"><link rel="prefetch" href="/notes/assets/interview40.html.f785a5f6.js"><link rel="prefetch" href="/notes/assets/interview41.html.73f4f84b.js"><link rel="prefetch" href="/notes/assets/interview42.html.d3d3e9ce.js"><link rel="prefetch" href="/notes/assets/interview43.html.5d63065b.js"><link rel="prefetch" href="/notes/assets/interview44.html.b19a4028.js"><link rel="prefetch" href="/notes/assets/interview45.html.9b8cda30.js"><link rel="prefetch" href="/notes/assets/interview46.html.24f10f5a.js"><link rel="prefetch" href="/notes/assets/interview47.html.f751d2f0.js"><link rel="prefetch" href="/notes/assets/interview48.html.12a690e2.js"><link rel="prefetch" href="/notes/assets/interview49.html.b4be6982.js"><link rel="prefetch" href="/notes/assets/interview5.html.3a3f66f3.js"><link rel="prefetch" href="/notes/assets/interview50.html.45a1a5cd.js"><link rel="prefetch" href="/notes/assets/interview51.html.19354eb8.js"><link rel="prefetch" href="/notes/assets/interview52.html.efd71ae9.js"><link rel="prefetch" href="/notes/assets/interview53.html.9e229722.js"><link rel="prefetch" href="/notes/assets/interview54.html.3ead9d6a.js"><link rel="prefetch" href="/notes/assets/interview55.html.473afc35.js"><link rel="prefetch" href="/notes/assets/interview56.html.7dfbd31d.js"><link rel="prefetch" href="/notes/assets/interview57.html.94e1e9b1.js"><link rel="prefetch" href="/notes/assets/interview58.html.31f24461.js"><link rel="prefetch" href="/notes/assets/interview59.html.4ed31be6.js"><link rel="prefetch" href="/notes/assets/interview6.html.f07f88a0.js"><link rel="prefetch" href="/notes/assets/interview7.html.747e06ec.js"><link rel="prefetch" href="/notes/assets/interview8.html.7b389f23.js"><link rel="prefetch" href="/notes/assets/interview9.html.a5375e9d.js"><link rel="prefetch" href="/notes/assets/linkImport.html.21b8f92b.js"><link rel="prefetch" href="/notes/assets/offlineStorage.html.2dbcc5e3.js"><link rel="prefetch" href="/notes/assets/regular.html.08ba75e6.js"><link rel="prefetch" href="/notes/assets/shake.html.6f9e1c10.js"><link rel="prefetch" href="/notes/assets/webWorker.html.b711262e.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.49e07d77.js"><link rel="prefetch" href="/notes/assets/cors.html.85e40ac6.js"><link rel="prefetch" href="/notes/assets/crossDomainCookie.html.29b16251.js"><link rel="prefetch" href="/notes/assets/fetch.html.601d2dea.js"><link rel="prefetch" href="/notes/assets/nestAxios.html.4d4fb363.js"><link rel="prefetch" href="/notes/assets/debounce.html.f9c9ebe3.js"><link rel="prefetch" href="/notes/assets/lodashPrinciple.html.0b11438b.js"><link rel="prefetch" href="/notes/assets/lodashThrottleDebounce.html.6f7ac4a0.js"><link rel="prefetch" href="/notes/assets/throttle.html.fa956948.js"><link rel="prefetch" href="/notes/assets/throttleDebounceReact.html.902e6e58.js"><link rel="prefetch" href="/notes/assets/cloneIntroduction.html.7e9b7555.js"><link rel="prefetch" href="/notes/assets/deepClone.html.9c670832.js"><link rel="prefetch" href="/notes/assets/lodashDeepClone.html.5d982cc4.js"><link rel="prefetch" href="/notes/assets/objectAssign.html.fd2a8018.js"><link rel="prefetch" href="/notes/assets/arraySourceCode.html.198d518d.js"><link rel="prefetch" href="/notes/assets/baseHigh.html.b6f9a2ec.js"><link rel="prefetch" href="/notes/assets/currying.html.3ae0ed6f.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.095e69bb.js"><link rel="prefetch" href="/notes/assets/eventLoop.html.9c0541d6.js"><link rel="prefetch" href="/notes/assets/iife.html.af8ca19a.js"><link rel="prefetch" href="/notes/assets/interview1.html.9063c7a3.js"><link rel="prefetch" href="/notes/assets/jsCompatible.html.96812c57.js"><link rel="prefetch" href="/notes/assets/baseProyotype.html.0bcddabd.js"><link rel="prefetch" href="/notes/assets/functionObjectResource.html.9c0931e5.js"><link rel="prefetch" href="/notes/assets/prototypeInherit.html.37802d14.js"><link rel="prefetch" href="/notes/assets/closureInterview.html.154b277a.js"><link rel="prefetch" href="/notes/assets/scopeChain.html.01bf2994.js"><link rel="prefetch" href="/notes/assets/understandingClosures.html.65acdf9e.js"><link rel="prefetch" href="/notes/assets/executionStack.html.e929b218.js"><link rel="prefetch" href="/notes/assets/memoryLeak.html.926d804a.js"><link rel="prefetch" href="/notes/assets/memoryMechanism.html.7cd99172.js"><link rel="prefetch" href="/notes/assets/memorySpace.html.c936958b.js"><link rel="prefetch" href="/notes/assets/precompiled.html.679c2302.js"><link rel="prefetch" href="/notes/assets/variableObject.html.637de206.js"><link rel="prefetch" href="/notes/assets/arrowFunctionThis.html.464b1960.js"><link rel="prefetch" href="/notes/assets/bindSimulation.html.1caac5bf.js"><link rel="prefetch" href="/notes/assets/callApply.html.04d662f8.js"><link rel="prefetch" href="/notes/assets/newSimulation.html.fa412734.js"><link rel="prefetch" href="/notes/assets/thisBind.html.30924f25.js"><link rel="prefetch" href="/notes/assets/interview1.html.fcb31793.js"><link rel="prefetch" href="/notes/assets/interview10.html.d3e7493d.js"><link rel="prefetch" href="/notes/assets/interview11.html.18a56544.js"><link rel="prefetch" href="/notes/assets/interview12.html.99321eaf.js"><link rel="prefetch" href="/notes/assets/interview13.html.44b1476b.js"><link rel="prefetch" href="/notes/assets/interview14.html.45b2c26a.js"><link rel="prefetch" href="/notes/assets/interview15.html.0d81e102.js"><link rel="prefetch" href="/notes/assets/interview16.html.688d10d3.js"><link rel="prefetch" href="/notes/assets/interview17.html.3e54c07c.js"><link rel="prefetch" href="/notes/assets/interview18.html.a371161d.js"><link rel="prefetch" href="/notes/assets/interview19.html.27acdd64.js"><link rel="prefetch" href="/notes/assets/interview2.html.15df2cfb.js"><link rel="prefetch" href="/notes/assets/interview20.html.354c37ba.js"><link rel="prefetch" href="/notes/assets/interview21.html.40979faa.js"><link rel="prefetch" href="/notes/assets/interview22.html.bb445fc9.js"><link rel="prefetch" href="/notes/assets/interview23.html.a8e75836.js"><link rel="prefetch" href="/notes/assets/interview24.html.409c61a5.js"><link rel="prefetch" href="/notes/assets/interview25.html.1843ea8d.js"><link rel="prefetch" href="/notes/assets/interview26.html.f4ca513a.js"><link rel="prefetch" href="/notes/assets/interview27.html.fc367e09.js"><link rel="prefetch" href="/notes/assets/interview28.html.7402b5d2.js"><link rel="prefetch" href="/notes/assets/interview29.html.0dde0c88.js"><link rel="prefetch" href="/notes/assets/interview3.html.d4dfc1cc.js"><link rel="prefetch" href="/notes/assets/interview30.html.be7e9c89.js"><link rel="prefetch" href="/notes/assets/interview4.html.9ae3190b.js"><link rel="prefetch" href="/notes/assets/interview5.html.25c7953c.js"><link rel="prefetch" href="/notes/assets/interview6.html.23353288.js"><link rel="prefetch" href="/notes/assets/interview7.html.ee377fc3.js"><link rel="prefetch" href="/notes/assets/interview8.html.9bcae03d.js"><link rel="prefetch" href="/notes/assets/interview9.html.55c4e196.js"><link rel="prefetch" href="/notes/assets/adjacentSiblingCombinator.html.07f34992.js"><link rel="prefetch" href="/notes/assets/attributeSelectors.html.ce90852c.js"><link rel="prefetch" href="/notes/assets/charset.html.078dbfdb.js"><link rel="prefetch" href="/notes/assets/childCombinator.html.4ff9d830.js"><link rel="prefetch" href="/notes/assets/classSelectors.html.6b949801.js"><link rel="prefetch" href="/notes/assets/descendantCombinator.html.fb2c8962.js"><link rel="prefetch" href="/notes/assets/generalSiblingCombinator.html.0fd2d0c6.js"><link rel="prefetch" href="/notes/assets/iDSelectors.html.39037901.js"><link rel="prefetch" href="/notes/assets/pseudoClasses.html.25d078a3.js"><link rel="prefetch" href="/notes/assets/pseudoElements.html.8dc0191a.js"><link rel="prefetch" href="/notes/assets/selectorList.html.6fe90e0a.js"><link rel="prefetch" href="/notes/assets/typeSelectors.html.b491ac5f.js"><link rel="prefetch" href="/notes/assets/universalSelectors.html.816f3c7b.js"><link rel="prefetch" href="/notes/assets/IterationProtocols.html.7d48aa19.js"><link rel="prefetch" href="/notes/assets/arrayFlat.html.5fa02b31.js"><link rel="prefetch" href="/notes/assets/asyncHistory.html.8dce6d6c.js"><link rel="prefetch" href="/notes/assets/eventLoop.html.a507c544.js"><link rel="prefetch" href="/notes/assets/fileReader.html.28b32ac8.js"><link rel="prefetch" href="/notes/assets/formData.html.36930f6c.js"><link rel="prefetch" href="/notes/assets/functionGenerator.html.c22d434a.js"><link rel="prefetch" href="/notes/assets/generator.html.fa79ded8.js"><link rel="prefetch" href="/notes/assets/intersectionObserver.html.d0a34581.js"><link rel="prefetch" href="/notes/assets/map.html.1c60889c.js"><link rel="prefetch" href="/notes/assets/promise.html.0d3e87d5.js"><link rel="prefetch" href="/notes/assets/set.html.6c24d5c7.js"><link rel="prefetch" href="/notes/assets/string.html.5ba9d368.js"><link rel="prefetch" href="/notes/assets/symbol.html.6fdbbd29.js"><link rel="prefetch" href="/notes/assets/xMLHttpRequest.html.33d4ce2a.js"><link rel="prefetch" href="/notes/assets/spreadSyntax.html.f3c9ea47.js"><link rel="prefetch" href="/notes/assets/strictMode.html.e8207ff6.js"><link rel="prefetch" href="/notes/assets/cache.html.4940d7b2.js"><link rel="prefetch" href="/notes/assets/drag1.html.afd4ea62.js"><link rel="prefetch" href="/notes/assets/oneLineCode.html.55bfff06.js"><link rel="prefetch" href="/notes/assets/oneLineCodeArray.html.bedca4e8.js"><link rel="prefetch" href="/notes/assets/oneLineCodeDOM.html.80aa1194.js"><link rel="prefetch" href="/notes/assets/oneLineCodeDateTime.html.ac4e9ccb.js"><link rel="prefetch" href="/notes/assets/oneLineCodeFunction.html.84c7454e.js"><link rel="prefetch" href="/notes/assets/oneLineCodeMath.html.5742ddd7.js"><link rel="prefetch" href="/notes/assets/oneLineCodeMisc.html.0cb08be7.js"><link rel="prefetch" href="/notes/assets/oneLineCodeNumber.html.f0aa314e.js"><link rel="prefetch" href="/notes/assets/oneLineCodeObject.html.245a76f8.js"><link rel="prefetch" href="/notes/assets/oneLineCodeRandom.html.d3e82fdf.js"><link rel="prefetch" href="/notes/assets/oneLineCodeString.html.f6633104.js"><link rel="prefetch" href="/notes/assets/oneLineCodeValidator.html.aa3f2d2a.js"><link rel="prefetch" href="/notes/assets/typeScriptCache.html.039f0904.js"><link rel="prefetch" href="/notes/assets/reactBase.html.552b6769.js"><link rel="prefetch" href="/notes/assets/reactTypescript.html.93bff7eb.js"><link rel="prefetch" href="/notes/assets/vue2Base.html.4b24158e.js"><link rel="prefetch" href="/notes/assets/vue2Table.html.2318d76c.js"><link rel="prefetch" href="/notes/assets/vue2offsetTop.html.bfdac791.js"><link rel="prefetch" href="/notes/assets/componentWillXXX.html.d91a05e2.js"><link rel="prefetch" href="/notes/assets/disrupt.html.5ef7dcea.js"><link rel="prefetch" href="/notes/assets/lane.html.9b262dfe.js"><link rel="prefetch" href="/notes/assets/prepare.html.87381a22.js"><link rel="prefetch" href="/notes/assets/redux.html.4f7d6c76.js"><link rel="prefetch" href="/notes/assets/scheduler.html.3c27a810.js"><link rel="prefetch" href="/notes/assets/multi.html.99533875.js"><link rel="prefetch" href="/notes/assets/one.html.b16c51c1.js"><link rel="prefetch" href="/notes/assets/prepare.html.3385c4d6.js"><link rel="prefetch" href="/notes/assets/create.html.0ab7996b.js"><link rel="prefetch" href="/notes/assets/prepare.html.91332b0b.js"><link rel="prefetch" href="/notes/assets/structure.html.5933ee9d.js"><link rel="prefetch" href="/notes/assets/useeffect.html.f2f6257f.js"><link rel="prefetch" href="/notes/assets/usememo.html.23ce2e2f.js"><link rel="prefetch" href="/notes/assets/useref.html.3eec1369.js"><link rel="prefetch" href="/notes/assets/usestate.html.d4ae4308.js"><link rel="prefetch" href="/notes/assets/file.html.8851f09a.js"><link rel="prefetch" href="/notes/assets/idea.html.3ef26f24.js"><link rel="prefetch" href="/notes/assets/jsx.html.37b1b037.js"><link rel="prefetch" href="/notes/assets/newConstructure.html.becdd02d.js"><link rel="prefetch" href="/notes/assets/oldConstructure.html.b667b873.js"><link rel="prefetch" href="/notes/assets/source.html.e172df48.js"><link rel="prefetch" href="/notes/assets/summary.html.cf5b0199.js"><link rel="prefetch" href="/notes/assets/basePrinciple.html.10653078.js"><link rel="prefetch" href="/notes/assets/componentApi.html.315ee627.js"><link rel="prefetch" href="/notes/assets/domApi.html.415f4315.js"><link rel="prefetch" href="/notes/assets/hoc.html.1d76d049.js"><link rel="prefetch" href="/notes/assets/hookApi.html.0d83a935.js"><link rel="prefetch" href="/notes/assets/hookCustom.html.fda10772.js"><link rel="prefetch" href="/notes/assets/hookPrinciple.html.6f4d0ebd.js"><link rel="prefetch" href="/notes/assets/hookUse.html.ead46266.js"><link rel="prefetch" href="/notes/assets/reactKeeplive.html.30cd74b5.js"><link rel="prefetch" href="/notes/assets/reactRedux.html.677fb4e0.js"><link rel="prefetch" href="/notes/assets/reactRouter.html.1cef54c7.js"><link rel="prefetch" href="/notes/assets/toolApi.html.99668bba.js"><link rel="prefetch" href="/notes/assets/beginWork.html.7a33c00f.js"><link rel="prefetch" href="/notes/assets/completeWork.html.2035893d.js"><link rel="prefetch" href="/notes/assets/doubleBuffer.html.cc4445bd.js"><link rel="prefetch" href="/notes/assets/fiber-mental.html.4dfd8f47.js"><link rel="prefetch" href="/notes/assets/fiber.html.52caaab5.js"><link rel="prefetch" href="/notes/assets/reconciler.html.9699e007.js"><link rel="prefetch" href="/notes/assets/beforeMutation.html.33716e1b.js"><link rel="prefetch" href="/notes/assets/layout.html.a14b1eed.js"><link rel="prefetch" href="/notes/assets/mutation.html.f7e1003d.js"><link rel="prefetch" href="/notes/assets/prepare.html.ddc74f37.js"><link rel="prefetch" href="/notes/assets/mental.html.14317c32.js"><link rel="prefetch" href="/notes/assets/prepare.html.3ca09907.js"><link rel="prefetch" href="/notes/assets/priority.html.26fe7059.js"><link rel="prefetch" href="/notes/assets/reactdom.html.c2db9055.js"><link rel="prefetch" href="/notes/assets/setstate.html.b94928c4.js"><link rel="prefetch" href="/notes/assets/update.html.c22aefc2.js"><link rel="prefetch" href="/notes/assets/bitfiled.html.617d13be.js"><link rel="prefetch" href="/notes/assets/dfs.html.ec91a986.js"><link rel="prefetch" href="/notes/assets/diff.html.cc4104fd.js"><link rel="prefetch" href="/notes/assets/heapsort.html.f7d22f26.js"><link rel="prefetch" href="/notes/assets/linkedlist.html.5d65c236.js"><link rel="prefetch" href="/notes/assets/stack.html.bd0c161f.js"><link rel="prefetch" href="/notes/assets/bootstrap.html.88423719.js"><link rel="prefetch" href="/notes/assets/context.html.c7443262.js"><link rel="prefetch" href="/notes/assets/fibertree-create.html.b7f49839.js"><link rel="prefetch" href="/notes/assets/fibertree-prepare.html.8d41cc2e.js"><link rel="prefetch" href="/notes/assets/fibertree-update.html.0d18b903.js"><link rel="prefetch" href="/notes/assets/hook-effect.html.0f255dcd.js"><link rel="prefetch" href="/notes/assets/hook-state.html.f8558f5d.js"><link rel="prefetch" href="/notes/assets/hook-summary.html.61a205c0.js"><link rel="prefetch" href="/notes/assets/macro-structure.html.fbf7eef1.js"><link rel="prefetch" href="/notes/assets/object-structure.html.edd9c1b5.js"><link rel="prefetch" href="/notes/assets/priority.html.5439c4ff.js"><link rel="prefetch" href="/notes/assets/reconciler-workflow.html.e0bbcc08.js"><link rel="prefetch" href="/notes/assets/scheduler.html.10c55373.js"><link rel="prefetch" href="/notes/assets/state-effects.html.e60ede50.js"><link rel="prefetch" href="/notes/assets/synthetic-event.html.d0770b3a.js"><link rel="prefetch" href="/notes/assets/workloop.html.13b1a682.js"><link rel="prefetch" href="/notes/assets/ast.html.d21023b0.js"><link rel="prefetch" href="/notes/assets/binder.html.a2714bf7.js"><link rel="prefetch" href="/notes/assets/checker.html.24906eb0.js"><link rel="prefetch" href="/notes/assets/emitter.html.b1029e01.js"><link rel="prefetch" href="/notes/assets/overview.html.19eebc00.js"><link rel="prefetch" href="/notes/assets/parser.html.2d94d647.js"><link rel="prefetch" href="/notes/assets/program.html.4db1161d.js"><link rel="prefetch" href="/notes/assets/scanner.html.c2c24c94.js"><link rel="prefetch" href="/notes/assets/common.html.8eba1020.js"><link rel="prefetch" href="/notes/assets/interpreting.html.30f91541.js"><link rel="prefetch" href="/notes/assets/class.html.5ae13692.js"><link rel="prefetch" href="/notes/assets/commandline-behavior.html.0473e087.js"><link rel="prefetch" href="/notes/assets/comments.html.65dd32cd.js"><link rel="prefetch" href="/notes/assets/common-bug-not-bugs.html.43a82661.js"><link rel="prefetch" href="/notes/assets/common-feature-request.html.b1331da1.js"><link rel="prefetch" href="/notes/assets/decorators.html.17216663.js"><link rel="prefetch" href="/notes/assets/enums.html.3fc69842.js"><link rel="prefetch" href="/notes/assets/function.html.e1d07c96.js"><link rel="prefetch" href="/notes/assets/generics.html.0b7a519c.js"><link rel="prefetch" href="/notes/assets/glossary-and-terms.html.ce339703.js"><link rel="prefetch" href="/notes/assets/jsx-and-react.html.32a80645.js"><link rel="prefetch" href="/notes/assets/modules.html.af19d0f1.js"><link rel="prefetch" href="/notes/assets/thing-that-dont-work.html.fc69aaa7.js"><link rel="prefetch" href="/notes/assets/tsconfig-behavior.html.6a2d0189.js"><link rel="prefetch" href="/notes/assets/type-guards.html.d21e2a7d.js"><link rel="prefetch" href="/notes/assets/type-system-behavior.html.0e39b791.js"><link rel="prefetch" href="/notes/assets/nonReactJSX.html.19eab2c4.js"><link rel="prefetch" href="/notes/assets/reactJSX.html.fd2bb738.js"><link rel="prefetch" href="/notes/assets/support.html.cb016cd3.js"><link rel="prefetch" href="/notes/assets/typescript-3.7.html.2fac1e82.js"><link rel="prefetch" href="/notes/assets/typescript-3.8.html.a220982d.js"><link rel="prefetch" href="/notes/assets/typescript-3.9.html.6167b329.js"><link rel="prefetch" href="/notes/assets/compilationContext.html.bbad3955.js"><link rel="prefetch" href="/notes/assets/declarationspaces.html.3bd1aac8.js"><link rel="prefetch" href="/notes/assets/dynamicImportExpressions.html.12ca7d94.js"><link rel="prefetch" href="/notes/assets/inDepthTs.html.41bd2192.js"><link rel="prefetch" href="/notes/assets/modules.html.a6bcaddb.js"><link rel="prefetch" href="/notes/assets/namespaces.html.4bb82e1a.js"><link rel="prefetch" href="/notes/assets/unknownAny.html.f557d28e.js"><link rel="prefetch" href="/notes/assets/avoidExportDefault.html.82c3363f.js"><link rel="prefetch" href="/notes/assets/barrel.html.ec59a7f8.js"><link rel="prefetch" href="/notes/assets/bind.html.f576f83b.js"><link rel="prefetch" href="/notes/assets/buildToggles.html.4c044ce6.js"><link rel="prefetch" href="/notes/assets/classAreUseful.html.4a58ec93.js"><link rel="prefetch" href="/notes/assets/covarianceAndContravariance.html.992ff90f.js"><link rel="prefetch" href="/notes/assets/createArrays.html.72326f33.js"><link rel="prefetch" href="/notes/assets/curry.html.0a0a4a8e.js"><link rel="prefetch" href="/notes/assets/functionParameters.html.4779bba1.js"><link rel="prefetch" href="/notes/assets/infer.html.f0f8f422.js"><link rel="prefetch" href="/notes/assets/lazyObjectLiteralInitialization.html.9d27e86b.js"><link rel="prefetch" href="/notes/assets/limitPropertySetters.html.d7fb2131.js"><link rel="prefetch" href="/notes/assets/metadata.html.09b09148.js"><link rel="prefetch" href="/notes/assets/nominalTyping.html.06f4c02c.js"><link rel="prefetch" href="/notes/assets/outFileCaution.html.1b1564f3.js"><link rel="prefetch" href="/notes/assets/singletonPatern.html.93fe6c2e.js"><link rel="prefetch" href="/notes/assets/statefulFunctions.html.acc67a02.js"><link rel="prefetch" href="/notes/assets/staticConstructors.html.1f2ea4dd.js"><link rel="prefetch" href="/notes/assets/stringBasedEmuns.html.9cf73254.js"><link rel="prefetch" href="/notes/assets/truthy.html.7b3d8315.js"><link rel="prefetch" href="/notes/assets/typeInstantiation.html.03ce0207.js"><link rel="prefetch" href="/notes/assets/typesafeEventEmitter.html.fed58529.js"><link rel="prefetch" href="/notes/assets/ambient.html.b80ddcae.js"><link rel="prefetch" href="/notes/assets/callable.html.e9d545d6.js"><link rel="prefetch" href="/notes/assets/discrominatedUnion.html.ff3dcf08.js"><link rel="prefetch" href="/notes/assets/enums.html.22190da6.js"><link rel="prefetch" href="/notes/assets/exceptionsHanding.html.8504963b.js"><link rel="prefetch" href="/notes/assets/freshness.html.64e8a122.js"><link rel="prefetch" href="/notes/assets/functions.html.13d15914.js"><link rel="prefetch" href="/notes/assets/generices.html.b6921a89.js"><link rel="prefetch" href="/notes/assets/indexSignatures.html.13d6d22b.js"><link rel="prefetch" href="/notes/assets/interfaces.html.d45c37f0.js"><link rel="prefetch" href="/notes/assets/lib.html.4beff787.js"><link rel="prefetch" href="/notes/assets/literals.html.3f2f849c.js"><link rel="prefetch" href="/notes/assets/migrating.html.339ba887.js"><link rel="prefetch" href="/notes/assets/mixins.html.7b55b989.js"><link rel="prefetch" href="/notes/assets/movingTypes.html.38aa51b0.js"><link rel="prefetch" href="/notes/assets/neverType.html.75619579.js"><link rel="prefetch" href="/notes/assets/overview.html.d10a6a35.js"><link rel="prefetch" href="/notes/assets/readonly.html.28810593.js"><link rel="prefetch" href="/notes/assets/thisType.html.47c0c223.js"><link rel="prefetch" href="/notes/assets/typeAssertion.html.87d528f7.js"><link rel="prefetch" href="/notes/assets/typeCompatibility.html.9c3c7d06.js"><link rel="prefetch" href="/notes/assets/typeGuard.html.317bac98.js"><link rel="prefetch" href="/notes/assets/typeInference.html.8f05f6c3.js"><link rel="prefetch" href="/notes/assets/types.html.d19cc157.js"><link rel="prefetch" href="/notes/assets/pluginDva.html.d1d9e748.js"><link rel="prefetch" href="/notes/assets/pluginQiankun.html.7dab7334.js"><link rel="prefetch" href="/notes/assets/codegen.html.1735e461.js"><link rel="prefetch" href="/notes/assets/entrance.html.266225da.js"><link rel="prefetch" href="/notes/assets/optimize.html.674b11b3.js"><link rel="prefetch" href="/notes/assets/outline.html.ae40e5c4.js"><link rel="prefetch" href="/notes/assets/parse.html.f64a2d11.js"><link rel="prefetch" href="/notes/assets/async-component.html.28d5d444.js"><link rel="prefetch" href="/notes/assets/component-register.html.b65135c0.js"><link rel="prefetch" href="/notes/assets/create-component.html.6ab6521e.js"><link rel="prefetch" href="/notes/assets/lifecycle.html.8d7a96ae.js"><link rel="prefetch" href="/notes/assets/merge-option.html.fce5ab83.js"><link rel="prefetch" href="/notes/assets/outline.html.a8e7fe79.js"><link rel="prefetch" href="/notes/assets/patch.html.24db82cb.js"><link rel="prefetch" href="/notes/assets/_index.html.e07c74b0.js"><link rel="prefetch" href="/notes/assets/create-element.html.2f8cf81c.js"><link rel="prefetch" href="/notes/assets/mounted.html.e3474385.js"><link rel="prefetch" href="/notes/assets/new-vue.html.b1d29325.js"><link rel="prefetch" href="/notes/assets/render.html.f1ea2503.js"><link rel="prefetch" href="/notes/assets/update.html.27f64c43.js"><link rel="prefetch" href="/notes/assets/virtual-dom.html.c7b55b01.js"><link rel="prefetch" href="/notes/assets/event.html.b4efa3b2.js"><link rel="prefetch" href="/notes/assets/keep-alive.html.4f803771.js"><link rel="prefetch" href="/notes/assets/outline.html.6a524ae3.js"><link rel="prefetch" href="/notes/assets/slot.html.eaf5c9a4.js"><link rel="prefetch" href="/notes/assets/tansition-group.html.cbb8a3d6.js"><link rel="prefetch" href="/notes/assets/tansition.html.a69ccf5b.js"><link rel="prefetch" href="/notes/assets/v-model.html.63c7fa55.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.0306d961.js"><link rel="prefetch" href="/notes/assets/baseInterviewSecond.html.49263449.js"><link rel="prefetch" href="/notes/assets/componentCommunication.html.1addc104.js"><link rel="prefetch" href="/notes/assets/detailedResponsiveness.html.654fec55.js"><link rel="prefetch" href="/notes/assets/diff.html.5c7a53ac.js"><link rel="prefetch" href="/notes/assets/eventBinding.html.1747d384.js"><link rel="prefetch" href="/notes/assets/eventMechanism.html.62b75039.js"><link rel="prefetch" href="/notes/assets/key.html.48506e77.js"><link rel="prefetch" href="/notes/assets/knowledgeSystem.html.e1447b13.js"><link rel="prefetch" href="/notes/assets/slot.html.a8513190.js"><link rel="prefetch" href="/notes/assets/sourceCodeAsyncDomUpdateNextTick.html.dd364f2d.js"><link rel="prefetch" href="/notes/assets/sourceCodeElementBroadcastDispatch.html.56ebef73.js"><link rel="prefetch" href="/notes/assets/sourceCodeKeepAlive.html.09fa79aa.js"><link rel="prefetch" href="/notes/assets/sourceCodeResponsiveness.html.0da0a55c.js"><link rel="prefetch" href="/notes/assets/sourceCodeTemplateCompilation.html.de8ecd3e.js"><link rel="prefetch" href="/notes/assets/sourceCodeTemplateDom.html.3ba45fe7.js"><link rel="prefetch" href="/notes/assets/sourceCodeVuex.html.a33f53db.js"><link rel="prefetch" href="/notes/assets/templateCompilation.html.c892ed89.js"><link rel="prefetch" href="/notes/assets/vNode.html.3fe1ba1a.js"><link rel="prefetch" href="/notes/assets/vNodeDiff.html.94f17e77.js"><link rel="prefetch" href="/notes/assets/build.html.bb96d7fd.js"><link rel="prefetch" href="/notes/assets/directory.html.04a221e0.js"><link rel="prefetch" href="/notes/assets/entrance.html.424b6dd1.js"><link rel="prefetch" href="/notes/assets/flow.html.4b479893.js"><link rel="prefetch" href="/notes/assets/component-update.html.598c84a1.js"><link rel="prefetch" href="/notes/assets/computed-watcher.html.e6150b01.js"><link rel="prefetch" href="/notes/assets/getters.html.2dce3eca.js"><link rel="prefetch" href="/notes/assets/next-tick.html.c306007a.js"><link rel="prefetch" href="/notes/assets/outline.html.26e4b651.js"><link rel="prefetch" href="/notes/assets/props.html.84d728db.js"><link rel="prefetch" href="/notes/assets/questions.html.faae8d87.js"><link rel="prefetch" href="/notes/assets/reactive-object.html.0a684e2e.js"><link rel="prefetch" href="/notes/assets/setters.html.961aafc8.js"><link rel="prefetch" href="/notes/assets/summary.html.c4853ec8.js"><link rel="prefetch" href="/notes/assets/install.html.f509d18f.js"><link rel="prefetch" href="/notes/assets/matcher.html.067ea897.js"><link rel="prefetch" href="/notes/assets/outline.html.a111b655.js"><link rel="prefetch" href="/notes/assets/router.html.fea98cc5.js"><link rel="prefetch" href="/notes/assets/transition-to.html.ebf8d62b.js"><link rel="prefetch" href="/notes/assets/api.html.45043f9b.js"><link rel="prefetch" href="/notes/assets/idex.html.e112457d.js"><link rel="prefetch" href="/notes/assets/init.html.9d2e055b.js"><link rel="prefetch" href="/notes/assets/plugin.html.928c2159.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.4ef068ff.js"><link rel="prefetch" href="/notes/assets/configuration.html.8083a0ca.js"><link rel="prefetch" href="/notes/assets/entryPoints.html.4bea34de.js"><link rel="prefetch" href="/notes/assets/loader.html.68794263.js"><link rel="prefetch" href="/notes/assets/output.html.bae04749.js"><link rel="prefetch" href="/notes/assets/plugin.html.4eeb072b.js"><link rel="prefetch" href="/notes/assets/webpackInterview.html.95f30c3f.js"><link rel="prefetch" href="/notes/assets/reactApi.html.2104e776.js"><link rel="prefetch" href="/notes/assets/reactChildren.html.6b7f3068.js"><link rel="prefetch" href="/notes/assets/reactElement.html.08b2978f.js"><link rel="prefetch" href="/notes/assets/reactFiber.html.f919a48c.js"><link rel="prefetch" href="/notes/assets/commitAllHostEffects.html.7b11170a.js"><link rel="prefetch" href="/notes/assets/commitAllLifeCycles.html.16da4023.js"><link rel="prefetch" href="/notes/assets/commitBeforeMutationLifecycles.html.5ba39311.js"><link rel="prefetch" href="/notes/assets/commitDeletion.html.f742b166.js"><link rel="prefetch" href="/notes/assets/commitPlacement.html.b4775d16.js"><link rel="prefetch" href="/notes/assets/commitRoot.html.2bf6c1ca.js"><link rel="prefetch" href="/notes/assets/commitWork.html.dc3ab2b1.js"><link rel="prefetch" href="/notes/assets/invokeGuardedCallback.html.f5292698.js"><link rel="prefetch" href="/notes/assets/expirationTime.html.b8a67046.js"><link rel="prefetch" href="/notes/assets/reactDomRender.html.0b76fdb9.js"><link rel="prefetch" href="/notes/assets/setStateForceUpdate.html.a5023b8b.js"><link rel="prefetch" href="/notes/assets/context.html.5041dfce.js"><link rel="prefetch" href="/notes/assets/evenInit.html.2cd645a3.js"><link rel="prefetch" href="/notes/assets/eventBind.html.e37dd4c9.js"><link rel="prefetch" href="/notes/assets/eventCreateEventObject.html.fb328078.js"><link rel="prefetch" href="/notes/assets/eventDispath.html.f6f045bb.js"><link rel="prefetch" href="/notes/assets/hydrate.html.b74fb015.js"><link rel="prefetch" href="/notes/assets/ref.html.6898834e.js"><link rel="prefetch" href="/notes/assets/suspense.html.7b33e91d.js"><link rel="prefetch" href="/notes/assets/suspenseLazy.html.b0f2aa2c.js"><link rel="prefetch" href="/notes/assets/suspenseWork.html.e275034c.js"><link rel="prefetch" href="/notes/assets/hooksCommon.html.597fcea1.js"><link rel="prefetch" href="/notes/assets/hooksOther.html.de33223b.js"><link rel="prefetch" href="/notes/assets/start.html.dc53f83a.js"><link rel="prefetch" href="/notes/assets/useEffect.html.4cde9c87.js"><link rel="prefetch" href="/notes/assets/useState.html.8bbec48b.js"><link rel="prefetch" href="/notes/assets/base.html.5440e744.js"><link rel="prefetch" href="/notes/assets/commpontDiff.html.d7104fc7.js"><link rel="prefetch" href="/notes/assets/componentUpdate.html.59d0e27d.js"><link rel="prefetch" href="/notes/assets/renderProcess.html.2f886f53.js"><link rel="prefetch" href="/notes/assets/schedulingPrinciple.html.160d98cd.js"><link rel="prefetch" href="/notes/assets/beginWork.html.e8a4ae65.js"><link rel="prefetch" href="/notes/assets/globalVariable.html.cebaa128.js"><link rel="prefetch" href="/notes/assets/mountIndeterminateComponent.html.85755a9e.js"><link rel="prefetch" href="/notes/assets/mountLazyCompont.html.44e8bfbb.js"><link rel="prefetch" href="/notes/assets/performUnitOfWork.html.c236e137.js"><link rel="prefetch" href="/notes/assets/performWork.html.111cb729.js"><link rel="prefetch" href="/notes/assets/reactScheduler.html.8034a0cb.js"><link rel="prefetch" href="/notes/assets/reconcileChildren.html.f5a21cb0.js"><link rel="prefetch" href="/notes/assets/reconcileChildrenArray.html.aa74cf86.js"><link rel="prefetch" href="/notes/assets/reconcileSingleElement.html.b360dbc7.js"><link rel="prefetch" href="/notes/assets/renderRoot.html.b1d0c1be.js"><link rel="prefetch" href="/notes/assets/scheduleWork.html.28b4d5db.js"><link rel="prefetch" href="/notes/assets/throwException.html.269ae6a0.js"><link rel="prefetch" href="/notes/assets/updateClassComponent.html.1c51bd3d.js"><link rel="prefetch" href="/notes/assets/updateContextConsumer.html.bd5557fb.js"><link rel="prefetch" href="/notes/assets/updateContextProvider.html.191c8bfe.js"><link rel="prefetch" href="/notes/assets/updateForwardRef.html.98f2c65a.js"><link rel="prefetch" href="/notes/assets/updateFragment.html.eee79c9e.js"><link rel="prefetch" href="/notes/assets/updateFunctionalComponent.html.2066a73a.js"><link rel="prefetch" href="/notes/assets/updateHostComponent.html.4dcff0e9.js"><link rel="prefetch" href="/notes/assets/updateHostRoot.html.17211a9a.js"><link rel="prefetch" href="/notes/assets/updateHostText.html.177e061d.js"><link rel="prefetch" href="/notes/assets/updateMode.html.94722d4f.js"><link rel="prefetch" href="/notes/assets/updatePortalComponent.html.e52826e9.js"><link rel="prefetch" href="/notes/assets/updateProfiler.html.57117274.js"><link rel="prefetch" href="/notes/assets/updateSuspenseComponent.html.daf8c75d.js"><link rel="prefetch" href="/notes/assets/interview1.html.e77fef8b.js"><link rel="prefetch" href="/notes/assets/interview2.html.efc87d5c.js"><link rel="prefetch" href="/notes/assets/interview3.html.c024243e.js"><link rel="prefetch" href="/notes/assets/interview51.html.5acdd80f.js"><link rel="prefetch" href="/notes/assets/interview52.html.c306af68.js"><link rel="prefetch" href="/notes/assets/interview53.html.34bff16e.js"><link rel="prefetch" href="/notes/assets/interview54.html.09f9341f.js"><link rel="prefetch" href="/notes/assets/interview55.html.0d7b47d6.js"><link rel="prefetch" href="/notes/assets/interview56.html.be5608f7.js"><link rel="prefetch" href="/notes/assets/interview57.html.44dfe8a9.js"><link rel="prefetch" href="/notes/assets/interview1.html.524fe5c8.js"><link rel="prefetch" href="/notes/assets/interview10.html.6b6661d9.js"><link rel="prefetch" href="/notes/assets/interview11.html.de86ffd8.js"><link rel="prefetch" href="/notes/assets/interview12.html.8d04894b.js"><link rel="prefetch" href="/notes/assets/interview13.html.3fd9ed5c.js"><link rel="prefetch" href="/notes/assets/interview14.html.e7757074.js"><link rel="prefetch" href="/notes/assets/interview15.html.004fd17c.js"><link rel="prefetch" href="/notes/assets/interview16.html.eb595a40.js"><link rel="prefetch" href="/notes/assets/interview17.html.fd2aff6c.js"><link rel="prefetch" href="/notes/assets/interview18.html.7145c350.js"><link rel="prefetch" href="/notes/assets/interview19.html.6f06169b.js"><link rel="prefetch" href="/notes/assets/interview2.html.2df5d69d.js"><link rel="prefetch" href="/notes/assets/interview20.html.49c4ff89.js"><link rel="prefetch" href="/notes/assets/interview21.html.cfed4f54.js"><link rel="prefetch" href="/notes/assets/interview22.html.b81d04c7.js"><link rel="prefetch" href="/notes/assets/interview23.html.40d68929.js"><link rel="prefetch" href="/notes/assets/interview24.html.70e31c98.js"><link rel="prefetch" href="/notes/assets/interview25.html.9ff89387.js"><link rel="prefetch" href="/notes/assets/interview26.html.d208a025.js"><link rel="prefetch" href="/notes/assets/interview27.html.a1eaa849.js"><link rel="prefetch" href="/notes/assets/interview28.html.14b7d1bc.js"><link rel="prefetch" href="/notes/assets/interview29.html.a5732620.js"><link rel="prefetch" href="/notes/assets/interview3.html.b7590473.js"><link rel="prefetch" href="/notes/assets/interview30.html.4d4eea82.js"><link rel="prefetch" href="/notes/assets/interview31.html.dc7dae65.js"><link rel="prefetch" href="/notes/assets/interview32.html.c1a7fc28.js"><link rel="prefetch" href="/notes/assets/interview33.html.ac3c1683.js"><link rel="prefetch" href="/notes/assets/interview34.html.df20642e.js"><link rel="prefetch" href="/notes/assets/interview35.html.79db6c5e.js"><link rel="prefetch" href="/notes/assets/interview36.html.b1f05e0e.js"><link rel="prefetch" href="/notes/assets/interview37.html.581db9fd.js"><link rel="prefetch" href="/notes/assets/interview38.html.e19f689d.js"><link rel="prefetch" href="/notes/assets/interview39.html.2de50b2e.js"><link rel="prefetch" href="/notes/assets/interview4.html.52a1ce9f.js"><link rel="prefetch" href="/notes/assets/interview40.html.d1b405eb.js"><link rel="prefetch" href="/notes/assets/interview41.html.a9385882.js"><link rel="prefetch" href="/notes/assets/interview42.html.10af55c0.js"><link rel="prefetch" href="/notes/assets/interview43.html.19a61756.js"><link rel="prefetch" href="/notes/assets/interview44.html.239d098f.js"><link rel="prefetch" href="/notes/assets/interview45.html.7fc33488.js"><link rel="prefetch" href="/notes/assets/interview46.html.398fdf68.js"><link rel="prefetch" href="/notes/assets/interview47.html.69634aec.js"><link rel="prefetch" href="/notes/assets/interview48.html.0d2d4de1.js"><link rel="prefetch" href="/notes/assets/interview49.html.d6d3f786.js"><link rel="prefetch" href="/notes/assets/interview5.html.65dc3fb7.js"><link rel="prefetch" href="/notes/assets/interview50.html.1075a599.js"><link rel="prefetch" href="/notes/assets/interview6.html.437406d4.js"><link rel="prefetch" href="/notes/assets/interview7.html.159a0065.js"><link rel="prefetch" href="/notes/assets/interview8.html.2c17813c.js"><link rel="prefetch" href="/notes/assets/interview9.html.48c5a0ad.js"><link rel="prefetch" href="/notes/assets/404.html.93146c89.js"><link rel="prefetch" href="/notes/assets/index.html.826c4efe.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.d8bbaf0b.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.4fb3c96b.js"><link rel="prefetch" href="/notes/assets/base.html.546a173c.js"><link rel="prefetch" href="/notes/assets/customCli.html.a15c83cc.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.9f16eeaf.js"><link rel="prefetch" href="/notes/assets/adapter.html.9b7fd6b2.js"><link rel="prefetch" href="/notes/assets/amd.html.e675422c.js"><link rel="prefetch" href="/notes/assets/builder.html.c7284f4f.js"><link rel="prefetch" href="/notes/assets/censorJquery.html.279b43b1.js"><link rel="prefetch" href="/notes/assets/combination.html.4651f375.js"><link rel="prefetch" href="/notes/assets/command.html.6b273d60.js"><link rel="prefetch" href="/notes/assets/commonJS.html.4d3889e3.js"><link rel="prefetch" href="/notes/assets/constructor.html.076c347c.js"><link rel="prefetch" href="/notes/assets/decoration.html.8b56a839.js"><link rel="prefetch" href="/notes/assets/esHarmony.html.91b5673b.js"><link rel="prefetch" href="/notes/assets/exposed.html.b22ad7f8.js"><link rel="prefetch" href="/notes/assets/exterior.html.f318771a.js"><link rel="prefetch" href="/notes/assets/factory.html.86802cd3.js"><link rel="prefetch" href="/notes/assets/flyweight.html.d1c1a3db.js"><link rel="prefetch" href="/notes/assets/functionalProgramming.html.20bc5852.js"><link rel="prefetch" href="/notes/assets/intermediary.html.8d717c0a.js"><link rel="prefetch" href="/notes/assets/iterator.html.98730f3b.js"><link rel="prefetch" href="/notes/assets/lazyInitial.html.d175de9f.js"><link rel="prefetch" href="/notes/assets/mixin.html.cfd21b49.js"><link rel="prefetch" href="/notes/assets/module.html.c733f96a.js"><link rel="prefetch" href="/notes/assets/mvc.html.92509703.js"><link rel="prefetch" href="/notes/assets/mvp.html.8ba68eda.js"><link rel="prefetch" href="/notes/assets/mvvm.html.bdc7348f.js"><link rel="prefetch" href="/notes/assets/observer.html.2a40777b.js"><link rel="prefetch" href="/notes/assets/outward.html.c560d197.js"><link rel="prefetch" href="/notes/assets/overview.html.98e27f0a.js"><link rel="prefetch" href="/notes/assets/prototype.html.f403c1a8.js"><link rel="prefetch" href="/notes/assets/proxy.html.68ef1ce7.js"><link rel="prefetch" href="/notes/assets/singleton.html.7d7c87c5.js"><link rel="prefetch" href="/notes/assets/axios.html.dfda8f04.js"><link rel="prefetch" href="/notes/assets/createUnderscore.html.9f75fc81.js"><link rel="prefetch" href="/notes/assets/jquery.html.7a623b1e.js"><link rel="prefetch" href="/notes/assets/lodash.html.2649aa61.js"><link rel="prefetch" href="/notes/assets/sentry.html.eb9a3e9a.js"><link rel="prefetch" href="/notes/assets/underscore.html.7a2a33b7.js"><link rel="prefetch" href="/notes/assets/vuex.html.e8c0523f.js"><link rel="prefetch" href="/notes/assets/customCli.html.1180ccfa.js"><link rel="prefetch" href="/notes/assets/description.html.f3f55d3a.js"><link rel="prefetch" href="/notes/assets/indx.html.1b8f568d.js"><link rel="prefetch" href="/notes/assets/rebase.html.750b9a9c.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.cdb041d5.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.784ea468.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.0bc52fd5.js"><link rel="prefetch" href="/notes/assets/44Questions.html.76c15c5a.js"><link rel="prefetch" href="/notes/assets/asyncAwait.html.03c9a560.js"><link rel="prefetch" href="/notes/assets/babelCompile.html.f8f2cab8.js"><link rel="prefetch" href="/notes/assets/base.html.5f0f32d8.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.263ff16d.js"><link rel="prefetch" href="/notes/assets/baseWebpack.html.da6d5052.js"><link rel="prefetch" href="/notes/assets/codeSeparation.html.0fe827d6.js"><link rel="prefetch" href="/notes/assets/cycle.html.9e270fc8.js"><link rel="prefetch" href="/notes/assets/cycleOtherWay.html.b1995037.js"><link rel="prefetch" href="/notes/assets/executionMechanism.html.712201e9.js"><link rel="prefetch" href="/notes/assets/hybrid.html.8c03ec2f.js"><link rel="prefetch" href="/notes/assets/jsHandwriting.html.28688507.js"><link rel="prefetch" href="/notes/assets/jsonStringify.html.fad11265.js"><link rel="prefetch" href="/notes/assets/largeFileResumableUpload.html.00f92e4d.js"><link rel="prefetch" href="/notes/assets/performance.html.41643289.js"><link rel="prefetch" href="/notes/assets/promise.html.29c5498a.js"><link rel="prefetch" href="/notes/assets/promiseAll.html.19223401.js"><link rel="prefetch" href="/notes/assets/spa.html.4876c936.js"><link rel="prefetch" href="/notes/assets/tsBaseInterview.html.9d172f83.js"><link rel="prefetch" href="/notes/assets/useEs6.html.6285e81c.js"><link rel="prefetch" href="/notes/assets/webAnimations.html.b0e65d0f.js"><link rel="prefetch" href="/notes/assets/webpackInterview.html.3f76888c.js"><link rel="prefetch" href="/notes/assets/webpackLoader.html.5e527754.js"><link rel="prefetch" href="/notes/assets/webpackPublic.html.ae2a242a.js"><link rel="prefetch" href="/notes/assets/weird.html.7c14677a.js"><link rel="prefetch" href="/notes/assets/es10News.html.ba88f287.js"><link rel="prefetch" href="/notes/assets/es11News.html.0603c233.js"><link rel="prefetch" href="/notes/assets/es6Interview1.html.042f245d.js"><link rel="prefetch" href="/notes/assets/es6Interview2.html.bb3c8c06.js"><link rel="prefetch" href="/notes/assets/es6Interview3.html.1da7059b.js"><link rel="prefetch" href="/notes/assets/es6News.html.a8f9ffee.js"><link rel="prefetch" href="/notes/assets/es7News.html.bf1518b6.js"><link rel="prefetch" href="/notes/assets/es8News.html.5b331795.js"><link rel="prefetch" href="/notes/assets/es9News.html.b9a1a55b.js"><link rel="prefetch" href="/notes/assets/base.html.64564ef9.js"><link rel="prefetch" href="/notes/assets/nginxComprehensiveScene.html.6f47ce48.js"><link rel="prefetch" href="/notes/assets/commonlyUsed.html.5b5b6d0b.js"><link rel="prefetch" href="/notes/assets/inelegantHook.html.c7fc3249.js"><link rel="prefetch" href="/notes/assets/interview1.html.e40d38c0.js"><link rel="prefetch" href="/notes/assets/interview2.html.0a2730f5.js"><link rel="prefetch" href="/notes/assets/interview3.html.0e7dbc0e.js"><link rel="prefetch" href="/notes/assets/interview4.html.fea337c3.js"><link rel="prefetch" href="/notes/assets/base.html.f50db7a1.js"><link rel="prefetch" href="/notes/assets/introduction.html.1a34d3c4.js"><link rel="prefetch" href="/notes/assets/base.html.f4ca865a.js"><link rel="prefetch" href="/notes/assets/summarize.html.63d19062.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.6c01c952.js"><link rel="prefetch" href="/notes/assets/index.html.18ff6d6e.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.9c1992d7.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.67c292a7.js"><link rel="prefetch" href="/notes/assets/bigDataRender.html.11e69215.js"><link rel="prefetch" href="/notes/assets/progress.html.0cc72861.js"><link rel="prefetch" href="/notes/assets/quirksStandards.html.ab5428ae.js"><link rel="prefetch" href="/notes/assets/redrawReflow.html.fab57e8b.js"><link rel="prefetch" href="/notes/assets/storageSpace.html.9e04962e.js"><link rel="prefetch" href="/notes/assets/webComLink.html.eeb710bf.js"><link rel="prefetch" href="/notes/assets/webUrl.html.444dc6e5.js"><link rel="prefetch" href="/notes/assets/spanWidthHeight.html.8bd77ca7.js"><link rel="prefetch" href="/notes/assets/baseCss.html.ebb01aa7.js"><link rel="prefetch" href="/notes/assets/blockFormattingContext.html.001cd157.js"><link rel="prefetch" href="/notes/assets/containingBlock.html.053dbea5.js"><link rel="prefetch" href="/notes/assets/cssBeforeAfter.html.8f3f3aa8.js"><link rel="prefetch" href="/notes/assets/cssBoxModal.html.2cf173b0.js"><link rel="prefetch" href="/notes/assets/cssCollapsing.html.bd135f28.js"><link rel="prefetch" href="/notes/assets/cssCompatible.html.863f4f7f.js"><link rel="prefetch" href="/notes/assets/cssFlexDemo.html.713e2e6d.js"><link rel="prefetch" href="/notes/assets/cssFlexLayout.html.29646f39.js"><link rel="prefetch" href="/notes/assets/cssGridLayout.html.b38a60ca.js"><link rel="prefetch" href="/notes/assets/cssHack.html.f11b5546.js"><link rel="prefetch" href="/notes/assets/cssInlineBlock.html.4d0142e2.js"><link rel="prefetch" href="/notes/assets/cssPriority.html.d25c37ae.js"><link rel="prefetch" href="/notes/assets/cssPseudo.html.4925055f.js"><link rel="prefetch" href="/notes/assets/cssPseudoClass.html.79317bea.js"><link rel="prefetch" href="/notes/assets/cssSelector.html.22ed218e.js"><link rel="prefetch" href="/notes/assets/cssTutorial.html.2a816001.js"><link rel="prefetch" href="/notes/assets/fieldInvalid.html.8aaf8374.js"><link rel="prefetch" href="/notes/assets/frame.html.c5b78398.js"><link rel="prefetch" href="/notes/assets/knowledgePoints.html.1d3fb9d7.js"><link rel="prefetch" href="/notes/assets/linkImport.html.3d40bb1f.js"><link rel="prefetch" href="/notes/assets/stackingContext.html.919eb557.js"><link rel="prefetch" href="/notes/assets/tools.html.6df3ce88.js"><link rel="prefetch" href="/notes/assets/units.html.9cde3463.js"><link rel="prefetch" href="/notes/assets/transform.html.3d84c112.js"><link rel="prefetch" href="/notes/assets/content.html.69c1e5e0.js"><link rel="prefetch" href="/notes/assets/plugins.html.c0a258d9.js"><link rel="prefetch" href="/notes/assets/accesskey.html.e638be37.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.dc18a8ff.js"><link rel="prefetch" href="/notes/assets/canvasSvg.html.fe89bde8.js"><link rel="prefetch" href="/notes/assets/deviceAPI.html.75bef739.js"><link rel="prefetch" href="/notes/assets/globalAttr.html.4f3994ac.js"><link rel="prefetch" href="/notes/assets/htmlDatalist.html.aa776f97.js"><link rel="prefetch" href="/notes/assets/htmlElement.html.694be7a8.js"><link rel="prefetch" href="/notes/assets/interview10.html.09f09c53.js"><link rel="prefetch" href="/notes/assets/interview11.html.7451e625.js"><link rel="prefetch" href="/notes/assets/interview12.html.57bb2f49.js"><link rel="prefetch" href="/notes/assets/interview13.html.000d91d6.js"><link rel="prefetch" href="/notes/assets/interview14.html.90eaceb5.js"><link rel="prefetch" href="/notes/assets/interview15.html.6d3161d9.js"><link rel="prefetch" href="/notes/assets/interview16.html.5d30dab8.js"><link rel="prefetch" href="/notes/assets/interview17.html.7d57d5ff.js"><link rel="prefetch" href="/notes/assets/interview18.html.970befa2.js"><link rel="prefetch" href="/notes/assets/interview19.html.67cd2721.js"><link rel="prefetch" href="/notes/assets/interview20.html.01b611ee.js"><link rel="prefetch" href="/notes/assets/interview21.html.bd1bcc4e.js"><link rel="prefetch" href="/notes/assets/interview22.html.83fc623d.js"><link rel="prefetch" href="/notes/assets/interview23.html.c4599df2.js"><link rel="prefetch" href="/notes/assets/interview24.html.cae639b1.js"><link rel="prefetch" href="/notes/assets/interview25.html.743c3f96.js"><link rel="prefetch" href="/notes/assets/interview26.html.ef3f466a.js"><link rel="prefetch" href="/notes/assets/interview27.html.5b46eaa2.js"><link rel="prefetch" href="/notes/assets/interview28.html.9e0e5f47.js"><link rel="prefetch" href="/notes/assets/interview29.html.925ee38f.js"><link rel="prefetch" href="/notes/assets/interview30.html.7873e1f7.js"><link rel="prefetch" href="/notes/assets/interview31.html.c0a5b7d6.js"><link rel="prefetch" href="/notes/assets/interview32.html.ac19da01.js"><link rel="prefetch" href="/notes/assets/interview33.html.d1591c30.js"><link rel="prefetch" href="/notes/assets/interview34.html.8443ab10.js"><link rel="prefetch" href="/notes/assets/interview35.html.7092b6eb.js"><link rel="prefetch" href="/notes/assets/interview36.html.cd1391a3.js"><link rel="prefetch" href="/notes/assets/interview37.html.67df34d2.js"><link rel="prefetch" href="/notes/assets/interview38.html.ff1fd1b4.js"><link rel="prefetch" href="/notes/assets/interview39.html.751d0c46.js"><link rel="prefetch" href="/notes/assets/interview40.html.63e77ddc.js"><link rel="prefetch" href="/notes/assets/interview41.html.456bb0bf.js"><link rel="prefetch" href="/notes/assets/interview42.html.ddd498df.js"><link rel="prefetch" href="/notes/assets/interview43.html.3192d09b.js"><link rel="prefetch" href="/notes/assets/interview44.html.2bb6879e.js"><link rel="prefetch" href="/notes/assets/interview45.html.574de178.js"><link rel="prefetch" href="/notes/assets/interview46.html.6b7f2eb6.js"><link rel="prefetch" href="/notes/assets/interview47.html.54b243a4.js"><link rel="prefetch" href="/notes/assets/interview48.html.b9762a15.js"><link rel="prefetch" href="/notes/assets/interview49.html.b829f2a5.js"><link rel="prefetch" href="/notes/assets/interview5.html.9f6f451e.js"><link rel="prefetch" href="/notes/assets/interview50.html.e3f794ae.js"><link rel="prefetch" href="/notes/assets/interview51.html.11cee9fd.js"><link rel="prefetch" href="/notes/assets/interview52.html.c957441a.js"><link rel="prefetch" href="/notes/assets/interview53.html.1a8afb67.js"><link rel="prefetch" href="/notes/assets/interview54.html.45a853b5.js"><link rel="prefetch" href="/notes/assets/interview55.html.3a01aec9.js"><link rel="prefetch" href="/notes/assets/interview56.html.4faec3de.js"><link rel="prefetch" href="/notes/assets/interview57.html.a53011ea.js"><link rel="prefetch" href="/notes/assets/interview58.html.f8dff879.js"><link rel="prefetch" href="/notes/assets/interview59.html.6be5c7cb.js"><link rel="prefetch" href="/notes/assets/interview6.html.7e71acd2.js"><link rel="prefetch" href="/notes/assets/interview7.html.6060fab5.js"><link rel="prefetch" href="/notes/assets/interview8.html.662f4f3d.js"><link rel="prefetch" href="/notes/assets/interview9.html.f5c4a5eb.js"><link rel="prefetch" href="/notes/assets/linkImport.html.5c43fedb.js"><link rel="prefetch" href="/notes/assets/offlineStorage.html.51afad50.js"><link rel="prefetch" href="/notes/assets/regular.html.30ef8499.js"><link rel="prefetch" href="/notes/assets/shake.html.f438ecd2.js"><link rel="prefetch" href="/notes/assets/webWorker.html.81c5454f.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.0a70f58f.js"><link rel="prefetch" href="/notes/assets/cors.html.88078404.js"><link rel="prefetch" href="/notes/assets/crossDomainCookie.html.76eb5642.js"><link rel="prefetch" href="/notes/assets/fetch.html.02767e24.js"><link rel="prefetch" href="/notes/assets/nestAxios.html.183081db.js"><link rel="prefetch" href="/notes/assets/debounce.html.0e741df9.js"><link rel="prefetch" href="/notes/assets/lodashPrinciple.html.fed84d3d.js"><link rel="prefetch" href="/notes/assets/lodashThrottleDebounce.html.b0c47904.js"><link rel="prefetch" href="/notes/assets/throttle.html.5af8cd6c.js"><link rel="prefetch" href="/notes/assets/throttleDebounceReact.html.0f48e78c.js"><link rel="prefetch" href="/notes/assets/cloneIntroduction.html.e094fc49.js"><link rel="prefetch" href="/notes/assets/deepClone.html.0563006a.js"><link rel="prefetch" href="/notes/assets/lodashDeepClone.html.c494241f.js"><link rel="prefetch" href="/notes/assets/objectAssign.html.311609d8.js"><link rel="prefetch" href="/notes/assets/arraySourceCode.html.e1c2aeca.js"><link rel="prefetch" href="/notes/assets/baseHigh.html.b9d6ea4d.js"><link rel="prefetch" href="/notes/assets/currying.html.244cc271.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.4479f99c.js"><link rel="prefetch" href="/notes/assets/eventLoop.html.dd59fa4d.js"><link rel="prefetch" href="/notes/assets/iife.html.e7fd3a36.js"><link rel="prefetch" href="/notes/assets/interview1.html.899728ae.js"><link rel="prefetch" href="/notes/assets/jsCompatible.html.6e3c28ef.js"><link rel="prefetch" href="/notes/assets/baseProyotype.html.d06317d6.js"><link rel="prefetch" href="/notes/assets/functionObjectResource.html.0beefcd9.js"><link rel="prefetch" href="/notes/assets/prototypeInherit.html.a2f1810b.js"><link rel="prefetch" href="/notes/assets/closureInterview.html.faff273d.js"><link rel="prefetch" href="/notes/assets/scopeChain.html.dfa3a8f4.js"><link rel="prefetch" href="/notes/assets/understandingClosures.html.cdb4a397.js"><link rel="prefetch" href="/notes/assets/executionStack.html.65080c12.js"><link rel="prefetch" href="/notes/assets/memoryLeak.html.7c52b75a.js"><link rel="prefetch" href="/notes/assets/memoryMechanism.html.176570e0.js"><link rel="prefetch" href="/notes/assets/memorySpace.html.6155acc0.js"><link rel="prefetch" href="/notes/assets/precompiled.html.aaca9c13.js"><link rel="prefetch" href="/notes/assets/variableObject.html.891241af.js"><link rel="prefetch" href="/notes/assets/arrowFunctionThis.html.d931bb99.js"><link rel="prefetch" href="/notes/assets/bindSimulation.html.905ec84a.js"><link rel="prefetch" href="/notes/assets/callApply.html.58a6e080.js"><link rel="prefetch" href="/notes/assets/newSimulation.html.b3faf2bc.js"><link rel="prefetch" href="/notes/assets/thisBind.html.45d8eba8.js"><link rel="prefetch" href="/notes/assets/interview1.html.8dfa87fe.js"><link rel="prefetch" href="/notes/assets/interview10.html.75cc5e07.js"><link rel="prefetch" href="/notes/assets/interview11.html.0c4f982d.js"><link rel="prefetch" href="/notes/assets/interview12.html.01dee691.js"><link rel="prefetch" href="/notes/assets/interview13.html.2bf72612.js"><link rel="prefetch" href="/notes/assets/interview14.html.dc87e9bf.js"><link rel="prefetch" href="/notes/assets/interview15.html.9b442142.js"><link rel="prefetch" href="/notes/assets/interview16.html.20487da3.js"><link rel="prefetch" href="/notes/assets/interview17.html.61b31436.js"><link rel="prefetch" href="/notes/assets/interview18.html.8758ad27.js"><link rel="prefetch" href="/notes/assets/interview19.html.e755e06e.js"><link rel="prefetch" href="/notes/assets/interview2.html.571913f9.js"><link rel="prefetch" href="/notes/assets/interview20.html.8be53874.js"><link rel="prefetch" href="/notes/assets/interview21.html.7d031a37.js"><link rel="prefetch" href="/notes/assets/interview22.html.9b10aa47.js"><link rel="prefetch" href="/notes/assets/interview23.html.f73dc91f.js"><link rel="prefetch" href="/notes/assets/interview24.html.ab7ad5f9.js"><link rel="prefetch" href="/notes/assets/interview25.html.884dae8b.js"><link rel="prefetch" href="/notes/assets/interview26.html.85e81e0b.js"><link rel="prefetch" href="/notes/assets/interview27.html.0672dea9.js"><link rel="prefetch" href="/notes/assets/interview28.html.495c2a3a.js"><link rel="prefetch" href="/notes/assets/interview29.html.0f0acaa6.js"><link rel="prefetch" href="/notes/assets/interview3.html.675fb640.js"><link rel="prefetch" href="/notes/assets/interview30.html.dfbf8fa7.js"><link rel="prefetch" href="/notes/assets/interview4.html.10ba802f.js"><link rel="prefetch" href="/notes/assets/interview5.html.8cc39933.js"><link rel="prefetch" href="/notes/assets/interview6.html.6e753bf0.js"><link rel="prefetch" href="/notes/assets/interview7.html.c5a4ba45.js"><link rel="prefetch" href="/notes/assets/interview8.html.1ff05252.js"><link rel="prefetch" href="/notes/assets/interview9.html.0b8c8413.js"><link rel="prefetch" href="/notes/assets/adjacentSiblingCombinator.html.03d98a43.js"><link rel="prefetch" href="/notes/assets/attributeSelectors.html.c68474f9.js"><link rel="prefetch" href="/notes/assets/charset.html.cad8b82d.js"><link rel="prefetch" href="/notes/assets/childCombinator.html.5a2c2204.js"><link rel="prefetch" href="/notes/assets/classSelectors.html.151bd104.js"><link rel="prefetch" href="/notes/assets/descendantCombinator.html.d9a40850.js"><link rel="prefetch" href="/notes/assets/generalSiblingCombinator.html.6ccb0384.js"><link rel="prefetch" href="/notes/assets/iDSelectors.html.8ae75816.js"><link rel="prefetch" href="/notes/assets/pseudoClasses.html.e222b82a.js"><link rel="prefetch" href="/notes/assets/pseudoElements.html.0893bfff.js"><link rel="prefetch" href="/notes/assets/selectorList.html.96b02a30.js"><link rel="prefetch" href="/notes/assets/typeSelectors.html.1c6b6353.js"><link rel="prefetch" href="/notes/assets/universalSelectors.html.fbbbfe2f.js"><link rel="prefetch" href="/notes/assets/IterationProtocols.html.7fa98cb2.js"><link rel="prefetch" href="/notes/assets/arrayFlat.html.67d6ab57.js"><link rel="prefetch" href="/notes/assets/asyncHistory.html.600d1e01.js"><link rel="prefetch" href="/notes/assets/eventLoop.html.85fa60db.js"><link rel="prefetch" href="/notes/assets/fileReader.html.ca0c2664.js"><link rel="prefetch" href="/notes/assets/formData.html.6578e826.js"><link rel="prefetch" href="/notes/assets/functionGenerator.html.2b0ec8fc.js"><link rel="prefetch" href="/notes/assets/generator.html.5e21af8a.js"><link rel="prefetch" href="/notes/assets/intersectionObserver.html.ada3cc04.js"><link rel="prefetch" href="/notes/assets/map.html.442b7c8d.js"><link rel="prefetch" href="/notes/assets/promise.html.ddb903e5.js"><link rel="prefetch" href="/notes/assets/set.html.0f9a8793.js"><link rel="prefetch" href="/notes/assets/string.html.d52c7578.js"><link rel="prefetch" href="/notes/assets/symbol.html.49559aa0.js"><link rel="prefetch" href="/notes/assets/xMLHttpRequest.html.7dfb7357.js"><link rel="prefetch" href="/notes/assets/spreadSyntax.html.f86cb3a4.js"><link rel="prefetch" href="/notes/assets/strictMode.html.8a21c49f.js"><link rel="prefetch" href="/notes/assets/cache.html.368a7528.js"><link rel="prefetch" href="/notes/assets/drag1.html.c4e1f968.js"><link rel="prefetch" href="/notes/assets/oneLineCode.html.9b0e0f29.js"><link rel="prefetch" href="/notes/assets/oneLineCodeArray.html.bb1b11db.js"><link rel="prefetch" href="/notes/assets/oneLineCodeDOM.html.1511e4b1.js"><link rel="prefetch" href="/notes/assets/oneLineCodeDateTime.html.80cd9435.js"><link rel="prefetch" href="/notes/assets/oneLineCodeFunction.html.05d84375.js"><link rel="prefetch" href="/notes/assets/oneLineCodeMath.html.4ab68d1b.js"><link rel="prefetch" href="/notes/assets/oneLineCodeMisc.html.a5280aea.js"><link rel="prefetch" href="/notes/assets/oneLineCodeNumber.html.e5b206c7.js"><link rel="prefetch" href="/notes/assets/oneLineCodeObject.html.e4b81ac7.js"><link rel="prefetch" href="/notes/assets/oneLineCodeRandom.html.25c89c47.js"><link rel="prefetch" href="/notes/assets/oneLineCodeString.html.4adc8ab9.js"><link rel="prefetch" href="/notes/assets/oneLineCodeValidator.html.d582414f.js"><link rel="prefetch" href="/notes/assets/typeScriptCache.html.261d41ad.js"><link rel="prefetch" href="/notes/assets/reactBase.html.503ea5fc.js"><link rel="prefetch" href="/notes/assets/reactTypescript.html.2b7f17e0.js"><link rel="prefetch" href="/notes/assets/vue2Base.html.f64821f1.js"><link rel="prefetch" href="/notes/assets/vue2Table.html.e401f53c.js"><link rel="prefetch" href="/notes/assets/vue2offsetTop.html.b90ec92f.js"><link rel="prefetch" href="/notes/assets/componentWillXXX.html.3d3be0c6.js"><link rel="prefetch" href="/notes/assets/disrupt.html.60e9c50b.js"><link rel="prefetch" href="/notes/assets/lane.html.6bdca8ed.js"><link rel="prefetch" href="/notes/assets/prepare.html.a4ff07c1.js"><link rel="prefetch" href="/notes/assets/redux.html.c7dc256c.js"><link rel="prefetch" href="/notes/assets/scheduler.html.6d318b04.js"><link rel="prefetch" href="/notes/assets/multi.html.60702603.js"><link rel="prefetch" href="/notes/assets/one.html.0b04b252.js"><link rel="prefetch" href="/notes/assets/prepare.html.2c0f7716.js"><link rel="prefetch" href="/notes/assets/create.html.c3cc733c.js"><link rel="prefetch" href="/notes/assets/prepare.html.8c7c446e.js"><link rel="prefetch" href="/notes/assets/structure.html.4a4bfb0d.js"><link rel="prefetch" href="/notes/assets/useeffect.html.7afafbd1.js"><link rel="prefetch" href="/notes/assets/usememo.html.5e25a2dc.js"><link rel="prefetch" href="/notes/assets/useref.html.b2450f52.js"><link rel="prefetch" href="/notes/assets/usestate.html.9c0701fb.js"><link rel="prefetch" href="/notes/assets/file.html.409f66f0.js"><link rel="prefetch" href="/notes/assets/idea.html.220d22ad.js"><link rel="prefetch" href="/notes/assets/jsx.html.fec2b7ce.js"><link rel="prefetch" href="/notes/assets/newConstructure.html.48a67b2f.js"><link rel="prefetch" href="/notes/assets/oldConstructure.html.c3f818bf.js"><link rel="prefetch" href="/notes/assets/source.html.826b9e47.js"><link rel="prefetch" href="/notes/assets/summary.html.12445456.js"><link rel="prefetch" href="/notes/assets/basePrinciple.html.3868922a.js"><link rel="prefetch" href="/notes/assets/componentApi.html.0567ec84.js"><link rel="prefetch" href="/notes/assets/domApi.html.d6dd3a45.js"><link rel="prefetch" href="/notes/assets/hoc.html.5144de3a.js"><link rel="prefetch" href="/notes/assets/hookApi.html.4005fe10.js"><link rel="prefetch" href="/notes/assets/hookCustom.html.d3a0b093.js"><link rel="prefetch" href="/notes/assets/hookPrinciple.html.9aacbdf5.js"><link rel="prefetch" href="/notes/assets/hookUse.html.7c80445e.js"><link rel="prefetch" href="/notes/assets/reactKeeplive.html.1846952f.js"><link rel="prefetch" href="/notes/assets/reactRedux.html.05204623.js"><link rel="prefetch" href="/notes/assets/reactRouter.html.533e6d05.js"><link rel="prefetch" href="/notes/assets/toolApi.html.93611800.js"><link rel="prefetch" href="/notes/assets/beginWork.html.f2d2dfc6.js"><link rel="prefetch" href="/notes/assets/completeWork.html.412a9dc0.js"><link rel="prefetch" href="/notes/assets/doubleBuffer.html.dc4d1922.js"><link rel="prefetch" href="/notes/assets/fiber-mental.html.981e31e4.js"><link rel="prefetch" href="/notes/assets/fiber.html.175c6004.js"><link rel="prefetch" href="/notes/assets/reconciler.html.a3218c38.js"><link rel="prefetch" href="/notes/assets/beforeMutation.html.8d4ea20b.js"><link rel="prefetch" href="/notes/assets/layout.html.0f6de580.js"><link rel="prefetch" href="/notes/assets/mutation.html.194fdb03.js"><link rel="prefetch" href="/notes/assets/prepare.html.fb274b42.js"><link rel="prefetch" href="/notes/assets/mental.html.541b303a.js"><link rel="prefetch" href="/notes/assets/prepare.html.5d6ff9cb.js"><link rel="prefetch" href="/notes/assets/priority.html.92db7070.js"><link rel="prefetch" href="/notes/assets/reactdom.html.0c535a57.js"><link rel="prefetch" href="/notes/assets/setstate.html.6b0b459a.js"><link rel="prefetch" href="/notes/assets/update.html.f88219c2.js"><link rel="prefetch" href="/notes/assets/bitfiled.html.e3ce4640.js"><link rel="prefetch" href="/notes/assets/dfs.html.56fdc032.js"><link rel="prefetch" href="/notes/assets/diff.html.232e0a17.js"><link rel="prefetch" href="/notes/assets/heapsort.html.6e054462.js"><link rel="prefetch" href="/notes/assets/linkedlist.html.4e1fb50e.js"><link rel="prefetch" href="/notes/assets/stack.html.581119e1.js"><link rel="prefetch" href="/notes/assets/bootstrap.html.933d4936.js"><link rel="prefetch" href="/notes/assets/context.html.530e5e04.js"><link rel="prefetch" href="/notes/assets/fibertree-create.html.66313eb7.js"><link rel="prefetch" href="/notes/assets/fibertree-prepare.html.032402f7.js"><link rel="prefetch" href="/notes/assets/fibertree-update.html.502cf625.js"><link rel="prefetch" href="/notes/assets/hook-effect.html.316f4423.js"><link rel="prefetch" href="/notes/assets/hook-state.html.2f220ceb.js"><link rel="prefetch" href="/notes/assets/hook-summary.html.7f9e9dd3.js"><link rel="prefetch" href="/notes/assets/macro-structure.html.ba481eb2.js"><link rel="prefetch" href="/notes/assets/object-structure.html.ccf5e554.js"><link rel="prefetch" href="/notes/assets/priority.html.d731cb4a.js"><link rel="prefetch" href="/notes/assets/reconciler-workflow.html.474b9761.js"><link rel="prefetch" href="/notes/assets/scheduler.html.4bf5c4af.js"><link rel="prefetch" href="/notes/assets/state-effects.html.7e16b30f.js"><link rel="prefetch" href="/notes/assets/synthetic-event.html.b609d141.js"><link rel="prefetch" href="/notes/assets/workloop.html.4adeffa8.js"><link rel="prefetch" href="/notes/assets/ast.html.9a63ab11.js"><link rel="prefetch" href="/notes/assets/binder.html.a219046c.js"><link rel="prefetch" href="/notes/assets/checker.html.a1e0a2c0.js"><link rel="prefetch" href="/notes/assets/emitter.html.5e3abe0e.js"><link rel="prefetch" href="/notes/assets/overview.html.2d9c501a.js"><link rel="prefetch" href="/notes/assets/parser.html.29d2bad1.js"><link rel="prefetch" href="/notes/assets/program.html.7028845a.js"><link rel="prefetch" href="/notes/assets/scanner.html.5492f92d.js"><link rel="prefetch" href="/notes/assets/common.html.2de17b1e.js"><link rel="prefetch" href="/notes/assets/interpreting.html.8ef2bacd.js"><link rel="prefetch" href="/notes/assets/class.html.71684068.js"><link rel="prefetch" href="/notes/assets/commandline-behavior.html.f48f1deb.js"><link rel="prefetch" href="/notes/assets/comments.html.dbabbb2a.js"><link rel="prefetch" href="/notes/assets/common-bug-not-bugs.html.489a7e46.js"><link rel="prefetch" href="/notes/assets/common-feature-request.html.82fce904.js"><link rel="prefetch" href="/notes/assets/decorators.html.d08d6558.js"><link rel="prefetch" href="/notes/assets/enums.html.e63a9560.js"><link rel="prefetch" href="/notes/assets/function.html.a3b347e9.js"><link rel="prefetch" href="/notes/assets/generics.html.972d6b82.js"><link rel="prefetch" href="/notes/assets/glossary-and-terms.html.cec9a32b.js"><link rel="prefetch" href="/notes/assets/jsx-and-react.html.64aa7ae5.js"><link rel="prefetch" href="/notes/assets/modules.html.9c836d94.js"><link rel="prefetch" href="/notes/assets/thing-that-dont-work.html.63287c47.js"><link rel="prefetch" href="/notes/assets/tsconfig-behavior.html.d7c099bb.js"><link rel="prefetch" href="/notes/assets/type-guards.html.1c6febb3.js"><link rel="prefetch" href="/notes/assets/type-system-behavior.html.3ee9711f.js"><link rel="prefetch" href="/notes/assets/nonReactJSX.html.bc0aeb2c.js"><link rel="prefetch" href="/notes/assets/reactJSX.html.e4779f8a.js"><link rel="prefetch" href="/notes/assets/support.html.8bdc0029.js"><link rel="prefetch" href="/notes/assets/typescript-3.7.html.983cd835.js"><link rel="prefetch" href="/notes/assets/typescript-3.8.html.cb0aec4c.js"><link rel="prefetch" href="/notes/assets/typescript-3.9.html.8d9efaf5.js"><link rel="prefetch" href="/notes/assets/compilationContext.html.0a0ee423.js"><link rel="prefetch" href="/notes/assets/declarationspaces.html.1c1dd8f7.js"><link rel="prefetch" href="/notes/assets/dynamicImportExpressions.html.71478bd3.js"><link rel="prefetch" href="/notes/assets/inDepthTs.html.f6c03688.js"><link rel="prefetch" href="/notes/assets/modules.html.ea84132d.js"><link rel="prefetch" href="/notes/assets/namespaces.html.637fa22c.js"><link rel="prefetch" href="/notes/assets/unknownAny.html.cb741975.js"><link rel="prefetch" href="/notes/assets/avoidExportDefault.html.8d52d0da.js"><link rel="prefetch" href="/notes/assets/barrel.html.8f40c1c7.js"><link rel="prefetch" href="/notes/assets/bind.html.ef153152.js"><link rel="prefetch" href="/notes/assets/buildToggles.html.0f22767a.js"><link rel="prefetch" href="/notes/assets/classAreUseful.html.58e2dabf.js"><link rel="prefetch" href="/notes/assets/covarianceAndContravariance.html.d0d1b035.js"><link rel="prefetch" href="/notes/assets/createArrays.html.0e227c5c.js"><link rel="prefetch" href="/notes/assets/curry.html.1c9a5de3.js"><link rel="prefetch" href="/notes/assets/functionParameters.html.b9a640a4.js"><link rel="prefetch" href="/notes/assets/infer.html.596018ae.js"><link rel="prefetch" href="/notes/assets/lazyObjectLiteralInitialization.html.fdd07bff.js"><link rel="prefetch" href="/notes/assets/limitPropertySetters.html.1720d04e.js"><link rel="prefetch" href="/notes/assets/metadata.html.b22d00aa.js"><link rel="prefetch" href="/notes/assets/nominalTyping.html.beec167d.js"><link rel="prefetch" href="/notes/assets/outFileCaution.html.14061280.js"><link rel="prefetch" href="/notes/assets/singletonPatern.html.f21d254a.js"><link rel="prefetch" href="/notes/assets/statefulFunctions.html.d63c649e.js"><link rel="prefetch" href="/notes/assets/staticConstructors.html.c9c8df45.js"><link rel="prefetch" href="/notes/assets/stringBasedEmuns.html.a305d6ea.js"><link rel="prefetch" href="/notes/assets/truthy.html.7f66eb04.js"><link rel="prefetch" href="/notes/assets/typeInstantiation.html.46ce0962.js"><link rel="prefetch" href="/notes/assets/typesafeEventEmitter.html.daf4733c.js"><link rel="prefetch" href="/notes/assets/ambient.html.48146e03.js"><link rel="prefetch" href="/notes/assets/callable.html.29da55b6.js"><link rel="prefetch" href="/notes/assets/discrominatedUnion.html.d610171f.js"><link rel="prefetch" href="/notes/assets/enums.html.539f215c.js"><link rel="prefetch" href="/notes/assets/exceptionsHanding.html.612fda8b.js"><link rel="prefetch" href="/notes/assets/freshness.html.370f3c06.js"><link rel="prefetch" href="/notes/assets/functions.html.512ad0b1.js"><link rel="prefetch" href="/notes/assets/generices.html.f4aca1e8.js"><link rel="prefetch" href="/notes/assets/indexSignatures.html.8e4e0907.js"><link rel="prefetch" href="/notes/assets/interfaces.html.fde540af.js"><link rel="prefetch" href="/notes/assets/lib.html.9146e7cd.js"><link rel="prefetch" href="/notes/assets/literals.html.21063322.js"><link rel="prefetch" href="/notes/assets/migrating.html.11c1b6a2.js"><link rel="prefetch" href="/notes/assets/mixins.html.d504752f.js"><link rel="prefetch" href="/notes/assets/movingTypes.html.99591e46.js"><link rel="prefetch" href="/notes/assets/neverType.html.cc408da8.js"><link rel="prefetch" href="/notes/assets/overview.html.2eef097c.js"><link rel="prefetch" href="/notes/assets/readonly.html.8488ca14.js"><link rel="prefetch" href="/notes/assets/thisType.html.32380aac.js"><link rel="prefetch" href="/notes/assets/typeAssertion.html.8ca3efbe.js"><link rel="prefetch" href="/notes/assets/typeCompatibility.html.07250fa7.js"><link rel="prefetch" href="/notes/assets/typeGuard.html.c15461ff.js"><link rel="prefetch" href="/notes/assets/typeInference.html.64b555a3.js"><link rel="prefetch" href="/notes/assets/types.html.68c1f8df.js"><link rel="prefetch" href="/notes/assets/pluginDva.html.e15756e5.js"><link rel="prefetch" href="/notes/assets/pluginQiankun.html.b9450b61.js"><link rel="prefetch" href="/notes/assets/codegen.html.d8c0ff69.js"><link rel="prefetch" href="/notes/assets/entrance.html.3ab2a5ef.js"><link rel="prefetch" href="/notes/assets/optimize.html.6b812b85.js"><link rel="prefetch" href="/notes/assets/outline.html.8e15633d.js"><link rel="prefetch" href="/notes/assets/parse.html.ed2bc6c0.js"><link rel="prefetch" href="/notes/assets/async-component.html.abcb5d86.js"><link rel="prefetch" href="/notes/assets/component-register.html.7812b7db.js"><link rel="prefetch" href="/notes/assets/create-component.html.9e32052a.js"><link rel="prefetch" href="/notes/assets/lifecycle.html.0348926b.js"><link rel="prefetch" href="/notes/assets/merge-option.html.e85f9d86.js"><link rel="prefetch" href="/notes/assets/outline.html.fa88e23e.js"><link rel="prefetch" href="/notes/assets/patch.html.70b1ef22.js"><link rel="prefetch" href="/notes/assets/_index.html.8249c732.js"><link rel="prefetch" href="/notes/assets/create-element.html.dbdd47dc.js"><link rel="prefetch" href="/notes/assets/mounted.html.defea20c.js"><link rel="prefetch" href="/notes/assets/new-vue.html.122e5b4e.js"><link rel="prefetch" href="/notes/assets/render.html.bde3561d.js"><link rel="prefetch" href="/notes/assets/update.html.c7eb6a9c.js"><link rel="prefetch" href="/notes/assets/virtual-dom.html.c21a2994.js"><link rel="prefetch" href="/notes/assets/event.html.10e0cb19.js"><link rel="prefetch" href="/notes/assets/keep-alive.html.6cbde32b.js"><link rel="prefetch" href="/notes/assets/outline.html.7240be27.js"><link rel="prefetch" href="/notes/assets/slot.html.d5eb4989.js"><link rel="prefetch" href="/notes/assets/tansition-group.html.46b441c8.js"><link rel="prefetch" href="/notes/assets/tansition.html.62973d99.js"><link rel="prefetch" href="/notes/assets/v-model.html.034f5fba.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.8a0ca8a7.js"><link rel="prefetch" href="/notes/assets/baseInterviewSecond.html.ee86c87a.js"><link rel="prefetch" href="/notes/assets/componentCommunication.html.9d20fea7.js"><link rel="prefetch" href="/notes/assets/detailedResponsiveness.html.db60ce57.js"><link rel="prefetch" href="/notes/assets/diff.html.65d5d3c5.js"><link rel="prefetch" href="/notes/assets/eventBinding.html.1345bfc8.js"><link rel="prefetch" href="/notes/assets/eventMechanism.html.b2904c87.js"><link rel="prefetch" href="/notes/assets/key.html.81ebdde9.js"><link rel="prefetch" href="/notes/assets/knowledgeSystem.html.62a7eac6.js"><link rel="prefetch" href="/notes/assets/slot.html.227982ae.js"><link rel="prefetch" href="/notes/assets/sourceCodeAsyncDomUpdateNextTick.html.be6e27a7.js"><link rel="prefetch" href="/notes/assets/sourceCodeElementBroadcastDispatch.html.12fa2480.js"><link rel="prefetch" href="/notes/assets/sourceCodeKeepAlive.html.a8a2e742.js"><link rel="prefetch" href="/notes/assets/sourceCodeResponsiveness.html.20c1c90d.js"><link rel="prefetch" href="/notes/assets/sourceCodeTemplateCompilation.html.be7a0276.js"><link rel="prefetch" href="/notes/assets/sourceCodeTemplateDom.html.a324d87d.js"><link rel="prefetch" href="/notes/assets/sourceCodeVuex.html.60577f70.js"><link rel="prefetch" href="/notes/assets/templateCompilation.html.93b3a5a7.js"><link rel="prefetch" href="/notes/assets/vNode.html.ef2b522a.js"><link rel="prefetch" href="/notes/assets/vNodeDiff.html.a9a18290.js"><link rel="prefetch" href="/notes/assets/build.html.6566bc89.js"><link rel="prefetch" href="/notes/assets/directory.html.fa4c3471.js"><link rel="prefetch" href="/notes/assets/entrance.html.73626535.js"><link rel="prefetch" href="/notes/assets/flow.html.52f97f44.js"><link rel="prefetch" href="/notes/assets/component-update.html.93bbbb25.js"><link rel="prefetch" href="/notes/assets/computed-watcher.html.18d34055.js"><link rel="prefetch" href="/notes/assets/getters.html.80223268.js"><link rel="prefetch" href="/notes/assets/next-tick.html.90f1173c.js"><link rel="prefetch" href="/notes/assets/outline.html.bf7bfbbd.js"><link rel="prefetch" href="/notes/assets/props.html.c5de9ee5.js"><link rel="prefetch" href="/notes/assets/questions.html.381ddb15.js"><link rel="prefetch" href="/notes/assets/reactive-object.html.3cea2e73.js"><link rel="prefetch" href="/notes/assets/setters.html.e258a9c7.js"><link rel="prefetch" href="/notes/assets/summary.html.0a83da78.js"><link rel="prefetch" href="/notes/assets/install.html.e5406bd6.js"><link rel="prefetch" href="/notes/assets/matcher.html.2de93377.js"><link rel="prefetch" href="/notes/assets/outline.html.c58c28ac.js"><link rel="prefetch" href="/notes/assets/router.html.82fb2dc5.js"><link rel="prefetch" href="/notes/assets/transition-to.html.dc12c7d0.js"><link rel="prefetch" href="/notes/assets/api.html.6f051702.js"><link rel="prefetch" href="/notes/assets/idex.html.de227c36.js"><link rel="prefetch" href="/notes/assets/init.html.180db5a2.js"><link rel="prefetch" href="/notes/assets/plugin.html.cfdb6d17.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.7de7cab4.js"><link rel="prefetch" href="/notes/assets/configuration.html.91dc53a2.js"><link rel="prefetch" href="/notes/assets/entryPoints.html.8e3e855a.js"><link rel="prefetch" href="/notes/assets/loader.html.1dc3c32c.js"><link rel="prefetch" href="/notes/assets/output.html.df7e33e1.js"><link rel="prefetch" href="/notes/assets/plugin.html.6fcb9042.js"><link rel="prefetch" href="/notes/assets/webpackInterview.html.683233f1.js"><link rel="prefetch" href="/notes/assets/reactApi.html.bf3c0b76.js"><link rel="prefetch" href="/notes/assets/reactChildren.html.7793bdfb.js"><link rel="prefetch" href="/notes/assets/reactElement.html.6852c9c2.js"><link rel="prefetch" href="/notes/assets/reactFiber.html.9a33a785.js"><link rel="prefetch" href="/notes/assets/commitAllHostEffects.html.46321993.js"><link rel="prefetch" href="/notes/assets/commitAllLifeCycles.html.8b8ea7e6.js"><link rel="prefetch" href="/notes/assets/commitBeforeMutationLifecycles.html.5e861df3.js"><link rel="prefetch" href="/notes/assets/commitDeletion.html.15df04f9.js"><link rel="prefetch" href="/notes/assets/commitPlacement.html.e76d7112.js"><link rel="prefetch" href="/notes/assets/commitRoot.html.706a293c.js"><link rel="prefetch" href="/notes/assets/commitWork.html.c8f6cec3.js"><link rel="prefetch" href="/notes/assets/invokeGuardedCallback.html.cc5a8e61.js"><link rel="prefetch" href="/notes/assets/expirationTime.html.5312cbd7.js"><link rel="prefetch" href="/notes/assets/reactDomRender.html.ca921bd1.js"><link rel="prefetch" href="/notes/assets/setStateForceUpdate.html.b3925da9.js"><link rel="prefetch" href="/notes/assets/context.html.0ea722e5.js"><link rel="prefetch" href="/notes/assets/evenInit.html.65982f9e.js"><link rel="prefetch" href="/notes/assets/eventBind.html.120ea1da.js"><link rel="prefetch" href="/notes/assets/eventCreateEventObject.html.27b6db90.js"><link rel="prefetch" href="/notes/assets/eventDispath.html.f5664ed3.js"><link rel="prefetch" href="/notes/assets/hydrate.html.f727cd7f.js"><link rel="prefetch" href="/notes/assets/ref.html.59cbf1ad.js"><link rel="prefetch" href="/notes/assets/suspense.html.b1f6282d.js"><link rel="prefetch" href="/notes/assets/suspenseLazy.html.c9bdfd12.js"><link rel="prefetch" href="/notes/assets/suspenseWork.html.231134be.js"><link rel="prefetch" href="/notes/assets/hooksCommon.html.dcc7f744.js"><link rel="prefetch" href="/notes/assets/hooksOther.html.965688cc.js"><link rel="prefetch" href="/notes/assets/start.html.27eb157c.js"><link rel="prefetch" href="/notes/assets/useEffect.html.fd6c0769.js"><link rel="prefetch" href="/notes/assets/useState.html.1c535882.js"><link rel="prefetch" href="/notes/assets/base.html.373880b2.js"><link rel="prefetch" href="/notes/assets/commpontDiff.html.5eff054c.js"><link rel="prefetch" href="/notes/assets/componentUpdate.html.f1b4b9f1.js"><link rel="prefetch" href="/notes/assets/renderProcess.html.380a270a.js"><link rel="prefetch" href="/notes/assets/schedulingPrinciple.html.d473671d.js"><link rel="prefetch" href="/notes/assets/beginWork.html.533dc090.js"><link rel="prefetch" href="/notes/assets/globalVariable.html.6c3a8dca.js"><link rel="prefetch" href="/notes/assets/mountIndeterminateComponent.html.26ff6d0d.js"><link rel="prefetch" href="/notes/assets/mountLazyCompont.html.d54b60cf.js"><link rel="prefetch" href="/notes/assets/performUnitOfWork.html.2a7e681e.js"><link rel="prefetch" href="/notes/assets/performWork.html.b8409467.js"><link rel="prefetch" href="/notes/assets/reactScheduler.html.6719feb0.js"><link rel="prefetch" href="/notes/assets/reconcileChildren.html.ef92b0d3.js"><link rel="prefetch" href="/notes/assets/reconcileChildrenArray.html.23c591ad.js"><link rel="prefetch" href="/notes/assets/reconcileSingleElement.html.08397dca.js"><link rel="prefetch" href="/notes/assets/renderRoot.html.20c09e9b.js"><link rel="prefetch" href="/notes/assets/scheduleWork.html.bb4aa8ef.js"><link rel="prefetch" href="/notes/assets/throwException.html.e1c8692a.js"><link rel="prefetch" href="/notes/assets/updateClassComponent.html.6c8d478f.js"><link rel="prefetch" href="/notes/assets/updateContextConsumer.html.fd719a5f.js"><link rel="prefetch" href="/notes/assets/updateContextProvider.html.6378fb0f.js"><link rel="prefetch" href="/notes/assets/updateForwardRef.html.be89c6c6.js"><link rel="prefetch" href="/notes/assets/updateFragment.html.b7878506.js"><link rel="prefetch" href="/notes/assets/updateFunctionalComponent.html.217a9bb2.js"><link rel="prefetch" href="/notes/assets/updateHostComponent.html.9e899033.js"><link rel="prefetch" href="/notes/assets/updateHostRoot.html.006d06eb.js"><link rel="prefetch" href="/notes/assets/updateHostText.html.87da4e1a.js"><link rel="prefetch" href="/notes/assets/updateMode.html.15c739d8.js"><link rel="prefetch" href="/notes/assets/updatePortalComponent.html.b30447ce.js"><link rel="prefetch" href="/notes/assets/updateProfiler.html.e0284500.js"><link rel="prefetch" href="/notes/assets/updateSuspenseComponent.html.94df98c9.js"><link rel="prefetch" href="/notes/assets/interview1.html.edc64764.js"><link rel="prefetch" href="/notes/assets/interview2.html.6c5d6d32.js"><link rel="prefetch" href="/notes/assets/interview3.html.43636370.js"><link rel="prefetch" href="/notes/assets/interview51.html.be85ee8f.js"><link rel="prefetch" href="/notes/assets/interview52.html.a17243bf.js"><link rel="prefetch" href="/notes/assets/interview53.html.f55d39e7.js"><link rel="prefetch" href="/notes/assets/interview54.html.b1577ad7.js"><link rel="prefetch" href="/notes/assets/interview55.html.5964d917.js"><link rel="prefetch" href="/notes/assets/interview56.html.810bbff2.js"><link rel="prefetch" href="/notes/assets/interview57.html.8b784d71.js"><link rel="prefetch" href="/notes/assets/interview1.html.f318f6fb.js"><link rel="prefetch" href="/notes/assets/interview10.html.12078bd6.js"><link rel="prefetch" href="/notes/assets/interview11.html.15f6059b.js"><link rel="prefetch" href="/notes/assets/interview12.html.f0ce3358.js"><link rel="prefetch" href="/notes/assets/interview13.html.779e3f2d.js"><link rel="prefetch" href="/notes/assets/interview14.html.9b1b59e8.js"><link rel="prefetch" href="/notes/assets/interview15.html.29ac1648.js"><link rel="prefetch" href="/notes/assets/interview16.html.a8ae61cb.js"><link rel="prefetch" href="/notes/assets/interview17.html.7d465130.js"><link rel="prefetch" href="/notes/assets/interview18.html.8cd86c17.js"><link rel="prefetch" href="/notes/assets/interview19.html.3995bcba.js"><link rel="prefetch" href="/notes/assets/interview2.html.83a91620.js"><link rel="prefetch" href="/notes/assets/interview20.html.48274523.js"><link rel="prefetch" href="/notes/assets/interview21.html.83b4ab4f.js"><link rel="prefetch" href="/notes/assets/interview22.html.cce479fd.js"><link rel="prefetch" href="/notes/assets/interview23.html.ee9c4db0.js"><link rel="prefetch" href="/notes/assets/interview24.html.8c7608d6.js"><link rel="prefetch" href="/notes/assets/interview25.html.068c224f.js"><link rel="prefetch" href="/notes/assets/interview26.html.c3c4d95b.js"><link rel="prefetch" href="/notes/assets/interview27.html.c36ec185.js"><link rel="prefetch" href="/notes/assets/interview28.html.ac418906.js"><link rel="prefetch" href="/notes/assets/interview29.html.de8bf94d.js"><link rel="prefetch" href="/notes/assets/interview3.html.3c5783ec.js"><link rel="prefetch" href="/notes/assets/interview30.html.fb534b7e.js"><link rel="prefetch" href="/notes/assets/interview31.html.fcd9520e.js"><link rel="prefetch" href="/notes/assets/interview32.html.31b08e5a.js"><link rel="prefetch" href="/notes/assets/interview33.html.2dec6056.js"><link rel="prefetch" href="/notes/assets/interview34.html.c4ec3930.js"><link rel="prefetch" href="/notes/assets/interview35.html.32823b61.js"><link rel="prefetch" href="/notes/assets/interview36.html.88590d4a.js"><link rel="prefetch" href="/notes/assets/interview37.html.a11839d0.js"><link rel="prefetch" href="/notes/assets/interview38.html.209721f3.js"><link rel="prefetch" href="/notes/assets/interview39.html.ed70c55a.js"><link rel="prefetch" href="/notes/assets/interview4.html.e3c493ca.js"><link rel="prefetch" href="/notes/assets/interview40.html.01047eb6.js"><link rel="prefetch" href="/notes/assets/interview41.html.9e9f218a.js"><link rel="prefetch" href="/notes/assets/interview42.html.db84d1eb.js"><link rel="prefetch" href="/notes/assets/interview43.html.e82fc0cf.js"><link rel="prefetch" href="/notes/assets/interview44.html.ae6754da.js"><link rel="prefetch" href="/notes/assets/interview45.html.6ffedb56.js"><link rel="prefetch" href="/notes/assets/interview46.html.8cf91e58.js"><link rel="prefetch" href="/notes/assets/interview47.html.87e099e9.js"><link rel="prefetch" href="/notes/assets/interview48.html.5ec3ce2f.js"><link rel="prefetch" href="/notes/assets/interview49.html.1178b8c8.js"><link rel="prefetch" href="/notes/assets/interview5.html.afd0d5d2.js"><link rel="prefetch" href="/notes/assets/interview50.html.7df846b4.js"><link rel="prefetch" href="/notes/assets/interview6.html.b72624ce.js"><link rel="prefetch" href="/notes/assets/interview7.html.400a1cda.js"><link rel="prefetch" href="/notes/assets/interview8.html.1fa3d768.js"><link rel="prefetch" href="/notes/assets/interview9.html.abbdd212.js"><link rel="prefetch" href="/notes/assets/404.html.8a52f95d.js"><link rel="prefetch" href="/notes/assets/404.490e3686.js"><link rel="prefetch" href="/notes/assets/Layout.bd103d6a.js">
    <link rel="stylesheet" href="/notes/assets/style.742f5b36.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/notes/" class=""><!----><!----></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">fiber 树渲染 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/react-illustration-series/main/fibertree-commit.html#fiber-树特点" class="router-link-active router-link-exact-active sidebar-item" aria-label="fiber 树特点"><!--[--><!--]--> fiber 树特点 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/react-illustration-series/main/fibertree-commit.html#commitroot" class="router-link-active router-link-exact-active sidebar-item" aria-label="commitRoot"><!--[--><!--]--> commitRoot <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/react-illustration-series/main/fibertree-commit.html#渲染前" class="router-link-active router-link-exact-active sidebar-item" aria-label="渲染前"><!--[--><!--]--> 渲染前 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/react-illustration-series/main/fibertree-commit.html#渲染" class="router-link-active router-link-exact-active sidebar-item" aria-label="渲染"><!--[--><!--]--> 渲染 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/react-illustration-series/main/fibertree-commit.html#渲染后" class="router-link-active router-link-exact-active sidebar-item" aria-label="渲染后"><!--[--><!--]--> 渲染后 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/notes/react-illustration-series/main/fibertree-commit.html#总结" class="router-link-active router-link-exact-active sidebar-item" aria-label="总结"><!--[--><!--]--> 总结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="fiber-树渲染" tabindex="-1"><a class="header-anchor" href="#fiber-树渲染" aria-hidden="true">#</a> fiber 树渲染</h1><p>在正式分析<code>fiber树渲染</code>之前, 再次回顾一下<a href="/notes/react-illustration-series/main/reconciler-workflow.html" class="">reconciler 运作流程</a>的 4 个阶段:</p><img src="/notes/assets/react-illustration-series/reactfiberworkloop.png" alt="demo"><ol><li>输入阶段: 衔接<code>react-dom</code>包, 承接<code>fiber更新</code>请求(参考<a href="/notes/react-illustration-series/main/bootstrap.html" class="">React 应用的启动过程</a>).</li><li>注册调度任务: 与调度中心(<code>scheduler</code>包)交互, 注册调度任务<code>task</code>, 等待任务回调(参考<a href="/notes/react-illustration-series/main/scheduler.html" class="">React 调度原理(scheduler)</a>).</li><li>执行任务回调: 在内存中构造出<code>fiber树</code>和<code>DOM</code>对象(参考<a href="/notes/react-illustration-series/main/fibertree-create.html" class="">fiber 树构造(初次创建)</a>和 fiber 树构造(对比更新)).</li><li>输出: 与渲染器(<code>react-dom</code>)交互, 渲染<code>DOM</code>节点.</li></ol><p>本节分析其中的第 4 阶段(输出), <code>fiber树渲染</code>处于<code>reconciler 运作流程</code>这一流水线的最后一环, 或者说前面的步骤都是为了最后一步服务, 所以其重要性不言而喻.</p><p>前文已经介绍了<code>fiber树构造</code>, 现在分析<code>fiber树渲染</code>过程, 这个过程, 实际上是对<code>fiber树</code>的进一步处理.</p><h2 id="fiber-树特点" tabindex="-1"><a class="header-anchor" href="#fiber-树特点" aria-hidden="true">#</a> fiber 树特点</h2><p>通过前文<code>fiber树构造</code>的解读, 可以总结出<code>fiber树</code>的基本特点:</p><ul><li>无论是<code>首次构造</code>或者是<code>对比更新</code>, 最终都会在内存中生成一棵用于渲染页面的<code>fiber树</code>(即<code>fiberRoot.finishedWork</code>).</li><li>这棵将要被渲染的<code>fiber树</code>有 2 个特点: <ol><li>副作用队列挂载在根节点上(具体来讲是<code>finishedWork.firstEffect</code>)</li><li>代表最新页面的<code>DOM</code>对象挂载在<code>fiber树</code>中首个<code>HostComponent</code>类型的节点上(具体来讲<code>DOM</code>对象是挂载在<code>fiber.stateNode</code>属性上)</li></ol></li></ul><p>这里再次回顾前文使用过的 2 棵 fiber 树, 可以验证上述特点:</p><ol><li>初次构造</li></ol><img src="/notes/assets/react-illustration-series/fibertree-beforecommit.png" alt="demo"><ol><li>对比更新</li></ol><img src="/notes/assets/react-illustration-series/fibertree-beforecommit.1.png" alt="demo"><h2 id="commitroot" tabindex="-1"><a class="header-anchor" href="#commitroot" aria-hidden="true">#</a> commitRoot</h2><p>整个渲染逻辑都在<a href="https://github.com/facebook/react/blob/v17.0.2/packages/react-reconciler/src/ReactFiberWorkLoop.old.js#L1879-L2254" target="_blank" rel="noopener noreferrer">commitRoot 函数中<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">commitRoot</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> renderPriorityLevel <span class="token operator">=</span> <span class="token function">getCurrentPriorityLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">runWithPriority</span><span class="token punctuation">(</span>
    ImmediateSchedulerPriority<span class="token punctuation">,</span>
    <span class="token function">commitRootImpl</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> root<span class="token punctuation">,</span> renderPriorityLevel<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在<code>commitRoot</code>中同时使用到了<code>渲染优先级</code>和<code>调度优先级</code>, 有关优先级的讨论, 在前文已经做出了说明(参考<a href="/notes/react-illustration-series/main/priority.html" class="">React 中的优先级管理</a>和<a href="/notes/react-illustration-series/main/fibertree-prepare.html#%E4%BC%98%E5%85%88%E7%BA%A7" class="">fiber 树构造(基础准备)#优先级</a>), 本节不再赘述. 最后的实现是通过<code>commitRootImpl</code>函数:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ... 省略部分无关代码</span>
<span class="token keyword">function</span> <span class="token function">commitRootImpl</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> renderPriorityLevel</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ============ 渲染前: 准备 ============</span>

  <span class="token keyword">const</span> finishedWork <span class="token operator">=</span> root<span class="token punctuation">.</span>finishedWork<span class="token punctuation">;</span>
  <span class="token keyword">const</span> lanes <span class="token operator">=</span> root<span class="token punctuation">.</span>finishedLanes<span class="token punctuation">;</span>

  <span class="token comment">// 清空FiberRoot对象上的属性</span>
  root<span class="token punctuation">.</span>finishedWork <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  root<span class="token punctuation">.</span>finishedLanes <span class="token operator">=</span> NoLanes<span class="token punctuation">;</span>
  root<span class="token punctuation">.</span>callbackNode <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">===</span> workInProgressRoot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 重置全局变量</span>
    workInProgressRoot <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    workInProgress <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    workInProgressRootRenderLanes <span class="token operator">=</span> NoLanes<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 再次更新副作用队列</span>
  <span class="token keyword">let</span> firstEffect<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>finishedWork<span class="token punctuation">.</span>flags <span class="token operator">&gt;</span> PerformedWork<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 默认情况下fiber节点的副作用队列是不包括自身的</span>
    <span class="token comment">// 如果根节点有副作用, 则将根节点添加到副作用队列的末尾</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>finishedWork<span class="token punctuation">.</span>lastEffect <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      finishedWork<span class="token punctuation">.</span>lastEffect<span class="token punctuation">.</span>nextEffect <span class="token operator">=</span> finishedWork<span class="token punctuation">;</span>
      firstEffect <span class="token operator">=</span> finishedWork<span class="token punctuation">.</span>firstEffect<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      firstEffect <span class="token operator">=</span> finishedWork<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    firstEffect <span class="token operator">=</span> finishedWork<span class="token punctuation">.</span>firstEffect<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ============ 渲染 ============</span>
  <span class="token keyword">let</span> firstEffect <span class="token operator">=</span> finishedWork<span class="token punctuation">.</span>firstEffect<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>firstEffect <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> prevExecutionContext <span class="token operator">=</span> executionContext<span class="token punctuation">;</span>
    executionContext <span class="token operator">|=</span> CommitContext<span class="token punctuation">;</span>
    <span class="token comment">// 阶段1: dom突变之前</span>
    nextEffect <span class="token operator">=</span> firstEffect<span class="token punctuation">;</span>
    <span class="token keyword">do</span> <span class="token punctuation">{</span>
      <span class="token function">commitBeforeMutationEffects</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>nextEffect <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 阶段2: dom突变, 界面发生改变</span>
    nextEffect <span class="token operator">=</span> firstEffect<span class="token punctuation">;</span>
    <span class="token keyword">do</span> <span class="token punctuation">{</span>
      <span class="token function">commitMutationEffects</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> renderPriorityLevel<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>nextEffect <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 恢复界面状态</span>
    <span class="token function">resetAfterCommit</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>containerInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 切换current指针</span>
    root<span class="token punctuation">.</span>current <span class="token operator">=</span> finishedWork<span class="token punctuation">;</span>

    <span class="token comment">// 阶段3: layout阶段, 调用生命周期componentDidUpdate和回调函数等</span>
    nextEffect <span class="token operator">=</span> firstEffect<span class="token punctuation">;</span>
    <span class="token keyword">do</span> <span class="token punctuation">{</span>
      <span class="token function">commitLayoutEffects</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> lanes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>nextEffect <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    nextEffect <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    executionContext <span class="token operator">=</span> prevExecutionContext<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ============ 渲染后: 重置与清理 ============</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>rootDoesHavePassiveEffects<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 有被动作用(使用useEffect), 保存一些全局变量</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 分解副作用队列链表, 辅助垃圾回收</span>
    <span class="token comment">// 如果有被动作用(使用useEffect), 会把分解操作放在flushPassiveEffects函数中</span>
    nextEffect <span class="token operator">=</span> firstEffect<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>nextEffect <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> nextNextEffect <span class="token operator">=</span> nextEffect<span class="token punctuation">.</span>nextEffect<span class="token punctuation">;</span>
      nextEffect<span class="token punctuation">.</span>nextEffect <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>nextEffect<span class="token punctuation">.</span>flags <span class="token operator">&amp;</span> Deletion<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">detachFiberAfterEffects</span><span class="token punctuation">(</span>nextEffect<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      nextEffect <span class="token operator">=</span> nextNextEffect<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 重置一些全局变量(省略这部分代码)...</span>
  <span class="token comment">// 下面代码用于检测是否有新的更新任务</span>
  <span class="token comment">// 比如在componentDidMount函数中, 再次调用setState()</span>

  <span class="token comment">// 1. 检测常规(异步)任务, 如果有则会发起异步调度(调度中心`scheduler`只能异步调用)</span>
  <span class="token function">ensureRootIsScheduled</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 2. 检测同步任务, 如果有则主动调用flushSyncCallbackQueue(无需再次等待scheduler调度), 再次进入fiber树构造循环</span>
  <span class="token function">flushSyncCallbackQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>commitRootImpl</code>函数中, 可以根据是否调用渲染, 把整个<code>commitRootImpl</code>分为 3 段(分别是<code>渲染前</code>, <code>渲染</code>, <code>渲染后</code>).</p><h3 id="渲染前" tabindex="-1"><a class="header-anchor" href="#渲染前" aria-hidden="true">#</a> 渲染前</h3><p>为接下来正式渲染, 做一些准备工作. 主要包括:</p><ol><li>设置全局状态(如: 更新<code>fiberRoot</code>上的属性)</li><li>重置全局变量(如: <code>workInProgressRoot</code>, <code>workInProgress</code>等)</li><li>再次更新副作用队列: 只针对根节点<code>fiberRoot.finishedWork</code><ul><li>默认情况下根节点的副作用队列是不包括自身的, 如果根节点有副作用, 则将根节点添加到副作用队列的末尾</li><li>注意只是延长了副作用队列, 但是<code>fiberRoot.lastEffect</code>指针并没有改变. 比如首次构造时, 根节点拥有<code>Snapshot</code>标记:</li></ul></li></ol><img src="/notes/assets/react-illustration-series/fiber-effectlist.png" alt="demo"><h3 id="渲染" tabindex="-1"><a class="header-anchor" href="#渲染" aria-hidden="true">#</a> 渲染</h3><p><code>commitRootImpl</code>函数中, 渲染阶段的主要逻辑是处理副作用队列, 将最新的 DOM 节点(已经在内存中, 只是还没渲染)渲染到界面上.</p><p>整个渲染过程被分为 3 个函数分布实现:</p><ol><li><code>commitBeforeMutationEffects</code><ul><li>dom 变更之前, 处理副作用队列中带有<code>Snapshot</code>,<code>Passive</code>标记的<code>fiber</code>节点.</li></ul></li><li><code>commitMutationEffects</code><ul><li>dom 变更, 界面得到更新. 处理副作用队列中带有<code>Placement</code>, <code>Update</code>, <code>Deletion</code>, <code>Hydrating</code>标记的<code>fiber</code>节点.</li></ul></li><li><code>commitLayoutEffects</code><ul><li>dom 变更后, 处理副作用队列中带有<code>Update | Callback</code>标记的<code>fiber</code>节点.</li></ul></li></ol><p>通过上述源码分析, 可以把<code>commitRootImpl</code>的职责概括为 2 个方面:</p><ol><li>处理副作用队列. (步骤 1,2,3 都会处理, 只是处理节点的标识<code>fiber.flags</code>不同).</li><li>调用渲染器, 输出最终结果. (在步骤 2: <code>commitMutationEffects</code>中执行).</li></ol><p>所以<code>commitRootImpl</code>是处理<code>fiberRoot.finishedWork</code>这棵即将被渲染的<code>fiber</code>树, 理论上无需关心这棵<code>fiber</code>树是如何产生的(可以是<code>首次构造</code>产生, 也可以是<code>对比更新</code>产生). 为了清晰简便, 在下文的所有图示都使用<code>初次创建的fiber树结构</code>来进行演示.</p><p>这 3 个函数处理的对象是<code>副作用队列</code>和<code>DOM对象</code>.</p><p>所以无论<code>fiber树</code>结构有多么复杂, 到了<code>commitRoot</code>阶段, 实际起作用的只有 2 个节点:</p><ul><li><code>副作用队列</code>所在节点: 根节点, 即<code>HostRootFiber</code>节点.</li><li><code>DOM对象</code>所在节点: 从上至下首个<code>HostComponent</code>类型的<code>fiber</code>节点, 此节点 <code>fiber.stateNode</code>实际上指向最新的 DOM 树.</li></ul><p>下图为了清晰, 省略了一些无关引用, 只留下<code>commitRoot</code>阶段实际会用到的<code>fiber</code>节点:</p><img src="/notes/assets/react-illustration-series/fiber-noredundant.png" alt="demo"><h4 id="commitbeforemutationeffects" tabindex="-1"><a class="header-anchor" href="#commitbeforemutationeffects" aria-hidden="true">#</a> commitBeforeMutationEffects</h4><p>第一阶段: dom 变更之前, 处理副作用队列中带有<code>Snapshot</code>,<code>Passive</code>标记的<code>fiber</code>节点.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ... 省略部分无关代码</span>
<span class="token keyword">function</span> <span class="token function">commitBeforeMutationEffects</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>nextEffect <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> current <span class="token operator">=</span> nextEffect<span class="token punctuation">.</span>alternate<span class="token punctuation">;</span>
    <span class="token keyword">const</span> flags <span class="token operator">=</span> nextEffect<span class="token punctuation">.</span>flags<span class="token punctuation">;</span>
    <span class="token comment">// 处理`Snapshot`标记</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>flags <span class="token operator">&amp;</span> Snapshot<span class="token punctuation">)</span> <span class="token operator">!==</span> NoFlags<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">commitBeforeMutationEffectOnFiber</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> nextEffect<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 处理`Passive`标记</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>flags <span class="token operator">&amp;</span> Passive<span class="token punctuation">)</span> <span class="token operator">!==</span> NoFlags<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Passive标记只在使用了hook, useEffect会出现. 所以此处是针对hook对象的处理</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>rootDoesHavePassiveEffects<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        rootDoesHavePassiveEffects <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token function">scheduleCallback</span><span class="token punctuation">(</span>NormalSchedulerPriority<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token function">flushPassiveEffects</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    nextEffect <span class="token operator">=</span> nextEffect<span class="token punctuation">.</span>nextEffect<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>处理<code>Snapshot</code>标记</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">commitBeforeMutationLifeCycles</span><span class="token punctuation">(</span>
  <span class="token parameter"><span class="token literal-property property">current</span><span class="token operator">:</span> Fiber <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">finishedWork</span><span class="token operator">:</span> Fiber<span class="token punctuation">,</span></span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>finishedWork<span class="token punctuation">.</span>tag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token literal-property property">FunctionComponent</span><span class="token operator">:</span>
    <span class="token keyword">case</span> <span class="token literal-property property">ForwardRef</span><span class="token operator">:</span>
    <span class="token keyword">case</span> <span class="token literal-property property">SimpleMemoComponent</span><span class="token operator">:</span>
    <span class="token keyword">case</span> <span class="token literal-property property">Block</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token literal-property property">ClassComponent</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>finishedWork<span class="token punctuation">.</span>flags <span class="token operator">&amp;</span> Snapshot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> prevProps <span class="token operator">=</span> current<span class="token punctuation">.</span>memoizedProps<span class="token punctuation">;</span>
          <span class="token keyword">const</span> prevState <span class="token operator">=</span> current<span class="token punctuation">.</span>memoizedState<span class="token punctuation">;</span>
          <span class="token keyword">const</span> instance <span class="token operator">=</span> finishedWork<span class="token punctuation">.</span>stateNode<span class="token punctuation">;</span>

          <span class="token keyword">const</span> snapshot <span class="token operator">=</span> instance<span class="token punctuation">.</span><span class="token function">getSnapshotBeforeUpdate</span><span class="token punctuation">(</span>
            finishedWork<span class="token punctuation">.</span>elementType <span class="token operator">===</span> finishedWork<span class="token punctuation">.</span>type
              <span class="token operator">?</span> prevProps
              <span class="token operator">:</span> <span class="token function">resolveDefaultProps</span><span class="token punctuation">(</span>finishedWork<span class="token punctuation">.</span>type<span class="token punctuation">,</span> prevProps<span class="token punctuation">)</span><span class="token punctuation">,</span>
            prevState<span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
          instance<span class="token punctuation">.</span>__reactInternalSnapshotBeforeUpdate <span class="token operator">=</span> snapshot<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token literal-property property">HostRoot</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>supportsMutation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>finishedWork<span class="token punctuation">.</span>flags <span class="token operator">&amp;</span> Snapshot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> root <span class="token operator">=</span> finishedWork<span class="token punctuation">.</span>stateNode<span class="token punctuation">;</span>
          <span class="token function">clearContainer</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>containerInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token literal-property property">HostComponent</span><span class="token operator">:</span>
    <span class="token keyword">case</span> <span class="token literal-property property">HostText</span><span class="token operator">:</span>
    <span class="token keyword">case</span> <span class="token literal-property property">HostPortal</span><span class="token operator">:</span>
    <span class="token keyword">case</span> <span class="token literal-property property">IncompleteClassComponent</span><span class="token operator">:</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从源码中可以看到, 与<code>Snapshot</code>标记相关的类型只有<code>ClassComponent</code>和<code>HostRoot</code>.</p><ul><li>对于<code>ClassComponent</code>类型节点, 调用了<code>instance.getSnapshotBeforeUpdate</code>生命周期函数</li><li>对于<code>HostRoot</code>类型节点, 调用<code>clearContainer</code>清空了容器节点(即<code>div#root</code>这个 dom 节点).</li></ul><ol start="2"><li>处理<code>Passive</code>标记</li></ol><p><code>Passive</code>标记只会在使用了<code>hook</code>对象的<code>function</code>类型的节点上存在, 后续的执行过程在<code>hook原理</code>章节中详细说明. 此处我们需要了解在<code>commitRoot</code>的第一个阶段, 为了处理<code>hook</code>对象(如<code>useEffect</code>), 通过<code>scheduleCallback</code>单独注册了一个调度任务<code>task</code>, 等待调度中心<code>scheduler</code>处理.</p><p>注意: 通过调度中心<code>scheduler</code>调度的任务<code>task</code>均是通过<code>MessageChannel</code>触发, 都是异步执行(可参考<a href="/notes/react-illustration-series/main/scheduler.html" class="">React 调度原理(scheduler)</a>).</p><p>小测试:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 以下示例代码中的输出顺序为 1, 3, 4, 2</span>
<span class="token keyword">function</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>test<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="commitmutationeffects" tabindex="-1"><a class="header-anchor" href="#commitmutationeffects" aria-hidden="true">#</a> commitMutationEffects</h4><p>第二阶段: dom 变更, 界面得到更新. 处理副作用队列中带有<code>ContentReset</code>, <code>Ref</code>, <code>Placement</code>, <code>Update</code>, <code>Deletion</code>, <code>Hydrating</code>标记的<code>fiber</code>节点.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ...省略部分无关代码</span>
<span class="token keyword">function</span> <span class="token function">commitMutationEffects</span><span class="token punctuation">(</span>
  <span class="token parameter"><span class="token literal-property property">root</span><span class="token operator">:</span> FiberRoot<span class="token punctuation">,</span>
  <span class="token literal-property property">renderPriorityLevel</span><span class="token operator">:</span> ReactPriorityLevel<span class="token punctuation">,</span></span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 处理Ref</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>flags <span class="token operator">&amp;</span> Ref<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> current <span class="token operator">=</span> nextEffect<span class="token punctuation">.</span>alternate<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 先清空ref, 在commitRoot的第三阶段(dom变更后), 再重新赋值</span>
      <span class="token function">commitDetachRef</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 处理DOM突变</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>nextEffect <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> flags <span class="token operator">=</span> nextEffect<span class="token punctuation">.</span>flags<span class="token punctuation">;</span>
    <span class="token keyword">const</span> primaryFlags <span class="token operator">=</span> flags <span class="token operator">&amp;</span> <span class="token punctuation">(</span>Placement <span class="token operator">|</span> Update <span class="token operator">|</span> Deletion <span class="token operator">|</span> Hydrating<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>primaryFlags<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token literal-property property">Placement</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 新增节点</span>
        <span class="token function">commitPlacement</span><span class="token punctuation">(</span>nextEffect<span class="token punctuation">)</span><span class="token punctuation">;</span>
        nextEffect<span class="token punctuation">.</span>flags <span class="token operator">&amp;=</span> <span class="token operator">~</span>Placement<span class="token punctuation">;</span> <span class="token comment">// 注意Placement标记会被清除</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">case</span> <span class="token literal-property property">PlacementAndUpdate</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// Placement</span>
        <span class="token function">commitPlacement</span><span class="token punctuation">(</span>nextEffect<span class="token punctuation">)</span><span class="token punctuation">;</span>
        nextEffect<span class="token punctuation">.</span>flags <span class="token operator">&amp;=</span> <span class="token operator">~</span>Placement<span class="token punctuation">;</span>
        <span class="token comment">// Update</span>
        <span class="token keyword">const</span> current <span class="token operator">=</span> nextEffect<span class="token punctuation">.</span>alternate<span class="token punctuation">;</span>
        <span class="token function">commitWork</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> nextEffect<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">case</span> <span class="token literal-property property">Update</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 更新节点</span>
        <span class="token keyword">const</span> current <span class="token operator">=</span> nextEffect<span class="token punctuation">.</span>alternate<span class="token punctuation">;</span>
        <span class="token function">commitWork</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> nextEffect<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">case</span> <span class="token literal-property property">Deletion</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 删除节点</span>
        <span class="token function">commitDeletion</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> nextEffect<span class="token punctuation">,</span> renderPriorityLevel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    nextEffect <span class="token operator">=</span> nextEffect<span class="token punctuation">.</span>nextEffect<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>处理 DOM 突变:</p><ol><li><code>新增</code>: 函数调用栈 <code>commitPlacement</code> -&gt; <code>insertOrAppendPlacementNode</code> -&gt; <code>appendChild</code></li><li><code>更新</code>: 函数调用栈 <code>commitWork</code> -&gt; <code>commitUpdate</code></li><li><code>删除</code>: 函数调用栈 <code>commitDeletion</code> -&gt; <code>removeChild</code></li></ol><p>最终会调用<code>appendChild, commitUpdate, removeChild</code>这些<code>react-dom</code>包中的函数. 它们是<a href="https://github.com/facebook/react/blob/v17.0.2/packages/react-reconciler/README.md#practical-examples" target="_blank" rel="noopener noreferrer"><code>HostConfig</code>协议<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>(<a href="https://github.com/facebook/react/blob/v17.0.2/packages/react-dom/src/client/ReactDOMHostConfig.js" target="_blank" rel="noopener noreferrer">源码在 ReactDOMHostConfig.js 中<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)中规定的标准函数, 在渲染器<code>react-dom</code>包中进行实现. 这些函数就是直接操作 DOM, 所以执行之后, 界面也会得到更新.</p><p>注意: <code>commitMutationEffects</code>执行之后, 在<code>commitRootImpl</code>函数中切换当前<code>fiber</code>树(<code>root.current = finishedWork</code>),保证<code>fiberRoot.current</code>指向代表当前界面的<code>fiber树</code>.</p><img src="/notes/assets/react-illustration-series/fiber-switch.png" alt="demo"><h4 id="commitlayouteffects" tabindex="-1"><a class="header-anchor" href="#commitlayouteffects" aria-hidden="true">#</a> commitLayoutEffects</h4><p>第三阶段: dom 变更后, 处理副作用队列中带有<code>Update, Callback, Ref</code>标记的<code>fiber</code>节点.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ...省略部分无关代码</span>
<span class="token keyword">function</span> <span class="token function">commitLayoutEffects</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">root</span><span class="token operator">:</span> FiberRoot<span class="token punctuation">,</span> <span class="token literal-property property">committedLanes</span><span class="token operator">:</span> Lanes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>nextEffect <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> flags <span class="token operator">=</span> nextEffect<span class="token punctuation">.</span>flags<span class="token punctuation">;</span>
    <span class="token comment">// 处理 Update和Callback标记</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>flags <span class="token operator">&amp;</span> <span class="token punctuation">(</span>Update <span class="token operator">|</span> Callback<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> current <span class="token operator">=</span> nextEffect<span class="token punctuation">.</span>alternate<span class="token punctuation">;</span>
      <span class="token function">commitLayoutEffectOnFiber</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> current<span class="token punctuation">,</span> nextEffect<span class="token punctuation">,</span> committedLanes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>flags <span class="token operator">&amp;</span> Ref<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 重新设置ref</span>
      <span class="token function">commitAttachRef</span><span class="token punctuation">(</span>nextEffect<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    nextEffect <span class="token operator">=</span> nextEffect<span class="token punctuation">.</span>nextEffect<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>核心逻辑都在<code>commitLayoutEffectOnFiber-&gt;commitLifeCycles</code>函数中.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ...省略部分无关代码</span>
<span class="token keyword">function</span> <span class="token function">commitLifeCycles</span><span class="token punctuation">(</span>
  <span class="token parameter"><span class="token literal-property property">finishedRoot</span><span class="token operator">:</span> FiberRoot<span class="token punctuation">,</span>
  <span class="token literal-property property">current</span><span class="token operator">:</span> Fiber <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">finishedWork</span><span class="token operator">:</span> Fiber<span class="token punctuation">,</span>
  <span class="token literal-property property">committedLanes</span><span class="token operator">:</span> Lanes<span class="token punctuation">,</span></span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>finishedWork<span class="token punctuation">.</span>tag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token literal-property property">ClassComponent</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> instance <span class="token operator">=</span> finishedWork<span class="token punctuation">.</span>stateNode<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>finishedWork<span class="token punctuation">.</span>flags <span class="token operator">&amp;</span> Update<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 初次渲染: 调用 componentDidMount</span>
          instance<span class="token punctuation">.</span><span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> prevProps <span class="token operator">=</span>
            finishedWork<span class="token punctuation">.</span>elementType <span class="token operator">===</span> finishedWork<span class="token punctuation">.</span>type
              <span class="token operator">?</span> current<span class="token punctuation">.</span>memoizedProps
              <span class="token operator">:</span> <span class="token function">resolveDefaultProps</span><span class="token punctuation">(</span>finishedWork<span class="token punctuation">.</span>type<span class="token punctuation">,</span> current<span class="token punctuation">.</span>memoizedProps<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">const</span> prevState <span class="token operator">=</span> current<span class="token punctuation">.</span>memoizedState<span class="token punctuation">;</span>
          <span class="token comment">// 更新阶段: 调用 componentDidUpdate</span>
          instance<span class="token punctuation">.</span><span class="token function">componentDidUpdate</span><span class="token punctuation">(</span>
            prevProps<span class="token punctuation">,</span>
            prevState<span class="token punctuation">,</span>
            instance<span class="token punctuation">.</span>__reactInternalSnapshotBeforeUpdate<span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> <span class="token literal-property property">updateQueue</span><span class="token operator">:</span> UpdateQueue<span class="token operator">&lt;</span>
        <span class="token operator">*</span><span class="token punctuation">,</span>
      <span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token punctuation">(</span>finishedWork<span class="token punctuation">.</span>updateQueue<span class="token operator">:</span> any<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>updateQueue <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 处理update回调函数 如: this.setState({}, callback)</span>
        <span class="token function">commitUpdateQueue</span><span class="token punctuation">(</span>finishedWork<span class="token punctuation">,</span> updateQueue<span class="token punctuation">,</span> instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token literal-property property">HostComponent</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token literal-property property">instance</span><span class="token operator">:</span> Instance <span class="token operator">=</span> finishedWork<span class="token punctuation">.</span>stateNode<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> finishedWork<span class="token punctuation">.</span>flags <span class="token operator">&amp;</span> Update<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> type <span class="token operator">=</span> finishedWork<span class="token punctuation">.</span>type<span class="token punctuation">;</span>
        <span class="token keyword">const</span> props <span class="token operator">=</span> finishedWork<span class="token punctuation">.</span>memoizedProps<span class="token punctuation">;</span>
        <span class="token comment">// 设置focus等原生状态</span>
        <span class="token function">commitMount</span><span class="token punctuation">(</span>instance<span class="token punctuation">,</span> type<span class="token punctuation">,</span> props<span class="token punctuation">,</span> finishedWork<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在<code>commitLifeCycles</code>函数中:</p><ul><li>对于<code>ClassComponent</code>节点, 调用生命周期函数<code>componentDidMount</code>或<code>componentDidUpdate</code>, 调用<code>update.callback</code>回调函数.</li><li>对于<code>HostComponent</code>节点, 如有<code>Update</code>标记, 需要设置一些原生状态(如: <code>focus</code>等)</li></ul><h3 id="渲染后" tabindex="-1"><a class="header-anchor" href="#渲染后" aria-hidden="true">#</a> 渲染后</h3><p>执行完上述步骤之后, 本次渲染任务就已经完成了. 在渲染完成后, 需要做一些重置和清理工作:</p><ol><li><p>清除副作用队列</p><ul><li>由于副作用队列是一个链表, 由于单个<code>fiber</code>对象的引用关系, 无法被<code>gc回收</code>.</li><li>将链表全部拆开, 当<code>fiber</code>对象不再使用的时候, 可以被<code>gc回收</code>.</li></ul></li></ol><img src="/notes/assets/react-illustration-series/clear-effectlist.png" alt="demo"><ol><li>检测更新 <ul><li>在整个渲染过程中, 有可能产生新的<code>update</code>(比如在<code>componentDidMount</code>函数中, 再次调用<code>setState()</code>).</li><li>如果是常规(异步)任务, 不用特殊处理, 调用<code>ensureRootIsScheduled</code>确保任务已经注册到调度中心即可.</li><li>如果是同步任务, 则主动调用<code>flushSyncCallbackQueue</code>(无需再次等待 scheduler 调度), 再次进入 fiber 树构造循环</li></ul></li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 清除副作用队列</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>rootDoesHavePassiveEffects<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 有被动作用(使用useEffect), 保存一些全局变量</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// 分解副作用队列链表, 辅助垃圾回收.</span>
  <span class="token comment">// 如果有被动作用(使用useEffect), 会把分解操作放在flushPassiveEffects函数中</span>
  nextEffect <span class="token operator">=</span> firstEffect<span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>nextEffect <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> nextNextEffect <span class="token operator">=</span> nextEffect<span class="token punctuation">.</span>nextEffect<span class="token punctuation">;</span>
    nextEffect<span class="token punctuation">.</span>nextEffect <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nextEffect<span class="token punctuation">.</span>flags <span class="token operator">&amp;</span> Deletion<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">detachFiberAfterEffects</span><span class="token punctuation">(</span>nextEffect<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    nextEffect <span class="token operator">=</span> nextNextEffect<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 重置一些全局变量(省略这部分代码)...</span>
<span class="token comment">// 下面代码用于检测是否有新的更新任务</span>
<span class="token comment">// 比如在componentDidMount函数中, 再次调用setState()</span>

<span class="token comment">// 1. 检测常规(异步)任务, 如果有则会发起异步调度(调度中心`scheduler`只能异步调用)</span>
<span class="token function">ensureRootIsScheduled</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2. 检测同步任务, 如果有则主动调用flushSyncCallbackQueue(无需再次等待scheduler调度), 再次进入fiber树构造循环</span>
<span class="token function">flushSyncCallbackQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><p>本节分析了<code>fiber 树渲染</code>的处理过程, 从宏观上看<code>fiber 树渲染</code>位于<code>reconciler 运作流程</code>中的输出阶段, 是整个<code>reconciler 运作流程</code>的链路中最后一环(从输入到输出). 本节根据源码, 具体从<code>渲染前, 渲染, 渲染后</code>三个方面分解了<code>commitRootImpl</code>函数. 其中最核心的<code>渲染</code>逻辑又分为了 3 个函数, 这 3 个函数共同处理了有副作用<code>fiber</code>节点, 并通过渲染器<code>react-dom</code>把最新的 DOM 对象渲染到界面上.</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: dean@57blocks.com">DeanSui</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/notes/assets/app.e9fd9ffa.js" defer></script>
  </body>
</html>
