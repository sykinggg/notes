<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.43">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>plugins | </title><meta name="description" content="君子藏器于身 待时而动 天下有道则见 无道则隐">
    <link rel="modulepreload" href="/notes/assets/app.41ff10d5.js"><link rel="modulepreload" href="/notes/assets/plugins.html.f7973877.js"><link rel="modulepreload" href="/notes/assets/plugins.html.60d0a9f0.js"><link rel="prefetch" href="/notes/assets/index.html.71fbd40b.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.5e9c1051.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.69139fe7.js"><link rel="prefetch" href="/notes/assets/base.html.55c9999b.js"><link rel="prefetch" href="/notes/assets/customCli.html.3507c8cf.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.88b46823.js"><link rel="prefetch" href="/notes/assets/adapter.html.30be4f23.js"><link rel="prefetch" href="/notes/assets/amd.html.7e568b04.js"><link rel="prefetch" href="/notes/assets/builder.html.2ec6f419.js"><link rel="prefetch" href="/notes/assets/censorJquery.html.dc0e2ac0.js"><link rel="prefetch" href="/notes/assets/combination.html.c97b2a17.js"><link rel="prefetch" href="/notes/assets/command.html.24706be8.js"><link rel="prefetch" href="/notes/assets/commonJS.html.55353194.js"><link rel="prefetch" href="/notes/assets/constructor.html.32508b22.js"><link rel="prefetch" href="/notes/assets/decoration.html.7ad4f28e.js"><link rel="prefetch" href="/notes/assets/esHarmony.html.52a11284.js"><link rel="prefetch" href="/notes/assets/exposed.html.5be6b156.js"><link rel="prefetch" href="/notes/assets/exterior.html.b59c5dab.js"><link rel="prefetch" href="/notes/assets/factory.html.17f6c0c0.js"><link rel="prefetch" href="/notes/assets/flyweight.html.821ca765.js"><link rel="prefetch" href="/notes/assets/functionalProgramming.html.48b08921.js"><link rel="prefetch" href="/notes/assets/intermediary.html.3875139e.js"><link rel="prefetch" href="/notes/assets/iterator.html.80e605a4.js"><link rel="prefetch" href="/notes/assets/lazyInitial.html.c85f4e3c.js"><link rel="prefetch" href="/notes/assets/mixin.html.63ea55c1.js"><link rel="prefetch" href="/notes/assets/module.html.43952a24.js"><link rel="prefetch" href="/notes/assets/mvc.html.27c0817c.js"><link rel="prefetch" href="/notes/assets/mvp.html.6a557eb7.js"><link rel="prefetch" href="/notes/assets/mvvm.html.2f68a42d.js"><link rel="prefetch" href="/notes/assets/observer.html.243272f7.js"><link rel="prefetch" href="/notes/assets/outward.html.f233e8f4.js"><link rel="prefetch" href="/notes/assets/overview.html.8be7f8f1.js"><link rel="prefetch" href="/notes/assets/prototype.html.0a60ba3b.js"><link rel="prefetch" href="/notes/assets/proxy.html.c7a9712c.js"><link rel="prefetch" href="/notes/assets/singleton.html.924eb57a.js"><link rel="prefetch" href="/notes/assets/axios.html.152991da.js"><link rel="prefetch" href="/notes/assets/createUnderscore.html.12ece0eb.js"><link rel="prefetch" href="/notes/assets/jquery.html.11a87e06.js"><link rel="prefetch" href="/notes/assets/lodash.html.a28f3ffa.js"><link rel="prefetch" href="/notes/assets/sentry.html.88bb14c9.js"><link rel="prefetch" href="/notes/assets/underscore.html.65a76115.js"><link rel="prefetch" href="/notes/assets/vuex.html.c241aef7.js"><link rel="prefetch" href="/notes/assets/customCli.html.6827cb4a.js"><link rel="prefetch" href="/notes/assets/description.html.ac769419.js"><link rel="prefetch" href="/notes/assets/indx.html.55eea29a.js"><link rel="prefetch" href="/notes/assets/rebase.html.413e1a1f.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.36614e79.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.d63f531d.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.1fb07a05.js"><link rel="prefetch" href="/notes/assets/44Questions.html.cd56a67c.js"><link rel="prefetch" href="/notes/assets/asyncAwait.html.e7c7adad.js"><link rel="prefetch" href="/notes/assets/babelCompile.html.7fe3caef.js"><link rel="prefetch" href="/notes/assets/base.html.a8bcba86.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.bf629027.js"><link rel="prefetch" href="/notes/assets/baseWebpack.html.4610526f.js"><link rel="prefetch" href="/notes/assets/codeSeparation.html.79666217.js"><link rel="prefetch" href="/notes/assets/cycle.html.8be7ce7d.js"><link rel="prefetch" href="/notes/assets/cycleOtherWay.html.578d145b.js"><link rel="prefetch" href="/notes/assets/executionMechanism.html.d0164cea.js"><link rel="prefetch" href="/notes/assets/hybrid.html.46f4eb67.js"><link rel="prefetch" href="/notes/assets/jsHandwriting.html.bb2381a2.js"><link rel="prefetch" href="/notes/assets/jsonStringify.html.88e72f13.js"><link rel="prefetch" href="/notes/assets/largeFileResumableUpload.html.bfac7f5b.js"><link rel="prefetch" href="/notes/assets/performance.html.b21c0094.js"><link rel="prefetch" href="/notes/assets/promise.html.e52377e3.js"><link rel="prefetch" href="/notes/assets/promiseAll.html.73d8517c.js"><link rel="prefetch" href="/notes/assets/spa.html.82dad5d8.js"><link rel="prefetch" href="/notes/assets/tsBaseInterview.html.e3ac3b37.js"><link rel="prefetch" href="/notes/assets/useEs6.html.50d0cc65.js"><link rel="prefetch" href="/notes/assets/webAnimations.html.d69af296.js"><link rel="prefetch" href="/notes/assets/webpackInterview.html.5b8fab49.js"><link rel="prefetch" href="/notes/assets/webpackLoader.html.12ea42bd.js"><link rel="prefetch" href="/notes/assets/webpackPublic.html.90e1a830.js"><link rel="prefetch" href="/notes/assets/weird.html.b62a60ae.js"><link rel="prefetch" href="/notes/assets/es10News.html.bc158c6b.js"><link rel="prefetch" href="/notes/assets/es11News.html.70b9ea54.js"><link rel="prefetch" href="/notes/assets/es6Interview1.html.6f308cb1.js"><link rel="prefetch" href="/notes/assets/es6Interview2.html.238cb1a5.js"><link rel="prefetch" href="/notes/assets/es6Interview3.html.d92a39f8.js"><link rel="prefetch" href="/notes/assets/es6News.html.3f5912b4.js"><link rel="prefetch" href="/notes/assets/es7News.html.3220d2f0.js"><link rel="prefetch" href="/notes/assets/es8News.html.e8e6f0bf.js"><link rel="prefetch" href="/notes/assets/es9News.html.624864ec.js"><link rel="prefetch" href="/notes/assets/base.html.aafed503.js"><link rel="prefetch" href="/notes/assets/nginxComprehensiveScene.html.5a3a80b7.js"><link rel="prefetch" href="/notes/assets/commonlyUsed.html.d5ba5b67.js"><link rel="prefetch" href="/notes/assets/inelegantHook.html.f3b76427.js"><link rel="prefetch" href="/notes/assets/interview1.html.bdd8631d.js"><link rel="prefetch" href="/notes/assets/interview2.html.5c9a01b0.js"><link rel="prefetch" href="/notes/assets/interview3.html.8dc8fbef.js"><link rel="prefetch" href="/notes/assets/interview4.html.3c256124.js"><link rel="prefetch" href="/notes/assets/base.html.d33792aa.js"><link rel="prefetch" href="/notes/assets/introduction.html.2d939210.js"><link rel="prefetch" href="/notes/assets/base.html.c8430b6f.js"><link rel="prefetch" href="/notes/assets/summarize.html.47365fa8.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.ce7947cb.js"><link rel="prefetch" href="/notes/assets/index.html.a2b37411.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.30c85bb7.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.261dfbbe.js"><link rel="prefetch" href="/notes/assets/bigDataRender.html.eb068e4b.js"><link rel="prefetch" href="/notes/assets/progress.html.bb1f22cd.js"><link rel="prefetch" href="/notes/assets/quirksStandards.html.c2757cfb.js"><link rel="prefetch" href="/notes/assets/redrawReflow.html.0e6ef048.js"><link rel="prefetch" href="/notes/assets/storageSpace.html.1311d9f2.js"><link rel="prefetch" href="/notes/assets/webComLink.html.996218a7.js"><link rel="prefetch" href="/notes/assets/webUrl.html.0844097b.js"><link rel="prefetch" href="/notes/assets/spanWidthHeight.html.095593c2.js"><link rel="prefetch" href="/notes/assets/baseCss.html.ad5cb33b.js"><link rel="prefetch" href="/notes/assets/blockFormattingContext.html.641f4ae6.js"><link rel="prefetch" href="/notes/assets/containingBlock.html.71f6f07e.js"><link rel="prefetch" href="/notes/assets/cssBeforeAfter.html.01f79ba9.js"><link rel="prefetch" href="/notes/assets/cssBoxModal.html.811b8aa6.js"><link rel="prefetch" href="/notes/assets/cssCollapsing.html.f37ecbc6.js"><link rel="prefetch" href="/notes/assets/cssCompatible.html.1db2251c.js"><link rel="prefetch" href="/notes/assets/cssFlexDemo.html.7ad58692.js"><link rel="prefetch" href="/notes/assets/cssFlexLayout.html.82fe4a58.js"><link rel="prefetch" href="/notes/assets/cssGridLayout.html.6789bf3e.js"><link rel="prefetch" href="/notes/assets/cssHack.html.2042c341.js"><link rel="prefetch" href="/notes/assets/cssInlineBlock.html.b7306f11.js"><link rel="prefetch" href="/notes/assets/cssPriority.html.7ed2d7b2.js"><link rel="prefetch" href="/notes/assets/cssPseudo.html.f35ded84.js"><link rel="prefetch" href="/notes/assets/cssPseudoClass.html.e3a05420.js"><link rel="prefetch" href="/notes/assets/cssSelector.html.47705a35.js"><link rel="prefetch" href="/notes/assets/cssTutorial.html.026851bf.js"><link rel="prefetch" href="/notes/assets/fieldInvalid.html.9b253070.js"><link rel="prefetch" href="/notes/assets/frame.html.9ecd6456.js"><link rel="prefetch" href="/notes/assets/knowledgePoints.html.6e482209.js"><link rel="prefetch" href="/notes/assets/linkImport.html.ff9b9b5b.js"><link rel="prefetch" href="/notes/assets/stackingContext.html.273c2180.js"><link rel="prefetch" href="/notes/assets/tools.html.b9935888.js"><link rel="prefetch" href="/notes/assets/units.html.7feaa8f6.js"><link rel="prefetch" href="/notes/assets/transform.html.26475cc2.js"><link rel="prefetch" href="/notes/assets/content.html.441f730c.js"><link rel="prefetch" href="/notes/assets/accesskey.html.4aef6215.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.39e33056.js"><link rel="prefetch" href="/notes/assets/canvasSvg.html.21d2fa16.js"><link rel="prefetch" href="/notes/assets/deviceAPI.html.d0290e94.js"><link rel="prefetch" href="/notes/assets/globalAttr.html.e8971ba4.js"><link rel="prefetch" href="/notes/assets/htmlDatalist.html.d50829c2.js"><link rel="prefetch" href="/notes/assets/htmlElement.html.402d03c3.js"><link rel="prefetch" href="/notes/assets/interview10.html.5082ca9f.js"><link rel="prefetch" href="/notes/assets/interview11.html.d60cc86d.js"><link rel="prefetch" href="/notes/assets/interview12.html.2ab3b502.js"><link rel="prefetch" href="/notes/assets/interview13.html.7ece0bd1.js"><link rel="prefetch" href="/notes/assets/interview14.html.6bde5a7d.js"><link rel="prefetch" href="/notes/assets/interview15.html.baa8db5e.js"><link rel="prefetch" href="/notes/assets/interview16.html.f78b2228.js"><link rel="prefetch" href="/notes/assets/interview17.html.16add79f.js"><link rel="prefetch" href="/notes/assets/interview18.html.9564e0d2.js"><link rel="prefetch" href="/notes/assets/interview19.html.3934b85b.js"><link rel="prefetch" href="/notes/assets/interview20.html.445deef8.js"><link rel="prefetch" href="/notes/assets/interview21.html.6c5124ea.js"><link rel="prefetch" href="/notes/assets/interview22.html.b9505f56.js"><link rel="prefetch" href="/notes/assets/interview23.html.92209e12.js"><link rel="prefetch" href="/notes/assets/interview24.html.05aec020.js"><link rel="prefetch" href="/notes/assets/interview25.html.4fc83f5f.js"><link rel="prefetch" href="/notes/assets/interview26.html.62b3fb4e.js"><link rel="prefetch" href="/notes/assets/interview27.html.24cb42ee.js"><link rel="prefetch" href="/notes/assets/interview28.html.6a2d2b94.js"><link rel="prefetch" href="/notes/assets/interview29.html.5377c0c1.js"><link rel="prefetch" href="/notes/assets/interview30.html.3f88f741.js"><link rel="prefetch" href="/notes/assets/interview31.html.8be860ae.js"><link rel="prefetch" href="/notes/assets/interview32.html.ffa104c2.js"><link rel="prefetch" href="/notes/assets/interview33.html.429f938e.js"><link rel="prefetch" href="/notes/assets/interview34.html.d61821ae.js"><link rel="prefetch" href="/notes/assets/interview35.html.d0b951b6.js"><link rel="prefetch" href="/notes/assets/interview36.html.a2bfbbed.js"><link rel="prefetch" href="/notes/assets/interview37.html.80d9b412.js"><link rel="prefetch" href="/notes/assets/interview38.html.dc40b641.js"><link rel="prefetch" href="/notes/assets/interview39.html.e838a06d.js"><link rel="prefetch" href="/notes/assets/interview40.html.ca92f3dd.js"><link rel="prefetch" href="/notes/assets/interview41.html.e8f2a4ec.js"><link rel="prefetch" href="/notes/assets/interview42.html.bf034bac.js"><link rel="prefetch" href="/notes/assets/interview43.html.46b1ef12.js"><link rel="prefetch" href="/notes/assets/interview44.html.be614f5d.js"><link rel="prefetch" href="/notes/assets/interview45.html.3abb7fe3.js"><link rel="prefetch" href="/notes/assets/interview46.html.896e49dd.js"><link rel="prefetch" href="/notes/assets/interview47.html.314aac5a.js"><link rel="prefetch" href="/notes/assets/interview48.html.602e4f5e.js"><link rel="prefetch" href="/notes/assets/interview49.html.d0941a05.js"><link rel="prefetch" href="/notes/assets/interview5.html.baadff11.js"><link rel="prefetch" href="/notes/assets/interview50.html.9c6b09e8.js"><link rel="prefetch" href="/notes/assets/interview51.html.d3282e0d.js"><link rel="prefetch" href="/notes/assets/interview52.html.f22847c1.js"><link rel="prefetch" href="/notes/assets/interview53.html.c09e48af.js"><link rel="prefetch" href="/notes/assets/interview54.html.6e94310c.js"><link rel="prefetch" href="/notes/assets/interview55.html.13ae49c5.js"><link rel="prefetch" href="/notes/assets/interview56.html.0820ec5c.js"><link rel="prefetch" href="/notes/assets/interview57.html.7399c90e.js"><link rel="prefetch" href="/notes/assets/interview58.html.7ee3a7b8.js"><link rel="prefetch" href="/notes/assets/interview59.html.b7cd2c0a.js"><link rel="prefetch" href="/notes/assets/interview6.html.3838ee59.js"><link rel="prefetch" href="/notes/assets/interview7.html.18a57855.js"><link rel="prefetch" href="/notes/assets/interview8.html.6fb9706e.js"><link rel="prefetch" href="/notes/assets/interview9.html.8e623cf8.js"><link rel="prefetch" href="/notes/assets/linkImport.html.62b55985.js"><link rel="prefetch" href="/notes/assets/offlineStorage.html.4392532d.js"><link rel="prefetch" href="/notes/assets/regular.html.0af25dff.js"><link rel="prefetch" href="/notes/assets/shake.html.98be5054.js"><link rel="prefetch" href="/notes/assets/webWorker.html.dc505d02.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.63702d28.js"><link rel="prefetch" href="/notes/assets/cors.html.b0a290ac.js"><link rel="prefetch" href="/notes/assets/crossDomainCookie.html.bf6b2f51.js"><link rel="prefetch" href="/notes/assets/fetch.html.09956e28.js"><link rel="prefetch" href="/notes/assets/nestAxios.html.1f2e7064.js"><link rel="prefetch" href="/notes/assets/debounce.html.15d9af40.js"><link rel="prefetch" href="/notes/assets/lodashPrinciple.html.0bdfa1f8.js"><link rel="prefetch" href="/notes/assets/lodashThrottleDebounce.html.adbfe084.js"><link rel="prefetch" href="/notes/assets/throttle.html.296736b4.js"><link rel="prefetch" href="/notes/assets/throttleDebounceReact.html.cd5ffed7.js"><link rel="prefetch" href="/notes/assets/cloneIntroduction.html.b83010d1.js"><link rel="prefetch" href="/notes/assets/deepClone.html.69460c40.js"><link rel="prefetch" href="/notes/assets/lodashDeepClone.html.f395197a.js"><link rel="prefetch" href="/notes/assets/objectAssign.html.28df3036.js"><link rel="prefetch" href="/notes/assets/arraySourceCode.html.b52f7871.js"><link rel="prefetch" href="/notes/assets/baseHigh.html.52b9f97d.js"><link rel="prefetch" href="/notes/assets/currying.html.442aed16.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.334fcf6b.js"><link rel="prefetch" href="/notes/assets/eventLoop.html.533a98e2.js"><link rel="prefetch" href="/notes/assets/iife.html.7811eb5a.js"><link rel="prefetch" href="/notes/assets/interview1.html.2abdf160.js"><link rel="prefetch" href="/notes/assets/jsCompatible.html.c67930bf.js"><link rel="prefetch" href="/notes/assets/baseProyotype.html.9c153010.js"><link rel="prefetch" href="/notes/assets/functionObjectResource.html.b9fe93d8.js"><link rel="prefetch" href="/notes/assets/prototypeInherit.html.231989d7.js"><link rel="prefetch" href="/notes/assets/closureInterview.html.d7b62950.js"><link rel="prefetch" href="/notes/assets/scopeChain.html.b9e9438b.js"><link rel="prefetch" href="/notes/assets/understandingClosures.html.2283c11b.js"><link rel="prefetch" href="/notes/assets/executionStack.html.365cf24c.js"><link rel="prefetch" href="/notes/assets/memoryLeak.html.7b1f8867.js"><link rel="prefetch" href="/notes/assets/memoryMechanism.html.a8927915.js"><link rel="prefetch" href="/notes/assets/memorySpace.html.79041994.js"><link rel="prefetch" href="/notes/assets/precompiled.html.0f610672.js"><link rel="prefetch" href="/notes/assets/variableObject.html.e3be40ed.js"><link rel="prefetch" href="/notes/assets/arrowFunctionThis.html.17d754a7.js"><link rel="prefetch" href="/notes/assets/bindSimulation.html.ab7b7b44.js"><link rel="prefetch" href="/notes/assets/callApply.html.d9d2a028.js"><link rel="prefetch" href="/notes/assets/newSimulation.html.bda8c01b.js"><link rel="prefetch" href="/notes/assets/thisBind.html.6ab95334.js"><link rel="prefetch" href="/notes/assets/interview1.html.092be8b4.js"><link rel="prefetch" href="/notes/assets/interview10.html.c3bb146b.js"><link rel="prefetch" href="/notes/assets/interview11.html.129bcf14.js"><link rel="prefetch" href="/notes/assets/interview12.html.91b691f5.js"><link rel="prefetch" href="/notes/assets/interview13.html.4bf7bd63.js"><link rel="prefetch" href="/notes/assets/interview14.html.52577789.js"><link rel="prefetch" href="/notes/assets/interview15.html.e8ec5267.js"><link rel="prefetch" href="/notes/assets/interview16.html.4b4862f2.js"><link rel="prefetch" href="/notes/assets/interview17.html.204491ca.js"><link rel="prefetch" href="/notes/assets/interview18.html.0cfde035.js"><link rel="prefetch" href="/notes/assets/interview19.html.f936c750.js"><link rel="prefetch" href="/notes/assets/interview2.html.401cc73e.js"><link rel="prefetch" href="/notes/assets/interview20.html.47d79b3e.js"><link rel="prefetch" href="/notes/assets/interview21.html.1f0bf7ad.js"><link rel="prefetch" href="/notes/assets/interview22.html.06d37ddf.js"><link rel="prefetch" href="/notes/assets/interview23.html.ce078cc0.js"><link rel="prefetch" href="/notes/assets/interview24.html.96400736.js"><link rel="prefetch" href="/notes/assets/interview25.html.c622011d.js"><link rel="prefetch" href="/notes/assets/interview26.html.a6a79665.js"><link rel="prefetch" href="/notes/assets/interview27.html.8e790034.js"><link rel="prefetch" href="/notes/assets/interview28.html.91e4e568.js"><link rel="prefetch" href="/notes/assets/interview29.html.56055415.js"><link rel="prefetch" href="/notes/assets/interview3.html.a0e3b696.js"><link rel="prefetch" href="/notes/assets/interview30.html.819d4fa4.js"><link rel="prefetch" href="/notes/assets/interview4.html.fcc3df3b.js"><link rel="prefetch" href="/notes/assets/interview5.html.31372306.js"><link rel="prefetch" href="/notes/assets/interview6.html.5c1cf633.js"><link rel="prefetch" href="/notes/assets/interview7.html.8ee1cb82.js"><link rel="prefetch" href="/notes/assets/interview8.html.b630d562.js"><link rel="prefetch" href="/notes/assets/interview9.html.3e393902.js"><link rel="prefetch" href="/notes/assets/adjacentSiblingCombinator.html.22769094.js"><link rel="prefetch" href="/notes/assets/attributeSelectors.html.e38d7757.js"><link rel="prefetch" href="/notes/assets/charset.html.60946374.js"><link rel="prefetch" href="/notes/assets/childCombinator.html.f070f777.js"><link rel="prefetch" href="/notes/assets/classSelectors.html.60651ad8.js"><link rel="prefetch" href="/notes/assets/descendantCombinator.html.17ff8c43.js"><link rel="prefetch" href="/notes/assets/generalSiblingCombinator.html.783c4f48.js"><link rel="prefetch" href="/notes/assets/iDSelectors.html.d35b8dae.js"><link rel="prefetch" href="/notes/assets/pseudoClasses.html.de7fae5d.js"><link rel="prefetch" href="/notes/assets/pseudoElements.html.06eb4b3f.js"><link rel="prefetch" href="/notes/assets/selectorList.html.94e6b3fc.js"><link rel="prefetch" href="/notes/assets/typeSelectors.html.0fbf13ca.js"><link rel="prefetch" href="/notes/assets/universalSelectors.html.ecba2ff2.js"><link rel="prefetch" href="/notes/assets/IterationProtocols.html.68b9c74e.js"><link rel="prefetch" href="/notes/assets/arrayFlat.html.3d6527d2.js"><link rel="prefetch" href="/notes/assets/asyncHistory.html.e364d4ad.js"><link rel="prefetch" href="/notes/assets/eventLoop.html.994ecf46.js"><link rel="prefetch" href="/notes/assets/fileReader.html.d6e1ae5d.js"><link rel="prefetch" href="/notes/assets/formData.html.830096b1.js"><link rel="prefetch" href="/notes/assets/functionGenerator.html.309a2aef.js"><link rel="prefetch" href="/notes/assets/generator.html.6339ea74.js"><link rel="prefetch" href="/notes/assets/intersectionObserver.html.3a238681.js"><link rel="prefetch" href="/notes/assets/map.html.e3556c64.js"><link rel="prefetch" href="/notes/assets/promise.html.5784aff5.js"><link rel="prefetch" href="/notes/assets/set.html.3a7cbd16.js"><link rel="prefetch" href="/notes/assets/string.html.99365791.js"><link rel="prefetch" href="/notes/assets/symbol.html.41e58345.js"><link rel="prefetch" href="/notes/assets/xMLHttpRequest.html.1687b050.js"><link rel="prefetch" href="/notes/assets/spreadSyntax.html.4ee8b18c.js"><link rel="prefetch" href="/notes/assets/strictMode.html.d69ebc80.js"><link rel="prefetch" href="/notes/assets/cache.html.e1b1fbcc.js"><link rel="prefetch" href="/notes/assets/drag1.html.ec9ed012.js"><link rel="prefetch" href="/notes/assets/oneLineCode.html.bd341f8b.js"><link rel="prefetch" href="/notes/assets/oneLineCodeArray.html.1d30c523.js"><link rel="prefetch" href="/notes/assets/oneLineCodeDOM.html.71da4b36.js"><link rel="prefetch" href="/notes/assets/oneLineCodeDateTime.html.ef9c1c50.js"><link rel="prefetch" href="/notes/assets/oneLineCodeFunction.html.06e81703.js"><link rel="prefetch" href="/notes/assets/oneLineCodeMath.html.7877af09.js"><link rel="prefetch" href="/notes/assets/oneLineCodeMisc.html.bc92b2ac.js"><link rel="prefetch" href="/notes/assets/oneLineCodeNumber.html.a397e90c.js"><link rel="prefetch" href="/notes/assets/oneLineCodeObject.html.c2f5ea2a.js"><link rel="prefetch" href="/notes/assets/oneLineCodeRandom.html.0f0e2fc5.js"><link rel="prefetch" href="/notes/assets/oneLineCodeString.html.8dd9ccec.js"><link rel="prefetch" href="/notes/assets/oneLineCodeValidator.html.c8874f9c.js"><link rel="prefetch" href="/notes/assets/typeScriptCache.html.cfec8c9c.js"><link rel="prefetch" href="/notes/assets/reactBase.html.3ae39482.js"><link rel="prefetch" href="/notes/assets/reactTypescript.html.292db337.js"><link rel="prefetch" href="/notes/assets/vue2Base.html.387b8b55.js"><link rel="prefetch" href="/notes/assets/vue2Table.html.5e61470f.js"><link rel="prefetch" href="/notes/assets/vue2offsetTop.html.018ac531.js"><link rel="prefetch" href="/notes/assets/componentWillXXX.html.b2f5ae49.js"><link rel="prefetch" href="/notes/assets/disrupt.html.1bfb65fa.js"><link rel="prefetch" href="/notes/assets/lane.html.02f7de6b.js"><link rel="prefetch" href="/notes/assets/prepare.html.403b5795.js"><link rel="prefetch" href="/notes/assets/redux.html.6f2cd894.js"><link rel="prefetch" href="/notes/assets/scheduler.html.c9b137d8.js"><link rel="prefetch" href="/notes/assets/multi.html.fa34663f.js"><link rel="prefetch" href="/notes/assets/one.html.710385e9.js"><link rel="prefetch" href="/notes/assets/prepare.html.04c98351.js"><link rel="prefetch" href="/notes/assets/create.html.cd731e5c.js"><link rel="prefetch" href="/notes/assets/prepare.html.a0031937.js"><link rel="prefetch" href="/notes/assets/structure.html.c13173a1.js"><link rel="prefetch" href="/notes/assets/useeffect.html.4d3a7633.js"><link rel="prefetch" href="/notes/assets/usememo.html.c43372a9.js"><link rel="prefetch" href="/notes/assets/useref.html.62fe578c.js"><link rel="prefetch" href="/notes/assets/usestate.html.d2ea1c97.js"><link rel="prefetch" href="/notes/assets/file.html.e650dad3.js"><link rel="prefetch" href="/notes/assets/idea.html.699fdfd9.js"><link rel="prefetch" href="/notes/assets/jsx.html.8dc05892.js"><link rel="prefetch" href="/notes/assets/newConstructure.html.d4abac8b.js"><link rel="prefetch" href="/notes/assets/oldConstructure.html.574defb4.js"><link rel="prefetch" href="/notes/assets/source.html.40430e8b.js"><link rel="prefetch" href="/notes/assets/summary.html.4ab6607e.js"><link rel="prefetch" href="/notes/assets/basePrinciple.html.928fb18b.js"><link rel="prefetch" href="/notes/assets/componentApi.html.0a2f2b5a.js"><link rel="prefetch" href="/notes/assets/domApi.html.09e3fa66.js"><link rel="prefetch" href="/notes/assets/hoc.html.53814fa0.js"><link rel="prefetch" href="/notes/assets/hookApi.html.50b5d228.js"><link rel="prefetch" href="/notes/assets/hookCustom.html.5913a1fc.js"><link rel="prefetch" href="/notes/assets/hookPrinciple.html.944b664c.js"><link rel="prefetch" href="/notes/assets/hookUse.html.2b6ba1be.js"><link rel="prefetch" href="/notes/assets/reactKeeplive.html.6991ce67.js"><link rel="prefetch" href="/notes/assets/reactRedux.html.8cba8e12.js"><link rel="prefetch" href="/notes/assets/reactRouter.html.81acc7a8.js"><link rel="prefetch" href="/notes/assets/toolApi.html.8da23baf.js"><link rel="prefetch" href="/notes/assets/beginWork.html.c02d7a71.js"><link rel="prefetch" href="/notes/assets/completeWork.html.f1ae90df.js"><link rel="prefetch" href="/notes/assets/doubleBuffer.html.2aaea5b7.js"><link rel="prefetch" href="/notes/assets/fiber-mental.html.5b24e5e0.js"><link rel="prefetch" href="/notes/assets/fiber.html.f1a4a497.js"><link rel="prefetch" href="/notes/assets/reconciler.html.6a75dc57.js"><link rel="prefetch" href="/notes/assets/beforeMutation.html.45eb988d.js"><link rel="prefetch" href="/notes/assets/layout.html.9c305dc2.js"><link rel="prefetch" href="/notes/assets/mutation.html.ff89b9e1.js"><link rel="prefetch" href="/notes/assets/prepare.html.d2af5e0e.js"><link rel="prefetch" href="/notes/assets/mental.html.ca188f6b.js"><link rel="prefetch" href="/notes/assets/prepare.html.9685597b.js"><link rel="prefetch" href="/notes/assets/priority.html.fb51b346.js"><link rel="prefetch" href="/notes/assets/reactdom.html.6c5f50a3.js"><link rel="prefetch" href="/notes/assets/setstate.html.3ca7cbef.js"><link rel="prefetch" href="/notes/assets/update.html.4e027c07.js"><link rel="prefetch" href="/notes/assets/bitfiled.html.d81e4a18.js"><link rel="prefetch" href="/notes/assets/dfs.html.5495b485.js"><link rel="prefetch" href="/notes/assets/diff.html.59a096da.js"><link rel="prefetch" href="/notes/assets/heapsort.html.cd567ad9.js"><link rel="prefetch" href="/notes/assets/linkedlist.html.e6b7a589.js"><link rel="prefetch" href="/notes/assets/stack.html.62766b5c.js"><link rel="prefetch" href="/notes/assets/bootstrap.html.e098c861.js"><link rel="prefetch" href="/notes/assets/context.html.f98b5374.js"><link rel="prefetch" href="/notes/assets/fibertree-commit.html.b0b58f67.js"><link rel="prefetch" href="/notes/assets/fibertree-create.html.19ceafed.js"><link rel="prefetch" href="/notes/assets/fibertree-prepare.html.a02f0823.js"><link rel="prefetch" href="/notes/assets/fibertree-update.html.0948dacd.js"><link rel="prefetch" href="/notes/assets/hook-effect.html.177c1484.js"><link rel="prefetch" href="/notes/assets/hook-state.html.7c4e9d86.js"><link rel="prefetch" href="/notes/assets/hook-summary.html.76673a4e.js"><link rel="prefetch" href="/notes/assets/macro-structure.html.ae2754ed.js"><link rel="prefetch" href="/notes/assets/object-structure.html.6242475b.js"><link rel="prefetch" href="/notes/assets/priority.html.2dca6663.js"><link rel="prefetch" href="/notes/assets/reconciler-workflow.html.7d94e94d.js"><link rel="prefetch" href="/notes/assets/scheduler.html.32a54904.js"><link rel="prefetch" href="/notes/assets/state-effects.html.3c8e4102.js"><link rel="prefetch" href="/notes/assets/synthetic-event.html.81ddf51d.js"><link rel="prefetch" href="/notes/assets/workloop.html.44f5b6b6.js"><link rel="prefetch" href="/notes/assets/ast.html.2c534a6c.js"><link rel="prefetch" href="/notes/assets/binder.html.e3df52a0.js"><link rel="prefetch" href="/notes/assets/checker.html.9826fcb7.js"><link rel="prefetch" href="/notes/assets/emitter.html.e9f1bccf.js"><link rel="prefetch" href="/notes/assets/overview.html.f72b7461.js"><link rel="prefetch" href="/notes/assets/parser.html.5731843e.js"><link rel="prefetch" href="/notes/assets/program.html.a9a9ed36.js"><link rel="prefetch" href="/notes/assets/scanner.html.3b8be153.js"><link rel="prefetch" href="/notes/assets/common.html.5dec5573.js"><link rel="prefetch" href="/notes/assets/interpreting.html.27734eae.js"><link rel="prefetch" href="/notes/assets/class.html.fdca3383.js"><link rel="prefetch" href="/notes/assets/commandline-behavior.html.cb78191e.js"><link rel="prefetch" href="/notes/assets/comments.html.45342ffb.js"><link rel="prefetch" href="/notes/assets/common-bug-not-bugs.html.d4d0497d.js"><link rel="prefetch" href="/notes/assets/common-feature-request.html.000a7b70.js"><link rel="prefetch" href="/notes/assets/decorators.html.bf306def.js"><link rel="prefetch" href="/notes/assets/enums.html.0a1c82a9.js"><link rel="prefetch" href="/notes/assets/function.html.8d847425.js"><link rel="prefetch" href="/notes/assets/generics.html.45b43ec2.js"><link rel="prefetch" href="/notes/assets/glossary-and-terms.html.d482019e.js"><link rel="prefetch" href="/notes/assets/jsx-and-react.html.a828002f.js"><link rel="prefetch" href="/notes/assets/modules.html.df7f48e2.js"><link rel="prefetch" href="/notes/assets/thing-that-dont-work.html.924c924f.js"><link rel="prefetch" href="/notes/assets/tsconfig-behavior.html.cfe0a3b4.js"><link rel="prefetch" href="/notes/assets/type-guards.html.ae22f995.js"><link rel="prefetch" href="/notes/assets/type-system-behavior.html.203b7d9e.js"><link rel="prefetch" href="/notes/assets/nonReactJSX.html.04742307.js"><link rel="prefetch" href="/notes/assets/reactJSX.html.00ec456c.js"><link rel="prefetch" href="/notes/assets/support.html.05a39724.js"><link rel="prefetch" href="/notes/assets/typescript-3.7.html.3ea39099.js"><link rel="prefetch" href="/notes/assets/typescript-3.8.html.77eb495f.js"><link rel="prefetch" href="/notes/assets/typescript-3.9.html.e0f71181.js"><link rel="prefetch" href="/notes/assets/compilationContext.html.19a6d15c.js"><link rel="prefetch" href="/notes/assets/declarationspaces.html.72240dd1.js"><link rel="prefetch" href="/notes/assets/dynamicImportExpressions.html.10be02f8.js"><link rel="prefetch" href="/notes/assets/inDepthTs.html.3fa89264.js"><link rel="prefetch" href="/notes/assets/modules.html.8ce46461.js"><link rel="prefetch" href="/notes/assets/namespaces.html.0aeb049a.js"><link rel="prefetch" href="/notes/assets/unknownAny.html.7bee86ca.js"><link rel="prefetch" href="/notes/assets/avoidExportDefault.html.21a50706.js"><link rel="prefetch" href="/notes/assets/barrel.html.b860e721.js"><link rel="prefetch" href="/notes/assets/bind.html.1d90ecde.js"><link rel="prefetch" href="/notes/assets/buildToggles.html.c9eb290a.js"><link rel="prefetch" href="/notes/assets/classAreUseful.html.da22b579.js"><link rel="prefetch" href="/notes/assets/covarianceAndContravariance.html.d6a9991e.js"><link rel="prefetch" href="/notes/assets/createArrays.html.6c2b0056.js"><link rel="prefetch" href="/notes/assets/curry.html.198bd091.js"><link rel="prefetch" href="/notes/assets/functionParameters.html.2d3fa9ae.js"><link rel="prefetch" href="/notes/assets/infer.html.54a48919.js"><link rel="prefetch" href="/notes/assets/lazyObjectLiteralInitialization.html.a1a02b6b.js"><link rel="prefetch" href="/notes/assets/limitPropertySetters.html.dde91c42.js"><link rel="prefetch" href="/notes/assets/metadata.html.19f8f696.js"><link rel="prefetch" href="/notes/assets/nominalTyping.html.06d8aa39.js"><link rel="prefetch" href="/notes/assets/outFileCaution.html.331c79e5.js"><link rel="prefetch" href="/notes/assets/singletonPatern.html.7918fec5.js"><link rel="prefetch" href="/notes/assets/statefulFunctions.html.21418d74.js"><link rel="prefetch" href="/notes/assets/staticConstructors.html.0acf4dab.js"><link rel="prefetch" href="/notes/assets/stringBasedEmuns.html.2c520520.js"><link rel="prefetch" href="/notes/assets/truthy.html.c1c86de1.js"><link rel="prefetch" href="/notes/assets/typeInstantiation.html.29790a32.js"><link rel="prefetch" href="/notes/assets/typesafeEventEmitter.html.5a558ff1.js"><link rel="prefetch" href="/notes/assets/ambient.html.94ea47f1.js"><link rel="prefetch" href="/notes/assets/callable.html.11dabdc2.js"><link rel="prefetch" href="/notes/assets/discrominatedUnion.html.8ec05528.js"><link rel="prefetch" href="/notes/assets/enums.html.b41682bd.js"><link rel="prefetch" href="/notes/assets/exceptionsHanding.html.943f0d64.js"><link rel="prefetch" href="/notes/assets/freshness.html.649b6003.js"><link rel="prefetch" href="/notes/assets/functions.html.8bacac02.js"><link rel="prefetch" href="/notes/assets/generices.html.be8576f8.js"><link rel="prefetch" href="/notes/assets/indexSignatures.html.aa09f9d2.js"><link rel="prefetch" href="/notes/assets/interfaces.html.eb6d6ae6.js"><link rel="prefetch" href="/notes/assets/lib.html.bd165777.js"><link rel="prefetch" href="/notes/assets/literals.html.1aaf075a.js"><link rel="prefetch" href="/notes/assets/migrating.html.cae7eeb1.js"><link rel="prefetch" href="/notes/assets/mixins.html.d779c13d.js"><link rel="prefetch" href="/notes/assets/movingTypes.html.244adc2e.js"><link rel="prefetch" href="/notes/assets/neverType.html.e47cf131.js"><link rel="prefetch" href="/notes/assets/overview.html.48b07aa6.js"><link rel="prefetch" href="/notes/assets/readonly.html.f7f20ddc.js"><link rel="prefetch" href="/notes/assets/thisType.html.43f2d350.js"><link rel="prefetch" href="/notes/assets/typeAssertion.html.92fc0787.js"><link rel="prefetch" href="/notes/assets/typeCompatibility.html.220d5acd.js"><link rel="prefetch" href="/notes/assets/typeGuard.html.5ac309e6.js"><link rel="prefetch" href="/notes/assets/typeInference.html.90900d8c.js"><link rel="prefetch" href="/notes/assets/types.html.57430054.js"><link rel="prefetch" href="/notes/assets/pluginDva.html.7bc96d87.js"><link rel="prefetch" href="/notes/assets/pluginQiankun.html.fbb1dce5.js"><link rel="prefetch" href="/notes/assets/codegen.html.3d2eec43.js"><link rel="prefetch" href="/notes/assets/entrance.html.c46676cf.js"><link rel="prefetch" href="/notes/assets/optimize.html.5c2cc4a7.js"><link rel="prefetch" href="/notes/assets/outline.html.c143e7ab.js"><link rel="prefetch" href="/notes/assets/parse.html.3dd40222.js"><link rel="prefetch" href="/notes/assets/async-component.html.253503a0.js"><link rel="prefetch" href="/notes/assets/component-register.html.d39f08a5.js"><link rel="prefetch" href="/notes/assets/create-component.html.6ede302b.js"><link rel="prefetch" href="/notes/assets/lifecycle.html.719f4410.js"><link rel="prefetch" href="/notes/assets/merge-option.html.bf8bf46c.js"><link rel="prefetch" href="/notes/assets/outline.html.55ce76e5.js"><link rel="prefetch" href="/notes/assets/patch.html.a3057e6e.js"><link rel="prefetch" href="/notes/assets/_index.html.74f9231f.js"><link rel="prefetch" href="/notes/assets/create-element.html.4f274bc2.js"><link rel="prefetch" href="/notes/assets/mounted.html.69af9a9c.js"><link rel="prefetch" href="/notes/assets/new-vue.html.0c75b848.js"><link rel="prefetch" href="/notes/assets/render.html.1b1bb654.js"><link rel="prefetch" href="/notes/assets/update.html.0620ef4c.js"><link rel="prefetch" href="/notes/assets/virtual-dom.html.26b01fce.js"><link rel="prefetch" href="/notes/assets/event.html.c6a2ead6.js"><link rel="prefetch" href="/notes/assets/keep-alive.html.2f2e5a9d.js"><link rel="prefetch" href="/notes/assets/outline.html.0073d99a.js"><link rel="prefetch" href="/notes/assets/slot.html.23d003cc.js"><link rel="prefetch" href="/notes/assets/tansition-group.html.1e47b07f.js"><link rel="prefetch" href="/notes/assets/tansition.html.059e9e99.js"><link rel="prefetch" href="/notes/assets/v-model.html.f7986754.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.75ba54e7.js"><link rel="prefetch" href="/notes/assets/baseInterviewSecond.html.1a17b4a6.js"><link rel="prefetch" href="/notes/assets/componentCommunication.html.2ee347fb.js"><link rel="prefetch" href="/notes/assets/detailedResponsiveness.html.75946fdd.js"><link rel="prefetch" href="/notes/assets/diff.html.72154af2.js"><link rel="prefetch" href="/notes/assets/eventBinding.html.86d38cd1.js"><link rel="prefetch" href="/notes/assets/eventMechanism.html.a89f975c.js"><link rel="prefetch" href="/notes/assets/key.html.3ac0f202.js"><link rel="prefetch" href="/notes/assets/knowledgeSystem.html.1eeff266.js"><link rel="prefetch" href="/notes/assets/slot.html.79774da7.js"><link rel="prefetch" href="/notes/assets/sourceCodeAsyncDomUpdateNextTick.html.1057b6e6.js"><link rel="prefetch" href="/notes/assets/sourceCodeElementBroadcastDispatch.html.56362af9.js"><link rel="prefetch" href="/notes/assets/sourceCodeKeepAlive.html.2687e65a.js"><link rel="prefetch" href="/notes/assets/sourceCodeResponsiveness.html.53fcc6e2.js"><link rel="prefetch" href="/notes/assets/sourceCodeTemplateCompilation.html.128b40b4.js"><link rel="prefetch" href="/notes/assets/sourceCodeTemplateDom.html.6a8f3140.js"><link rel="prefetch" href="/notes/assets/sourceCodeVuex.html.fd9a58c0.js"><link rel="prefetch" href="/notes/assets/templateCompilation.html.36c2dd91.js"><link rel="prefetch" href="/notes/assets/vNode.html.adc0c5f1.js"><link rel="prefetch" href="/notes/assets/vNodeDiff.html.24c2f820.js"><link rel="prefetch" href="/notes/assets/build.html.0298d094.js"><link rel="prefetch" href="/notes/assets/directory.html.4e00441e.js"><link rel="prefetch" href="/notes/assets/entrance.html.5620a129.js"><link rel="prefetch" href="/notes/assets/flow.html.d02d447d.js"><link rel="prefetch" href="/notes/assets/component-update.html.33260d3c.js"><link rel="prefetch" href="/notes/assets/computed-watcher.html.9aa9a917.js"><link rel="prefetch" href="/notes/assets/getters.html.6be87d6d.js"><link rel="prefetch" href="/notes/assets/next-tick.html.df1481c2.js"><link rel="prefetch" href="/notes/assets/outline.html.bc2c1977.js"><link rel="prefetch" href="/notes/assets/props.html.0341f15f.js"><link rel="prefetch" href="/notes/assets/questions.html.f26faf30.js"><link rel="prefetch" href="/notes/assets/reactive-object.html.33e2889a.js"><link rel="prefetch" href="/notes/assets/setters.html.653ff0d1.js"><link rel="prefetch" href="/notes/assets/summary.html.08f2f1e5.js"><link rel="prefetch" href="/notes/assets/install.html.1e21ff91.js"><link rel="prefetch" href="/notes/assets/matcher.html.e4530366.js"><link rel="prefetch" href="/notes/assets/outline.html.a55fcaea.js"><link rel="prefetch" href="/notes/assets/router.html.f95a2aef.js"><link rel="prefetch" href="/notes/assets/transition-to.html.35ac4a70.js"><link rel="prefetch" href="/notes/assets/api.html.ba96ca24.js"><link rel="prefetch" href="/notes/assets/idex.html.2213eeb1.js"><link rel="prefetch" href="/notes/assets/init.html.67dfdc62.js"><link rel="prefetch" href="/notes/assets/plugin.html.a2c8c50b.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.03178c1d.js"><link rel="prefetch" href="/notes/assets/configuration.html.fde89670.js"><link rel="prefetch" href="/notes/assets/entryPoints.html.03c99ba4.js"><link rel="prefetch" href="/notes/assets/loader.html.10b761b1.js"><link rel="prefetch" href="/notes/assets/output.html.a25e769b.js"><link rel="prefetch" href="/notes/assets/plugin.html.45d1208c.js"><link rel="prefetch" href="/notes/assets/webpackInterview.html.e94fa338.js"><link rel="prefetch" href="/notes/assets/reactApi.html.ac049939.js"><link rel="prefetch" href="/notes/assets/reactChildren.html.6fffa6a3.js"><link rel="prefetch" href="/notes/assets/reactElement.html.4a00d9b5.js"><link rel="prefetch" href="/notes/assets/reactFiber.html.4c55f16f.js"><link rel="prefetch" href="/notes/assets/commitAllHostEffects.html.4639e79a.js"><link rel="prefetch" href="/notes/assets/commitAllLifeCycles.html.3e3e9d3c.js"><link rel="prefetch" href="/notes/assets/commitBeforeMutationLifecycles.html.a7a34848.js"><link rel="prefetch" href="/notes/assets/commitDeletion.html.9c306cf7.js"><link rel="prefetch" href="/notes/assets/commitPlacement.html.b6c0df82.js"><link rel="prefetch" href="/notes/assets/commitRoot.html.9b6ef9eb.js"><link rel="prefetch" href="/notes/assets/commitWork.html.74dc5ebd.js"><link rel="prefetch" href="/notes/assets/invokeGuardedCallback.html.887e100b.js"><link rel="prefetch" href="/notes/assets/expirationTime.html.939b9cac.js"><link rel="prefetch" href="/notes/assets/reactDomRender.html.86b9fafe.js"><link rel="prefetch" href="/notes/assets/setStateForceUpdate.html.4f0b57d9.js"><link rel="prefetch" href="/notes/assets/context.html.80261221.js"><link rel="prefetch" href="/notes/assets/evenInit.html.b7bc3c65.js"><link rel="prefetch" href="/notes/assets/eventBind.html.590e185f.js"><link rel="prefetch" href="/notes/assets/eventCreateEventObject.html.61caf894.js"><link rel="prefetch" href="/notes/assets/eventDispath.html.b4b2920e.js"><link rel="prefetch" href="/notes/assets/hydrate.html.9a0081e4.js"><link rel="prefetch" href="/notes/assets/ref.html.40c06ec7.js"><link rel="prefetch" href="/notes/assets/suspense.html.1ed1f32b.js"><link rel="prefetch" href="/notes/assets/suspenseLazy.html.4446bcc4.js"><link rel="prefetch" href="/notes/assets/suspenseWork.html.7c4f2e37.js"><link rel="prefetch" href="/notes/assets/hooksCommon.html.f7fc2348.js"><link rel="prefetch" href="/notes/assets/hooksOther.html.2934d0b8.js"><link rel="prefetch" href="/notes/assets/start.html.81d46118.js"><link rel="prefetch" href="/notes/assets/useEffect.html.e537ec24.js"><link rel="prefetch" href="/notes/assets/useState.html.a4e92e46.js"><link rel="prefetch" href="/notes/assets/base.html.0f9d5d8a.js"><link rel="prefetch" href="/notes/assets/commpontDiff.html.d0aa2efc.js"><link rel="prefetch" href="/notes/assets/componentUpdate.html.c9721d20.js"><link rel="prefetch" href="/notes/assets/renderProcess.html.dc5f2d60.js"><link rel="prefetch" href="/notes/assets/schedulingPrinciple.html.567e131c.js"><link rel="prefetch" href="/notes/assets/beginWork.html.78dde504.js"><link rel="prefetch" href="/notes/assets/globalVariable.html.8b52ee5c.js"><link rel="prefetch" href="/notes/assets/mountIndeterminateComponent.html.3c377144.js"><link rel="prefetch" href="/notes/assets/mountLazyCompont.html.cb187d51.js"><link rel="prefetch" href="/notes/assets/performUnitOfWork.html.6758cf47.js"><link rel="prefetch" href="/notes/assets/performWork.html.321490d3.js"><link rel="prefetch" href="/notes/assets/reactScheduler.html.67ee99bb.js"><link rel="prefetch" href="/notes/assets/reconcileChildren.html.66ad50ac.js"><link rel="prefetch" href="/notes/assets/reconcileChildrenArray.html.67bddf9e.js"><link rel="prefetch" href="/notes/assets/reconcileSingleElement.html.cc842dbc.js"><link rel="prefetch" href="/notes/assets/renderRoot.html.4a046a76.js"><link rel="prefetch" href="/notes/assets/scheduleWork.html.05214908.js"><link rel="prefetch" href="/notes/assets/throwException.html.c01a7293.js"><link rel="prefetch" href="/notes/assets/updateClassComponent.html.8ccc048d.js"><link rel="prefetch" href="/notes/assets/updateContextConsumer.html.466be6af.js"><link rel="prefetch" href="/notes/assets/updateContextProvider.html.3cf78548.js"><link rel="prefetch" href="/notes/assets/updateForwardRef.html.9ffc67db.js"><link rel="prefetch" href="/notes/assets/updateFragment.html.adcc172a.js"><link rel="prefetch" href="/notes/assets/updateFunctionalComponent.html.1a62ae6a.js"><link rel="prefetch" href="/notes/assets/updateHostComponent.html.bd8c792a.js"><link rel="prefetch" href="/notes/assets/updateHostRoot.html.3b381860.js"><link rel="prefetch" href="/notes/assets/updateHostText.html.9e8af4ce.js"><link rel="prefetch" href="/notes/assets/updateMode.html.62431f46.js"><link rel="prefetch" href="/notes/assets/updatePortalComponent.html.1b863507.js"><link rel="prefetch" href="/notes/assets/updateProfiler.html.b5f76ba3.js"><link rel="prefetch" href="/notes/assets/updateSuspenseComponent.html.c00c6961.js"><link rel="prefetch" href="/notes/assets/interview1.html.a1550bbd.js"><link rel="prefetch" href="/notes/assets/interview2.html.60141cad.js"><link rel="prefetch" href="/notes/assets/interview3.html.7d6dd664.js"><link rel="prefetch" href="/notes/assets/interview51.html.bd919bf0.js"><link rel="prefetch" href="/notes/assets/interview52.html.0c7f4ab4.js"><link rel="prefetch" href="/notes/assets/interview53.html.00ce5830.js"><link rel="prefetch" href="/notes/assets/interview54.html.3c5065b0.js"><link rel="prefetch" href="/notes/assets/interview55.html.8c24c22f.js"><link rel="prefetch" href="/notes/assets/interview56.html.f3e42d7c.js"><link rel="prefetch" href="/notes/assets/interview57.html.bce535d0.js"><link rel="prefetch" href="/notes/assets/interview1.html.16053d6a.js"><link rel="prefetch" href="/notes/assets/interview10.html.b0de3b5f.js"><link rel="prefetch" href="/notes/assets/interview11.html.64ba2734.js"><link rel="prefetch" href="/notes/assets/interview12.html.3ff60a48.js"><link rel="prefetch" href="/notes/assets/interview13.html.b33340c1.js"><link rel="prefetch" href="/notes/assets/interview14.html.a56321cf.js"><link rel="prefetch" href="/notes/assets/interview15.html.4126c39f.js"><link rel="prefetch" href="/notes/assets/interview16.html.f9becdf2.js"><link rel="prefetch" href="/notes/assets/interview17.html.30ae8b76.js"><link rel="prefetch" href="/notes/assets/interview18.html.38cf0a3a.js"><link rel="prefetch" href="/notes/assets/interview19.html.d6166de6.js"><link rel="prefetch" href="/notes/assets/interview2.html.0dc0805e.js"><link rel="prefetch" href="/notes/assets/interview20.html.2c7994bc.js"><link rel="prefetch" href="/notes/assets/interview21.html.839875a9.js"><link rel="prefetch" href="/notes/assets/interview22.html.c6d857cf.js"><link rel="prefetch" href="/notes/assets/interview23.html.ca6914cb.js"><link rel="prefetch" href="/notes/assets/interview24.html.b3998091.js"><link rel="prefetch" href="/notes/assets/interview25.html.e981c90f.js"><link rel="prefetch" href="/notes/assets/interview26.html.f891c30e.js"><link rel="prefetch" href="/notes/assets/interview27.html.cd87e477.js"><link rel="prefetch" href="/notes/assets/interview28.html.59a7a09f.js"><link rel="prefetch" href="/notes/assets/interview29.html.9521f3a3.js"><link rel="prefetch" href="/notes/assets/interview3.html.aeb8fb72.js"><link rel="prefetch" href="/notes/assets/interview30.html.4b7e24f9.js"><link rel="prefetch" href="/notes/assets/interview31.html.4d738052.js"><link rel="prefetch" href="/notes/assets/interview32.html.6c77b6d5.js"><link rel="prefetch" href="/notes/assets/interview33.html.26133902.js"><link rel="prefetch" href="/notes/assets/interview34.html.d8c88fdd.js"><link rel="prefetch" href="/notes/assets/interview35.html.a7b3501f.js"><link rel="prefetch" href="/notes/assets/interview36.html.54b0a586.js"><link rel="prefetch" href="/notes/assets/interview37.html.726e15c9.js"><link rel="prefetch" href="/notes/assets/interview38.html.53566d68.js"><link rel="prefetch" href="/notes/assets/interview39.html.8551f834.js"><link rel="prefetch" href="/notes/assets/interview4.html.007cf386.js"><link rel="prefetch" href="/notes/assets/interview40.html.b68a3f58.js"><link rel="prefetch" href="/notes/assets/interview41.html.a463b768.js"><link rel="prefetch" href="/notes/assets/interview42.html.5f589e30.js"><link rel="prefetch" href="/notes/assets/interview43.html.8e2e737b.js"><link rel="prefetch" href="/notes/assets/interview44.html.4eb1a209.js"><link rel="prefetch" href="/notes/assets/interview45.html.0c0c42de.js"><link rel="prefetch" href="/notes/assets/interview46.html.66476631.js"><link rel="prefetch" href="/notes/assets/interview47.html.5802a9df.js"><link rel="prefetch" href="/notes/assets/interview48.html.cd08d5cc.js"><link rel="prefetch" href="/notes/assets/interview49.html.40bee64f.js"><link rel="prefetch" href="/notes/assets/interview5.html.505cb504.js"><link rel="prefetch" href="/notes/assets/interview50.html.2a8f8afb.js"><link rel="prefetch" href="/notes/assets/interview6.html.b7965d47.js"><link rel="prefetch" href="/notes/assets/interview7.html.fccc91a1.js"><link rel="prefetch" href="/notes/assets/interview8.html.55e242b3.js"><link rel="prefetch" href="/notes/assets/interview9.html.6c1be04b.js"><link rel="prefetch" href="/notes/assets/404.html.93146c89.js"><link rel="prefetch" href="/notes/assets/index.html.59d1cc02.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.3275609a.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.039cf795.js"><link rel="prefetch" href="/notes/assets/base.html.bbe58e6f.js"><link rel="prefetch" href="/notes/assets/customCli.html.605fd326.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.f7ef029f.js"><link rel="prefetch" href="/notes/assets/adapter.html.ccd89b8e.js"><link rel="prefetch" href="/notes/assets/amd.html.0bae9eb6.js"><link rel="prefetch" href="/notes/assets/builder.html.1ed6e7b0.js"><link rel="prefetch" href="/notes/assets/censorJquery.html.c1f5721d.js"><link rel="prefetch" href="/notes/assets/combination.html.20158409.js"><link rel="prefetch" href="/notes/assets/command.html.fd273e62.js"><link rel="prefetch" href="/notes/assets/commonJS.html.2a6e4d19.js"><link rel="prefetch" href="/notes/assets/constructor.html.19f4c6e0.js"><link rel="prefetch" href="/notes/assets/decoration.html.56900b9c.js"><link rel="prefetch" href="/notes/assets/esHarmony.html.0806c6bb.js"><link rel="prefetch" href="/notes/assets/exposed.html.96bdda3a.js"><link rel="prefetch" href="/notes/assets/exterior.html.06aaea6b.js"><link rel="prefetch" href="/notes/assets/factory.html.4dd7c25e.js"><link rel="prefetch" href="/notes/assets/flyweight.html.294dac2a.js"><link rel="prefetch" href="/notes/assets/functionalProgramming.html.2e24b27e.js"><link rel="prefetch" href="/notes/assets/intermediary.html.3daee5a1.js"><link rel="prefetch" href="/notes/assets/iterator.html.f7ca5ba9.js"><link rel="prefetch" href="/notes/assets/lazyInitial.html.7285ca9a.js"><link rel="prefetch" href="/notes/assets/mixin.html.be0d22f3.js"><link rel="prefetch" href="/notes/assets/module.html.bb1d92c4.js"><link rel="prefetch" href="/notes/assets/mvc.html.6f309de6.js"><link rel="prefetch" href="/notes/assets/mvp.html.e8b96312.js"><link rel="prefetch" href="/notes/assets/mvvm.html.fc7b3f4d.js"><link rel="prefetch" href="/notes/assets/observer.html.6486d682.js"><link rel="prefetch" href="/notes/assets/outward.html.7f2ce9fb.js"><link rel="prefetch" href="/notes/assets/overview.html.6e35fedc.js"><link rel="prefetch" href="/notes/assets/prototype.html.2d714a50.js"><link rel="prefetch" href="/notes/assets/proxy.html.58ecb0a4.js"><link rel="prefetch" href="/notes/assets/singleton.html.20b1827a.js"><link rel="prefetch" href="/notes/assets/axios.html.0a97c09d.js"><link rel="prefetch" href="/notes/assets/createUnderscore.html.05db342b.js"><link rel="prefetch" href="/notes/assets/jquery.html.f36c18e9.js"><link rel="prefetch" href="/notes/assets/lodash.html.0bb28bad.js"><link rel="prefetch" href="/notes/assets/sentry.html.4e244800.js"><link rel="prefetch" href="/notes/assets/underscore.html.287e9fc1.js"><link rel="prefetch" href="/notes/assets/vuex.html.952fc123.js"><link rel="prefetch" href="/notes/assets/customCli.html.719d54a7.js"><link rel="prefetch" href="/notes/assets/description.html.6dcda73d.js"><link rel="prefetch" href="/notes/assets/indx.html.fb4419c4.js"><link rel="prefetch" href="/notes/assets/rebase.html.5e4efff0.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.22ab27aa.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.1904f76f.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.cc8be744.js"><link rel="prefetch" href="/notes/assets/44Questions.html.99f14626.js"><link rel="prefetch" href="/notes/assets/asyncAwait.html.30964671.js"><link rel="prefetch" href="/notes/assets/babelCompile.html.deeaf606.js"><link rel="prefetch" href="/notes/assets/base.html.6497ada9.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.35b619e9.js"><link rel="prefetch" href="/notes/assets/baseWebpack.html.1387f663.js"><link rel="prefetch" href="/notes/assets/codeSeparation.html.cc8768d9.js"><link rel="prefetch" href="/notes/assets/cycle.html.b08fa9d9.js"><link rel="prefetch" href="/notes/assets/cycleOtherWay.html.bdaf8d23.js"><link rel="prefetch" href="/notes/assets/executionMechanism.html.ec67259a.js"><link rel="prefetch" href="/notes/assets/hybrid.html.c1bd5345.js"><link rel="prefetch" href="/notes/assets/jsHandwriting.html.cb6eadcd.js"><link rel="prefetch" href="/notes/assets/jsonStringify.html.35c85527.js"><link rel="prefetch" href="/notes/assets/largeFileResumableUpload.html.c6f80bc1.js"><link rel="prefetch" href="/notes/assets/performance.html.3abfbb61.js"><link rel="prefetch" href="/notes/assets/promise.html.1c843b04.js"><link rel="prefetch" href="/notes/assets/promiseAll.html.b78e6a5a.js"><link rel="prefetch" href="/notes/assets/spa.html.82410342.js"><link rel="prefetch" href="/notes/assets/tsBaseInterview.html.7f994b71.js"><link rel="prefetch" href="/notes/assets/useEs6.html.91c785c3.js"><link rel="prefetch" href="/notes/assets/webAnimations.html.752a872b.js"><link rel="prefetch" href="/notes/assets/webpackInterview.html.d20ac258.js"><link rel="prefetch" href="/notes/assets/webpackLoader.html.cd6b7aca.js"><link rel="prefetch" href="/notes/assets/webpackPublic.html.5e2c932e.js"><link rel="prefetch" href="/notes/assets/weird.html.b30f890a.js"><link rel="prefetch" href="/notes/assets/es10News.html.0e617b1b.js"><link rel="prefetch" href="/notes/assets/es11News.html.9f80e547.js"><link rel="prefetch" href="/notes/assets/es6Interview1.html.fabb2c62.js"><link rel="prefetch" href="/notes/assets/es6Interview2.html.90ced9ed.js"><link rel="prefetch" href="/notes/assets/es6Interview3.html.f037cc09.js"><link rel="prefetch" href="/notes/assets/es6News.html.61bf9838.js"><link rel="prefetch" href="/notes/assets/es7News.html.00056024.js"><link rel="prefetch" href="/notes/assets/es8News.html.51231b01.js"><link rel="prefetch" href="/notes/assets/es9News.html.1e1a683f.js"><link rel="prefetch" href="/notes/assets/base.html.4aeec713.js"><link rel="prefetch" href="/notes/assets/nginxComprehensiveScene.html.9904d7ee.js"><link rel="prefetch" href="/notes/assets/commonlyUsed.html.90e25025.js"><link rel="prefetch" href="/notes/assets/inelegantHook.html.95add480.js"><link rel="prefetch" href="/notes/assets/interview1.html.f9300432.js"><link rel="prefetch" href="/notes/assets/interview2.html.89547fd3.js"><link rel="prefetch" href="/notes/assets/interview3.html.aa16375e.js"><link rel="prefetch" href="/notes/assets/interview4.html.20c0c6c7.js"><link rel="prefetch" href="/notes/assets/base.html.41f4a409.js"><link rel="prefetch" href="/notes/assets/introduction.html.5232d90d.js"><link rel="prefetch" href="/notes/assets/base.html.d5527198.js"><link rel="prefetch" href="/notes/assets/summarize.html.b7a25cf7.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.54aaade3.js"><link rel="prefetch" href="/notes/assets/index.html.55cee17f.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.6ec1a6c0.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.fdb7c934.js"><link rel="prefetch" href="/notes/assets/bigDataRender.html.dbdee14a.js"><link rel="prefetch" href="/notes/assets/progress.html.205cee2d.js"><link rel="prefetch" href="/notes/assets/quirksStandards.html.e1121138.js"><link rel="prefetch" href="/notes/assets/redrawReflow.html.0904b8e0.js"><link rel="prefetch" href="/notes/assets/storageSpace.html.946053eb.js"><link rel="prefetch" href="/notes/assets/webComLink.html.bacea579.js"><link rel="prefetch" href="/notes/assets/webUrl.html.7084ef5d.js"><link rel="prefetch" href="/notes/assets/spanWidthHeight.html.c81b60bf.js"><link rel="prefetch" href="/notes/assets/baseCss.html.27a787d3.js"><link rel="prefetch" href="/notes/assets/blockFormattingContext.html.67f5f5bf.js"><link rel="prefetch" href="/notes/assets/containingBlock.html.ceda1920.js"><link rel="prefetch" href="/notes/assets/cssBeforeAfter.html.1fee2a65.js"><link rel="prefetch" href="/notes/assets/cssBoxModal.html.12603dbb.js"><link rel="prefetch" href="/notes/assets/cssCollapsing.html.f185befe.js"><link rel="prefetch" href="/notes/assets/cssCompatible.html.ba332af9.js"><link rel="prefetch" href="/notes/assets/cssFlexDemo.html.ee15b8f7.js"><link rel="prefetch" href="/notes/assets/cssFlexLayout.html.ac40b45f.js"><link rel="prefetch" href="/notes/assets/cssGridLayout.html.4270663e.js"><link rel="prefetch" href="/notes/assets/cssHack.html.64a285c0.js"><link rel="prefetch" href="/notes/assets/cssInlineBlock.html.d0f0205e.js"><link rel="prefetch" href="/notes/assets/cssPriority.html.bfbbe3c1.js"><link rel="prefetch" href="/notes/assets/cssPseudo.html.87e6a00c.js"><link rel="prefetch" href="/notes/assets/cssPseudoClass.html.f00099b7.js"><link rel="prefetch" href="/notes/assets/cssSelector.html.3c8c548e.js"><link rel="prefetch" href="/notes/assets/cssTutorial.html.38044a5b.js"><link rel="prefetch" href="/notes/assets/fieldInvalid.html.2b97059c.js"><link rel="prefetch" href="/notes/assets/frame.html.ea6f1467.js"><link rel="prefetch" href="/notes/assets/knowledgePoints.html.5b872e7c.js"><link rel="prefetch" href="/notes/assets/linkImport.html.2561cec3.js"><link rel="prefetch" href="/notes/assets/stackingContext.html.bec21579.js"><link rel="prefetch" href="/notes/assets/tools.html.72ee8d83.js"><link rel="prefetch" href="/notes/assets/units.html.51c132b9.js"><link rel="prefetch" href="/notes/assets/transform.html.ee7d9b68.js"><link rel="prefetch" href="/notes/assets/content.html.7aadd60b.js"><link rel="prefetch" href="/notes/assets/accesskey.html.3071aee5.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.c5770846.js"><link rel="prefetch" href="/notes/assets/canvasSvg.html.92fff38c.js"><link rel="prefetch" href="/notes/assets/deviceAPI.html.6bf92692.js"><link rel="prefetch" href="/notes/assets/globalAttr.html.054d6586.js"><link rel="prefetch" href="/notes/assets/htmlDatalist.html.b7aceabd.js"><link rel="prefetch" href="/notes/assets/htmlElement.html.a5fd82a3.js"><link rel="prefetch" href="/notes/assets/interview10.html.572ba5b0.js"><link rel="prefetch" href="/notes/assets/interview11.html.4ae5d536.js"><link rel="prefetch" href="/notes/assets/interview12.html.74667790.js"><link rel="prefetch" href="/notes/assets/interview13.html.881700a1.js"><link rel="prefetch" href="/notes/assets/interview14.html.1c867e08.js"><link rel="prefetch" href="/notes/assets/interview15.html.650942a4.js"><link rel="prefetch" href="/notes/assets/interview16.html.43f3216c.js"><link rel="prefetch" href="/notes/assets/interview17.html.49e4afce.js"><link rel="prefetch" href="/notes/assets/interview18.html.6ffd8569.js"><link rel="prefetch" href="/notes/assets/interview19.html.48b174d4.js"><link rel="prefetch" href="/notes/assets/interview20.html.65fabeea.js"><link rel="prefetch" href="/notes/assets/interview21.html.6b82500e.js"><link rel="prefetch" href="/notes/assets/interview22.html.72c2c85c.js"><link rel="prefetch" href="/notes/assets/interview23.html.2699b50a.js"><link rel="prefetch" href="/notes/assets/interview24.html.3d6c90d4.js"><link rel="prefetch" href="/notes/assets/interview25.html.80239cf9.js"><link rel="prefetch" href="/notes/assets/interview26.html.32f397c9.js"><link rel="prefetch" href="/notes/assets/interview27.html.1d89f34a.js"><link rel="prefetch" href="/notes/assets/interview28.html.b16484c6.js"><link rel="prefetch" href="/notes/assets/interview29.html.961e38d3.js"><link rel="prefetch" href="/notes/assets/interview30.html.80462a11.js"><link rel="prefetch" href="/notes/assets/interview31.html.1868dd06.js"><link rel="prefetch" href="/notes/assets/interview32.html.8ade965c.js"><link rel="prefetch" href="/notes/assets/interview33.html.de78ddad.js"><link rel="prefetch" href="/notes/assets/interview34.html.97dbda25.js"><link rel="prefetch" href="/notes/assets/interview35.html.cb683608.js"><link rel="prefetch" href="/notes/assets/interview36.html.3baa8214.js"><link rel="prefetch" href="/notes/assets/interview37.html.f0c86c3d.js"><link rel="prefetch" href="/notes/assets/interview38.html.8ad97c94.js"><link rel="prefetch" href="/notes/assets/interview39.html.5eb95b98.js"><link rel="prefetch" href="/notes/assets/interview40.html.5181b867.js"><link rel="prefetch" href="/notes/assets/interview41.html.76a7bc87.js"><link rel="prefetch" href="/notes/assets/interview42.html.fd2423db.js"><link rel="prefetch" href="/notes/assets/interview43.html.bd3f269f.js"><link rel="prefetch" href="/notes/assets/interview44.html.5d417535.js"><link rel="prefetch" href="/notes/assets/interview45.html.d2db91f1.js"><link rel="prefetch" href="/notes/assets/interview46.html.07bfd784.js"><link rel="prefetch" href="/notes/assets/interview47.html.d4d6018e.js"><link rel="prefetch" href="/notes/assets/interview48.html.82defccd.js"><link rel="prefetch" href="/notes/assets/interview49.html.020b1260.js"><link rel="prefetch" href="/notes/assets/interview5.html.80ff00ed.js"><link rel="prefetch" href="/notes/assets/interview50.html.17489c88.js"><link rel="prefetch" href="/notes/assets/interview51.html.7e48f164.js"><link rel="prefetch" href="/notes/assets/interview52.html.07cc6c82.js"><link rel="prefetch" href="/notes/assets/interview53.html.969207d3.js"><link rel="prefetch" href="/notes/assets/interview54.html.ec4d9024.js"><link rel="prefetch" href="/notes/assets/interview55.html.151a1e12.js"><link rel="prefetch" href="/notes/assets/interview56.html.b8e22659.js"><link rel="prefetch" href="/notes/assets/interview57.html.d7c49103.js"><link rel="prefetch" href="/notes/assets/interview58.html.963a2565.js"><link rel="prefetch" href="/notes/assets/interview59.html.ed7a90cb.js"><link rel="prefetch" href="/notes/assets/interview6.html.e01a8691.js"><link rel="prefetch" href="/notes/assets/interview7.html.41eee1e3.js"><link rel="prefetch" href="/notes/assets/interview8.html.fec914cc.js"><link rel="prefetch" href="/notes/assets/interview9.html.0a4aef06.js"><link rel="prefetch" href="/notes/assets/linkImport.html.a7088394.js"><link rel="prefetch" href="/notes/assets/offlineStorage.html.de185ba8.js"><link rel="prefetch" href="/notes/assets/regular.html.d75dbf05.js"><link rel="prefetch" href="/notes/assets/shake.html.7e9d7a34.js"><link rel="prefetch" href="/notes/assets/webWorker.html.574ce212.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.9b85a944.js"><link rel="prefetch" href="/notes/assets/cors.html.dd8a8368.js"><link rel="prefetch" href="/notes/assets/crossDomainCookie.html.6d554b68.js"><link rel="prefetch" href="/notes/assets/fetch.html.677a57ba.js"><link rel="prefetch" href="/notes/assets/nestAxios.html.f2e414f8.js"><link rel="prefetch" href="/notes/assets/debounce.html.9a9f528a.js"><link rel="prefetch" href="/notes/assets/lodashPrinciple.html.115a6dd1.js"><link rel="prefetch" href="/notes/assets/lodashThrottleDebounce.html.2584fa05.js"><link rel="prefetch" href="/notes/assets/throttle.html.c5c177da.js"><link rel="prefetch" href="/notes/assets/throttleDebounceReact.html.018f4a4d.js"><link rel="prefetch" href="/notes/assets/cloneIntroduction.html.19644993.js"><link rel="prefetch" href="/notes/assets/deepClone.html.d4978e33.js"><link rel="prefetch" href="/notes/assets/lodashDeepClone.html.9b1be3ba.js"><link rel="prefetch" href="/notes/assets/objectAssign.html.d709ff35.js"><link rel="prefetch" href="/notes/assets/arraySourceCode.html.c23b9c04.js"><link rel="prefetch" href="/notes/assets/baseHigh.html.59d9030d.js"><link rel="prefetch" href="/notes/assets/currying.html.ce080774.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.73b96206.js"><link rel="prefetch" href="/notes/assets/eventLoop.html.de5da7e2.js"><link rel="prefetch" href="/notes/assets/iife.html.93d028cf.js"><link rel="prefetch" href="/notes/assets/interview1.html.c0170f6a.js"><link rel="prefetch" href="/notes/assets/jsCompatible.html.2693e9b5.js"><link rel="prefetch" href="/notes/assets/baseProyotype.html.8d3c2d5c.js"><link rel="prefetch" href="/notes/assets/functionObjectResource.html.6fee45a0.js"><link rel="prefetch" href="/notes/assets/prototypeInherit.html.8e882ad5.js"><link rel="prefetch" href="/notes/assets/closureInterview.html.67ccb10f.js"><link rel="prefetch" href="/notes/assets/scopeChain.html.6f8712c3.js"><link rel="prefetch" href="/notes/assets/understandingClosures.html.63039e3a.js"><link rel="prefetch" href="/notes/assets/executionStack.html.655d8901.js"><link rel="prefetch" href="/notes/assets/memoryLeak.html.939aa95d.js"><link rel="prefetch" href="/notes/assets/memoryMechanism.html.8991f1fa.js"><link rel="prefetch" href="/notes/assets/memorySpace.html.eb0ec98a.js"><link rel="prefetch" href="/notes/assets/precompiled.html.221e0b77.js"><link rel="prefetch" href="/notes/assets/variableObject.html.1e50ec75.js"><link rel="prefetch" href="/notes/assets/arrowFunctionThis.html.71a55008.js"><link rel="prefetch" href="/notes/assets/bindSimulation.html.c8f72903.js"><link rel="prefetch" href="/notes/assets/callApply.html.8284f0de.js"><link rel="prefetch" href="/notes/assets/newSimulation.html.68045bbf.js"><link rel="prefetch" href="/notes/assets/thisBind.html.2dbf57a0.js"><link rel="prefetch" href="/notes/assets/interview1.html.c69b54ec.js"><link rel="prefetch" href="/notes/assets/interview10.html.859d229d.js"><link rel="prefetch" href="/notes/assets/interview11.html.1a5c1b85.js"><link rel="prefetch" href="/notes/assets/interview12.html.188a22a0.js"><link rel="prefetch" href="/notes/assets/interview13.html.dbc36883.js"><link rel="prefetch" href="/notes/assets/interview14.html.4f25414b.js"><link rel="prefetch" href="/notes/assets/interview15.html.b4fe72f3.js"><link rel="prefetch" href="/notes/assets/interview16.html.29c3b5cf.js"><link rel="prefetch" href="/notes/assets/interview17.html.5b1780d1.js"><link rel="prefetch" href="/notes/assets/interview18.html.f2932005.js"><link rel="prefetch" href="/notes/assets/interview19.html.29182401.js"><link rel="prefetch" href="/notes/assets/interview2.html.716337af.js"><link rel="prefetch" href="/notes/assets/interview20.html.d18fcc33.js"><link rel="prefetch" href="/notes/assets/interview21.html.b6a421c5.js"><link rel="prefetch" href="/notes/assets/interview22.html.313d741e.js"><link rel="prefetch" href="/notes/assets/interview23.html.25078ef4.js"><link rel="prefetch" href="/notes/assets/interview24.html.946cbda7.js"><link rel="prefetch" href="/notes/assets/interview25.html.0309fc6e.js"><link rel="prefetch" href="/notes/assets/interview26.html.d5dd8063.js"><link rel="prefetch" href="/notes/assets/interview27.html.3918bffe.js"><link rel="prefetch" href="/notes/assets/interview28.html.bc20a850.js"><link rel="prefetch" href="/notes/assets/interview29.html.317e754b.js"><link rel="prefetch" href="/notes/assets/interview3.html.8abf8589.js"><link rel="prefetch" href="/notes/assets/interview30.html.1414c56d.js"><link rel="prefetch" href="/notes/assets/interview4.html.c90fcba6.js"><link rel="prefetch" href="/notes/assets/interview5.html.3dcce375.js"><link rel="prefetch" href="/notes/assets/interview6.html.86227a88.js"><link rel="prefetch" href="/notes/assets/interview7.html.dfc0b4c7.js"><link rel="prefetch" href="/notes/assets/interview8.html.6a8da69c.js"><link rel="prefetch" href="/notes/assets/interview9.html.62382633.js"><link rel="prefetch" href="/notes/assets/adjacentSiblingCombinator.html.0ee38e61.js"><link rel="prefetch" href="/notes/assets/attributeSelectors.html.f06adbb1.js"><link rel="prefetch" href="/notes/assets/charset.html.8d9638b1.js"><link rel="prefetch" href="/notes/assets/childCombinator.html.4632336b.js"><link rel="prefetch" href="/notes/assets/classSelectors.html.31db1ba4.js"><link rel="prefetch" href="/notes/assets/descendantCombinator.html.b20e130b.js"><link rel="prefetch" href="/notes/assets/generalSiblingCombinator.html.40f12dab.js"><link rel="prefetch" href="/notes/assets/iDSelectors.html.e385209c.js"><link rel="prefetch" href="/notes/assets/pseudoClasses.html.69487433.js"><link rel="prefetch" href="/notes/assets/pseudoElements.html.c16c1900.js"><link rel="prefetch" href="/notes/assets/selectorList.html.124885d5.js"><link rel="prefetch" href="/notes/assets/typeSelectors.html.940ab20e.js"><link rel="prefetch" href="/notes/assets/universalSelectors.html.70bd5af5.js"><link rel="prefetch" href="/notes/assets/IterationProtocols.html.9d9c5de4.js"><link rel="prefetch" href="/notes/assets/arrayFlat.html.4048bb98.js"><link rel="prefetch" href="/notes/assets/asyncHistory.html.b98eaf2e.js"><link rel="prefetch" href="/notes/assets/eventLoop.html.4cbf6ad8.js"><link rel="prefetch" href="/notes/assets/fileReader.html.8b21aeee.js"><link rel="prefetch" href="/notes/assets/formData.html.e0e9aa4d.js"><link rel="prefetch" href="/notes/assets/functionGenerator.html.ad453e77.js"><link rel="prefetch" href="/notes/assets/generator.html.9ac91403.js"><link rel="prefetch" href="/notes/assets/intersectionObserver.html.2537e8be.js"><link rel="prefetch" href="/notes/assets/map.html.b9e5c99f.js"><link rel="prefetch" href="/notes/assets/promise.html.7d231b05.js"><link rel="prefetch" href="/notes/assets/set.html.2a999041.js"><link rel="prefetch" href="/notes/assets/string.html.9e55a664.js"><link rel="prefetch" href="/notes/assets/symbol.html.4954b228.js"><link rel="prefetch" href="/notes/assets/xMLHttpRequest.html.3de35f4d.js"><link rel="prefetch" href="/notes/assets/spreadSyntax.html.71683c54.js"><link rel="prefetch" href="/notes/assets/strictMode.html.d25ad9fb.js"><link rel="prefetch" href="/notes/assets/cache.html.36a19549.js"><link rel="prefetch" href="/notes/assets/drag1.html.37d834eb.js"><link rel="prefetch" href="/notes/assets/oneLineCode.html.8679c733.js"><link rel="prefetch" href="/notes/assets/oneLineCodeArray.html.dcb5eb0f.js"><link rel="prefetch" href="/notes/assets/oneLineCodeDOM.html.f35d8b51.js"><link rel="prefetch" href="/notes/assets/oneLineCodeDateTime.html.4ea68915.js"><link rel="prefetch" href="/notes/assets/oneLineCodeFunction.html.a5390748.js"><link rel="prefetch" href="/notes/assets/oneLineCodeMath.html.206157fd.js"><link rel="prefetch" href="/notes/assets/oneLineCodeMisc.html.db2b029d.js"><link rel="prefetch" href="/notes/assets/oneLineCodeNumber.html.21cfaec8.js"><link rel="prefetch" href="/notes/assets/oneLineCodeObject.html.84419773.js"><link rel="prefetch" href="/notes/assets/oneLineCodeRandom.html.998ca246.js"><link rel="prefetch" href="/notes/assets/oneLineCodeString.html.fbb2a53d.js"><link rel="prefetch" href="/notes/assets/oneLineCodeValidator.html.204fbdbf.js"><link rel="prefetch" href="/notes/assets/typeScriptCache.html.9a12e543.js"><link rel="prefetch" href="/notes/assets/reactBase.html.2f86267d.js"><link rel="prefetch" href="/notes/assets/reactTypescript.html.0e2d77c2.js"><link rel="prefetch" href="/notes/assets/vue2Base.html.b147d4f6.js"><link rel="prefetch" href="/notes/assets/vue2Table.html.13141846.js"><link rel="prefetch" href="/notes/assets/vue2offsetTop.html.2f2eb446.js"><link rel="prefetch" href="/notes/assets/componentWillXXX.html.b32f4e26.js"><link rel="prefetch" href="/notes/assets/disrupt.html.10ee66b4.js"><link rel="prefetch" href="/notes/assets/lane.html.4479bb14.js"><link rel="prefetch" href="/notes/assets/prepare.html.25953400.js"><link rel="prefetch" href="/notes/assets/redux.html.b34dc96f.js"><link rel="prefetch" href="/notes/assets/scheduler.html.0ac7ce61.js"><link rel="prefetch" href="/notes/assets/multi.html.025b6f8f.js"><link rel="prefetch" href="/notes/assets/one.html.56899106.js"><link rel="prefetch" href="/notes/assets/prepare.html.32964c2a.js"><link rel="prefetch" href="/notes/assets/create.html.381c119c.js"><link rel="prefetch" href="/notes/assets/prepare.html.1b6c1641.js"><link rel="prefetch" href="/notes/assets/structure.html.5fa4e158.js"><link rel="prefetch" href="/notes/assets/useeffect.html.55d0779b.js"><link rel="prefetch" href="/notes/assets/usememo.html.570f20af.js"><link rel="prefetch" href="/notes/assets/useref.html.2cf2fe0d.js"><link rel="prefetch" href="/notes/assets/usestate.html.e5216311.js"><link rel="prefetch" href="/notes/assets/file.html.1d4344a0.js"><link rel="prefetch" href="/notes/assets/idea.html.a84b127b.js"><link rel="prefetch" href="/notes/assets/jsx.html.4ca5ac6a.js"><link rel="prefetch" href="/notes/assets/newConstructure.html.89292a70.js"><link rel="prefetch" href="/notes/assets/oldConstructure.html.dbf2fb76.js"><link rel="prefetch" href="/notes/assets/source.html.a0b99aaf.js"><link rel="prefetch" href="/notes/assets/summary.html.d669143d.js"><link rel="prefetch" href="/notes/assets/basePrinciple.html.f22f7f36.js"><link rel="prefetch" href="/notes/assets/componentApi.html.575d391c.js"><link rel="prefetch" href="/notes/assets/domApi.html.d3cca537.js"><link rel="prefetch" href="/notes/assets/hoc.html.3cc65744.js"><link rel="prefetch" href="/notes/assets/hookApi.html.2cd83f62.js"><link rel="prefetch" href="/notes/assets/hookCustom.html.be43c84f.js"><link rel="prefetch" href="/notes/assets/hookPrinciple.html.b3356172.js"><link rel="prefetch" href="/notes/assets/hookUse.html.94eb6e34.js"><link rel="prefetch" href="/notes/assets/reactKeeplive.html.df077275.js"><link rel="prefetch" href="/notes/assets/reactRedux.html.db95adea.js"><link rel="prefetch" href="/notes/assets/reactRouter.html.cecfccef.js"><link rel="prefetch" href="/notes/assets/toolApi.html.7e385999.js"><link rel="prefetch" href="/notes/assets/beginWork.html.61e5286d.js"><link rel="prefetch" href="/notes/assets/completeWork.html.7dc056d0.js"><link rel="prefetch" href="/notes/assets/doubleBuffer.html.90dfbd7d.js"><link rel="prefetch" href="/notes/assets/fiber-mental.html.63bd9e31.js"><link rel="prefetch" href="/notes/assets/fiber.html.0b3a8d87.js"><link rel="prefetch" href="/notes/assets/reconciler.html.a51c09c0.js"><link rel="prefetch" href="/notes/assets/beforeMutation.html.80cb875b.js"><link rel="prefetch" href="/notes/assets/layout.html.18999bed.js"><link rel="prefetch" href="/notes/assets/mutation.html.cf6b5006.js"><link rel="prefetch" href="/notes/assets/prepare.html.97e746a1.js"><link rel="prefetch" href="/notes/assets/mental.html.4f62b879.js"><link rel="prefetch" href="/notes/assets/prepare.html.4a855c50.js"><link rel="prefetch" href="/notes/assets/priority.html.facef2f0.js"><link rel="prefetch" href="/notes/assets/reactdom.html.5d10a918.js"><link rel="prefetch" href="/notes/assets/setstate.html.88dddb33.js"><link rel="prefetch" href="/notes/assets/update.html.6f0b6a5f.js"><link rel="prefetch" href="/notes/assets/bitfiled.html.acd56f95.js"><link rel="prefetch" href="/notes/assets/dfs.html.04aedd2f.js"><link rel="prefetch" href="/notes/assets/diff.html.d483028e.js"><link rel="prefetch" href="/notes/assets/heapsort.html.9800698a.js"><link rel="prefetch" href="/notes/assets/linkedlist.html.f9fbb305.js"><link rel="prefetch" href="/notes/assets/stack.html.15c85749.js"><link rel="prefetch" href="/notes/assets/bootstrap.html.d3504d80.js"><link rel="prefetch" href="/notes/assets/context.html.36c1f5aa.js"><link rel="prefetch" href="/notes/assets/fibertree-commit.html.f42c4f83.js"><link rel="prefetch" href="/notes/assets/fibertree-create.html.5989778e.js"><link rel="prefetch" href="/notes/assets/fibertree-prepare.html.601d01b2.js"><link rel="prefetch" href="/notes/assets/fibertree-update.html.54392280.js"><link rel="prefetch" href="/notes/assets/hook-effect.html.53451ddc.js"><link rel="prefetch" href="/notes/assets/hook-state.html.32f19f9a.js"><link rel="prefetch" href="/notes/assets/hook-summary.html.f4fa814c.js"><link rel="prefetch" href="/notes/assets/macro-structure.html.a909538f.js"><link rel="prefetch" href="/notes/assets/object-structure.html.409ab3f2.js"><link rel="prefetch" href="/notes/assets/priority.html.c92b6537.js"><link rel="prefetch" href="/notes/assets/reconciler-workflow.html.44e92c3c.js"><link rel="prefetch" href="/notes/assets/scheduler.html.6bb21903.js"><link rel="prefetch" href="/notes/assets/state-effects.html.d292d482.js"><link rel="prefetch" href="/notes/assets/synthetic-event.html.efd8e0cb.js"><link rel="prefetch" href="/notes/assets/workloop.html.de7c39ed.js"><link rel="prefetch" href="/notes/assets/ast.html.e9f5d853.js"><link rel="prefetch" href="/notes/assets/binder.html.d2937d5f.js"><link rel="prefetch" href="/notes/assets/checker.html.638b51a8.js"><link rel="prefetch" href="/notes/assets/emitter.html.84f8b886.js"><link rel="prefetch" href="/notes/assets/overview.html.f1d088dd.js"><link rel="prefetch" href="/notes/assets/parser.html.3ea842db.js"><link rel="prefetch" href="/notes/assets/program.html.721ce2f2.js"><link rel="prefetch" href="/notes/assets/scanner.html.2299d63d.js"><link rel="prefetch" href="/notes/assets/common.html.195d0bb5.js"><link rel="prefetch" href="/notes/assets/interpreting.html.37f8b172.js"><link rel="prefetch" href="/notes/assets/class.html.8aa0ca63.js"><link rel="prefetch" href="/notes/assets/commandline-behavior.html.aa9c4243.js"><link rel="prefetch" href="/notes/assets/comments.html.d23e5883.js"><link rel="prefetch" href="/notes/assets/common-bug-not-bugs.html.ccdab638.js"><link rel="prefetch" href="/notes/assets/common-feature-request.html.bf113a66.js"><link rel="prefetch" href="/notes/assets/decorators.html.84a1d2b9.js"><link rel="prefetch" href="/notes/assets/enums.html.66919c52.js"><link rel="prefetch" href="/notes/assets/function.html.bf510755.js"><link rel="prefetch" href="/notes/assets/generics.html.aad792fe.js"><link rel="prefetch" href="/notes/assets/glossary-and-terms.html.b5aad0e9.js"><link rel="prefetch" href="/notes/assets/jsx-and-react.html.df7e9da6.js"><link rel="prefetch" href="/notes/assets/modules.html.707d4f03.js"><link rel="prefetch" href="/notes/assets/thing-that-dont-work.html.a840a414.js"><link rel="prefetch" href="/notes/assets/tsconfig-behavior.html.835b8565.js"><link rel="prefetch" href="/notes/assets/type-guards.html.34963965.js"><link rel="prefetch" href="/notes/assets/type-system-behavior.html.39771f7d.js"><link rel="prefetch" href="/notes/assets/nonReactJSX.html.6c4a16bb.js"><link rel="prefetch" href="/notes/assets/reactJSX.html.0a81697e.js"><link rel="prefetch" href="/notes/assets/support.html.9b3ec8bc.js"><link rel="prefetch" href="/notes/assets/typescript-3.7.html.20ae2fd8.js"><link rel="prefetch" href="/notes/assets/typescript-3.8.html.ccb003ba.js"><link rel="prefetch" href="/notes/assets/typescript-3.9.html.07d37d33.js"><link rel="prefetch" href="/notes/assets/compilationContext.html.a7eec6e5.js"><link rel="prefetch" href="/notes/assets/declarationspaces.html.d2a9034a.js"><link rel="prefetch" href="/notes/assets/dynamicImportExpressions.html.c04621d7.js"><link rel="prefetch" href="/notes/assets/inDepthTs.html.7e5f1b0a.js"><link rel="prefetch" href="/notes/assets/modules.html.c0480cc1.js"><link rel="prefetch" href="/notes/assets/namespaces.html.be81f214.js"><link rel="prefetch" href="/notes/assets/unknownAny.html.e7eefddf.js"><link rel="prefetch" href="/notes/assets/avoidExportDefault.html.0aa2de1e.js"><link rel="prefetch" href="/notes/assets/barrel.html.8ff163b5.js"><link rel="prefetch" href="/notes/assets/bind.html.25b002e5.js"><link rel="prefetch" href="/notes/assets/buildToggles.html.427be824.js"><link rel="prefetch" href="/notes/assets/classAreUseful.html.866f36fc.js"><link rel="prefetch" href="/notes/assets/covarianceAndContravariance.html.614b098b.js"><link rel="prefetch" href="/notes/assets/createArrays.html.ef00855b.js"><link rel="prefetch" href="/notes/assets/curry.html.3a3032bf.js"><link rel="prefetch" href="/notes/assets/functionParameters.html.227062b2.js"><link rel="prefetch" href="/notes/assets/infer.html.8af8e864.js"><link rel="prefetch" href="/notes/assets/lazyObjectLiteralInitialization.html.4e0dea5d.js"><link rel="prefetch" href="/notes/assets/limitPropertySetters.html.7f88d132.js"><link rel="prefetch" href="/notes/assets/metadata.html.a19cf05a.js"><link rel="prefetch" href="/notes/assets/nominalTyping.html.2a724bdc.js"><link rel="prefetch" href="/notes/assets/outFileCaution.html.1da1e197.js"><link rel="prefetch" href="/notes/assets/singletonPatern.html.c3810ee4.js"><link rel="prefetch" href="/notes/assets/statefulFunctions.html.8567bf8b.js"><link rel="prefetch" href="/notes/assets/staticConstructors.html.606276a4.js"><link rel="prefetch" href="/notes/assets/stringBasedEmuns.html.191f27fc.js"><link rel="prefetch" href="/notes/assets/truthy.html.277bf90f.js"><link rel="prefetch" href="/notes/assets/typeInstantiation.html.d9d7b913.js"><link rel="prefetch" href="/notes/assets/typesafeEventEmitter.html.e5232a52.js"><link rel="prefetch" href="/notes/assets/ambient.html.9e4528f0.js"><link rel="prefetch" href="/notes/assets/callable.html.71483cf3.js"><link rel="prefetch" href="/notes/assets/discrominatedUnion.html.db34145d.js"><link rel="prefetch" href="/notes/assets/enums.html.692645dd.js"><link rel="prefetch" href="/notes/assets/exceptionsHanding.html.46999c07.js"><link rel="prefetch" href="/notes/assets/freshness.html.7467dc1d.js"><link rel="prefetch" href="/notes/assets/functions.html.d763c488.js"><link rel="prefetch" href="/notes/assets/generices.html.ac7ce48d.js"><link rel="prefetch" href="/notes/assets/indexSignatures.html.dcf2d88b.js"><link rel="prefetch" href="/notes/assets/interfaces.html.1c089a21.js"><link rel="prefetch" href="/notes/assets/lib.html.2f9fa1c0.js"><link rel="prefetch" href="/notes/assets/literals.html.96b2ac28.js"><link rel="prefetch" href="/notes/assets/migrating.html.46fa8ed4.js"><link rel="prefetch" href="/notes/assets/mixins.html.4a6bbe7c.js"><link rel="prefetch" href="/notes/assets/movingTypes.html.be8fe08a.js"><link rel="prefetch" href="/notes/assets/neverType.html.9ffe2c42.js"><link rel="prefetch" href="/notes/assets/overview.html.b5786235.js"><link rel="prefetch" href="/notes/assets/readonly.html.5f1bdf0b.js"><link rel="prefetch" href="/notes/assets/thisType.html.381808bf.js"><link rel="prefetch" href="/notes/assets/typeAssertion.html.b3258562.js"><link rel="prefetch" href="/notes/assets/typeCompatibility.html.52d62743.js"><link rel="prefetch" href="/notes/assets/typeGuard.html.66d84d75.js"><link rel="prefetch" href="/notes/assets/typeInference.html.f8e56ebd.js"><link rel="prefetch" href="/notes/assets/types.html.5d6a41c1.js"><link rel="prefetch" href="/notes/assets/pluginDva.html.3218ac37.js"><link rel="prefetch" href="/notes/assets/pluginQiankun.html.d4f0bc95.js"><link rel="prefetch" href="/notes/assets/codegen.html.45e525d0.js"><link rel="prefetch" href="/notes/assets/entrance.html.1514cbe8.js"><link rel="prefetch" href="/notes/assets/optimize.html.be732d48.js"><link rel="prefetch" href="/notes/assets/outline.html.5dcac477.js"><link rel="prefetch" href="/notes/assets/parse.html.d8b086fa.js"><link rel="prefetch" href="/notes/assets/async-component.html.8fd3a46c.js"><link rel="prefetch" href="/notes/assets/component-register.html.1c57c20d.js"><link rel="prefetch" href="/notes/assets/create-component.html.a0f4000f.js"><link rel="prefetch" href="/notes/assets/lifecycle.html.9346eed7.js"><link rel="prefetch" href="/notes/assets/merge-option.html.50d4d706.js"><link rel="prefetch" href="/notes/assets/outline.html.b79fc2ce.js"><link rel="prefetch" href="/notes/assets/patch.html.335aef9d.js"><link rel="prefetch" href="/notes/assets/_index.html.fdf8e0e5.js"><link rel="prefetch" href="/notes/assets/create-element.html.79d81e9f.js"><link rel="prefetch" href="/notes/assets/mounted.html.2f24c956.js"><link rel="prefetch" href="/notes/assets/new-vue.html.63171fd0.js"><link rel="prefetch" href="/notes/assets/render.html.83f9bb8a.js"><link rel="prefetch" href="/notes/assets/update.html.3d58d007.js"><link rel="prefetch" href="/notes/assets/virtual-dom.html.95b3e4bd.js"><link rel="prefetch" href="/notes/assets/event.html.cd692109.js"><link rel="prefetch" href="/notes/assets/keep-alive.html.bca4b169.js"><link rel="prefetch" href="/notes/assets/outline.html.731dae6a.js"><link rel="prefetch" href="/notes/assets/slot.html.f78f8fea.js"><link rel="prefetch" href="/notes/assets/tansition-group.html.7d729ab6.js"><link rel="prefetch" href="/notes/assets/tansition.html.31dd3320.js"><link rel="prefetch" href="/notes/assets/v-model.html.3bb5bf44.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.35bb155e.js"><link rel="prefetch" href="/notes/assets/baseInterviewSecond.html.e7f344de.js"><link rel="prefetch" href="/notes/assets/componentCommunication.html.891a7697.js"><link rel="prefetch" href="/notes/assets/detailedResponsiveness.html.3e787d0e.js"><link rel="prefetch" href="/notes/assets/diff.html.58c99060.js"><link rel="prefetch" href="/notes/assets/eventBinding.html.7196e041.js"><link rel="prefetch" href="/notes/assets/eventMechanism.html.50b58be9.js"><link rel="prefetch" href="/notes/assets/key.html.abe017e2.js"><link rel="prefetch" href="/notes/assets/knowledgeSystem.html.620b9c71.js"><link rel="prefetch" href="/notes/assets/slot.html.2e1b2c87.js"><link rel="prefetch" href="/notes/assets/sourceCodeAsyncDomUpdateNextTick.html.32491212.js"><link rel="prefetch" href="/notes/assets/sourceCodeElementBroadcastDispatch.html.a92f79ed.js"><link rel="prefetch" href="/notes/assets/sourceCodeKeepAlive.html.b3d27f2e.js"><link rel="prefetch" href="/notes/assets/sourceCodeResponsiveness.html.9489c687.js"><link rel="prefetch" href="/notes/assets/sourceCodeTemplateCompilation.html.66d795e6.js"><link rel="prefetch" href="/notes/assets/sourceCodeTemplateDom.html.f8335256.js"><link rel="prefetch" href="/notes/assets/sourceCodeVuex.html.1d1da07e.js"><link rel="prefetch" href="/notes/assets/templateCompilation.html.5d528bae.js"><link rel="prefetch" href="/notes/assets/vNode.html.eb9b7dc5.js"><link rel="prefetch" href="/notes/assets/vNodeDiff.html.c492f3cf.js"><link rel="prefetch" href="/notes/assets/build.html.05a7aefd.js"><link rel="prefetch" href="/notes/assets/directory.html.85021b7a.js"><link rel="prefetch" href="/notes/assets/entrance.html.7b694aa9.js"><link rel="prefetch" href="/notes/assets/flow.html.a66bb677.js"><link rel="prefetch" href="/notes/assets/component-update.html.972bfda7.js"><link rel="prefetch" href="/notes/assets/computed-watcher.html.061430b7.js"><link rel="prefetch" href="/notes/assets/getters.html.02821ae0.js"><link rel="prefetch" href="/notes/assets/next-tick.html.671874af.js"><link rel="prefetch" href="/notes/assets/outline.html.13b74144.js"><link rel="prefetch" href="/notes/assets/props.html.0f998986.js"><link rel="prefetch" href="/notes/assets/questions.html.cc5d2ab1.js"><link rel="prefetch" href="/notes/assets/reactive-object.html.30c6de91.js"><link rel="prefetch" href="/notes/assets/setters.html.73e4a34a.js"><link rel="prefetch" href="/notes/assets/summary.html.277d73cc.js"><link rel="prefetch" href="/notes/assets/install.html.7e5db123.js"><link rel="prefetch" href="/notes/assets/matcher.html.eef5cd32.js"><link rel="prefetch" href="/notes/assets/outline.html.f909f64b.js"><link rel="prefetch" href="/notes/assets/router.html.d62362ec.js"><link rel="prefetch" href="/notes/assets/transition-to.html.ace05f14.js"><link rel="prefetch" href="/notes/assets/api.html.f3853ae3.js"><link rel="prefetch" href="/notes/assets/idex.html.349b6244.js"><link rel="prefetch" href="/notes/assets/init.html.8dfb493e.js"><link rel="prefetch" href="/notes/assets/plugin.html.124a58ab.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.87009ade.js"><link rel="prefetch" href="/notes/assets/configuration.html.a9fd781e.js"><link rel="prefetch" href="/notes/assets/entryPoints.html.c83eab97.js"><link rel="prefetch" href="/notes/assets/loader.html.73f4cf87.js"><link rel="prefetch" href="/notes/assets/output.html.1a6b2116.js"><link rel="prefetch" href="/notes/assets/plugin.html.a8808953.js"><link rel="prefetch" href="/notes/assets/webpackInterview.html.f61d2bef.js"><link rel="prefetch" href="/notes/assets/reactApi.html.65a39a4e.js"><link rel="prefetch" href="/notes/assets/reactChildren.html.e77a0069.js"><link rel="prefetch" href="/notes/assets/reactElement.html.554c4dcc.js"><link rel="prefetch" href="/notes/assets/reactFiber.html.bfedb2df.js"><link rel="prefetch" href="/notes/assets/commitAllHostEffects.html.6969ddee.js"><link rel="prefetch" href="/notes/assets/commitAllLifeCycles.html.26d4e066.js"><link rel="prefetch" href="/notes/assets/commitBeforeMutationLifecycles.html.000ce894.js"><link rel="prefetch" href="/notes/assets/commitDeletion.html.beadff25.js"><link rel="prefetch" href="/notes/assets/commitPlacement.html.4fd89511.js"><link rel="prefetch" href="/notes/assets/commitRoot.html.c957f258.js"><link rel="prefetch" href="/notes/assets/commitWork.html.d9b2e2c8.js"><link rel="prefetch" href="/notes/assets/invokeGuardedCallback.html.5cea8c95.js"><link rel="prefetch" href="/notes/assets/expirationTime.html.ac807b7c.js"><link rel="prefetch" href="/notes/assets/reactDomRender.html.5e6ed3b9.js"><link rel="prefetch" href="/notes/assets/setStateForceUpdate.html.6dde2766.js"><link rel="prefetch" href="/notes/assets/context.html.945831fd.js"><link rel="prefetch" href="/notes/assets/evenInit.html.a0106c3f.js"><link rel="prefetch" href="/notes/assets/eventBind.html.dbe8cc4d.js"><link rel="prefetch" href="/notes/assets/eventCreateEventObject.html.7d9f0337.js"><link rel="prefetch" href="/notes/assets/eventDispath.html.759964d9.js"><link rel="prefetch" href="/notes/assets/hydrate.html.26e9f5ab.js"><link rel="prefetch" href="/notes/assets/ref.html.fce07319.js"><link rel="prefetch" href="/notes/assets/suspense.html.0d01e747.js"><link rel="prefetch" href="/notes/assets/suspenseLazy.html.b2b44e96.js"><link rel="prefetch" href="/notes/assets/suspenseWork.html.b92dd570.js"><link rel="prefetch" href="/notes/assets/hooksCommon.html.53e97634.js"><link rel="prefetch" href="/notes/assets/hooksOther.html.4d139667.js"><link rel="prefetch" href="/notes/assets/start.html.4125706b.js"><link rel="prefetch" href="/notes/assets/useEffect.html.af8a6a65.js"><link rel="prefetch" href="/notes/assets/useState.html.4d108635.js"><link rel="prefetch" href="/notes/assets/base.html.b69ad7c1.js"><link rel="prefetch" href="/notes/assets/commpontDiff.html.478eb7b3.js"><link rel="prefetch" href="/notes/assets/componentUpdate.html.484c96b2.js"><link rel="prefetch" href="/notes/assets/renderProcess.html.395adf94.js"><link rel="prefetch" href="/notes/assets/schedulingPrinciple.html.5d556bb4.js"><link rel="prefetch" href="/notes/assets/beginWork.html.940e61c6.js"><link rel="prefetch" href="/notes/assets/globalVariable.html.7a04c5d0.js"><link rel="prefetch" href="/notes/assets/mountIndeterminateComponent.html.fbe0d741.js"><link rel="prefetch" href="/notes/assets/mountLazyCompont.html.36c7e14b.js"><link rel="prefetch" href="/notes/assets/performUnitOfWork.html.23a1c528.js"><link rel="prefetch" href="/notes/assets/performWork.html.8f9f6604.js"><link rel="prefetch" href="/notes/assets/reactScheduler.html.4ef39ea7.js"><link rel="prefetch" href="/notes/assets/reconcileChildren.html.d86c8afe.js"><link rel="prefetch" href="/notes/assets/reconcileChildrenArray.html.c64f3853.js"><link rel="prefetch" href="/notes/assets/reconcileSingleElement.html.e2bb64ef.js"><link rel="prefetch" href="/notes/assets/renderRoot.html.d88bb04b.js"><link rel="prefetch" href="/notes/assets/scheduleWork.html.d35f7a01.js"><link rel="prefetch" href="/notes/assets/throwException.html.95d16f49.js"><link rel="prefetch" href="/notes/assets/updateClassComponent.html.b89d73df.js"><link rel="prefetch" href="/notes/assets/updateContextConsumer.html.9f9ac25d.js"><link rel="prefetch" href="/notes/assets/updateContextProvider.html.c7c4c6af.js"><link rel="prefetch" href="/notes/assets/updateForwardRef.html.5ac14f9e.js"><link rel="prefetch" href="/notes/assets/updateFragment.html.42cc3960.js"><link rel="prefetch" href="/notes/assets/updateFunctionalComponent.html.3d4db26f.js"><link rel="prefetch" href="/notes/assets/updateHostComponent.html.297d1b72.js"><link rel="prefetch" href="/notes/assets/updateHostRoot.html.3dd4c2ed.js"><link rel="prefetch" href="/notes/assets/updateHostText.html.50caafe6.js"><link rel="prefetch" href="/notes/assets/updateMode.html.88ef0df8.js"><link rel="prefetch" href="/notes/assets/updatePortalComponent.html.03aed5de.js"><link rel="prefetch" href="/notes/assets/updateProfiler.html.4f024180.js"><link rel="prefetch" href="/notes/assets/updateSuspenseComponent.html.159143ee.js"><link rel="prefetch" href="/notes/assets/interview1.html.72ed1098.js"><link rel="prefetch" href="/notes/assets/interview2.html.4c516f12.js"><link rel="prefetch" href="/notes/assets/interview3.html.1c4b9a91.js"><link rel="prefetch" href="/notes/assets/interview51.html.9c6909ff.js"><link rel="prefetch" href="/notes/assets/interview52.html.625cac9f.js"><link rel="prefetch" href="/notes/assets/interview53.html.842d69c4.js"><link rel="prefetch" href="/notes/assets/interview54.html.0d047114.js"><link rel="prefetch" href="/notes/assets/interview55.html.81bedb61.js"><link rel="prefetch" href="/notes/assets/interview56.html.17628f3e.js"><link rel="prefetch" href="/notes/assets/interview57.html.0ce45bfc.js"><link rel="prefetch" href="/notes/assets/interview1.html.d008cbdf.js"><link rel="prefetch" href="/notes/assets/interview10.html.6c06f76c.js"><link rel="prefetch" href="/notes/assets/interview11.html.3c01fbb9.js"><link rel="prefetch" href="/notes/assets/interview12.html.9c7b20d5.js"><link rel="prefetch" href="/notes/assets/interview13.html.b359f884.js"><link rel="prefetch" href="/notes/assets/interview14.html.5eabc084.js"><link rel="prefetch" href="/notes/assets/interview15.html.d9d74ad7.js"><link rel="prefetch" href="/notes/assets/interview16.html.db2b10dc.js"><link rel="prefetch" href="/notes/assets/interview17.html.c7217d86.js"><link rel="prefetch" href="/notes/assets/interview18.html.8506acc8.js"><link rel="prefetch" href="/notes/assets/interview19.html.9ad7ba81.js"><link rel="prefetch" href="/notes/assets/interview2.html.b65acabc.js"><link rel="prefetch" href="/notes/assets/interview20.html.7ce54be4.js"><link rel="prefetch" href="/notes/assets/interview21.html.4f6ab36a.js"><link rel="prefetch" href="/notes/assets/interview22.html.d21a30d3.js"><link rel="prefetch" href="/notes/assets/interview23.html.44779b86.js"><link rel="prefetch" href="/notes/assets/interview24.html.9464e118.js"><link rel="prefetch" href="/notes/assets/interview25.html.cc3b8950.js"><link rel="prefetch" href="/notes/assets/interview26.html.257a9321.js"><link rel="prefetch" href="/notes/assets/interview27.html.aac02d5f.js"><link rel="prefetch" href="/notes/assets/interview28.html.68e6c175.js"><link rel="prefetch" href="/notes/assets/interview29.html.5bf9ea33.js"><link rel="prefetch" href="/notes/assets/interview3.html.b5ad8604.js"><link rel="prefetch" href="/notes/assets/interview30.html.a1b9aaf2.js"><link rel="prefetch" href="/notes/assets/interview31.html.37c30903.js"><link rel="prefetch" href="/notes/assets/interview32.html.0cddc25a.js"><link rel="prefetch" href="/notes/assets/interview33.html.58265999.js"><link rel="prefetch" href="/notes/assets/interview34.html.5b2e2207.js"><link rel="prefetch" href="/notes/assets/interview35.html.6c3b4734.js"><link rel="prefetch" href="/notes/assets/interview36.html.76569451.js"><link rel="prefetch" href="/notes/assets/interview37.html.86edd0ee.js"><link rel="prefetch" href="/notes/assets/interview38.html.51775ed0.js"><link rel="prefetch" href="/notes/assets/interview39.html.6dd30d67.js"><link rel="prefetch" href="/notes/assets/interview4.html.49a1ad41.js"><link rel="prefetch" href="/notes/assets/interview40.html.b9c21a0c.js"><link rel="prefetch" href="/notes/assets/interview41.html.7d88f14a.js"><link rel="prefetch" href="/notes/assets/interview42.html.be276ed1.js"><link rel="prefetch" href="/notes/assets/interview43.html.b31c5792.js"><link rel="prefetch" href="/notes/assets/interview44.html.0fa11e44.js"><link rel="prefetch" href="/notes/assets/interview45.html.e16ec694.js"><link rel="prefetch" href="/notes/assets/interview46.html.5c433146.js"><link rel="prefetch" href="/notes/assets/interview47.html.45769216.js"><link rel="prefetch" href="/notes/assets/interview48.html.3068a10d.js"><link rel="prefetch" href="/notes/assets/interview49.html.5713274f.js"><link rel="prefetch" href="/notes/assets/interview5.html.904c4942.js"><link rel="prefetch" href="/notes/assets/interview50.html.ebb94acf.js"><link rel="prefetch" href="/notes/assets/interview6.html.b4717fdb.js"><link rel="prefetch" href="/notes/assets/interview7.html.370437c7.js"><link rel="prefetch" href="/notes/assets/interview8.html.9bd86cf0.js"><link rel="prefetch" href="/notes/assets/interview9.html.cacfedcf.js"><link rel="prefetch" href="/notes/assets/404.html.dcc94ef0.js"><link rel="prefetch" href="/notes/assets/404.5f647267.js"><link rel="prefetch" href="/notes/assets/Layout.7b3c98f3.js">
    <link rel="stylesheet" href="/notes/assets/style.524e36e5.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/notes/" class=""><!----><!----></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">plugins <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#概述" class="router-link-active router-link-exact-active sidebar-item" aria-label="概述"><!--[--><!--]--> 概述 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#寻找插件" class="router-link-active router-link-exact-active sidebar-item" aria-label="寻找插件"><!--[--><!--]--> 寻找插件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#使用插件" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用插件"><!--[--><!--]--> 使用插件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#概念" class="router-link-active router-link-exact-active sidebar-item" aria-label="概念"><!--[--><!--]--> 概念 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#命名空间" class="router-link-active router-link-exact-active sidebar-item" aria-label="命名空间"><!--[--><!--]--> 命名空间 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#filters" class="router-link-active router-link-exact-active sidebar-item" aria-label="Filters"><!--[--><!--]--> Filters <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#resolve-callbacks" class="router-link-active router-link-exact-active sidebar-item" aria-label="Resolve callbacks"><!--[--><!--]--> Resolve callbacks <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#resolve-options" class="router-link-active router-link-exact-active sidebar-item" aria-label="Resolve options"><!--[--><!--]--> Resolve options <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#resolve-arguments" class="router-link-active router-link-exact-active sidebar-item" aria-label="Resolve arguments"><!--[--><!--]--> Resolve arguments <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#resolve-results" class="router-link-active router-link-exact-active sidebar-item" aria-label="Resolve results"><!--[--><!--]--> Resolve results <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#load-callbacks" class="router-link-active router-link-exact-active sidebar-item" aria-label="Load callbacks"><!--[--><!--]--> Load callbacks <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#load-options" class="router-link-active router-link-exact-active sidebar-item" aria-label="Load options"><!--[--><!--]--> Load options <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#load-arguments" class="router-link-active router-link-exact-active sidebar-item" aria-label="Load arguments"><!--[--><!--]--> Load arguments <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#load-results" class="router-link-active router-link-exact-active sidebar-item" aria-label="Load results"><!--[--><!--]--> Load results <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#caching-your-plugin" class="router-link-active router-link-exact-active sidebar-item" aria-label="Caching your plugin"><!--[--><!--]--> Caching your plugin <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#start-callbacks" class="router-link-active router-link-exact-active sidebar-item" aria-label="Start callbacks"><!--[--><!--]--> Start callbacks <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#end-callbacks" class="router-link-active router-link-exact-active sidebar-item" aria-label="End callbacks"><!--[--><!--]--> End callbacks <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#accessing-build-options" class="router-link-active router-link-exact-active sidebar-item" aria-label="Accessing build options"><!--[--><!--]--> Accessing build options <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#example-plugins" class="router-link-active router-link-exact-active sidebar-item" aria-label="Example plugins"><!--[--><!--]--> Example plugins <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#http-plugin" class="router-link-active router-link-exact-active sidebar-item" aria-label="HTTP plugin"><!--[--><!--]--> HTTP plugin <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#webassembly-plugin" class="router-link-active router-link-exact-active sidebar-item" aria-label="WebAssembly plugin"><!--[--><!--]--> WebAssembly plugin <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#svelte-plugin" class="router-link-active router-link-exact-active sidebar-item" aria-label="Svelte plugin"><!--[--><!--]--> Svelte plugin <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/notes/esbuild/plugins/plugins.html#plugin-api-limitations" class="router-link-active router-link-exact-active sidebar-item" aria-label="Plugin API limitations"><!--[--><!--]--> Plugin API limitations <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="plugins" tabindex="-1"><a class="header-anchor" href="#plugins" aria-hidden="true">#</a> plugins</h1><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述" aria-hidden="true">#</a> 概述</h2><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>插件 API 是新的，仍然是实验性的。随着新用例的发现，它可能会在 esbuild 1.0.0 版本之前发生变化。您可以关注跟踪问题以获取有关此功能的<a href="https://github.com/evanw/esbuild/issues/111" target="_blank" rel="noopener noreferrer">更新<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。</p></div><p>插件 API 允许您将代码注入构建过程的各个部分。与 API 的其余部分不同，它不能从命令行使用。您必须编写 JavaScript 或 Go 代码才能使用插件 API。插件也只能与构建 API 一起使用，不能与转换 API 一起使用。</p><h2 id="寻找插件" tabindex="-1"><a class="header-anchor" href="#寻找插件" aria-hidden="true">#</a> 寻找插件</h2><p>如果您正在寻找现有的 esbuild 插件，您应该查看<a href="https://github.com/esbuild/community-plugins" target="_blank" rel="noopener noreferrer">现有的 esbuild 插件列表<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。此列表中的插件是作者有意添加的，旨在供 esbuild 社区中的其他人使用。</p><p>如果你想分享你的 esbuild 插件，你应该：</p><ol><li><p>将它<a href="https://docs.npmjs.com/creating-and-publishing-unscoped-public-packages" target="_blank" rel="noopener noreferrer">发布到 npm<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 以便其他人可以安装它。</p></li><li><p>将其添加到<a href="https://github.com/esbuild/community-plugins" target="_blank" rel="noopener noreferrer">现有 esbuild 插件列表<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>中，以便其他人可以找到它。</p></li></ol><h2 id="使用插件" tabindex="-1"><a class="header-anchor" href="#使用插件" aria-hidden="true">#</a> 使用插件</h2><p>esbuild 插件是一个具有<code>名称</code>和<code>设置</code>功能的对象。它们以数组形式传递给<a href="/notes/esbuild/plugins/transform/#build" class="">构建 API</a> 调用。 <code>setup</code> 函数为每个构建 API 调用运行一次。</p><p>这是一个简单的插件示例，允许您在构建时导入当前环境变量：</p><div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> envPlugin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;env&#39;</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">build</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Intercept import paths called &quot;env&quot; so esbuild doesn&#39;t attempt</span>
    <span class="token comment">// to map them to a file system location. Tag them with the &quot;env-ns&quot;</span>
    <span class="token comment">// namespace to reserve them for this plugin.</span>
    build<span class="token punctuation">.</span><span class="token function">onResolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^env$</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">args</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> args<span class="token punctuation">.</span>path<span class="token punctuation">,</span>
      <span class="token literal-property property">namespace</span><span class="token operator">:</span> <span class="token string">&#39;env-ns&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">// Load paths tagged with the &quot;env-ns&quot; namespace and behave as if</span>
    <span class="token comment">// they point to a JSON file containing the environment variables.</span>
    build<span class="token punctuation">.</span><span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">namespace</span><span class="token operator">:</span> <span class="token string">&#39;env-ns&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">contents</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>envPlugin<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;encoding/json&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;strings&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">var</span> envPlugin <span class="token operator">=</span> api<span class="token punctuation">.</span>Plugin<span class="token punctuation">{</span>
  Name<span class="token punctuation">:</span> <span class="token string">&quot;env&quot;</span><span class="token punctuation">,</span>
  Setup<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span>build api<span class="token punctuation">.</span>PluginBuild<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Intercept import paths called &quot;env&quot; so esbuild doesn&#39;t attempt</span>
    <span class="token comment">// to map them to a file system location. Tag them with the &quot;env-ns&quot;</span>
    <span class="token comment">// namespace to reserve them for this plugin.</span>
    build<span class="token punctuation">.</span><span class="token function">OnResolve</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnResolveOptions<span class="token punctuation">{</span>Filter<span class="token punctuation">:</span> <span class="token string">`^env$`</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">func</span><span class="token punctuation">(</span>args api<span class="token punctuation">.</span>OnResolveArgs<span class="token punctuation">)</span> <span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnResolveResult<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnResolveResult<span class="token punctuation">{</span>
          Path<span class="token punctuation">:</span>      args<span class="token punctuation">.</span>Path<span class="token punctuation">,</span>
          Namespace<span class="token punctuation">:</span> <span class="token string">&quot;env-ns&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// Load paths tagged with the &quot;env-ns&quot; namespace and behave as if</span>
    <span class="token comment">// they point to a JSON file containing the environment variables.</span>
    build<span class="token punctuation">.</span><span class="token function">OnLoad</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnLoadOptions<span class="token punctuation">{</span>Filter<span class="token punctuation">:</span> <span class="token string">`.*`</span><span class="token punctuation">,</span> Namespace<span class="token punctuation">:</span> <span class="token string">&quot;env-ns&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">func</span><span class="token punctuation">(</span>args api<span class="token punctuation">.</span>OnLoadArgs<span class="token punctuation">)</span> <span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnLoadResult<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mappings <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> item <span class="token operator">:=</span> <span class="token keyword">range</span> os<span class="token punctuation">.</span><span class="token function">Environ</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> equals <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">IndexByte</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> <span class="token char">&#39;=&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> equals <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">{</span>
            mappings<span class="token punctuation">[</span>item<span class="token punctuation">[</span><span class="token punctuation">:</span>equals<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> item<span class="token punctuation">[</span>equals<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        bytes<span class="token punctuation">,</span> err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span>mappings<span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnLoadResult<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> err
        <span class="token punctuation">}</span>
        contents <span class="token operator">:=</span> <span class="token function">string</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>
        <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnLoadResult<span class="token punctuation">{</span>
          Contents<span class="token punctuation">:</span> <span class="token operator">&amp;</span>contents<span class="token punctuation">,</span>
          Loader<span class="token punctuation">:</span>   api<span class="token punctuation">.</span>LoaderJSON<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Outfile<span class="token punctuation">:</span>     <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
    Plugins<span class="token punctuation">:</span>     <span class="token punctuation">[</span><span class="token punctuation">]</span>api<span class="token punctuation">.</span>Plugin<span class="token punctuation">{</span>envPlugin<span class="token punctuation">}</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>       <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div></div></div><p>你会像这样使用它：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">PATH</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;env&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">PATH is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">PATH</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="概念" tabindex="-1"><a class="header-anchor" href="#概念" aria-hidden="true">#</a> 概念</h2><p>为 esbuild 编写插件与为其他打包器编写插件的工作方式略有不同。在开发插件之前了解以下概念很重要：</p><h3 id="命名空间" tabindex="-1"><a class="header-anchor" href="#命名空间" aria-hidden="true">#</a> 命名空间</h3><p>每个模块都有一个关联的命名空间。默认情况下，esbuild 在文件命名空间中运行，该命名空间对应于文件系统上的<code>文件</code>。但是 esbuild 也可以处理在文件系统上没有相应位置的“虚拟”模块。发生这种情况的一种情况是使用 <a href="/notes/esbuild/plugins/transform/#stdin" class="">stdin</a> 提供模块。</p><p>插件可用于创建虚拟模块。虚拟模块通常使用文件以外的命名空间来区分它们与<code>文件</code>系统模块。通常命名空间特定于创建它们的插件。例如，下面的示例 <a href="/notes/esbuild/plugins/plugins/#http-plugin" class="">HTTP 插件</a>使用 <code>http-url</code> 命名空间来下载文件。</p><h3 id="filters" tabindex="-1"><a class="header-anchor" href="#filters" aria-hidden="true">#</a> Filters</h3><p>每个回调都必须提供一个正则表达式作为过滤器。当路径与其过滤器不匹配时，esbuild 使用它来跳过调用回调，这是为了性能而完成的。从 esbuild 的高度并行内部调用到单线程 JavaScript 代码是昂贵的，应尽可能避免以获得最大速度。</p><p>您应该尽可能尝试使用过滤器正则表达式而不是使用 JavaScript 代码进行过滤。这更快，因为正则表达式是在 esbuild 内部计算的，根本不需要调用 JavaScript。例如，下面的示例 HTTP 插件使用了 <code>^https?://</code> 过滤器，以确保运行插件的性能开销仅对以 <code>http://</code> 或 <code>https://</code> 开头的路径产生。</p><p>允许的正则表达式语法是 Go 的<a href="https://golang.org/pkg/regexp/" target="_blank" rel="noopener noreferrer">正则表达式引擎<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>支持的语法。这与 JavaScript 略有不同。具体来说，不支持前瞻、后视和反向引用。 Go 的正则表达式引擎旨在避免可能影响 JavaScript 正则表达式的灾难性指数时间最坏情况性能问题。</p><p>请注意，命名空间也可用于过滤。回调必须提供过滤器正则表达式，但也可以选择提供命名空间以进一步限制匹配的路径。这对于“记住”虚拟模块的来源很有用。请记住，命名空间使用精确的字符串相等性测试而不是正则表达式进行匹配，因此与模块路径不同，它们不用于存储任意数据。</p><h2 id="resolve-callbacks" tabindex="-1"><a class="header-anchor" href="#resolve-callbacks" aria-hidden="true">#</a> Resolve callbacks</h2><p>使用 <code>onResolve</code> 添加的回调将在 esbuild 构建的每个模块中的每个导入路径上运行。回调可以自定义 esbuild 如何进行路径解析。例如，它可以拦截导入路径并将它们重定向到其他地方。它还可以将路径标记为外部路径。下面是一个例子：</p><div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> exampleOnResolvePlugin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;example&#39;</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">build</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>

    <span class="token comment">// Redirect all paths starting with &quot;images/&quot; to &quot;./public/images/&quot;</span>
    build<span class="token punctuation">.</span><span class="token function">onResolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^images\/</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">args</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>resolveDir<span class="token punctuation">,</span> <span class="token string">&#39;public&#39;</span><span class="token punctuation">,</span> args<span class="token punctuation">.</span>path<span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// Mark all paths starting with &quot;http://&quot; or &quot;https://&quot; as external</span>
    build<span class="token punctuation">.</span><span class="token function">onResolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^https?:\/\/</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">args</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> args<span class="token punctuation">.</span>path<span class="token punctuation">,</span> <span class="token literal-property property">external</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>exampleOnResolvePlugin<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;.png&#39;</span><span class="token operator">:</span> <span class="token string">&#39;binary&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;path/filepath&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">var</span> exampleOnResolvePlugin <span class="token operator">=</span> api<span class="token punctuation">.</span>Plugin<span class="token punctuation">{</span>
  Name<span class="token punctuation">:</span> <span class="token string">&quot;example&quot;</span><span class="token punctuation">,</span>
  Setup<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span>build api<span class="token punctuation">.</span>PluginBuild<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Redirect all paths starting with &quot;images/&quot; to &quot;./public/images/&quot;</span>
    build<span class="token punctuation">.</span><span class="token function">OnResolve</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnResolveOptions<span class="token punctuation">{</span>Filter<span class="token punctuation">:</span> <span class="token string">`^images/`</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">func</span><span class="token punctuation">(</span>args api<span class="token punctuation">.</span>OnResolveArgs<span class="token punctuation">)</span> <span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnResolveResult<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnResolveResult<span class="token punctuation">{</span>
          Path<span class="token punctuation">:</span> filepath<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>ResolveDir<span class="token punctuation">,</span> <span class="token string">&quot;public&quot;</span><span class="token punctuation">,</span> args<span class="token punctuation">.</span>Path<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// Mark all paths starting with &quot;http://&quot; or &quot;https://&quot; as external</span>
    build<span class="token punctuation">.</span><span class="token function">OnResolve</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnResolveOptions<span class="token punctuation">{</span>Filter<span class="token punctuation">:</span> <span class="token string">`^https?://`</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">func</span><span class="token punctuation">(</span>args api<span class="token punctuation">.</span>OnResolveArgs<span class="token punctuation">)</span> <span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnResolveResult<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnResolveResult<span class="token punctuation">{</span>
          Path<span class="token punctuation">:</span>     args<span class="token punctuation">.</span>Path<span class="token punctuation">,</span>
          External<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Outfile<span class="token punctuation">:</span>     <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
    Plugins<span class="token punctuation">:</span>     <span class="token punctuation">[</span><span class="token punctuation">]</span>api<span class="token punctuation">.</span>Plugin<span class="token punctuation">{</span>exampleOnResolvePlugin<span class="token punctuation">}</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>       <span class="token boolean">true</span><span class="token punctuation">,</span>
    Loader<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>api<span class="token punctuation">.</span>Loader<span class="token punctuation">{</span>
      <span class="token string">&quot;.png&quot;</span><span class="token punctuation">:</span> api<span class="token punctuation">.</span>LoaderBinary<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div></div></div><p>回调可以在不提供路径的情况下返回，以将路径解析的责任传递给下一个回调。对于给定的导入路径，来自所有插件的所有 <code>onResolve</code> 回调将按照它们注册的顺序运行，直到有人负责路径解析。如果没有回调返回路径，esbuild 将运行其默认路径解析逻辑。</p><p>请记住，许多回调可能同时运行。在 JavaScript 中，如果您的回调执行可以在另一个线程上运行的昂贵工作，例如 <code>fs.existsSync()</code>，您应该使回调<code>异步</code>并使用 <code>await</code>（在这种情况下使用 <code>fs.promises.exists()</code>）以允许其他代码在此期间运行。在 Go 中，每个回调都可以在单独的 goroutine 上运行。如果您的插件使用任何共享数据结构，请确保您有适当的同步。</p><h3 id="resolve-options" tabindex="-1"><a class="header-anchor" href="#resolve-options" aria-hidden="true">#</a> Resolve options</h3><p><code>onResolve</code> API 旨在在 <code>setup</code> 函数中调用，并注册在某些情况下要触发的回调。它需要几个选项：</p><div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">interface</span> <span class="token class-name">OnResolveOptions</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">filter</span><span class="token operator">:</span> RegExp<span class="token punctuation">;</span>
  namespace<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> OnResolveOptions <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  Filter    <span class="token builtin">string</span>
  Namespace <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div></div><ul><li><code>filter</code></li></ul><p>每个回调都必须提供一个过滤器，它是一个正则表达式。当路径与此过滤器不匹配时，将跳过注册的回调。您可以<a href="/notes/esbuild/plugins/plugins/#filters" class="">在此处阅读有关过滤器的更多信息</a>。</p><ul><li><code>namespace</code></li></ul><p>这是可选的。如果提供，则回调仅在提供的命名空间中的模块内的路径上运行。您可以在<a href="/notes/esbuild/plugins/plugins/#namespaces" class="">此处阅读有关命名空间的更多信息</a>。</p><h3 id="resolve-arguments" tabindex="-1"><a class="header-anchor" href="#resolve-arguments" aria-hidden="true">#</a> Resolve arguments</h3><p>当eSbuild调用<code>onresolve</code>注册的回调时，它将提供这些参数，其中包含有关导入路径的信息：</p><div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">interface</span> <span class="token class-name">OnResolveArgs</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">importer</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">namespace</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">resolveDir</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">kind</span><span class="token operator">:</span> ResolveKind<span class="token punctuation">;</span>
  <span class="token literal-property property">pluginData</span><span class="token operator">:</span> any<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

type ResolveKind <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token string">&#39;entry-point&#39;</span>
  <span class="token operator">|</span> <span class="token string">&#39;import-statement&#39;</span>
  <span class="token operator">|</span> <span class="token string">&#39;require-call&#39;</span>
  <span class="token operator">|</span> <span class="token string">&#39;dynamic-import&#39;</span>
  <span class="token operator">|</span> <span class="token string">&#39;require-resolve&#39;</span>
  <span class="token operator">|</span> <span class="token string">&#39;import-rule&#39;</span>
  <span class="token operator">|</span> <span class="token string">&#39;url-token&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> OnResolveArgs <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  Path       <span class="token builtin">string</span>
  Importer   <span class="token builtin">string</span>
  Namespace  <span class="token builtin">string</span>
  ResolveDir <span class="token builtin">string</span>
  Kind       ResolveKind
  PluginData <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token punctuation">(</span>
  ResolveEntryPoint        ResolveKind
  ResolveJSImportStatement ResolveKind
  ResolveJSRequireCall     ResolveKind
  ResolveJSDynamicImport   ResolveKind
  ResolveJSRequireResolve  ResolveKind
  ResolveCSSImportRule     ResolveKind
  ResolveCSSURLToken       ResolveKind
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></div></div><ul><li><code>path</code></li></ul><p>这是来自底层模块的源代码的逐字未解决的路径。它可以采取任何形式。虽然eSbuild的默认行为是将导入路径解释为相对路径或包名称，但是可用于引入新的路径表单。例如，下面的示例<a href="/notes/esbuild/plugins/plugins/#http-plugin" class="">HTTP插件</a>对以<code>HTTP：//</code>开始的路径提供了特殊含义。</p><ul><li><code>importer</code></li></ul><p>这是包含要解决此导入的模块的路径。请注意，如果命名空间是<code>文件</code>，则仅保证此路径是文件系统路径。如果要解析相对于包含导入器模块的目录的路径，则应使用<code>Resolvedir</code>，因为它也适用于虚拟模块。</p><ul><li><code>namespace</code></li></ul><p>这是包含此导入的模块的命名空间，如加载此文件的<a href="/notes/esbuild/plugins/plugins/#load-callbacks" class="">负载回调</a>所设置的。这默认为包含eSbuild默认行为的模块的<code>文件</code>命名空间。您可以在<a href="/notes/esbuild/plugins/plugins/#namespaces" class="">此处阅读更多关于命名空间的信息</a>。</p><ul><li><code>resolveDir</code></li></ul><p>这是在解析文件系统上的实际路径的导入路径时要使用的文件系统目录。对于<code>文件</code>命名空间中的模块，此值默认为模块路径的目录部分。对于虚拟模块，此值默认为空，但<a href="/notes/esbuild/plugins/plugins/#load-callbacks" class="">负载回调</a>可以选择为虚拟模块提供一个解析目录。如果发生这种情况，将提供用于解析该文件中未解决的路径的回调。</p><ul><li><code>kind</code></li></ul><p>这表示如何导入要解决的路径。例如，<code>entry-point</code>表示将路径提供给API作为入口点路径，<code>import-statement</code>表示路径来自JavaScript<code>import</code>或<code>export</code>语句，并且<code>import-rule</code>表示路径是来自一个CSS <code>@Import</code>规则。</p><ul><li><code>pluginData</code></li></ul><p>此属性从上一个插件传递，如加载此文件的<a href="/notes/esbuild/plugins/plugins/#load-callbacks" class="">负载回调</a>所设置。</p><h3 id="resolve-results" tabindex="-1"><a class="header-anchor" href="#resolve-results" aria-hidden="true">#</a> Resolve results</h3><p>这是可以通过<code>onresolve</code>添加的回调来提供自定义路径分辨率的对象。如果您想从回调返回而不提供路径，只需返回默认值（在JavaScript和<code>OnResolveresult {}</code>中拒绝）。以下是可以返回的可选属性：</p><div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">interface</span> <span class="token class-name">OnResolveResult</span> <span class="token punctuation">{</span>
  errors<span class="token operator">?</span><span class="token operator">:</span> Message<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  external<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">;</span>
  namespace<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  path<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  pluginData<span class="token operator">?</span><span class="token operator">:</span> any<span class="token punctuation">;</span>
  pluginName<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  warnings<span class="token operator">?</span><span class="token operator">:</span> Message<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  watchDirs<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  watchFiles<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Message</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">text</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">location</span><span class="token operator">:</span> Location <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token literal-property property">detail</span><span class="token operator">:</span> any<span class="token punctuation">;</span> <span class="token comment">// The original error from a JavaScript plugin, if applicable</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Location</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">file</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">namespace</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">line</span><span class="token operator">:</span> number<span class="token punctuation">;</span> <span class="token comment">// 1-based</span>
  <span class="token literal-property property">column</span><span class="token operator">:</span> number<span class="token punctuation">;</span> <span class="token comment">// 0-based, in bytes</span>
  <span class="token literal-property property">length</span><span class="token operator">:</span> number<span class="token punctuation">;</span> <span class="token comment">// in bytes</span>
  <span class="token literal-property property">lineText</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> OnResolveResult <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  Errors     <span class="token punctuation">[</span><span class="token punctuation">]</span>Message
  External   <span class="token builtin">bool</span>
  Namespace  <span class="token builtin">string</span>
  Path       <span class="token builtin">string</span>
  PluginData <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
  PluginName <span class="token builtin">string</span>
  Warnings   <span class="token punctuation">[</span><span class="token punctuation">]</span>Message
  WatchDirs  <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>
  WatchFiles <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Message <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  Text     <span class="token builtin">string</span>
  Location <span class="token operator">*</span>Location
  Detail   <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// The original error from a Go plugin, if applicable</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Location <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  File      <span class="token builtin">string</span>
  Namespace <span class="token builtin">string</span>
  Line      <span class="token builtin">int</span> <span class="token comment">// 1-based</span>
  Column    <span class="token builtin">int</span> <span class="token comment">// 0-based, in bytes</span>
  Length    <span class="token builtin">int</span> <span class="token comment">// in bytes</span>
  LineText  <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></div></div><ul><li><code>path</code></li></ul><p>将其设置为非空字符串以将导入解析为特定路径。如果设置了这一点，则不会在此模块中为此导入路径运行更多的on-destve回调。如果未设置为此，eSbuild将继续运行在当前一个后注册的on-Desclude回调。然后，如果路径仍未解决，eSBuild将默认为相对于当前模块的解析目录解析路径。</p><ul><li><code>external</code></li></ul><p>将此设置为<code>true</code>以将模块标记为<a href="/notes/esbuild/plugins/transform/#external" class="">外部</a>，这意味着它不会包含在捆绑包中，而是将在运行时导入。</p><ul><li><code>namespace</code></li></ul><p>这是与已解析路径关联的命名空间。如果留空，则将默认为非外部路径的<code>文件</code>命名空间。文件命名空间中的路径必须是当前文件系统的绝对路径（因此在UNIX上的正斜杠开始，并且在Windows上使用驱动器号）。</p><p>如果要解析为非文件系统路径的路径，则应将命名空间设置为<code>文件</code>以外的内容或空字符串。这告诉esbuild不将路径视为指向文件系统上的某些东西。</p><ul><li><code>errors</code> and <code>warnings</code></li></ul><p>这些属性允许您通过路径分辨率期间生成的任何日志消息，以根据当前<a href="/notes/esbuild/plugins/transform/#log-level" class="">日志级别</a>显示在终端中的eSBuild，并最终在最终构建结果中结束。例如，如果您正在调用库，并且该库可以返回错误和/或警告，您将希望使用这些属性转发它们。</p><p>如果您只有单个错误返回，则不必通过错误传递它。您可以简单地将<code>错误</code>丢弃在JavaScript中，或者将<code>错误</code>对象返回到Go中的第二个返回值。</p><ul><li><code>watchFiles</code> and <code>watchDirs</code></li></ul><p>这些属性允许您返回eSbuild<a href="/notes/esbuild/plugins/transform/#watch" class="">watch mode</a>的其他文件系统路径以扫描。默认情况下，eSBuild将仅扫描提供给<code>onload</code>插件的路径，并且仅当命名空间是<code>文件</code>时。如果您的插件需要对文件系统的其他更改作出反应，则需要使用其中一个属性。</p><p>如果<code>WatchFiles</code>数组的任何文件已自上次构建以来已更改任何文件，则将触发重建。更改检测有点复杂，可以检查文件内容和/或文件的元数据。</p><p>如果从上次构建以来，如果<code>WatchDirs</code>数组中的任何目录列表列表已更改以来，则还将触发重建。请注意，这不会检查这些目录中的任何文件内容的内容，它也不会检查任何子目录。考虑一下它作为检查UNIX <code>LS</code>命令的输出。</p><p>对于稳健性，您应该包括在评估插件期间使用的所有文件系统路径。例如，如果您的插件相当于<code>Require.Resolve（）</code>，则需要包含所有“执行此文件存在”的路径，而不仅仅是最终路径。否则，可以创建一个新文件，这会导致构建变得过时，但eSbuild不会检测到它，因为未列出该路径。</p><ul><li><code>pluginName</code></li></ul><p>此属性允许您使用此路径解析操作的另一个名称替换此插件的名称。通过这个插件代理另一个插件很有用。例如，它允许您将单个插件转发到包含多个插件的子进程。您可能不需要使用它。</p><ul><li><code>pluginData</code></li></ul><p>此属性将传递到在插件链中运行的下一个插件。如果从<code>onload</code>插件返回它，它将传递给<code>onresolve</code>插件，以获取该文件中的任何导入的插件，如果从<code>onresolve</code>插件返回它，则在加载文件时将传递给<code>onload</code>插件（由于关系多对一，这是随意的）。这对于在不同插件之间传递数据是有用的，而无需直接坐标。</p><h2 id="load-callbacks" tabindex="-1"><a class="header-anchor" href="#load-callbacks" aria-hidden="true">#</a> Load callbacks</h2><p>使用<code>onload</code>添加的回调将为尚未标记为外部的唯一路径/命名空间对运行。它的工作是返回模块的内容并告诉esbuild如何解释它。这是一个示例插件，它将<code>.txt</code>文件转换为单词数组：</p><div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> exampleOnLoadPlugin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;example&#39;</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">build</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span>

    <span class="token comment">// Load &quot;.txt&quot; files and return an array of words</span>
    build<span class="token punctuation">.</span><span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.txt$</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token keyword">await</span> fs<span class="token punctuation">.</span>promises<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>path<span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">contents</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>exampleOnLoadPlugin<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;encoding/json&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;io/ioutil&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;strings&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">var</span> exampleOnLoadPlugin <span class="token operator">=</span> api<span class="token punctuation">.</span>Plugin<span class="token punctuation">{</span>
  Name<span class="token punctuation">:</span> <span class="token string">&quot;example&quot;</span><span class="token punctuation">,</span>
  Setup<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span>build api<span class="token punctuation">.</span>PluginBuild<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Load &quot;.txt&quot; files and return an array of words</span>
    build<span class="token punctuation">.</span><span class="token function">OnLoad</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnLoadOptions<span class="token punctuation">{</span>Filter<span class="token punctuation">:</span> <span class="token string">`\.txt$`</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">func</span><span class="token punctuation">(</span>args api<span class="token punctuation">.</span>OnLoadArgs<span class="token punctuation">)</span> <span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnLoadResult<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        text<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadFile</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>Path<span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnLoadResult<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> err
        <span class="token punctuation">}</span>
        bytes<span class="token punctuation">,</span> err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">Fields</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnLoadResult<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> err
        <span class="token punctuation">}</span>
        contents <span class="token operator">:=</span> <span class="token function">string</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>
        <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnLoadResult<span class="token punctuation">{</span>
          Contents<span class="token punctuation">:</span> <span class="token operator">&amp;</span>contents<span class="token punctuation">,</span>
          Loader<span class="token punctuation">:</span>   api<span class="token punctuation">.</span>LoaderJSON<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Outfile<span class="token punctuation">:</span>     <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
    Plugins<span class="token punctuation">:</span>     <span class="token punctuation">[</span><span class="token punctuation">]</span>api<span class="token punctuation">.</span>Plugin<span class="token punctuation">{</span>exampleOnLoadPlugin<span class="token punctuation">}</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>       <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div></div></div><p>回调可以在不提供模块内容的情况下返回。在这种情况下，加载模块的责任将传递到下一个注册的回调。对于给定的模块，所有插件的所有<code>onload</code>回调将按其注册的顺序运行，直到一个负责加载模块。如果没有回调返回模块的内容，则eSbuild将运行其默认模块加载逻辑。</p><p>请记住，许多回调可能同时运行。在JavaScript中，如果您的回调执行昂贵的工作，可以在其他线程中运行，例如<code>fs.readfilesync（）</code>，您应该使回调<code>async</code>和使用<code>await</code>（在这种情况下使用<code>fs.promises.readfile（）</code>）来允许其他代码与此同时运行。在Go中，每个回调可能在单独的goroutine上运行。如果您的插件使用任何共享数据结构，请确保在适当的同步时进行同步。</p><h3 id="load-options" tabindex="-1"><a class="header-anchor" href="#load-options" aria-hidden="true">#</a> Load options</h3><p><code>onload</code> API在设置功能中被<code>调用</code>，并在某些情况下注册要触发的回调。需要一些选择：</p><div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">interface</span> <span class="token class-name">OnLoadOptions</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">filter</span><span class="token operator">:</span> RegExp<span class="token punctuation">;</span>
  namespace<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> OnLoadOptions <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  Filter    <span class="token builtin">string</span>
  Namespace <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div></div><ul><li><code>filter</code></li></ul><p>每个回调必须提供一个过滤器，这是一个正则表达式。当路径与此过滤器不匹配时，将跳过注册的回调。您可以在<a href="/notes/esbuild/plugins/plugins/#filters" class="">此阅读更多有关过滤器的信息</a>。</p><ul><li><code>namespace</code></li></ul><p>这是可选的。如果提供的话，回调仅在所提供的命名空间中的模块中的路径上运行。您可以在<a href="/notes/esbuild/plugins/plugins/#namespaces" class="">此处阅读更多关于命名空间的信息</a>。</p><h3 id="load-arguments" tabindex="-1"><a class="header-anchor" href="#load-arguments" aria-hidden="true">#</a> Load arguments</h3><p>当eSBuild调用<code>onload</code>注册的回调时，它将提供这些参数，其中包含有关要加载的模块的信息：</p><div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">interface</span> <span class="token class-name">OnLoadArgs</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">namespace</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">pluginData</span><span class="token operator">:</span> any<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> OnLoadArgs <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  Path       <span class="token builtin">string</span>
  Namespace  <span class="token builtin">string</span>
  PluginData <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div></div><ul><li><code>path</code></li></ul><p>这是模块的完全解析的路径。如果命名空间是<code>文件</code>，则应被视为文件系统路径，但否则路径可以采用任何形式。例如，下面的示例<a href="/notes/esbuild/plugins/plugins/#http-plugin" class="">HTTP插件</a>对以<code>HTTP：//</code>开始的路径提供了特殊含义。</p><ul><li><code>namespace</code></li></ul><p>这是模块路径所在的命名空间，如解析该文件的<a href="/notes/esbuild/plugins/plugins/#resolve-callbacks" class="">解析回调</a>所设置。它默认为已加载eSbuild默认行为的模块的<code>文件</code>命名空间。您可以在<a href="/notes/esbuild/plugins/plugins/#namespaces" class="">此处阅读更多关于命名空间的信息</a>。</p><ul><li><code>pluginData</code></li></ul><p>此属性从上一个插件传递，如在插件链中运行的<a href="/notes/esbuild/plugins/plugins/#resolve-callbacks" class="">解析回调</a>设置。</p><h3 id="load-results" tabindex="-1"><a class="header-anchor" href="#load-results" aria-hidden="true">#</a> Load results</h3><p>这是可以使用<code>onload</code>添加的回调来返回的对象来提供模块的内容。如果您想从回调返回而不提供任何内容，则只需返回默认值（在JavaScript和<code>OnloadResult {}</code>中拒绝）。以下是可以返回的可选属性：</p><div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">interface</span> <span class="token class-name">OnLoadResult</span> <span class="token punctuation">{</span>
  contents<span class="token operator">?</span><span class="token operator">:</span> string <span class="token operator">|</span> Uint8Array<span class="token punctuation">;</span>
  errors<span class="token operator">?</span><span class="token operator">:</span> Message<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  loader<span class="token operator">?</span><span class="token operator">:</span> Loader<span class="token punctuation">;</span>
  pluginData<span class="token operator">?</span><span class="token operator">:</span> any<span class="token punctuation">;</span>
  pluginName<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  resolveDir<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  warnings<span class="token operator">?</span><span class="token operator">:</span> Message<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  watchDirs<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  watchFiles<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Message</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">text</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">location</span><span class="token operator">:</span> Location <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token literal-property property">detail</span><span class="token operator">:</span> any<span class="token punctuation">;</span> <span class="token comment">// The original error from a JavaScript plugin, if applicable</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Location</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">file</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">namespace</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">line</span><span class="token operator">:</span> number<span class="token punctuation">;</span> <span class="token comment">// 1-based</span>
  <span class="token literal-property property">column</span><span class="token operator">:</span> number<span class="token punctuation">;</span> <span class="token comment">// 0-based, in bytes</span>
  <span class="token literal-property property">length</span><span class="token operator">:</span> number<span class="token punctuation">;</span> <span class="token comment">// in bytes</span>
  <span class="token literal-property property">lineText</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> OnLoadResult <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  Contents   <span class="token operator">*</span><span class="token builtin">string</span>
  Errors     <span class="token punctuation">[</span><span class="token punctuation">]</span>Message
  Loader     Loader
  PluginData <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
  PluginName <span class="token builtin">string</span>
  ResolveDir <span class="token builtin">string</span>
  Warnings   <span class="token punctuation">[</span><span class="token punctuation">]</span>Message
  WatchDirs  <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>
  WatchFiles <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Message <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  Text     <span class="token builtin">string</span>
  Location <span class="token operator">*</span>Location
  Detail   <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// The original error from a Go plugin, if applicable</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Location <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  File      <span class="token builtin">string</span>
  Namespace <span class="token builtin">string</span>
  Line      <span class="token builtin">int</span> <span class="token comment">// 1-based</span>
  Column    <span class="token builtin">int</span> <span class="token comment">// 0-based, in bytes</span>
  Length    <span class="token builtin">int</span> <span class="token comment">// in bytes</span>
  LineText  <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></div></div><ul><li><code>contents</code></li></ul><p>将其设置为字符串以指定模块的内容。如果设置了这一点，则不会为此已解决的路径运行更多的负载回调。如果未设置为此，eSBuild将继续运行当前登记的负载回调。然后，如果仍未设置内容，则eSBuild将默认为如果已解析路径位于<code>文件</code>命名空间中，则默认默认为从文件系统加载内容。</p><ul><li><code>loader</code></li></ul><p>这告诉esbuild如何解释内容。例如，<a href="/notes/esbuild/plugins/content/#javascript" class="">JS</a> Loader将内容解释为JavaScript，<a href="/notes/esbuild/plugins/content/#css" class="">CSS</a>加载程序将内容解释为CSS。如果未指定，则加载器默认为<code>JS</code>。有关所有内置加载器的完整列表，请参阅<a href="/notes/esbuild/plugins/content/#/" class="">内容类型</a>页面。</p><ul><li><code>resolveDir</code></li></ul><p>这是在将此模块中的导入路径解析为文件系统上的实际路径时，这是要使用的文件系统目录。对于<code>文件</code>命名空间中的模块，此值默认为模块路径的目录部分。否则此值默认为空，除非插件提供一个。如果插件未提供一个，eSbuild的默认行为将无法解析此模块中的任何导入。此目录将传递到在此模块中未解决的导入路径上运行的任何<a href="/notes/esbuild/plugins/plugins/#resolve-callbacks" class="">解决调用</a>。</p><ul><li><code>errors</code> &amp;&amp; <code>warnings</code></li></ul><p>这些属性使您可以将路径解析期间生成的任何日志消息传递给 esbuild，它们将根据当前的<a href="/notes/esbuild/plugins/transform/#log-level" class="">日志级别</a>显示在终端中，并最终出现在最终的构建结果中。例如，如果您正在调用一个库并且该库可以返回错误和/或警告，您将需要使用这些属性转发它们。</p><p>如果您只有一个错误要返回，则不必通过错误传递它。你可以简单地在 JavaScript 中抛出错误，或者在 Go 中将错误对象作为第二个返回值返回。</p><ul><li><code>watchFiles</code> &amp;&amp; <code>watchDirs</code></li></ul><p>这些属性允许您返回额外的文件系统路径，以便 esbuild 的<a href="/notes/esbuild/plugins/transform/#watch" class="">监视模式</a>进行扫描。默认情况下，esbuild 只会扫描提供给 <code>onLoad</code> 插件的路径，并且仅当命名空间是<code>文件</code>时。如果您的插件需要对文件系统中的其他更改做出反应，则需要使用这些属性之一。</p><p>如果 <code>watchFiles</code> 数组中的任何文件自上次构建以来已被更改，则将触发重建。更改检测有点复杂，可能会检查文件内容和/或文件的元数据。</p><p>如果 <code>watchDirs</code> 数组中任何目录的目录条目列表自上次构建以来已更改，也将触发重建。请注意，这不会检查这些目录中任何文件的内容，也不会检查任何子目录。将此视为检查 Unix <code>ls</code> 命令的输出。</p><p>为了健壮性，您应该包括在插件评估期间使用的所有文件系统路径。例如，如果您的插件执行与 <code>require.resolve()</code> 等效的操作，则您需要包含所有“此文件是否存在”检查的路径，而不仅仅是最终路径。否则，可能会创建一个新文件，导致构建过时，但 esbuild 不会检测到它，因为该路径未列出。</p><ul><li><code>pluginName</code></li></ul><p>此属性允许您使用此模块加载操作的另一个名称替换此插件的名称。通过这个插件代理另一个插件很有用。例如，它允许您将单个插件转发到包含多个插件的子进程。您可能不需要使用它。</p><ul><li><code>pluginData</code></li></ul><p>此属性将传递给在插件链中运行的下一个插件。如果您从 <code>onLoad</code> 插件返回它，它将被传递给该文件中任何导入的 <code>onResolve</code> 插件，如果您从 <code>onResolve</code> 插件返回它，则在加载文件时将任意一个传递给 <code>onLoad</code> 插件（这是任意的，因为关系是多对一的）。这对于在不同插件之间传递数据而不必直接协调很有用。</p><h3 id="caching-your-plugin" tabindex="-1"><a class="header-anchor" href="#caching-your-plugin" aria-hidden="true">#</a> Caching your plugin</h3><p>由于 esbuild 速度如此之快，通常情况下插件评估是使用 esbuild 构建时的主要瓶颈。插件评估的缓存由每个插件决定，而不是 esbuild 本身的一部分，因为缓存失效是特定于插件的。如果您正在编写一个需要缓存才能快速运行的慢速插件，则必须自己编写缓存逻辑。</p><p>缓存本质上是一个映射，它记住代表您的插件的转换函数。映射的键通常包含转换函数的输入，映射的值通常包含转换函数的输出。此外，地图通常具有某种形式的最近最少使用的缓存驱逐策略，以避免随着时间的推移尺寸不断增大。</p><p>缓存可以存储在内存中（有利于与 esbuild 的<a href="/notes/esbuild/plugins/transform/#incremental" class="">增量构建 API</a> 一起使用）、磁盘上（有利于跨单独的构建脚本调用进行缓存），甚至可以存储在服务器上（有利于可以在不同开发人员之间共享的非常慢的转换）机）。缓存的存储位置因情况而异，取决于您的插件。</p><p>这是一个简单的缓存示例。假设我们要缓存函数 <code>slowTransform()</code>，该函数将 <code>*.example</code> 格式的文件内容作为输入并将其转换为 JavaScript。当与 esbuild 的<a href="/notes/esbuild/plugins/transform/#incremental" class="">增量构建 API</a> 一起使用时，避免对此函数进行冗余调用的内存缓存可能如下所示：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> examplePlugin <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#39;example&#39;</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span>build<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span>

    build<span class="token punctuation">.</span><span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">{</span> filter<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.example$</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> input <span class="token operator">=</span> <span class="token keyword">await</span> fs<span class="token punctuation">.</span>promises<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>path<span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">)</span>
      <span class="token keyword">let</span> key <span class="token operator">=</span> args<span class="token punctuation">.</span>path
      <span class="token keyword">let</span> value <span class="token operator">=</span> cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>value <span class="token operator">||</span> value<span class="token punctuation">.</span>input <span class="token operator">!==</span> input<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> contents <span class="token operator">=</span> <span class="token function">slowTransform</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span>
        value <span class="token operator">=</span> <span class="token punctuation">{</span> input<span class="token punctuation">,</span> output<span class="token operator">:</span> <span class="token punctuation">{</span> contents <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        cache<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> value<span class="token punctuation">.</span>output
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>关于上述缓存代码的一些重要警告：</p><ul><li>上面的代码中没有缓存驱逐策略。如果将越来越多的键添加到缓存映射中，内存使用量将继续增长。</li></ul><p>为了在一定程度上克服这种限制，<code>输入</code>值存储在缓存<code>值</code>中而不是缓存<code>键</code>中。这意味着更改文件的内容不会泄漏内存，因为密钥仅包含文件路径，而不包含文件内容。更改文件内容只会覆盖先前的缓存条目。对于有人在增量重建之间反复编辑同一个文件并且只是偶尔添加或重命名文件的常见用法，这可能很好。</p><p>但是如果每个构建包含新的唯一路径名（例如，可能包含当前时间的自动生成的临时文件路径），缓存的大小将继续增长。更高级的版本可能会使用最近最少使用的驱逐策略。</p><ul><li>只有当<code>slowTransform()</code> 是一个<code>纯函数</code>（意味着函数的输出仅取决于函数的输入）并且函数的所有输入都以某种方式在对缓存映射的查找中被捕获时，缓存失效才有效。例如，如果转换函数自动读取一些其他文件的内容并且输出也取决于这些文件的内容，那么当这些文件被更改时，缓存将无法失效，因为它们不包含在缓存键中。</li></ul><p>这部分很容易搞砸，所以值得通过一个具体的例子。考虑一个实现 compile-to-CSS 语言的插件。如果该插件通过解析导入的文件来实现<code>@import</code> 规则本身，并将它们捆绑或使任何导出的变量声明可用于导入代码，那么如果它只检查导入文件的内容没有因为更改而更改，则您的插件将不正确导入的文件也可能使缓存无效。</p><p>您可能认为您可以将导入文件的内容添加到缓存键来解决此问题。然而，即使这样也可能是不正确的。例如，这个插件使用 <a href="https://nodejs.org/api/modules.html#modules_require_resolve_request_options" target="_blank" rel="noopener noreferrer">require.resolve()<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 将导入路径解析为绝对文件路径。这是一种常见的方法，因为它使用节点的内置路径解析，可以解析为包内的路径。此函数通常在返回解析路径之前对不同位置的文件进行多次检查。例如，从文件 <code>src/entry.css</code> 导入路径 <code>pkg/file</code> 可能会检查以下位置（是的，节点的包解析算法非常低效）：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>src/node_modules/pkg/file
src/node_modules/pkg/file.css
src/node_modules/pkg/file/package.json
src/node_modules/pkg/file/main
src/node_modules/pkg/file/main.css
src/node_modules/pkg/file/main/index.css
src/node_modules/pkg/file/index.css
node_modules/pkg/file
node_modules/pkg/file.css
node_modules/pkg/file/package.json
node_modules/pkg/file/main
node_modules/pkg/file/main.css
node_modules/pkg/file/main/index.css
node_modules/pkg/file/index.css
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>假设 import <code>pkg/file</code> 最终解析为绝对路径 <code>node_modules/pkg/file/index.css</code>。即使您缓存了导入文件和导入文件的内容并在重用缓存条目之前验证这两个文件的内容仍然相同，如果其他文件中的一个 <code>require.resolve()</code>，缓存条目仍然可能是陈旧的 检查自添加缓存条目以来已创建或删除。正确缓存它本质上涉及始终重新运行所有此类路径解析，即使没有更改任何输入文件并验证也没有更改任何路径解析。</p><ul><li>这些缓存键仅适用于内存缓存。使用相同的缓存键实现文件系统缓存是不正确的。虽然内存缓存保证始终为每个构建运行相同的代码，因为代码也存储在内存中，但文件系统缓存可能会被两个单独的构建访问，每个构建都包含不同的代码。特别是在两次构建之间，<code>slowTransform()</code> 函数的代码可能已更改。</li></ul><p>这可能发生在各种情况下。包含函数 <code>slowTransform()</code> 的包可能已经更新，或者它的一个传递依赖项可能已经更新，即使你由于 npm 处理 semver 的方式固定了包的版本，或者有人可能已经<a href="https://www.npmjs.com/package/patch-package" target="_blank" rel="noopener noreferrer">改变了文件系统上的包内容<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>与此同时，或者转换函数可能正在调用节点 API，并且不同的构建可能会在不同的节点版本上运行。</p><p>如果您想将缓存存储在文件系统上，您应该通过在缓存键中存储转换函数的代码的一些表示来<a href="https://nodejs.org/api/crypto.html#crypto_class_hash" target="_blank" rel="noopener noreferrer">防止对转换函数的代码进行更改<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。这通常是某种形式的散列，其中包含所有相关包中所有相关文件的内容以及潜在的其他详细信息，例如您当前正在运行的节点版本。使所有这些都正确是非常重要的。</p><h2 id="start-callbacks" tabindex="-1"><a class="header-anchor" href="#start-callbacks" aria-hidden="true">#</a> Start callbacks</h2><p>注册开始回调以在新构建开始时收到通知。这会触发所有构建，而不仅仅是初始构建，因此它对于<a href="/notes/esbuild/plugins/transform/#incremental" class="">增量构建</a>、<a href="/notes/esbuild/plugins/transform/#watch" class="">监视模式</a>和<a href="/notes/esbuild/plugins/transform/#serve" class="">服务 API</a> 尤其有用。以下是添加开始回调的方法：</p><div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> examplePlugin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;example&#39;</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">build</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    build<span class="token punctuation">.</span><span class="token function">onStart</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;build started&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">var</span> examplePlugin <span class="token operator">=</span> api<span class="token punctuation">.</span>Plugin<span class="token punctuation">{</span>
  Name<span class="token punctuation">:</span> <span class="token string">&quot;example&quot;</span><span class="token punctuation">,</span>
  Setup<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span>build api<span class="token punctuation">.</span>PluginBuild<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    build<span class="token punctuation">.</span><span class="token function">OnStart</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnStartResult<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      fmt<span class="token punctuation">.</span><span class="token function">Fprintf</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stderr<span class="token punctuation">,</span> <span class="token string">&quot;build started\n&quot;</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnStartResult<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></div></div><p>您不应该使用 start 回调进行初始化，因为它可以多次运行。如果你想初始化一些东西，只需将你的插件初始化代码直接放在 <code>setup</code> 函数中。</p><p>开始回调可以是<code>异步</code>的并且可以返回一个承诺。但是，构建在开始之前不会等待 promise 得到解决，因此慢启动回调不一定会减慢构建速度。所有启动回调也同时运行，而不是连续运行。返回的 Promise 纯粹用于错误报告，当 start 回调需要执行可能失败或可能产生警告的异步操作时很重要。如果您的插件需要在运行任何解析或加载回调之前等待启动回调中的异步任务完成，您将需要在该异步任务上阻止<a href="/notes/esbuild/plugins/plugins/#resolve-callbacks" class="">解析</a>或<a href="/notes/esbuild/plugins/plugins/#load-callbacks" class="">加载</a>回调。</p><p>请注意，开始回调不能改变构建选项。初始构建选项只能在 <code>setup</code> 函数中修改，并且在 <code>setup</code> 返回后使用。第一个构建之后的所有构建都重用相同的<a href="/notes/esbuild/plugins/plugins/#build-options" class="">初始选项</a>，因此永远不会重新使用初始选项，并且忽略在 start 回调中完成的对 <code>build.initialOptions</code> 的修改。</p><h2 id="end-callbacks" tabindex="-1"><a class="header-anchor" href="#end-callbacks" aria-hidden="true">#</a> End callbacks</h2><p>注册结束回调以在新构建结束时收到通知。这会触发所有构建，而不仅仅是初始构建，因此它对于<a href="/notes/esbuild/plugins/transform/#incremental" class="">增量构建</a>、<a href="/notes/esbuild/plugins/transform/#watch" class="">监视模式</a>和<a href="/notes/esbuild/plugins/transform/#serve" class="">服务 API</a> 尤其有用。添加结束回调的方法如下：</p><div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> examplePlugin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;example&#39;</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">build</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    build<span class="token punctuation">.</span><span class="token function">onEnd</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">build ended with </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">.</span>errors<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> errors</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">var</span> examplePlugin <span class="token operator">=</span> api<span class="token punctuation">.</span>Plugin<span class="token punctuation">{</span>
  Name<span class="token punctuation">:</span> <span class="token string">&quot;example&quot;</span><span class="token punctuation">,</span>
  Setup<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span>build api<span class="token punctuation">.</span>PluginBuild<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    build<span class="token punctuation">.</span><span class="token function">OnEnd</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>result <span class="token operator">*</span>api<span class="token punctuation">.</span>BuildResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      fmt<span class="token punctuation">.</span><span class="token function">Fprintf</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stderr<span class="token punctuation">,</span> <span class="token string">&quot;build ended with %d errors\n&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></div></div><p>所有结束回调都是串行运行的，并且每个回调都可以访问最终构建结果。它可以在返回之前修改构建结果，并且可以通过返回一个 promise 来延迟构建的结束。如果您希望能够检查构建图，您应该在<a href="/notes/esbuild/plugins/plugins/#build-options" class="">初始选项</a>上启用<a href="/notes/esbuild/plugins/transform/#metafile" class="">元文件</a>设置，构建图将作为构建结果对象的<code>元文件</code>属性返回。</p><h2 id="accessing-build-options" tabindex="-1"><a class="header-anchor" href="#accessing-build-options" aria-hidden="true">#</a> Accessing build options</h2><p>插件可以从设置方法中访问初始<code>构建</code>选项。这使您可以检查构建的配置方式以及在构建开始之前修改构建选项。下面是一个例子：</p><div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> examplePlugin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;auto-node-env&#39;</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">build</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> options <span class="token operator">=</span> build<span class="token punctuation">.</span>initialOptions
    options<span class="token punctuation">.</span>define <span class="token operator">=</span> options<span class="token punctuation">.</span>define <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    options<span class="token punctuation">.</span>define<span class="token punctuation">[</span><span class="token string">&#39;p<wbr>rocess.env.NODE_ENV&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span>
      options<span class="token punctuation">.</span>minify <span class="token operator">?</span> <span class="token string">&#39;&quot;production&quot;&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;&quot;development&quot;&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">var</span> examplePlugin <span class="token operator">=</span> api<span class="token punctuation">.</span>Plugin<span class="token punctuation">{</span>
  Name<span class="token punctuation">:</span> <span class="token string">&quot;auto-node-env&quot;</span><span class="token punctuation">,</span>
  Setup<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span>build api<span class="token punctuation">.</span>PluginBuild<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    options <span class="token operator">:=</span> build<span class="token punctuation">.</span>InitialOptions
    <span class="token keyword">if</span> options<span class="token punctuation">.</span>Define <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
      options<span class="token punctuation">.</span>Define <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> options<span class="token punctuation">.</span>MinifyWhitespace <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>MinifyIdentifiers <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>MinifySyntax <span class="token punctuation">{</span>
      options<span class="token punctuation">.</span>Define<span class="token punctuation">[</span><span class="token string">`p<wbr>rocess.env.NODE_ENV`</span><span class="token punctuation">]</span> <span class="token operator">=</span> `<span class="token string">&quot;production&quot;</span><span class="token string">`
    } else {
      options.Define[`</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>NODE_ENV<span class="token string">`] = `</span>&quot;development&quot;`
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></div></div><p>请注意，在构建开始后对构建选项的修改不会影响构建。特别是，如果插件在第一次构建开始后改变构建选项对象，<a href="/notes/esbuild/plugins/transform/#incremental" class="">增量重建</a>、<a href="/notes/esbuild/plugins/transform/#watch" class="">观察模式</a>和<a href="/notes/esbuild/plugins/transform/#serve" class="">服务模式</a>不会更新它们的构建选项。</p><h2 id="example-plugins" tabindex="-1"><a class="header-anchor" href="#example-plugins" aria-hidden="true">#</a> Example plugins</h2><p>下面的示例插件旨在让您了解可以使用插件 API 执行的不同类型的操作。</p><h3 id="http-plugin" tabindex="-1"><a class="header-anchor" href="#http-plugin" aria-hidden="true">#</a> HTTP plugin</h3><p><em><strong>此示例演示：使用文件系统路径以外的路径格式、特定于命名空间的路径解析、同时使用解析和加载回调。</strong></em></p><p>此插件允许您将 HTTP URL 导入 JavaScript 代码。代码将在构建时自动下载。它启用以下工作流程：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> zip <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;https://unpkg.com/lodash-es@4.17.15/lodash.js&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">zip</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;b&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这可以通过以下插件来完成。请注意，对于实际使用，下载应该被缓存，但为了简洁起见，本示例中省略了缓存：</p><div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> httpPlugin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;http&#39;</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">build</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> https <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;https&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span>

    <span class="token comment">// Intercept import paths starting with &quot;http:&quot; and &quot;https:&quot; so</span>
    <span class="token comment">// esbuild doesn&#39;t attempt to map them to a file system location.</span>
    <span class="token comment">// Tag them with the &quot;http-url&quot; namespace to associate them with</span>
    <span class="token comment">// this plugin.</span>
    build<span class="token punctuation">.</span><span class="token function">onResolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^https?:\/\/</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">args</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> args<span class="token punctuation">.</span>path<span class="token punctuation">,</span>
      <span class="token literal-property property">namespace</span><span class="token operator">:</span> <span class="token string">&#39;http-url&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">// We also want to intercept all import paths inside downloaded</span>
    <span class="token comment">// files and resolve them against the original URL. All of these</span>
    <span class="token comment">// files will be in the &quot;http-url&quot; namespace. Make sure to keep</span>
    <span class="token comment">// the newly resolved URL in the &quot;http-url&quot; namespace so imports</span>
    <span class="token comment">// inside it will also be resolved as URLs recursively.</span>
    build<span class="token punctuation">.</span><span class="token function">onResolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">namespace</span><span class="token operator">:</span> <span class="token string">&#39;http-url&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">args</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>path<span class="token punctuation">,</span> args<span class="token punctuation">.</span>importer<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">namespace</span><span class="token operator">:</span> <span class="token string">&#39;http-url&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">// When a URL is loaded, we want to actually download the content</span>
    <span class="token comment">// from the internet. This has just enough logic to be able to</span>
    <span class="token comment">// handle the example import from unpkg.com but in reality this</span>
    <span class="token comment">// would probably need to be more complex.</span>
    build<span class="token punctuation">.</span><span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">namespace</span><span class="token operator">:</span> <span class="token string">&#39;http-url&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> contents <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">function</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Downloading: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
          <span class="token keyword">let</span> lib <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&#39;https&#39;</span><span class="token punctuation">)</span> <span class="token operator">?</span> https <span class="token operator">:</span> http
          <span class="token keyword">let</span> req <span class="token operator">=</span> lib<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">301</span><span class="token punctuation">,</span> <span class="token number">302</span><span class="token punctuation">,</span> <span class="token number">307</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>location<span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
              req<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">let</span> chunks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
              res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">,</span> <span class="token parameter">chunk</span> <span class="token operator">=&gt;</span> chunks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">)</span>
              res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;end&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span>Buffer<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>chunks<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">GET </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> failed: status </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>res<span class="token punctuation">.</span>statusCode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span> reject<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token function">fetch</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>path<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> contents <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>httpPlugin<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;io/ioutil&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;net/http&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;net/url&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">var</span> httpPlugin <span class="token operator">=</span> api<span class="token punctuation">.</span>Plugin<span class="token punctuation">{</span>
  Name<span class="token punctuation">:</span> <span class="token string">&quot;http&quot;</span><span class="token punctuation">,</span>
  Setup<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span>build api<span class="token punctuation">.</span>PluginBuild<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Intercept import paths starting with &quot;http:&quot; and &quot;https:&quot; so</span>
    <span class="token comment">// esbuild doesn&#39;t attempt to map them to a file system location.</span>
    <span class="token comment">// Tag them with the &quot;http-url&quot; namespace to associate them with</span>
    <span class="token comment">// this plugin.</span>
    build<span class="token punctuation">.</span><span class="token function">OnResolve</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnResolveOptions<span class="token punctuation">{</span>Filter<span class="token punctuation">:</span> <span class="token string">`^https?://`</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">func</span><span class="token punctuation">(</span>args api<span class="token punctuation">.</span>OnResolveArgs<span class="token punctuation">)</span> <span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnResolveResult<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnResolveResult<span class="token punctuation">{</span>
          Path<span class="token punctuation">:</span>      args<span class="token punctuation">.</span>Path<span class="token punctuation">,</span>
          Namespace<span class="token punctuation">:</span> <span class="token string">&quot;http-url&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// We also want to intercept all import paths inside downloaded</span>
    <span class="token comment">// files and resolve them against the original URL. All of these</span>
    <span class="token comment">// files will be in the &quot;http-url&quot; namespace. Make sure to keep</span>
    <span class="token comment">// the newly resolved URL in the &quot;http-url&quot; namespace so imports</span>
    <span class="token comment">// inside it will also be resolved as URLs recursively.</span>
    build<span class="token punctuation">.</span><span class="token function">OnResolve</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnResolveOptions<span class="token punctuation">{</span>Filter<span class="token punctuation">:</span> <span class="token string">&quot;.*&quot;</span><span class="token punctuation">,</span> Namespace<span class="token punctuation">:</span> <span class="token string">&quot;http-url&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">func</span><span class="token punctuation">(</span>args api<span class="token punctuation">.</span>OnResolveArgs<span class="token punctuation">)</span> <span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnResolveResult<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        base<span class="token punctuation">,</span> err <span class="token operator">:=</span> url<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>Importer<span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnResolveResult<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> err
        <span class="token punctuation">}</span>
        relative<span class="token punctuation">,</span> err <span class="token operator">:=</span> url<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>Path<span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnResolveResult<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> err
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnResolveResult<span class="token punctuation">{</span>
          Path<span class="token punctuation">:</span>      base<span class="token punctuation">.</span><span class="token function">ResolveReference</span><span class="token punctuation">(</span>relative<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          Namespace<span class="token punctuation">:</span> <span class="token string">&quot;http-url&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// When a URL is loaded, we want to actually download the content</span>
    <span class="token comment">// from the internet. This has just enough logic to be able to</span>
    <span class="token comment">// handle the example import from unpkg.com but in reality this</span>
    <span class="token comment">// would probably need to be more complex.</span>
    build<span class="token punctuation">.</span><span class="token function">OnLoad</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnLoadOptions<span class="token punctuation">{</span>Filter<span class="token punctuation">:</span> <span class="token string">&quot;.*&quot;</span><span class="token punctuation">,</span> Namespace<span class="token punctuation">:</span> <span class="token string">&quot;http-url&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">func</span><span class="token punctuation">(</span>args api<span class="token punctuation">.</span>OnLoadArgs<span class="token punctuation">)</span> <span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnLoadResult<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">,</span> err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>Path<span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnLoadResult<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> err
        <span class="token punctuation">}</span>
        <span class="token keyword">defer</span> res<span class="token punctuation">.</span>Body<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        bytes<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadAll</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>Body<span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnLoadResult<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> err
        <span class="token punctuation">}</span>
        contents <span class="token operator">:=</span> <span class="token function">string</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>
        <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnLoadResult<span class="token punctuation">{</span>Contents<span class="token punctuation">:</span> <span class="token operator">&amp;</span>contents<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Outfile<span class="token punctuation">:</span>     <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
    Plugins<span class="token punctuation">:</span>     <span class="token punctuation">[</span><span class="token punctuation">]</span>api<span class="token punctuation">.</span>Plugin<span class="token punctuation">{</span>httpPlugin<span class="token punctuation">}</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>       <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br></div></div></div></div><p>该插件首先使用解析器将 <code>http://</code> 和 <code>https://</code> URL 移动到 <code>http-url</code> 命名空间。设置命名空间会告诉 esbuild 不要将这些路径视为文件系统路径。然后，<code>http-url</code> 命名空间的加载器下载模块并将内容返回给 esbuild。从那里，<code>http-url</code> 命名空间中模块内的导入路径的另一个解析器获取相对路径，并通过针对导入模块的 URL 解析它们将它们转换为完整的 URL。然后反馈到加载器，允许下载的模块递归下载其他模块。</p><h3 id="webassembly-plugin" tabindex="-1"><a class="header-anchor" href="#webassembly-plugin" aria-hidden="true">#</a> WebAssembly plugin</h3><p><em><strong>这个例子演示：使用二进制数据，创建虚拟；模块使用 import 语句，在不同的命名空间中重新使用相同的路径。</strong></em></p><p>这个插件允许你将 <code>.wasm</code> 文件导入 JavaScript 代码。它不会自己生成 WebAssembly 文件；这可以通过其他工具完成，也可以通过修改此示例插件来满足您的需求。它启用以下工作流程：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> load <span class="token keyword">from</span> <span class="token string">&#39;./example.wasm&#39;</span>
<span class="token function">load</span><span class="token punctuation">(</span>imports<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">exports</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>当您导入 <code>.wasm</code> 文件时，此插件会在 <code>wasm-stub</code> 命名空间中生成一个虚拟 JavaScript 模块，该模块具有单个函数，用于加载作为默认导出导出的 WebAssembly 模块。该存根模块如下所示：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> wasm <span class="token keyword">from</span> <span class="token string">&#39;/path/to/example.wasm&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">imports</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  WebAssembly<span class="token punctuation">.</span><span class="token function">instantiate</span><span class="token punctuation">(</span>wasm<span class="token punctuation">,</span> imports<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token parameter">result</span> <span class="token operator">=&gt;</span> result<span class="token punctuation">.</span>instance<span class="token punctuation">.</span>exports<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>然后该存根模块使用 esbuild 的内置<a href="/notes/esbuild/plugins/content/#binary" class="">二进制</a>加载器将 WebAssembly 文件本身作为 <code>wasm-binary</code> 命名空间中的另一个模块导入。这意味着导入 <code>.wasm</code> 文件实际上会生成两个虚拟模块。这是插件的代码：</p><div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> wasmPlugin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;wasm&#39;</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">build</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span>

    <span class="token comment">// Resolve &quot;.wasm&quot; files to a path with a namespace</span>
    build<span class="token punctuation">.</span><span class="token function">onResolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.wasm$</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">args</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// If this is the import inside the stub module, import the</span>
      <span class="token comment">// binary itself. Put the path in the &quot;wasm-binary&quot; namespace</span>
      <span class="token comment">// to tell our binary load callback to load the binary file.</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>namespace <span class="token operator">===</span> <span class="token string">&#39;wasm-stub&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">path</span><span class="token operator">:</span> args<span class="token punctuation">.</span>path<span class="token punctuation">,</span>
          <span class="token literal-property property">namespace</span><span class="token operator">:</span> <span class="token string">&#39;wasm-binary&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// Otherwise, generate the JavaScript stub module for this</span>
      <span class="token comment">// &quot;.wasm&quot; file. Put it in the &quot;wasm-stub&quot; namespace to tell</span>
      <span class="token comment">// our stub load callback to fill it with JavaScript.</span>
      <span class="token comment">//</span>
      <span class="token comment">// Resolve relative paths to absolute paths here since this</span>
      <span class="token comment">// resolve callback is given &quot;resolveDir&quot;, the directory to</span>
      <span class="token comment">// resolve imports against.</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>resolveDir <span class="token operator">===</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token comment">// Ignore unresolvable paths</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">isAbsolute</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>path<span class="token punctuation">)</span> <span class="token operator">?</span> args<span class="token punctuation">.</span>path <span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>resolveDir<span class="token punctuation">,</span> args<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">namespace</span><span class="token operator">:</span> <span class="token string">&#39;wasm-stub&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// Virtual modules in the &quot;wasm-stub&quot; namespace are filled with</span>
    <span class="token comment">// the JavaScript code for compiling the WebAssembly binary. The</span>
    <span class="token comment">// binary itself is imported from a second virtual module.</span>
    build<span class="token punctuation">.</span><span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">namespace</span><span class="token operator">:</span> <span class="token string">&#39;wasm-stub&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">contents</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">import wasm from </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
        export default (imports) =&gt;
          WebAssembly.instantiate(wasm, imports).then(
            result =&gt; result.instance.exports)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">// Virtual modules in the &quot;wasm-binary&quot; namespace contain the</span>
    <span class="token comment">// actual bytes of the WebAssembly file. This uses esbuild&#39;s</span>
    <span class="token comment">// built-in &quot;binary&quot; loader instead of manually embedding the</span>
    <span class="token comment">// binary data inside JavaScript code ourselves.</span>
    build<span class="token punctuation">.</span><span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">namespace</span><span class="token operator">:</span> <span class="token string">&#39;wasm-binary&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">contents</span><span class="token operator">:</span> <span class="token keyword">await</span> fs<span class="token punctuation">.</span>promises<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;binary&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>wasmPlugin<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;encoding/json&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;io/ioutil&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;path/filepath&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">var</span> wasmPlugin <span class="token operator">=</span> api<span class="token punctuation">.</span>Plugin<span class="token punctuation">{</span>
  Name<span class="token punctuation">:</span> <span class="token string">&quot;wasm&quot;</span><span class="token punctuation">,</span>
  Setup<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span>build api<span class="token punctuation">.</span>PluginBuild<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Resolve &quot;.wasm&quot; files to a path with a namespace</span>
    build<span class="token punctuation">.</span><span class="token function">OnResolve</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnResolveOptions<span class="token punctuation">{</span>Filter<span class="token punctuation">:</span> <span class="token string">`\.wasm$`</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">func</span><span class="token punctuation">(</span>args api<span class="token punctuation">.</span>OnResolveArgs<span class="token punctuation">)</span> <span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnResolveResult<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// If this is the import inside the stub module, import the</span>
        <span class="token comment">// binary itself. Put the path in the &quot;wasm-binary&quot; namespace</span>
        <span class="token comment">// to tell our binary load callback to load the binary file.</span>
        <span class="token keyword">if</span> args<span class="token punctuation">.</span>Namespace <span class="token operator">==</span> <span class="token string">&quot;wasm-stub&quot;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnResolveResult<span class="token punctuation">{</span>
            Path<span class="token punctuation">:</span>      args<span class="token punctuation">.</span>Path<span class="token punctuation">,</span>
            Namespace<span class="token punctuation">:</span> <span class="token string">&quot;wasm-binary&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Otherwise, generate the JavaScript stub module for this</span>
        <span class="token comment">// &quot;.wasm&quot; file. Put it in the &quot;wasm-stub&quot; namespace to tell</span>
        <span class="token comment">// our stub load callback to fill it with JavaScript.</span>
        <span class="token comment">//</span>
        <span class="token comment">// Resolve relative paths to absolute paths here since this</span>
        <span class="token comment">// resolve callback is given &quot;resolveDir&quot;, the directory to</span>
        <span class="token comment">// resolve imports against.</span>
        <span class="token keyword">if</span> args<span class="token punctuation">.</span>ResolveDir <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnResolveResult<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span> <span class="token comment">// Ignore unresolvable paths</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token operator">!</span>filepath<span class="token punctuation">.</span><span class="token function">IsAbs</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>Path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          args<span class="token punctuation">.</span>Path <span class="token operator">=</span> filepath<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>ResolveDir<span class="token punctuation">,</span> args<span class="token punctuation">.</span>Path<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnResolveResult<span class="token punctuation">{</span>
          Path<span class="token punctuation">:</span>      args<span class="token punctuation">.</span>Path<span class="token punctuation">,</span>
          Namespace<span class="token punctuation">:</span> <span class="token string">&quot;wasm-stub&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// Virtual modules in the &quot;wasm-stub&quot; namespace are filled with</span>
    <span class="token comment">// the JavaScript code for compiling the WebAssembly binary. The</span>
    <span class="token comment">// binary itself is imported from a second virtual module.</span>
    build<span class="token punctuation">.</span><span class="token function">OnLoad</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnLoadOptions<span class="token punctuation">{</span>Filter<span class="token punctuation">:</span> <span class="token string">`.*`</span><span class="token punctuation">,</span> Namespace<span class="token punctuation">:</span> <span class="token string">&quot;wasm-stub&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">func</span><span class="token punctuation">(</span>args api<span class="token punctuation">.</span>OnLoadArgs<span class="token punctuation">)</span> <span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnLoadResult<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        bytes<span class="token punctuation">,</span> err <span class="token operator">:=</span> json<span class="token punctuation">.</span><span class="token function">Marshal</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>Path<span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnLoadResult<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> err
        <span class="token punctuation">}</span>
        contents <span class="token operator">:=</span> <span class="token string">`import wasm from `</span> <span class="token operator">+</span> <span class="token function">string</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">`
          export default (imports) =&gt;
            WebAssembly.instantiate(wasm, imports).then(
              result =&gt; result.instance.exports)`</span>
        <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnLoadResult<span class="token punctuation">{</span>Contents<span class="token punctuation">:</span> <span class="token operator">&amp;</span>contents<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// Virtual modules in the &quot;wasm-binary&quot; namespace contain the</span>
    <span class="token comment">// actual bytes of the WebAssembly file. This uses esbuild&#39;s</span>
    <span class="token comment">// built-in &quot;binary&quot; loader instead of manually embedding the</span>
    <span class="token comment">// binary data inside JavaScript code ourselves.</span>
    build<span class="token punctuation">.</span><span class="token function">OnLoad</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnLoadOptions<span class="token punctuation">{</span>Filter<span class="token punctuation">:</span> <span class="token string">`.*`</span><span class="token punctuation">,</span> Namespace<span class="token punctuation">:</span> <span class="token string">&quot;wasm-binary&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">func</span><span class="token punctuation">(</span>args api<span class="token punctuation">.</span>OnLoadArgs<span class="token punctuation">)</span> <span class="token punctuation">(</span>api<span class="token punctuation">.</span>OnLoadResult<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        bytes<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadFile</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>Path<span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnLoadResult<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> err
        <span class="token punctuation">}</span>
        contents <span class="token operator">:=</span> <span class="token function">string</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>
        <span class="token keyword">return</span> api<span class="token punctuation">.</span>OnLoadResult<span class="token punctuation">{</span>
          Contents<span class="token punctuation">:</span> <span class="token operator">&amp;</span>contents<span class="token punctuation">,</span>
          Loader<span class="token punctuation">:</span>   api<span class="token punctuation">.</span>LoaderBinary<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Outfile<span class="token punctuation">:</span>     <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
    Plugins<span class="token punctuation">:</span>     <span class="token punctuation">[</span><span class="token punctuation">]</span>api<span class="token punctuation">.</span>Plugin<span class="token punctuation">{</span>wasmPlugin<span class="token punctuation">}</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>       <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br></div></div></div></div><p>该插件分多个步骤工作。首先，解析回调捕获普通模块中的 <code>.wasm</code> 路径并将它们移动到 <code>wasm-stub</code> 命名空间。然后，<code>wasm-stub</code> 命名空间的加载回调生成一个 JavaScript 存根模块，该模块导出加载器函数并导入 <code>.wasm</code> 路径。这将再次调用解析回调，这次将路径移动到 <code>wasm-binary</code> 命名空间。然后 <code>wasm-binary</code> 命名空间的第二个加载回调导致使用<code>二进制</code>加载器加载 WebAssembly 文件，它告诉 esbuild 将文件本身嵌入到包中。</p><h3 id="svelte-plugin" tabindex="-1"><a class="header-anchor" href="#svelte-plugin" aria-hidden="true">#</a> Svelte plugin</h3><p><em><strong>此示例演示：支持编译为 JavaScript 语言、报告警告和错误、集成源映射。</strong></em></p><p>此插件允许您捆绑来自 Svelte 框架的 <code>.svelte</code> 文件。您使用类似于 HTML 的语法编写代码，然后由 <a href="https://svelte.dev/" target="_blank" rel="noopener noreferrer">Svelte<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 编译器将其转换为 JavaScript。 Svelte 代码如下所示：</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{a}</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{b}</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{a} + {b} = {a + b}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>使用 Svelte 编译器编译此代码会生成一个 JavaScript 模块，该模块依赖于 <code>svelte/内部包</code>，并使用默认<code>导出</code>将组件导出为单个类。这意味着 <code>.svelte</code> 文件可以独立编译，这使得 Svelte 非常适合 esbuild 插件。这个插件是通过像这样导入 <code>.svelte</code> 文件来触发的：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> Button <span class="token keyword">from</span> <span class="token string">&#39;./button.svelte&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>这是该插件的代码（该插件没有 Go 版本，因为 Svelte 编译器是用 JavaScript 编写的）：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> sveltePlugin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;svelte&#39;</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">build</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> svelte <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;svelte/compiler&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span>

    build<span class="token punctuation">.</span><span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">filter</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.svelte$</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// This converts a message in Svelte&#39;s format to esbuild&#39;s format</span>
      <span class="token keyword">let</span> <span class="token function-variable function">convertMessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> message<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> location
        <span class="token keyword">if</span> <span class="token punctuation">(</span>start <span class="token operator">&amp;&amp;</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> lineText <span class="token operator">=</span> source<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\r\n|\r|\n</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">[</span>start<span class="token punctuation">.</span>line <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
          <span class="token keyword">let</span> lineEnd <span class="token operator">=</span> start<span class="token punctuation">.</span>line <span class="token operator">===</span> end<span class="token punctuation">.</span>line <span class="token operator">?</span> end<span class="token punctuation">.</span>column <span class="token operator">:</span> lineText<span class="token punctuation">.</span>length
          location <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">file</span><span class="token operator">:</span> filename<span class="token punctuation">,</span>
            <span class="token literal-property property">line</span><span class="token operator">:</span> start<span class="token punctuation">.</span>line<span class="token punctuation">,</span>
            <span class="token literal-property property">column</span><span class="token operator">:</span> start<span class="token punctuation">.</span>column<span class="token punctuation">,</span>
            <span class="token literal-property property">length</span><span class="token operator">:</span> lineEnd <span class="token operator">-</span> start<span class="token punctuation">.</span>column<span class="token punctuation">,</span>
            lineText<span class="token punctuation">,</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">text</span><span class="token operator">:</span> message<span class="token punctuation">,</span> location <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// Load the file from the file system</span>
      <span class="token keyword">let</span> source <span class="token operator">=</span> <span class="token keyword">await</span> fs<span class="token punctuation">.</span>promises<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>path<span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">)</span>
      <span class="token keyword">let</span> filename <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> args<span class="token punctuation">.</span>path<span class="token punctuation">)</span>

      <span class="token comment">// Convert Svelte syntax to JavaScript</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> <span class="token punctuation">{</span> js<span class="token punctuation">,</span> warnings <span class="token punctuation">}</span> <span class="token operator">=</span> svelte<span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> <span class="token punctuation">{</span> filename <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> contents <span class="token operator">=</span> js<span class="token punctuation">.</span>code <span class="token operator">+</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">//# sourceMappingURL=</span><span class="token template-punctuation string">`</span></span> <span class="token operator">+</span> js<span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">toUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> contents<span class="token punctuation">,</span> <span class="token literal-property property">warnings</span><span class="token operator">:</span> warnings<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>convertMessage<span class="token punctuation">)</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">convertMessage</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>sveltePlugin<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><p>这个插件只需要一个加载回调，而不是解析回调，因为它足够简单，它只需要将加载的代码转换成 JavaScript 而不用担心代码来自哪里。</p><p>它将 <code>//# sourceMappingURL=</code> 注释附加到生成的 JavaScript 以告诉 esbuild 如何将生成的 JavaScript 映射回原始源代码。如果在构建期间启用了源映射，esbuild 将使用它来确保最终源映射中生成的位置一直映射回原始 Svelte 文件，而不是中间 JavaScript 代码。</p><h2 id="plugin-api-limitations" tabindex="-1"><a class="header-anchor" href="#plugin-api-limitations" aria-hidden="true">#</a> Plugin API limitations</h2><p>此 API 并不打算涵盖所有用例。不可能连接到捆绑过程的每个部分。例如，目前无法直接修改 AST。存在此限制是为了保持 esbuild 的出色性能特征，并避免暴露过多的 API 表面，这将是维护负担并会阻止涉及更改 AST 的改进。</p><p>将 esbuild 视为网络的“链接器”的一种方式。就像本地代码的链接器一样，esbuild 的工作是获取一组文件，解析和绑定它们之间的引用，并生成一个包含所有链接在一起的代码的单个文件。插件的工作是生成最终被链接的单个文件。</p><p>esbuild 中的插件在相对范围内且仅自定义构建的一小部分时效果最佳。例如，自定义格式（例如 YAML）的特殊配置文件的插件就非常合适。你使用的插件越多，你的构建就会越慢，特别是如果你的插件是用 JavaScript 编写的。如果插件适用于您构建中的每个文件，那么您的构建可能会非常缓慢。如果缓存适用，则必须由插件本身完成。</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: dean@57blocks.com">DeanSui</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/notes/assets/app.41ff10d5.js" defer></script>
  </body>
</html>
