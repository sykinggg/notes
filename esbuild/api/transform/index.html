<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Transform &amp; Build Api | 前端 学习</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <link rel="manifest" href="/notes/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="君子藏器于身 待时而动 天下有道则见 无道则隐">
    <meta property="og:url" content="/notes/esbuild/api/transform.html">
    <meta property="og:site_name" content="前端 学习">
    <meta property="og:title" content="Transform & Build Api">
    <meta property="og:description" content="Transform & Build Api Transform Api 转换 API 调用对单个字符串进行操作，而无需访问文件系统。这使其非常适合在没有文件系统的环境（例如浏览器）中使用或作为其他工具链的一部分使用。下面是一个简单的转换： 如果未提供输入文件且不存在 --bundle 标志，则命令行界面将使用此 API 调用。在这种情况下，输入字符串来自标准">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="前端 学习">
    <meta property="article:author" content="sy">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <link rel="preload" href="/notes/assets/css/0.styles.5a16df27.css" as="style"><link rel="preload" href="/notes/assets/js/app.c7721e7f.js" as="script"><link rel="preload" href="/notes/assets/js/vendors~layout-Layout.54a145ed.js" as="script"><link rel="preload" href="/notes/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.f2412bde.js" as="script"><link rel="preload" href="/notes/assets/js/page-TransformBuildApi.27ba10e7.js" as="script"><link rel="preload" href="/notes/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.8a19680c.js" as="script"><link rel="prefetch" href="/notes/assets/js/643.5b858ea3.js"><link rel="prefetch" href="/notes/assets/js/644.ad887603.js"><link rel="prefetch" href="/notes/assets/js/645.8722e443.js"><link rel="prefetch" href="/notes/assets/js/layout-Blog.eb05d08e.js"><link rel="prefetch" href="/notes/assets/js/layout-Layout.a53d4054.js"><link rel="prefetch" href="/notes/assets/js/layout-NotFound.932ab794.js"><link rel="prefetch" href="/notes/assets/js/layout-Slide.716eb990.js"><link rel="prefetch" href="/notes/assets/js/page-$mount.2abe53f3.js"><link rel="prefetch" href="/notes/assets/js/page--0036d571.2c479ddc.js"><link rel="prefetch" href="/notes/assets/js/page--022ad8a1.d68e66b4.js"><link rel="prefetch" href="/notes/assets/js/page--049c9a9f.22556b8e.js"><link rel="prefetch" href="/notes/assets/js/page--050f4996.78af33be.js"><link rel="prefetch" href="/notes/assets/js/page--05ca34d9.0ea87582.js"><link rel="prefetch" href="/notes/assets/js/page--06138101.7abfc024.js"><link rel="prefetch" href="/notes/assets/js/page--078553ea.1046cdac.js"><link rel="prefetch" href="/notes/assets/js/page--07c5ad21.c6709cec.js"><link rel="prefetch" href="/notes/assets/js/page--07f0b7af.6be7bdb7.js"><link rel="prefetch" href="/notes/assets/js/page--08402fbe.34c2ac83.js"><link rel="prefetch" href="/notes/assets/js/page--0a137961.69c24388.js"><link rel="prefetch" href="/notes/assets/js/page--0b6292d3.3fb88369.js"><link rel="prefetch" href="/notes/assets/js/page--0b81571e.18165ff5.js"><link rel="prefetch" href="/notes/assets/js/page--0c7d4a27.eecf40eb.js"><link rel="prefetch" href="/notes/assets/js/page--0d936993.d19430ef.js"><link rel="prefetch" href="/notes/assets/js/page--0e573275.8756da8f.js"><link rel="prefetch" href="/notes/assets/js/page--0f2ef575.4fc1b4d8.js"><link rel="prefetch" href="/notes/assets/js/page--0fb13921.02521cc9.js"><link rel="prefetch" href="/notes/assets/js/page--0fe0372e.804ad64f.js"><link rel="prefetch" href="/notes/assets/js/page--10902ffe.32e9da79.js"><link rel="prefetch" href="/notes/assets/js/page--12bc566b.c5775f29.js"><link rel="prefetch" href="/notes/assets/js/page--135834a1.e129ceb2.js"><link rel="prefetch" href="/notes/assets/js/page--15961e72.0bd93e52.js"><link rel="prefetch" href="/notes/assets/js/page--17036b33.eafda5c0.js"><link rel="prefetch" href="/notes/assets/js/page--172068b9.8ebfb996.js"><link rel="prefetch" href="/notes/assets/js/page--18126b85.12fb3413.js"><link rel="prefetch" href="/notes/assets/js/page--19a1b422.6a88783c.js"><link rel="prefetch" href="/notes/assets/js/page--1a00028a.a9cb4b98.js"><link rel="prefetch" href="/notes/assets/js/page--1c6aa5c2.6149c8b8.js"><link rel="prefetch" href="/notes/assets/js/page--1fece121.9facef93.js"><link rel="prefetch" href="/notes/assets/js/page--201cfbe1.fe0f9969.js"><link rel="prefetch" href="/notes/assets/js/page--2095282b.2114b91e.js"><link rel="prefetch" href="/notes/assets/js/page--21792c01.45b9398a.js"><link rel="prefetch" href="/notes/assets/js/page--226f1079.75a7e31c.js"><link rel="prefetch" href="/notes/assets/js/page--2518076e.c7d43e5e.js"><link rel="prefetch" href="/notes/assets/js/page--25cb6e5f.a11d0705.js"><link rel="prefetch" href="/notes/assets/js/page--2616bc7e.8a98e2b0.js"><link rel="prefetch" href="/notes/assets/js/page--27a556ad.f8c8101f.js"><link rel="prefetch" href="/notes/assets/js/page--27c21126.2e864756.js"><link rel="prefetch" href="/notes/assets/js/page--28435cbb.42ca783c.js"><link rel="prefetch" href="/notes/assets/js/page--28c148fe.6dd11541.js"><link rel="prefetch" href="/notes/assets/js/page--2ae50662.49a24da6.js"><link rel="prefetch" href="/notes/assets/js/page--2c665981.64d86697.js"><link rel="prefetch" href="/notes/assets/js/page--2d021821.892f11d3.js"><link rel="prefetch" href="/notes/assets/js/page--31799879.2122260c.js"><link rel="prefetch" href="/notes/assets/js/page--33b11326.b78e5e5c.js"><link rel="prefetch" href="/notes/assets/js/page--3477437b.7c9027a7.js"><link rel="prefetch" href="/notes/assets/js/page--34ad062f.1b0a4ffe.js"><link rel="prefetch" href="/notes/assets/js/page--357aec57.d32f42b3.js"><link rel="prefetch" href="/notes/assets/js/page--35f61a61.636f4829.js"><link rel="prefetch" href="/notes/assets/js/page--36897e27.925fabc8.js"><link rel="prefetch" href="/notes/assets/js/page--36b30161.8936814d.js"><link rel="prefetch" href="/notes/assets/js/page--377508c1.914c38d1.js"><link rel="prefetch" href="/notes/assets/js/page--3779bcfe.3f421261.js"><link rel="prefetch" href="/notes/assets/js/page--389d5da5.9567efe8.js"><link rel="prefetch" href="/notes/assets/js/page--38ef908f.7f2ecfa6.js"><link rel="prefetch" href="/notes/assets/js/page--39c1a916.08f662d2.js"><link rel="prefetch" href="/notes/assets/js/page--39e34c63.9e83802a.js"><link rel="prefetch" href="/notes/assets/js/page--3bbd34b1.c2cdc0e6.js"><link rel="prefetch" href="/notes/assets/js/page--3d00ca45.b2bc6daa.js"><link rel="prefetch" href="/notes/assets/js/page--3d121781.bf385b9f.js"><link rel="prefetch" href="/notes/assets/js/page--3d5ab373.b6ebb878.js"><link rel="prefetch" href="/notes/assets/js/page--41d1702a.31247c34.js"><link rel="prefetch" href="/notes/assets/js/page--427db7c1.770087a2.js"><link rel="prefetch" href="/notes/assets/js/page--4365fcbe.53e21630.js"><link rel="prefetch" href="/notes/assets/js/page--466a516d.ad1b5757.js"><link rel="prefetch" href="/notes/assets/js/page--46f53541.7837d780.js"><link rel="prefetch" href="/notes/assets/js/page--4776c269.1f783f46.js"><link rel="prefetch" href="/notes/assets/js/page--4803a967.9db63a04.js"><link rel="prefetch" href="/notes/assets/js/page--48c4e433.66312ec3.js"><link rel="prefetch" href="/notes/assets/js/page--48f9c9d9.549f360a.js"><link rel="prefetch" href="/notes/assets/js/page--4a252f57.e22d15bf.js"><link rel="prefetch" href="/notes/assets/js/page--4b35cd6a.288d7e17.js"><link rel="prefetch" href="/notes/assets/js/page--4bd2c839.4fa90b31.js"><link rel="prefetch" href="/notes/assets/js/page--4be1980d.c6794c38.js"><link rel="prefetch" href="/notes/assets/js/page--4c3dfc92.d80647d1.js"><link rel="prefetch" href="/notes/assets/js/page--4c9b9bf3.bf3ceea6.js"><link rel="prefetch" href="/notes/assets/js/page--4caf2956.be821505.js"><link rel="prefetch" href="/notes/assets/js/page--4df59ba1.8d40d239.js"><link rel="prefetch" href="/notes/assets/js/page--4dfb2a67.fc9b72c2.js"><link rel="prefetch" href="/notes/assets/js/page--4e2425dd.4465162a.js"><link rel="prefetch" href="/notes/assets/js/page--4eb2620a.227969e3.js"><link rel="prefetch" href="/notes/assets/js/page--4fd512b5.983274f8.js"><link rel="prefetch" href="/notes/assets/js/page--4ff1cd2e.c383df52.js"><link rel="prefetch" href="/notes/assets/js/page--505dfb41.7442abc1.js"><link rel="prefetch" href="/notes/assets/js/page--5293e923.27a5daa3.js"><link rel="prefetch" href="/notes/assets/js/page--5381ba01.df0bcdb6.js"><link rel="prefetch" href="/notes/assets/js/page--550b58e9.fecbc9d4.js"><link rel="prefetch" href="/notes/assets/js/page--564b24b3.ae6f17f2.js"><link rel="prefetch" href="/notes/assets/js/page--598867f3.96abbce5.js"><link rel="prefetch" href="/notes/assets/js/page--5be0cf2e.3809e728.js"><link rel="prefetch" href="/notes/assets/js/page--5c1b876b.d5b11f84.js"><link rel="prefetch" href="/notes/assets/js/page--60c3812d.dae70070.js"><link rel="prefetch" href="/notes/assets/js/page--6213086b.6c86cb32.js"><link rel="prefetch" href="/notes/assets/js/page--624c4841.60cdd7ff.js"><link rel="prefetch" href="/notes/assets/js/page--6389398f.13986f86.js"><link rel="prefetch" href="/notes/assets/js/page--6497f0a1.a3784ae2.js"><link rel="prefetch" href="/notes/assets/js/page--649d273e.533f03fc.js"><link rel="prefetch" href="/notes/assets/js/page--663eaefe.02f81e7c.js"><link rel="prefetch" href="/notes/assets/js/page--66f10201.5257daa6.js"><link rel="prefetch" href="/notes/assets/js/page--6877a3e2.bf4fd275.js"><link rel="prefetch" href="/notes/assets/js/page--6afe7ce1.2da62f33.js"><link rel="prefetch" href="/notes/assets/js/page--6cbf38e1.457e00da.js"><link rel="prefetch" href="/notes/assets/js/page--6ce92f3e.654df084.js"><link rel="prefetch" href="/notes/assets/js/page--6e597d21.13545f6e.js"><link rel="prefetch" href="/notes/assets/js/page--6e740896.b537b3c1.js"><link rel="prefetch" href="/notes/assets/js/page--6f049967.3d42b1a5.js"><link rel="prefetch" href="/notes/assets/js/page--6ff33237.231fff23.js"><link rel="prefetch" href="/notes/assets/js/page--70f1ad1b.028f5cca.js"><link rel="prefetch" href="/notes/assets/js/page--7458eaaa.7b7d771d.js"><link rel="prefetch" href="/notes/assets/js/page--746db89a.6a0d71d1.js"><link rel="prefetch" href="/notes/assets/js/page--762ae66f.66b45ecb.js"><link rel="prefetch" href="/notes/assets/js/page--78218936.8fd65d7c.js"><link rel="prefetch" href="/notes/assets/js/page--7a6b8eb1.dc466aae.js"><link rel="prefetch" href="/notes/assets/js/page--7b0b14b7.1516d2ea.js"><link rel="prefetch" href="/notes/assets/js/page--7b24903e.05c8c0c9.js"><link rel="prefetch" href="/notes/assets/js/page--7c0f4619.73500221.js"><link rel="prefetch" href="/notes/assets/js/page--7c62eb01.4358ae9f.js"><link rel="prefetch" href="/notes/assets/js/page--7c8b8781.b9b447ec.js"><link rel="prefetch" href="/notes/assets/js/page--7d3b14f1.95b0dcd5.js"><link rel="prefetch" href="/notes/assets/js/page--7e94c3bb.71e1f972.js"><link rel="prefetch" href="/notes/assets/js/page--7fc7e4a1.b44a35f7.js"><link rel="prefetch" href="/notes/assets/js/page--82271b92.56975da8.js"><link rel="prefetch" href="/notes/assets/js/page--828e159e.db3c71af.js"><link rel="prefetch" href="/notes/assets/js/page--8cd36aaa.c2956b93.js"><link rel="prefetch" href="/notes/assets/js/page--8e28d8be.981e16c5.js"><link rel="prefetch" href="/notes/assets/js/page--9009daaa.dc718bb2.js"><link rel="prefetch" href="/notes/assets/js/page--9230e83a.c0354b2d.js"><link rel="prefetch" href="/notes/assets/js/page--9fdba57e.de900d9c.js"><link rel="prefetch" href="/notes/assets/js/page--a051453e.eaaed1e0.js"><link rel="prefetch" href="/notes/assets/js/page--a1c4239e.071d21b8.js"><link rel="prefetch" href="/notes/assets/js/page--a8a8c1be.6a7b3ef8.js"><link rel="prefetch" href="/notes/assets/js/page--aabdd1a6.a3ee4544.js"><link rel="prefetch" href="/notes/assets/js/page--b0ec1952.17faf0ba.js"><link rel="prefetch" href="/notes/assets/js/page--b5901aa6.297caaab.js"><link rel="prefetch" href="/notes/assets/js/page--c185ca2a.8798050f.js"><link rel="prefetch" href="/notes/assets/js/page--c4cd30aa.20adbbb9.js"><link rel="prefetch" href="/notes/assets/js/page--cba59586.7ca00231.js"><link rel="prefetch" href="/notes/assets/js/page--cc19dc5e.8ae4d0e9.js"><link rel="prefetch" href="/notes/assets/js/page--cf39bd12.91612cbd.js"><link rel="prefetch" href="/notes/assets/js/page--d0d30f3e.a1fe2a3b.js"><link rel="prefetch" href="/notes/assets/js/page--d206ab7e.b229bf87.js"><link rel="prefetch" href="/notes/assets/js/page--d2ed8dae.27f2906a.js"><link rel="prefetch" href="/notes/assets/js/page--d676831e.b18b7004.js"><link rel="prefetch" href="/notes/assets/js/page--d6d819fe.ad33e3e1.js"><link rel="prefetch" href="/notes/assets/js/page--d994fd7e.dfb60f2f.js"><link rel="prefetch" href="/notes/assets/js/page--dd5a1a16.c427a2cf.js"><link rel="prefetch" href="/notes/assets/js/page--df9ce13a.4a27eeb8.js"><link rel="prefetch" href="/notes/assets/js/page--e0b57efe.6b117b35.js"><link rel="prefetch" href="/notes/assets/js/page--eb673c12.b8a57727.js"><link rel="prefetch" href="/notes/assets/js/page--ebf2773e.90f1dff0.js"><link rel="prefetch" href="/notes/assets/js/page--ef64acb6.5fb766d7.js"><link rel="prefetch" href="/notes/assets/js/page--f77f473e.ac0c6645.js"><link rel="prefetch" href="/notes/assets/js/page--fb1d49b6.adf7a235.js"><link rel="prefetch" href="/notes/assets/js/page-1、说说你对SPA单页面的理解，它的优缺点分别是什么？.77a128a6.js"><link rel="prefetch" href="/notes/assets/js/page-24个JavaScript循环遍历方法.3c962b9a.js"><link rel="prefetch" href="/notes/assets/js/page-44个Javascript变态题解析.7fd197e3.js"><link rel="prefetch" href="/notes/assets/js/page-49个CSS知识点.de186f91.js"><link rel="prefetch" href="/notes/assets/js/page-@charset.b8d73b46.js"><link rel="prefetch" href="/notes/assets/js/page-@types.5a3a505a.js"><link rel="prefetch" href="/notes/assets/js/page-@umijsplugin-dva.61469a9c.js"><link rel="prefetch" href="/notes/assets/js/page-@umijsplugin-qiankun.ba9aa268.js"><link rel="prefetch" href="/notes/assets/js/page-AMD模块.f1fd8f7c.js"><link rel="prefetch" href="/notes/assets/js/page-API.569f6156.js"><link rel="prefetch" href="/notes/assets/js/page-Arrayprototypeflat().c0137b0b.js"><link rel="prefetch" href="/notes/assets/js/page-Barrel.929b7429.js"><link rel="prefetch" href="/notes/assets/js/page-Bind是有害的.03a7d3d0.js"><link rel="prefetch" href="/notes/assets/js/page-CSSGrid网格布局教程.9b7ca2e8.js"><link rel="prefetch" href="/notes/assets/js/page-CSS选择符.70c96f94.js"><link rel="prefetch" href="/notes/assets/js/page-Canvas和SVG区别.9ed7aec4.js"><link rel="prefetch" href="/notes/assets/js/page-CommonJS.9ba78b97.js"><link rel="prefetch" href="/notes/assets/js/page-Configuration.e830b3e7.js"><link rel="prefetch" href="/notes/assets/js/page-Consumer向上找不到Provider的时候怎么办.3c0c7f01.js"><link rel="prefetch" href="/notes/assets/js/page-ContentTypes.bcb15007.js"><link rel="prefetch" href="/notes/assets/js/page-Css单位.234e4f90.js"><link rel="prefetch" href="/notes/assets/js/page-Decorators.e7b83d1a.js"><link rel="prefetch" href="/notes/assets/js/page-Diff算法.9ffc6e1a.js"><link rel="prefetch" href="/notes/assets/js/page-ES10新特性（2019）.84848bfb.js"><link rel="prefetch" href="/notes/assets/js/page-ES6新特性（2015）.91795a9a.js"><link rel="prefetch" href="/notes/assets/js/page-ES7新特性（2016）.78fec664.js"><link rel="prefetch" href="/notes/assets/js/page-ES8新特性（2017）.910b5e36.js"><link rel="prefetch" href="/notes/assets/js/page-ES9新特性（2018）.ba036087.js"><link rel="prefetch" href="/notes/assets/js/page-FetchAPI教程.50f003ab.js"><link rel="prefetch" href="/notes/assets/js/page-FileReader.bcc45980.js"><link rel="prefetch" href="/notes/assets/js/page-Flex布局教程：实例篇.042fa3da.js"><link rel="prefetch" href="/notes/assets/js/page-Flex布局教程：语法篇.ad9bdc53.js"><link rel="prefetch" href="/notes/assets/js/page-Flyweight模式.52aac770.js"><link rel="prefetch" href="/notes/assets/js/page-Fragment.59e83302.js"><link rel="prefetch" href="/notes/assets/js/page-Freshness.1eaf0972.js"><link rel="prefetch" href="/notes/assets/js/page-Generator.9c290b18.js"><link rel="prefetch" href="/notes/assets/js/page-Git面试知识点.2457ee57.js"><link rel="prefetch" href="/notes/assets/js/page-HTML5datalist标签.4f1f6ff1.js"><link rel="prefetch" href="/notes/assets/js/page-HTML常用特殊字符.7d215c96.js"><link rel="prefetch" href="/notes/assets/js/page-Home.dfe3b93b.js"><link rel="prefetch" href="/notes/assets/js/page-Hook原理(副作用Hook).9ff0a932.js"><link rel="prefetch" href="/notes/assets/js/page-Hook原理(概览).814885ec.js"><link rel="prefetch" href="/notes/assets/js/page-Hook原理(状态Hook).225c8810.js"><link rel="prefetch" href="/notes/assets/js/page-Hybrid.9f05ef5b.js"><link rel="prefetch" href="/notes/assets/js/page-ID选择器.a3acf376.js"><link rel="prefetch" href="/notes/assets/js/page-ImmutableData.ebaffff3.js"><link rel="prefetch" href="/notes/assets/js/page-Introduction.c2fa9c30.js"><link rel="prefetch" href="/notes/assets/js/page-JSONstringify悲伤的故事.f4466a49.js"><link rel="prefetch" href="/notes/assets/js/page-JSX和React.8098d136.js"><link rel="prefetch" href="/notes/assets/js/page-JavaScript实现双向链表.667ff8e0.js"><link rel="prefetch" href="/notes/assets/js/page-JavaScript执行机制.5800c06a.js"><link rel="prefetch" href="/notes/assets/js/page-JavaScript设计模式的分类.9a8e56f7.js"><link rel="prefetch" href="/notes/assets/js/page-MVC模式.b5d0f9c4.js"><link rel="prefetch" href="/notes/assets/js/page-MVP模式.0e1b35d9.js"><link rel="prefetch" href="/notes/assets/js/page-MVVM.b21a1be1.js"><link rel="prefetch" href="/notes/assets/js/page-Map.249f581e.js"><link rel="prefetch" href="/notes/assets/js/page-Mixin模式.d43007c2.js"><link rel="prefetch" href="/notes/assets/js/page-Modulardesign(模块化设计).de62457e.js"><link rel="prefetch" href="/notes/assets/js/page-Never.5a1b6edc.js"><link rel="prefetch" href="/notes/assets/js/page-Objectis（）.a55f4441.js"><link rel="prefetch" href="/notes/assets/js/page-Portals.577276a3.js"><link rel="prefetch" href="/notes/assets/js/page-ProgressEvent.567803eb.js"><link rel="prefetch" href="/notes/assets/js/page-Promise.2fbf77fe.js"><link rel="prefetch" href="/notes/assets/js/page-Promise面试题总结.5039cf09.js"><link rel="prefetch" href="/notes/assets/js/page-Props(v2611).83b0310f.js"><link rel="prefetch" href="/notes/assets/js/page-Quirks模式是什么？它和Standards模式有什么区别.e180ba0f.js"><link rel="prefetch" href="/notes/assets/js/page-React+TypeScript规范.a08d0eb8.js"><link rel="prefetch" href="/notes/assets/js/page-ReactComponent.a9361492.js"><link rel="prefetch" href="/notes/assets/js/page-ReactContext原理.588cb7dd.js"><link rel="prefetch" href="/notes/assets/js/page-ReactJSX.de5961c1.js"><link rel="prefetch" href="/notes/assets/js/page-React中使用TypeScript.a7baabba.js"><link rel="prefetch" href="/notes/assets/js/page-React中的优先级管理.d09f35b6.js"><link rel="prefetch" href="/notes/assets/js/page-React合成事件.6299a34d.js"><link rel="prefetch" href="/notes/assets/js/page-React工作循环(workLoop).0b3eb095.js"><link rel="prefetch" href="/notes/assets/js/page-React应用中的高频对象.ee6abca0.js"><link rel="prefetch" href="/notes/assets/js/page-React应用的启动过程.0cf7808e.js"><link rel="prefetch" href="/notes/assets/js/page-React应用的宏观包结构(web开发).ccbec793.js"><link rel="prefetch" href="/notes/assets/js/page-React引用传递ForwardingRefs.19085243.js"><link rel="prefetch" href="/notes/assets/js/page-React源码解析.6e0b38da.js"><link rel="prefetch" href="/notes/assets/js/page-React算法之位运算.f402a59c.js"><link rel="prefetch" href="/notes/assets/js/page-React算法之堆排序.b1e84b45.js"><link rel="prefetch" href="/notes/assets/js/page-React算法之栈操作.a36b6a04.js"><link rel="prefetch" href="/notes/assets/js/page-React算法之深度优先遍历.c1ce5d34.js"><link rel="prefetch" href="/notes/assets/js/page-React算法之调和算法.e3d1e91f.js"><link rel="prefetch" href="/notes/assets/js/page-React算法之链表操作.dbea1352.js"><link rel="prefetch" href="/notes/assets/js/page-React调度原理(scheduler).39aa0db8.js"><link rel="prefetch" href="/notes/assets/js/page-React运行时优化方案.2edb9e9c.js"><link rel="prefetch" href="/notes/assets/js/page-React高阶组件(HOC).9e64d947.js"><link rel="prefetch" href="/notes/assets/js/page-ReflectMetadata.0c58b5ce.js"><link rel="prefetch" href="/notes/assets/js/page-Stack.788403fe.js"><link rel="prefetch" href="/notes/assets/js/page-StickyFooter，完美的绝对底部.92e99c5b.js"><link rel="prefetch" href="/notes/assets/js/page-String.b80900f1.js"><link rel="prefetch" href="/notes/assets/js/page-Suspense组件.aeb17bc8.js"><link rel="prefetch" href="/notes/assets/js/page-Symbol.49c6322a.js"><link rel="prefetch" href="/notes/assets/js/page-Table组件性能.48e6e432.js"><link rel="prefetch" href="/notes/assets/js/page-ThisType.3300d203.js"><link rel="prefetch" href="/notes/assets/js/page-Truthy.3f5086ae.js"><link rel="prefetch" href="/notes/assets/js/page-TypeScript37.48185314.js"><link rel="prefetch" href="/notes/assets/js/page-TypeScript38.b7f2e2e7.js"><link rel="prefetch" href="/notes/assets/js/page-TypeScript39.a23c7f4f.js"><link rel="prefetch" href="/notes/assets/js/page-TypeScript中unknown与any有啥区别.85639c77.js"><link rel="prefetch" href="/notes/assets/js/page-TypeScript中的静态构造函数.9a8df730.js"><link rel="prefetch" href="/notes/assets/js/page-VNode.39c2826d.js"><link rel="prefetch" href="/notes/assets/js/page-VirtualDOM.f3c97e26.js"><link rel="prefetch" href="/notes/assets/js/page-Vue-Router.bef0e99d.js"><link rel="prefetch" href="/notes/assets/js/page-VueRouter对象.2414f833.js"><link rel="prefetch" href="/notes/assets/js/page-Vuejs九个性能优化技巧.c9a2bb8f.js"><link rel="prefetch" href="/notes/assets/js/page-Vuejs源码构建.d0335586.js"><link rel="prefetch" href="/notes/assets/js/page-Vuejs源码目录设计.ba2e95d3.js"><link rel="prefetch" href="/notes/assets/js/page-Vuex.4658d069.js"><link rel="prefetch" href="/notes/assets/js/page-Vuex初始化.98ff10a5.js"><link rel="prefetch" href="/notes/assets/js/page-Vue事件API.6a126a22.js"><link rel="prefetch" href="/notes/assets/js/page-Vue实例挂载的实现.8e3b41e6.js"><link rel="prefetch" href="/notes/assets/js/page-Vue模板渲染的原理.821357ca.js"><link rel="prefetch" href="/notes/assets/js/page-Vue获取页面元素的相对位置.11c360c9.js"><link rel="prefetch" href="/notes/assets/js/page-Webpack.27733070.js"><link rel="prefetch" href="/notes/assets/js/page-XMLHttpRequest.c23e1ba4.js"><link rel="prefetch" href="/notes/assets/js/page-accesskey.d7e41212.js"><link rel="prefetch" href="/notes/assets/js/page-arguments[]函数参数数组.ab82a0cd.js"><link rel="prefetch" href="/notes/assets/js/page-asyncawait原理.eb788f7f.js"><link rel="prefetch" href="/notes/assets/js/page-babel编译原理.3d7fae02.js"><link rel="prefetch" href="/notes/assets/js/page-before和after中双冒号和单冒号.ba8ec6cc.js"><link rel="prefetch" href="/notes/assets/js/page-beginWork.ac45267e.js"><link rel="prefetch" href="/notes/assets/js/page-codegen.a8ac57b7.js"><link rel="prefetch" href="/notes/assets/js/page-coerceRef.c944a76a.js"><link rel="prefetch" href="/notes/assets/js/page-commitAllHostEffects.717e1a45.js"><link rel="prefetch" href="/notes/assets/js/page-commitAllLifeCycles.b6b57304.js"><link rel="prefetch" href="/notes/assets/js/page-commitBeforeMutationLifecycles.a2e46285.js"><link rel="prefetch" href="/notes/assets/js/page-commitDeletion.b995d248.js"><link rel="prefetch" href="/notes/assets/js/page-commitPlacement.f1c423a5.js"><link rel="prefetch" href="/notes/assets/js/page-commitRoot.0e0b5743.js"><link rel="prefetch" href="/notes/assets/js/page-commitWork.cd78285a.js"><link rel="prefetch" href="/notes/assets/js/page-constructor和getInitialState.d8317140.js"><link rel="prefetch" href="/notes/assets/js/page-createComponent.b7277371.js"><link rel="prefetch" href="/notes/assets/js/page-createElement.56e85fb8.js"><link rel="prefetch" href="/notes/assets/js/page-css优先级：.492c59f4.js"><link rel="prefetch" href="/notes/assets/js/page-css兼容性整理.37d3e84e.js"><link rel="prefetch" href="/notes/assets/js/page-css基础面试.9e58a0fa.js"><link rel="prefetch" href="/notes/assets/js/page-demo.e5d30d6a.js"><link rel="prefetch" href="/notes/assets/js/page-device.b3f3dff5.js"><link rel="prefetch" href="/notes/assets/js/page-divonClick={handlerClick}单击单击div有什么区别.220c0a3a.js"><link rel="prefetch" href="/notes/assets/js/page-es6module.3ddf8665.js"><link rel="prefetch" href="/notes/assets/js/page-event.605fc04c.js"><link rel="prefetch" href="/notes/assets/js/page-exportdefault被认为是有害的.08f9fcd6.js"><link rel="prefetch" href="/notes/assets/js/page-fiber树构造(初次创建).88149f56.js"><link rel="prefetch" href="/notes/assets/js/page-fiber树构造(基础准备).b6197afa.js"><link rel="prefetch" href="/notes/assets/js/page-fiber树构造(对比更新).9037f7b2.js"><link rel="prefetch" href="/notes/assets/js/page-fiber树渲染.385fb23b.js"><link rel="prefetch" href="/notes/assets/js/page-fixed失效.563cecdf.js"><link rel="prefetch" href="/notes/assets/js/page-function.6801e1e8.js"><link rel="prefetch" href="/notes/assets/js/page-gitrebase.e4f40b20.js"><link rel="prefetch" href="/notes/assets/js/page-hydrate.c9504632.js"><link rel="prefetch" href="/notes/assets/js/page-infer.2d2cf7c0.js"><link rel="prefetch" href="/notes/assets/js/page-inline-block元素间间距.473cea5e.js"><link rel="prefetch" href="/notes/assets/js/page-invokeGuardedCallback.206e1a44.js"><link rel="prefetch" href="/notes/assets/js/page-js奇怪的小问题.d8a61176.js"><link rel="prefetch" href="/notes/assets/js/page-js异步历史.ade6fc83.js"><link rel="prefetch" href="/notes/assets/js/page-js总结.ece98ca8.js"><link rel="prefetch" href="/notes/assets/js/page-js高频手写题.8aaf241b.js"><link rel="prefetch" href="/notes/assets/js/page-keep-alive.90b93e24.js"><link rel="prefetch" href="/notes/assets/js/page-lazycomponent.0681c36e.js"><link rel="prefetch" href="/notes/assets/js/page-libdts.06732f7c.js"><link rel="prefetch" href="/notes/assets/js/page-loader.d5237c8d.js"><link rel="prefetch" href="/notes/assets/js/page-matcher.30a4a158.js"><link rel="prefetch" href="/notes/assets/js/page-module、export、import分别有什么作用？.9be0fa63.js"><link rel="prefetch" href="/notes/assets/js/page-mountIndeterminateComponent.c9f537fe.js"><link rel="prefetch" href="/notes/assets/js/page-mountLazyCompont.9e775589.js"><link rel="prefetch" href="/notes/assets/js/page-newVue发生了什么.bdceb32f.js"><link rel="prefetch" href="/notes/assets/js/page-nextTick.63f8bc48.js"><link rel="prefetch" href="/notes/assets/js/page-nginx使用综合场景.7a508f75.js"><link rel="prefetch" href="/notes/assets/js/page-optimize.afb72437.js"><link rel="prefetch" href="/notes/assets/js/page-parse.5d6066e4.js"><link rel="prefetch" href="/notes/assets/js/page-patch.6b00d150.js"><link rel="prefetch" href="/notes/assets/js/page-plugin.99dca5fa.js"><link rel="prefetch" href="/notes/assets/js/page-plugins.c562ecc5.js"><link rel="prefetch" href="/notes/assets/js/page-public设置.93e843a9.js"><link rel="prefetch" href="/notes/assets/js/page-react-dom.d42471f5.js"><link rel="prefetch" href="/notes/assets/js/page-react-hooks.e1135414.js"><link rel="prefetch" href="/notes/assets/js/page-react-hooks使用.92057e00.js"><link rel="prefetch" href="/notes/assets/js/page-react-hooks原理.a960b6bb.js"><link rel="prefetch" href="/notes/assets/js/page-react-redux源码.60f1242e.js"><link rel="prefetch" href="/notes/assets/js/page-readonly.9914e105.js"><link rel="prefetch" href="/notes/assets/js/page-reconcileChildren.f1db9220.js"><link rel="prefetch" href="/notes/assets/js/page-reconcileChildrenArray.aef0203b.js"><link rel="prefetch" href="/notes/assets/js/page-reconcileSingleElement.b3667c72.js"><link rel="prefetch" href="/notes/assets/js/page-reconciler运作流程.2ec2fe48.js"><link rel="prefetch" href="/notes/assets/js/page-redux源码解读.9e1d8ecf.js"><link rel="prefetch" href="/notes/assets/js/page-render.96812ba4.js"><link rel="prefetch" href="/notes/assets/js/page-resolveCurrentlyRenderingFiber.b4936cb8.js"><link rel="prefetch" href="/notes/assets/js/page-set.bf5e383b.js"><link rel="prefetch" href="/notes/assets/js/page-setState.80ae0168.js"><link rel="prefetch" href="/notes/assets/js/page-setState执行流程.2ec9d8a7.js"><link rel="prefetch" href="/notes/assets/js/page-setState背后的批量更新如何实现.e83a9aa1.js"><link rel="prefetch" href="/notes/assets/js/page-slot.4b2c6328.js"><link rel="prefetch" href="/notes/assets/js/page-suspense.78131d88.js"><link rel="prefetch" href="/notes/assets/js/page-throwException.2ce151a5.js"><link rel="prefetch" href="/notes/assets/js/page-transition-group.35feb52a.js"><link rel="prefetch" href="/notes/assets/js/page-transition.b6d0cb10.js"><link rel="prefetch" href="/notes/assets/js/page-tsconfigjson的行为.3edc199f.js"><link rel="prefetch" href="/notes/assets/js/page-typescript综合面试.80bfdb31.js"><link rel="prefetch" href="/notes/assets/js/page-update.6de00e3e.js"><link rel="prefetch" href="/notes/assets/js/page-updateClassComponent.592fdfae.js"><link rel="prefetch" href="/notes/assets/js/page-updateContextConsumer.af9642dd.js"><link rel="prefetch" href="/notes/assets/js/page-updateContextProvider.a7a0f7da.js"><link rel="prefetch" href="/notes/assets/js/page-updateForwardRef.6f5ce4eb.js"><link rel="prefetch" href="/notes/assets/js/page-updateFragment.3e3b4b48.js"><link rel="prefetch" href="/notes/assets/js/page-updateFunctionalComponent.8f5fbe8d.js"><link rel="prefetch" href="/notes/assets/js/page-updateHostComponent.f329be78.js"><link rel="prefetch" href="/notes/assets/js/page-updateHostRoot.81015cad.js"><link rel="prefetch" href="/notes/assets/js/page-updateHostText.1da4d4dc.js"><link rel="prefetch" href="/notes/assets/js/page-updateMode.cc9ab8e1.js"><link rel="prefetch" href="/notes/assets/js/page-updatePortalComponent.2a775735.js"><link rel="prefetch" href="/notes/assets/js/page-updateProfiler.b2ee438d.js"><link rel="prefetch" href="/notes/assets/js/page-updateSuspenseComponent.b2cda0cb.js"><link rel="prefetch" href="/notes/assets/js/page-useCallbackuseMemo.3dab780b.js"><link rel="prefetch" href="/notes/assets/js/page-useContext.9282b7ac.js"><link rel="prefetch" href="/notes/assets/js/page-useEffect.5d528805.js"><link rel="prefetch" href="/notes/assets/js/page-useState.1a5da844.js"><link rel="prefetch" href="/notes/assets/js/page-v-model.a183d083.js"><link rel="prefetch" href="/notes/assets/js/page-vue响应式详解（重学前端-vue篇1）.3bb346fd.js"><link rel="prefetch" href="/notes/assets/js/page-vue的优点.48013364.js"><link rel="prefetch" href="/notes/assets/js/page-webAnimations.ee81b1df.js"><link rel="prefetch" href="/notes/assets/js/page-web工程通用脚手架工具.2ecfc593.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶1-1期】理解JavaScript中的执行上下文和执行栈.c80ffcb0.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶1-2期】JavaScript深入之执行上下文栈和变量对象.b63d927d.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶1-3期】JavaScript深入之内存空间详细图解.0fbd116d.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶1-4期】JavaScript深入之带走进内存机制.c682a96e.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶1-5期】JavaScript深入之4类常见内存泄漏及如何避免.509f7692.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶1-6期】JavaScript预编译.ac37fe70.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶2-1期】深入浅出图解作用域链和闭包.a7f1e17b.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶2-2期】JavaScript深入之从作用域链理解闭包.d988e23f.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶2-3期】JavaScript深入之闭包面试题解.06a8dbee.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶3-1期】JavaScript深入之史上最全--5种this绑定全面解析.7da3fc53.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶3-2期】JavaScript深入之重新认识箭头函数的this.c0a19e35.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶3-3期】深度广度解析call和apply原理、使用场景及实现.e0230b47.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶3-4期】深度解析bind原理、使用场景及模拟实现.7b2ef64d.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶3-5期】深度解析new原理及模拟实现.543b0178.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶4-1期】详细解析赋值、浅拷贝和深拷贝的区别.e2378094.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶4-2期】Objectassign原理及其实现.9ddec262.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶4-3期】面试题之如何实现一个深拷贝.c1e3c8c5.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶4-4期】Lodash是如何实现深拷贝的.156e344c.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶5-1期】重新认识构造函数、原型和原型链.aa4e7e2f.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶5-2期】图解原型链及其继承优缺点.621a7994.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶5-3期】深入探究FunctionObject鸡蛋问题.26622b7a.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶6-1期】JavaScript高阶函数浅析.5477e86c.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶6-2期】深入高阶函数应用之柯里化.6cf03812.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶6-3期】Array原型方法源码实现大解密.09221f2b.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶7-1期】深入浅出节流函数throttle.785d6906.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶7-2期】深入浅出防抖函数debounce.c5d79752.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶7-3期】Throttle和Debounce在React中的应用.6f2db53b.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶7-4期】深入篇阿里P6必会Lodash防抖节流函数实现原理.ae0b2e84.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶7-5期】浅出篇7个角度吃透Lodash防抖节流原理.8aef8f13.js"><link rel="prefetch" href="/notes/assets/js/page-一、Webpack原理.6ed587be.js"><link rel="prefetch" href="/notes/assets/js/page-一、为什么JavaScript是单线程？.8b3bbcba.js"><link rel="prefetch" href="/notes/assets/js/page-一、概述.7ef57ea5.js"><link rel="prefetch" href="/notes/assets/js/page-一、简介.aaa60eae.js"><link rel="prefetch" href="/notes/assets/js/page-一些不能按预期工作的代码.c8580d50.js"><link rel="prefetch" href="/notes/assets/js/page-一些常见的Feature需求.1c2a8091.js"><link rel="prefetch" href="/notes/assets/js/page-一些常见的「bug」并不是bug.572bcc29.js"><link rel="prefetch" href="/notes/assets/js/page-一正确理解react-router.c56e1841.js"><link rel="prefetch" href="/notes/assets/js/page-严格模式.01fb034d.js"><link rel="prefetch" href="/notes/assets/js/page-中介者模式.11552e8d.js"><link rel="prefetch" href="/notes/assets/js/page-事件模块的注入模式.ffefd514.js"><link rel="prefetch" href="/notes/assets/js/page-事件监听句柄.f8c3605b.js"><link rel="prefetch" href="/notes/assets/js/page-事件绑定.1a0b8f9c.js"><link rel="prefetch" href="/notes/assets/js/page-事件触发.8189d0f9.js"><link rel="prefetch" href="/notes/assets/js/page-从JavaScript迁移.2bc3a612.js"><link rel="prefetch" href="/notes/assets/js/page-从new一个Vue对象开始.06835fb6.js"><link rel="prefetch" href="/notes/assets/js/page-从入口开始.3c95990c.js"><link rel="prefetch" href="/notes/assets/js/page-代理模式.7752e140.js"><link rel="prefetch" href="/notes/assets/js/page-代码分割.76a492f9.js"><link rel="prefetch" href="/notes/assets/js/page-代码分离.dfcbdb8a.js"><link rel="prefetch" href="/notes/assets/js/page-传参.9891a415.js"><link rel="prefetch" href="/notes/assets/js/page-伪元素.65e60030.js"><link rel="prefetch" href="/notes/assets/js/page-伪类.bd07b9db.js"><link rel="prefetch" href="/notes/assets/js/page-作用.9441c71c.js"><link rel="prefetch" href="/notes/assets/js/page-使用Es6.dba831d3.js"><link rel="prefetch" href="/notes/assets/js/page-依赖收集.88afcc30.js"><link rel="prefetch" href="/notes/assets/js/page-元素选择器.84a29718.js"><link rel="prefetch" href="/notes/assets/js/page-入口起点(entrypoints).1618f65b.js"><link rel="prefetch" href="/notes/assets/js/page-全局属性：用于任何HTML5元素的属性.6898b9c6.js"><link rel="prefetch" href="/notes/assets/js/page-关于ReactHooks.fd9ae580.js"><link rel="prefetch" href="/notes/assets/js/page-具体使用.d6c3bb48.js"><link rel="prefetch" href="/notes/assets/js/page-写一个方法去掉字符串中的空格.90df4b78.js"><link rel="prefetch" href="/notes/assets/js/page-减少setter属性的使用.4d410d23.js"><link rel="prefetch" href="/notes/assets/js/page-函数.aee9e870.js"><link rel="prefetch" href="/notes/assets/js/page-函数参数.920484e8.js"><link rel="prefetch" href="/notes/assets/js/page-函数式编程.fad0ab05.js"><link rel="prefetch" href="/notes/assets/js/page-创建event对象.51fda2e5.js"><link rel="prefetch" href="/notes/assets/js/page-创建数组.2afcecbf.js"><link rel="prefetch" href="/notes/assets/js/page-前端缓存.172994d1.js"><link rel="prefetch" href="/notes/assets/js/page-动态导入表达式.26837ad5.js"><link rel="prefetch" href="/notes/assets/js/page-协变与逆变.e9a97802.js"><link rel="prefetch" href="/notes/assets/js/page-单例模式.997e35e6.js"><link rel="prefetch" href="/notes/assets/js/page-原型模式.4f093653.js"><link rel="prefetch" href="/notes/assets/js/page-原理图.c63a0da5.js"><link rel="prefetch" href="/notes/assets/js/page-发射器.eef4415d.js"><link rel="prefetch" href="/notes/assets/js/page-可能不需要使用派生state.cc8d61e9.js"><link rel="prefetch" href="/notes/assets/js/page-可视化拖拽组件库原理分析.b1950c84.js"><link rel="prefetch" href="/notes/assets/js/page-可调用的.eedcc065.js"><link rel="prefetch" href="/notes/assets/js/page-合并配置.5c080d45.js"><link rel="prefetch" href="/notes/assets/js/page-名义化类型.38d341a4.js"><link rel="prefetch" href="/notes/assets/js/page-后代选择器.bf6685e8.js"><link rel="prefetch" href="/notes/assets/js/page-命令模式.71fee378.js"><link rel="prefetch" href="/notes/assets/js/page-命令行的行为.25b9562f.js"><link rel="prefetch" href="/notes/assets/js/page-命名空间.4b571a26.js"><link rel="prefetch" href="/notes/assets/js/page-响应式对象.f5c8ab09.js"><link rel="prefetch" href="/notes/assets/js/page-块格式化上下文.86c0901c.js"><link rel="prefetch" href="/notes/assets/js/page-基于字符串的枚举.387ba321.js"><link rel="prefetch" href="/notes/assets/js/page-基本概念.50ae41ef.js"><link rel="prefetch" href="/notes/assets/js/page-基础分类.b50c69ed.js"><link rel="prefetch" href="/notes/assets/js/page-声明空间.e98b51df.js"><link rel="prefetch" href="/notes/assets/js/page-外观模式.e70965cf.js"><link rel="prefetch" href="/notes/assets/js/page-外边距重叠.a1abd89e.js"><link rel="prefetch" href="/notes/assets/js/page-大文件上传和断点续传.76652e93.js"><link rel="prefetch" href="/notes/assets/js/page-如何关闭表单自动填充.8778e120.js"><link rel="prefetch" href="/notes/assets/js/page-子选择器.1d8f468c.js"><link rel="prefetch" href="/notes/assets/js/page-字面量类型.a02e7615.js"><link rel="prefetch" href="/notes/assets/js/page-实现一个web代码模板快速生成CLI工具.6b524d56.js"><link rel="prefetch" href="/notes/assets/js/page-对象字面量的惰性初始化.4d78d93e.js"><link rel="prefetch" href="/notes/assets/js/page-层叠上下文.8dea8f23.js"><link rel="prefetch" href="/notes/assets/js/page-展开语法.75c8b99e.js"><link rel="prefetch" href="/notes/assets/js/page-展示长列表.f56ae199.js"><link rel="prefetch" href="/notes/assets/js/page-属性选择器.565418f9.js"><link rel="prefetch" href="/notes/assets/js/page-工具类.db2ac0e0.js"><link rel="prefetch" href="/notes/assets/js/page-工厂模式.af6424e7.js"><link rel="prefetch" href="/notes/assets/js/page-布局和包含块.3f665ce8.js"><link rel="prefetch" href="/notes/assets/js/page-常用块级元素：.5326d849.js"><link rel="prefetch" href="/notes/assets/js/page-常见的Error.7a627c53.js"><link rel="prefetch" href="/notes/assets/js/page-并发模型与事件循环.bbbff0cb.js"><link rel="prefetch" href="/notes/assets/js/page-建造者模式.a3c6015f.js"><link rel="prefetch" href="/notes/assets/js/page-开始.576da228.js"><link rel="prefetch" href="/notes/assets/js/page-异常处理.1cc8d3e7.js"><link rel="prefetch" href="/notes/assets/js/page-异步组件.38823aec.js"><link rel="prefetch" href="/notes/assets/js/page-引入.f98fe00f.js"><link rel="prefetch" href="/notes/assets/js/page-引用.a39ef66a.js"><link rel="prefetch" href="/notes/assets/js/page-引用官网.3d039974.js"><link rel="prefetch" href="/notes/assets/js/page-总结.724cb955.js"><link rel="prefetch" href="/notes/assets/js/page-惰性初始模式.c20c9cc9.js"><link rel="prefetch" href="/notes/assets/js/page-扩展.6e3da99d.js"><link rel="prefetch" href="/notes/assets/js/page-扫描器.3ff9f2b9.js"><link rel="prefetch" href="/notes/assets/js/page-抽象DOM树.2e0e9ef7.js"><link rel="prefetch" href="/notes/assets/js/page-抽象语法树.76bfd0b7.js"><link rel="prefetch" href="/notes/assets/js/page-接口.89b74d24.js"><link rel="prefetch" href="/notes/assets/js/page-插件.dc13b6d6.js"><link rel="prefetch" href="/notes/assets/js/page-操作DOM.341e73e2.js"><link rel="prefetch" href="/notes/assets/js/page-支持JSX.82c1670b.js"><link rel="prefetch" href="/notes/assets/js/page-改善antdTable组件的渲染效率.e0a5e5bf.js"><link rel="prefetch" href="/notes/assets/js/page-数据绑定原理.c037f936.js"><link rel="prefetch" href="/notes/assets/js/page-数据驱动.76edaebe.js"><link rel="prefetch" href="/notes/assets/js/page-数组方法另一个角度总结.4d2c4df6.js"><link rel="prefetch" href="/notes/assets/js/page-文档声明区别.d71e7d08.js"><link rel="prefetch" href="/notes/assets/js/page-新js环境要求.8d4ad9e9.js"><link rel="prefetch" href="/notes/assets/js/page-暴露模块模式.cda248c8.js"><link rel="prefetch" href="/notes/assets/js/page-服务器基础.b5fb902a.js"><link rel="prefetch" href="/notes/assets/js/page-术语表.4c73e58e.js"><link rel="prefetch" href="/notes/assets/js/page-构建切换.6d042216.js"><link rel="prefetch" href="/notes/assets/js/page-构造器模式.74d1d7a2.js"><link rel="prefetch" href="/notes/assets/js/page-枚举.53bc150a.js"><link rel="prefetch" href="/notes/assets/js/page-柯里化.f9aab4c8.js"><link rel="prefetch" href="/notes/assets/js/page-标准的CSS的盒子模型？低版本IE的盒子模型.987f75f3.js"><link rel="prefetch" href="/notes/assets/js/page-检查器.600d7fef.js"><link rel="prefetch" href="/notes/assets/js/page-检测变化的注意事项.530fe761.js"><link rel="prefetch" href="/notes/assets/js/page-概念.d5390701.js"><link rel="prefetch" href="/notes/assets/js/page-概览.4f1bca1c.js"><link rel="prefetch" href="/notes/assets/js/page-模块.b283914b.js"><link rel="prefetch" href="/notes/assets/js/page-模块化模式.7548eaef.js"><link rel="prefetch" href="/notes/assets/js/page-正则表达式.53ebbde0.js"><link rel="prefetch" href="/notes/assets/js/page-泛型.fc3fd69d.js"><link rel="prefetch" href="/notes/assets/js/page-泛型的实例化类型.61d47fc4.js"><link rel="prefetch" href="/notes/assets/js/page-派发更新.bbde3b40.js"><link rel="prefetch" href="/notes/assets/js/page-流动的类型.9aeaf4d9.js"><link rel="prefetch" href="/notes/assets/js/page-浏览器输入URL.2f612898.js"><link rel="prefetch" href="/notes/assets/js/page-浏览器重绘与回流.1c7142bc.js"><link rel="prefetch" href="/notes/assets/js/page-深入TypeScript.5e87645d.js"><link rel="prefetch" href="/notes/assets/js/page-深入响应式原理.f50d9291.js"><link rel="prefetch" href="/notes/assets/js/page-深入源码剖析componentWillXXX为什么UNSAFE.5e3e9a0c.js"><link rel="prefetch" href="/notes/assets/js/page-混合.0d7ab56c.js"><link rel="prefetch" href="/notes/assets/js/page-状态与副作用.ed15185c.js"><link rel="prefetch" href="/notes/assets/js/page-状态函数.f7f27ef1.js"><link rel="prefetch" href="/notes/assets/js/page-环境声明.19fcc2d9.js"><link rel="prefetch" href="/notes/assets/js/page-生命周期.cd68cd31.js"><link rel="prefetch" href="/notes/assets/js/page-用递归算法实现，数组长度为5且元素的随机数在2-32间不重复的值.5edec2b8.js"><link rel="prefetch" href="/notes/assets/js/page-相邻兄弟选择器.0b402fff.js"><link rel="prefetch" href="/notes/assets/js/page-知识体系.8620765f.js"><link rel="prefetch" href="/notes/assets/js/page-程序.e0e4d85c.js"><link rel="prefetch" href="/notes/assets/js/page-第10天简要描述下什么是回调函数并写一个例子出来.18442225.js"><link rel="prefetch" href="/notes/assets/js/page-第11天简要描述下JS有哪些内置的对象.811bdb40.js"><link rel="prefetch" href="/notes/assets/js/page-第12天写一个获取当前url查询字符串中的参数的方法.6660063d.js"><link rel="prefetch" href="/notes/assets/js/page-第13天说说你对javascript的作用域的理解.c44eb008.js"><link rel="prefetch" href="/notes/assets/js/page-第14天什么是闭包？优缺点分别是什么？.ba154c42.js"><link rel="prefetch" href="/notes/assets/js/page-第15天写一个数组去重的方法（支持多维数组）.79579948.js"><link rel="prefetch" href="/notes/assets/js/page-第16天返回到顶部的方法有哪些？把其中一个方法出来.27ee40f3.js"><link rel="prefetch" href="/notes/assets/js/page-第17天typeof('abc')和typeof'abc'都是string,那么typeof是操作符还是函数？.5472d736.js"><link rel="prefetch" href="/notes/assets/js/page-第18天你理解的usestrict;是什么使用它有什么优缺点？.34e4185d.js"><link rel="prefetch" href="/notes/assets/js/page-第19天attribute和property有什么不同？.6a930688.js"><link rel="prefetch" href="/notes/assets/js/page-第1天用递归算法实现，数组长度为5且元素的随机数在2-32间不重复的值.c62282f0.js"><link rel="prefetch" href="/notes/assets/js/page-第20天写一个验证身份证号的方法.e67febdd.js"><link rel="prefetch" href="/notes/assets/js/page-第21天写一个方法验证是否为中文.3e9043be.js"><link rel="prefetch" href="/notes/assets/js/page-第22天你对new操作符的理解是什么？手动实现一个new方法.ecbfd989.js"><link rel="prefetch" href="/notes/assets/js/page-第23天01+02、01+03和0102分别等于多少？并解释下为什么？.6a3c639d.js"><link rel="prefetch" href="/notes/assets/js/page-第24天如何快速让一个数组乱序，写出来.2de1a2f0.js"><link rel="prefetch" href="/notes/assets/js/page-第25天写一个判断设备来源的方法.33ddf973.js"><link rel="prefetch" href="/notes/assets/js/page-第26天说说bind、call、apply的区别？并手写实现一个bind的方法.1d9b65e4.js"><link rel="prefetch" href="/notes/assets/js/page-第27天说说你对arguments的理解，它是数组吗？.5eacbfc4.js"><link rel="prefetch" href="/notes/assets/js/page-第28天解释下这段代码的意思！.ecebbc3b.js"><link rel="prefetch" href="/notes/assets/js/page-第29天写一个获取数组的最大值、最小值的方法.8aa64f3e.js"><link rel="prefetch" href="/notes/assets/js/page-第2天写一个方法去掉字符串中的空格.c684802f.js"><link rel="prefetch" href="/notes/assets/js/page-第30天写一个方法判断字符串是否为回文字符串.ffa278b6.js"><link rel="prefetch" href="/notes/assets/js/page-第3天去除字符串中最后一个指定的字符.cffdc554.js"><link rel="prefetch" href="/notes/assets/js/page-第4天写一个方法把下划线命名转成大驼峰命名.df73c9ee.js"><link rel="prefetch" href="/notes/assets/js/page-第5天写一个把字符串大小写切换的方法.19e90430.js"><link rel="prefetch" href="/notes/assets/js/page-第6天写一个去除制表符和换行符的方法.e18c3a45.js"><link rel="prefetch" href="/notes/assets/js/page-第7天统计某一字符或字符串在另一个字符串中出现的次数.0e919c5b.js"><link rel="prefetch" href="/notes/assets/js/page-第8天写一个加密字符串的方法.58a390b1.js"><link rel="prefetch" href="/notes/assets/js/page-第9天写一个判断数据类型的方法.247ef902.js"><link rel="prefetch" href="/notes/assets/js/page-第一套js综合基础面试题.a270af02.js"><link rel="prefetch" href="/notes/assets/js/page-第一套webpack综合基础面试题.29b18047.js"><link rel="prefetch" href="/notes/assets/js/page-管理资源.f7c097ad.js"><link rel="prefetch" href="/notes/assets/js/page-类.a20e6761.js"><link rel="prefetch" href="/notes/assets/js/page-类型保护.9b752aba.js"><link rel="prefetch" href="/notes/assets/js/page-类型兼容性.cd227825.js"><link rel="prefetch" href="/notes/assets/js/page-类型守卫.9a8a14d5.js"><link rel="prefetch" href="/notes/assets/js/page-类型安全的EventEmitter.5d4b1864.js"><link rel="prefetch" href="/notes/assets/js/page-类型推断.00dce7a3.js"><link rel="prefetch" href="/notes/assets/js/page-类型断言.0005ecd2.js"><link rel="prefetch" href="/notes/assets/js/page-类型系统的行为.2d20117b.js"><link rel="prefetch" href="/notes/assets/js/page-类是有用的.9db13564.js"><link rel="prefetch" href="/notes/assets/js/page-类选择器.2b7d701c.js"><link rel="prefetch" href="/notes/assets/js/page-索引签名.e2d23161.js"><link rel="prefetch" href="/notes/assets/js/page-组件化.8ed51939.js"><link rel="prefetch" href="/notes/assets/js/page-组件卸载前，加在DOM元素的监听事件和定时器要不要手动清除.0c764443.js"><link rel="prefetch" href="/notes/assets/js/page-组件更新.9c9e2af4.js"><link rel="prefetch" href="/notes/assets/js/page-组件注册.9b4fecdb.js"><link rel="prefetch" href="/notes/assets/js/page-组件类.d71e0037.js"><link rel="prefetch" href="/notes/assets/js/page-组合模式.69e09aef.js"><link rel="prefetch" href="/notes/assets/js/page-绑定器.a8ca886e.js"><link rel="prefetch" href="/notes/assets/js/page-结论.27b58af4.js"><link rel="prefetch" href="/notes/assets/js/page-编译.8cfd5e6f.js"><link rel="prefetch" href="/notes/assets/js/page-编译上下文.1494d8a6.js"><link rel="prefetch" href="/notes/assets/js/page-编译入口.609ccaa4.js"><link rel="prefetch" href="/notes/assets/js/page-网站favicon图标.d8eac7f8.js"><link rel="prefetch" href="/notes/assets/js/page-自定义hooks.747fc13c.js"><link rel="prefetch" href="/notes/assets/js/page-获取localStorage和sessionStorage当前已存储大小.a9cdfa10.js"><link rel="prefetch" href="/notes/assets/js/page-虚拟DOM和DOM-diff.1e8f540c.js"><link rel="prefetch" href="/notes/assets/js/page-表单数据.3239f6fa.js"><link rel="prefetch" href="/notes/assets/js/page-装饰器.58a2f780.js"><link rel="prefetch" href="/notes/assets/js/page-装饰模式.d3c9c0d6.js"><link rel="prefetch" href="/notes/assets/js/page-观察者模式.4584827a.js"><link rel="prefetch" href="/notes/assets/js/page-解析器.7d226d61.js"><link rel="prefetch" href="/notes/assets/js/page-解读Errors.7d390f30.js"><link rel="prefetch" href="/notes/assets/js/page-计算属性VS侦听属性.efdbd9dc.js"><link rel="prefetch" href="/notes/assets/js/page-认识Flow.02324e06.js"><link rel="prefetch" href="/notes/assets/js/page-评论.b3030aef.js"><link rel="prefetch" href="/notes/assets/js/page-详解箭头函数和普通函数的区别以及箭头函数的注意事项、不适用场景.40a1131e.js"><link rel="prefetch" href="/notes/assets/js/page-说说对SPA单页面的理解，它的优缺点分别是什么？.704d77b4.js"><link rel="prefetch" href="/notes/assets/js/page-调和的过程.ed1d4c50.js"><link rel="prefetch" href="/notes/assets/js/page-调度原理.b4da90a0.js"><link rel="prefetch" href="/notes/assets/js/page-谨慎使用--outFile.a9cda6d5.js"><link rel="prefetch" href="/notes/assets/js/page-超链接target属性.48412d89.js"><link rel="prefetch" href="/notes/assets/js/page-路径切换.c93eb5a0.js"><link rel="prefetch" href="/notes/assets/js/page-路由注册.0f73bef0.js"><link rel="prefetch" href="/notes/assets/js/page-输出(output).9b407c71.js"><link rel="prefetch" href="/notes/assets/js/page-辨析联合类型.0609d7e9.js"><link rel="prefetch" href="/notes/assets/js/page-迭代协议.f97d423b.js"><link rel="prefetch" href="/notes/assets/js/page-迭代器模式.08fb8e14.js"><link rel="prefetch" href="/notes/assets/js/page-适配器模式.c39fed6e.js"><link rel="prefetch" href="/notes/assets/js/page-选择器列表.eac71cd6.js"><link rel="prefetch" href="/notes/assets/js/page-通用兄弟选择器.dbf1a4b9.js"><link rel="prefetch" href="/notes/assets/js/page-通过标签语义化优化SEO.8c57cb07.js"><link rel="prefetch" href="/notes/assets/js/page-通配选择器.38b3a0d8.js"><link rel="prefetch" href="/notes/assets/js/page-需求分析.dfb4b1f8.js"><link rel="prefetch" href="/notes/assets/js/page-非ReactJSX.d500cd17.js"><link rel="prefetch" href="/notes/assets/js/page-项目性能优化.a2f38907.js"><link rel="prefetch" href="/notes/assets/js/page-🗿HEAD.e298510c.js"><link rel="prefetch" href="/notes/assets/js/vendors~flowchart.76cbea90.js"><link rel="prefetch" href="/notes/assets/js/vendors~mermaid.9fcc0683.js"><link rel="prefetch" href="/notes/assets/js/vendors~photo-swipe.ec463274.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.5a16df27.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/notes/" class="home-link router-link-active"><!----> <!----> <span class="site-name can-hide">前端 学习</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="js" class="dropdown-title"><span class="title"><!---->
        js
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/mozillajs/baseObject/symbol.html" class="nav-link"><!---->
  mozilla：基本对象
</a></li><li class="dropdown-item"><a href="/notes/jsInterview/baseInterview.html" class="nav-link"><!---->
  基础面试题
</a></li><li class="dropdown-item"><a href="/notes/js/stack/executionStack.html" class="nav-link"><!---->
  js 概念
</a></li><li class="dropdown-item"><a href="/notes/es6/interview1.html" class="nav-link"><!---->
  es6
</a></li><li class="dropdown-item"><a href="/notes/es7/interview1.html" class="nav-link"><!---->
  es7
</a></li><li class="dropdown-item"><a href="/notes/es8/interview1.html" class="nav-link"><!---->
  es8
</a></li><li class="dropdown-item"><a href="/notes/es9/interview1.html" class="nav-link"><!---->
  es9
</a></li><li class="dropdown-item"><a href="/notes/es10/interview1.html" class="nav-link"><!---->
  es10
</a></li><li class="dropdown-item"><a href="/notes/ts/jsx/support.html" class="nav-link"><!---->
  JSX
</a></li><li class="dropdown-item"><a href="/notes/ts/project/inDepthTs.html" class="nav-link"><!---->
  TypeScript 项目
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="css" class="dropdown-title"><span class="title"><!---->
        css
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/mozillaCss/reference/universalSelectors.html" class="nav-link"><!---->
  第 1 期：CSS API
</a></li><li class="dropdown-item"><a href="/notes/css/interview/baseCss.html" class="nav-link"><!---->
  零散记录
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="html" class="dropdown-title"><span class="title"><!---->
        html
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/html/interview/linkImport.html" class="nav-link"><!---->
  零散记录
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="端" class="dropdown-title"><span class="title"><!---->
        端
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/browser/interview/baseInterview.html" class="nav-link"><!---->
  基础浏览器
</a></li><li class="dropdown-item"><a href="/notes/http/interview/baseInterview.html" class="nav-link"><!---->
  基础http
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title"><!---->
        工具
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/webpack/interview/webpackInterview.html" class="nav-link"><!---->
  webpack
</a></li><li class="dropdown-item"><a href="/notes/esbuild/description.html" class="nav-link"><!---->
  esbuild
</a></li><li class="dropdown-item"><a href="/notes/rollup/introduction.html" class="nav-link"><!---->
  rollup
</a></li><li class="dropdown-item"><a href="/notes/git/indx.html" class="nav-link"><!---->
  git
</a></li><li class="dropdown-item"><a href="/notes/nginx/base.html" class="nav-link"><!---->
  nginx
</a></li><li class="dropdown-item"><a href="/notes/cli/base.html" class="nav-link"><!---->
  cli
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="react" class="dropdown-title"><span class="title"><!---->
        react
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/ILoveDevelop/react/principle/base.html" class="nav-link"><!---->
  react 源码阅读 代码视角
</a></li><li class="dropdown-item"><a href="/notes/react/preparation/idea.html" class="nav-link"><!---->
  react 源码阅读 思想视角
</a></li><li class="dropdown-item"><a href="/notes/react-illustration-series/main/macro-structure.html" class="nav-link"><!---->
  图解React源码
</a></li><li class="dropdown-item"><a href="/notes/umi/interview/pluginDva.html" class="nav-link"><!---->
  umi
</a></li><li class="dropdown-item"><a href="/notes/reactInterview/interview1.html" class="nav-link"><!---->
  整理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title"><!---->
        vue
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/vue/prepare/flow.html" class="nav-link"><!---->
  第 1 期：源码解读-准备工作
</a></li><li class="dropdown-item"><a href="/notes/vue/data-driven/_index.html" class="nav-link"><!---->
  第2期：源码解读-数据驱动
</a></li><li class="dropdown-item"><a href="/notes/vue/components/create-component.html" class="nav-link"><!---->
  第3期：源码解读-组件化
</a></li><li class="dropdown-item"><a href="/notes/vue/reactive/reactive-object.html" class="nav-link"><!---->
  第4期：源码解读-深入响应式原理
</a></li><li class="dropdown-item"><a href="/notes/vue/compile/entrance.html" class="nav-link"><!---->
  第5期：源码解读-编译
</a></li><li class="dropdown-item"><a href="/notes/vue/extend/event.html" class="nav-link"><!---->
  第6期：源码解读-扩展
</a></li><li class="dropdown-item"><a href="/notes/vue/vue-router/install.html" class="nav-link"><!---->
  第7期：源码解读-VueRouter
</a></li><li class="dropdown-item"><a href="/notes/vue/vuex/idex.html" class="nav-link"><!---->
  第8期：源码解读-Vuex
</a></li><li class="dropdown-item"><a href="/notes/vue/interview/baseInterview.html" class="nav-link"><!---->
  第9期：基础面试题
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="性能优化" class="dropdown-title"><span class="title"><!---->
        性能优化
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/performance/vue/vue2Base.html" class="nav-link"><!---->
  vue-性能优化
</a></li><li class="dropdown-item"><a href="/notes/performance/react/reactBase.html" class="nav-link"><!---->
  react-性能优化
</a></li><li class="dropdown-item"><a href="/notes/performance/base/drag1.html" class="nav-link"><!---->
  组件设计
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法&amp;设计" class="dropdown-title"><span class="title"><!---->
        算法&amp;设计
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/algorithm/interview/baseInterview.html" class="nav-link"><!---->
  第 1 期：基础面试题
</a></li><li class="dropdown-item"><a href="/notes/design/overview.html" class="nav-link"><!---->
  设计模式
</a></li></ul></div></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="js" class="dropdown-title"><span class="title"><!---->
      js
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/mozillajs/baseObject/symbol.html" class="nav-link"><!---->
  mozilla：基本对象
</a></li><li class="dropdown-item"><!----> <a href="/notes/jsInterview/baseInterview.html" class="nav-link"><!---->
  基础面试题
</a></li><li class="dropdown-item"><!----> <a href="/notes/js/stack/executionStack.html" class="nav-link"><!---->
  js 概念
</a></li><li class="dropdown-item"><!----> <a href="/notes/es6/interview1.html" class="nav-link"><!---->
  es6
</a></li><li class="dropdown-item"><!----> <a href="/notes/es7/interview1.html" class="nav-link"><!---->
  es7
</a></li><li class="dropdown-item"><!----> <a href="/notes/es8/interview1.html" class="nav-link"><!---->
  es8
</a></li><li class="dropdown-item"><!----> <a href="/notes/es9/interview1.html" class="nav-link"><!---->
  es9
</a></li><li class="dropdown-item"><!----> <a href="/notes/es10/interview1.html" class="nav-link"><!---->
  es10
</a></li><li class="dropdown-item"><!----> <a href="/notes/ts/jsx/support.html" class="nav-link"><!---->
  JSX
</a></li><li class="dropdown-item"><!----> <a href="/notes/ts/project/inDepthTs.html" class="nav-link"><!---->
  TypeScript 项目
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="css" class="dropdown-title"><span class="title"><!---->
      css
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/mozillaCss/reference/universalSelectors.html" class="nav-link"><!---->
  第 1 期：CSS API
</a></li><li class="dropdown-item"><!----> <a href="/notes/css/interview/baseCss.html" class="nav-link"><!---->
  零散记录
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="html" class="dropdown-title"><span class="title"><!---->
      html
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/html/interview/linkImport.html" class="nav-link"><!---->
  零散记录
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="端" class="dropdown-title"><span class="title"><!---->
      端
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/browser/interview/baseInterview.html" class="nav-link"><!---->
  基础浏览器
</a></li><li class="dropdown-item"><!----> <a href="/notes/http/interview/baseInterview.html" class="nav-link"><!---->
  基础http
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title"><!---->
      工具
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/webpack/interview/webpackInterview.html" class="nav-link"><!---->
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/notes/esbuild/description.html" class="nav-link"><!---->
  esbuild
</a></li><li class="dropdown-item"><!----> <a href="/notes/rollup/introduction.html" class="nav-link"><!---->
  rollup
</a></li><li class="dropdown-item"><!----> <a href="/notes/git/indx.html" class="nav-link"><!---->
  git
</a></li><li class="dropdown-item"><!----> <a href="/notes/nginx/base.html" class="nav-link"><!---->
  nginx
</a></li><li class="dropdown-item"><!----> <a href="/notes/cli/base.html" class="nav-link"><!---->
  cli
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="react" class="dropdown-title"><span class="title"><!---->
      react
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/ILoveDevelop/react/principle/base.html" class="nav-link"><!---->
  react 源码阅读 代码视角
</a></li><li class="dropdown-item"><!----> <a href="/notes/react/preparation/idea.html" class="nav-link"><!---->
  react 源码阅读 思想视角
</a></li><li class="dropdown-item"><!----> <a href="/notes/react-illustration-series/main/macro-structure.html" class="nav-link"><!---->
  图解React源码
</a></li><li class="dropdown-item"><!----> <a href="/notes/umi/interview/pluginDva.html" class="nav-link"><!---->
  umi
</a></li><li class="dropdown-item"><!----> <a href="/notes/reactInterview/interview1.html" class="nav-link"><!---->
  整理
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title"><!---->
      vue
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/vue/prepare/flow.html" class="nav-link"><!---->
  第 1 期：源码解读-准备工作
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/data-driven/_index.html" class="nav-link"><!---->
  第2期：源码解读-数据驱动
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/components/create-component.html" class="nav-link"><!---->
  第3期：源码解读-组件化
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/reactive/reactive-object.html" class="nav-link"><!---->
  第4期：源码解读-深入响应式原理
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/compile/entrance.html" class="nav-link"><!---->
  第5期：源码解读-编译
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/extend/event.html" class="nav-link"><!---->
  第6期：源码解读-扩展
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/vue-router/install.html" class="nav-link"><!---->
  第7期：源码解读-VueRouter
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/vuex/idex.html" class="nav-link"><!---->
  第8期：源码解读-Vuex
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/interview/baseInterview.html" class="nav-link"><!---->
  第9期：基础面试题
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="性能优化" class="dropdown-title"><span class="title"><!---->
      性能优化
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/performance/vue/vue2Base.html" class="nav-link"><!---->
  vue-性能优化
</a></li><li class="dropdown-item"><!----> <a href="/notes/performance/react/reactBase.html" class="nav-link"><!---->
  react-性能优化
</a></li><li class="dropdown-item"><!----> <a href="/notes/performance/base/drag1.html" class="nav-link"><!---->
  组件设计
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="算法&amp;设计" class="dropdown-title"><span class="title"><!---->
      算法&amp;设计
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/algorithm/interview/baseInterview.html" class="nav-link"><!---->
  第 1 期：基础面试题
</a></li><li class="dropdown-item"><!----> <a href="/notes/design/overview.html" class="nav-link"><!---->
  设计模式
</a></li></ul></div></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><a href="/notes/esbuild/description/" class="sidebar-link">基本概念</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable open"><!----> <span class="title">API</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/esbuild/api/transform/" aria-current="page" class="active sidebar-link">Transform &amp; Build Api</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#transform-api" class="sidebar-link">Transform Api</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#基础配置" class="sidebar-link heading3">基础配置</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#高级配置" class="sidebar-link heading3">高级配置</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#build-api" class="sidebar-link">Build API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#基础配置-2" class="sidebar-link heading3">基础配置</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#高级配置-2" class="sidebar-link heading3">高级配置</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#simple-options" class="sidebar-link">Simple options</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#bundle" class="sidebar-link heading3">Bundle</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#define" class="sidebar-link heading3">Define</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#entry-points" class="sidebar-link heading3">Entry points</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#external" class="sidebar-link heading3">External</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#format" class="sidebar-link heading3">Format</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#inject" class="sidebar-link heading3">Inject</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#loader" class="sidebar-link heading3">Loader</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#minify" class="sidebar-link heading3">Minify</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#outdir" class="sidebar-link heading3">Outdir</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#outfile" class="sidebar-link heading3">Outfile</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#platform" class="sidebar-link heading3">Platform</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#serve" class="sidebar-link heading3">Serve</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#sourcemap" class="sidebar-link heading3">Sourcemap</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#splitting" class="sidebar-link heading3">Splitting</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#target" class="sidebar-link heading3">Target</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#watch" class="sidebar-link heading3">Watch</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#write" class="sidebar-link heading3">Write</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#高级选项" class="sidebar-link">高级选项</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#allow-overwrite" class="sidebar-link heading3">Allow overwrite</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#asset-names" class="sidebar-link heading3">Asset names</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#banner" class="sidebar-link heading3">Banner</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#charset" class="sidebar-link heading3">Charset</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#chunk-names" class="sidebar-link heading3">Chunk names</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#color" class="sidebar-link heading3">Color</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#conditions" class="sidebar-link heading3">Conditions</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#entry-names" class="sidebar-link heading3">Entry names</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#footer" class="sidebar-link heading3">Footer</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#global-name" class="sidebar-link heading3">Global name</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#incremental" class="sidebar-link heading3">Incremental</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#jsx" class="sidebar-link heading3">JSX</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#jsx-factory" class="sidebar-link heading3">JSX factory</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#jsx-fragment" class="sidebar-link heading3">JSX fragment</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#keep-names" class="sidebar-link heading3">Keep names</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#legal-comments" class="sidebar-link heading3">Legal comments</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#log-level" class="sidebar-link heading3">Log level</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#log-limit" class="sidebar-link heading3">Log limit</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#main-fields" class="sidebar-link heading3">Main fields</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#metafile" class="sidebar-link heading3">Metafile</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#node-paths" class="sidebar-link heading3">Node paths</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#out-extension" class="sidebar-link heading3">Out extension</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#outbase" class="sidebar-link heading3">Outbase</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#preserve-symlinks" class="sidebar-link heading3">Preserve symlinks</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#public-path" class="sidebar-link heading3">Public path</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#pure" class="sidebar-link heading3">Pure</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#resolve-extensions" class="sidebar-link heading3">Resolve extensions</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#source-root" class="sidebar-link heading3">Source Root</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#sourcefile" class="sidebar-link heading3">Sourcefile</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#sources-content" class="sidebar-link heading3">Sources Content</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#stdin" class="sidebar-link heading3">Stdin</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#tree-shaking" class="sidebar-link heading3">Tree shaking</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#tsconfig" class="sidebar-link heading3">Tsconfig</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#tsconfig-raw" class="sidebar-link heading3">Tsconfig raw</a></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#working-directory" class="sidebar-link heading3">Working directory</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#js-specific-details" class="sidebar-link">JS-specific details</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/esbuild/api/transform/#running-in-the-browser" class="sidebar-link heading3">Running in the browser</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">contentTypes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">plugins</span> <span class="arrow right"></span></p> <!----></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb disable"><!----></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">Transform &amp; Build Api</span></h1> <div class="page-info"><!----> <!----><!----><span aria-label="Writing Date📅" data-balloon-pos="down" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2021-11-1</span></span><!----><!----><span aria-label="Reading Time⌛" data-balloon-pos="down" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon timer-icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z" fill="currentColor"></path></svg> <span>About 91 min</span> <meta property="timeRequired" content="PT91M"></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/notes/esbuild/api/transform/#transform-api" class="anchor-link heading2"><div>Transform Api</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#基础配置" class="anchor-link heading3"><div>基础配置</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#高级配置" class="anchor-link heading3"><div>高级配置</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#build-api" class="anchor-link heading2"><div>Build API</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#基础配置-2" class="anchor-link heading3"><div>基础配置</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#高级配置-2" class="anchor-link heading3"><div>高级配置</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#simple-options" class="anchor-link heading2"><div>Simple options</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#bundle" class="anchor-link heading3"><div>Bundle</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#define" class="anchor-link heading3"><div>Define</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#entry-points" class="anchor-link heading3"><div>Entry points</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#external" class="anchor-link heading3"><div>External</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#format" class="anchor-link heading3"><div>Format</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#inject" class="anchor-link heading3"><div>Inject</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#loader" class="anchor-link heading3"><div>Loader</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#minify" class="anchor-link heading3"><div>Minify</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#outdir" class="anchor-link heading3"><div>Outdir</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#outfile" class="anchor-link heading3"><div>Outfile</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#platform" class="anchor-link heading3"><div>Platform</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#serve" class="anchor-link heading3"><div>Serve</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#sourcemap" class="anchor-link heading3"><div>Sourcemap</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#splitting" class="anchor-link heading3"><div>Splitting</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#target" class="anchor-link heading3"><div>Target</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#watch" class="anchor-link heading3"><div>Watch</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#write" class="anchor-link heading3"><div>Write</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#高级选项" class="anchor-link heading2"><div>高级选项</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#allow-overwrite" class="anchor-link heading3"><div>Allow overwrite</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#asset-names" class="anchor-link heading3"><div>Asset names</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#banner" class="anchor-link heading3"><div>Banner</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#charset" class="anchor-link heading3"><div>Charset</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#chunk-names" class="anchor-link heading3"><div>Chunk names</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#color" class="anchor-link heading3"><div>Color</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#conditions" class="anchor-link heading3"><div>Conditions</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#entry-names" class="anchor-link heading3"><div>Entry names</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#footer" class="anchor-link heading3"><div>Footer</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#global-name" class="anchor-link heading3"><div>Global name</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#incremental" class="anchor-link heading3"><div>Incremental</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#jsx" class="anchor-link heading3"><div>JSX</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#jsx-factory" class="anchor-link heading3"><div>JSX factory</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#jsx-fragment" class="anchor-link heading3"><div>JSX fragment</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#keep-names" class="anchor-link heading3"><div>Keep names</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#legal-comments" class="anchor-link heading3"><div>Legal comments</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#log-level" class="anchor-link heading3"><div>Log level</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#log-limit" class="anchor-link heading3"><div>Log limit</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#main-fields" class="anchor-link heading3"><div>Main fields</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#metafile" class="anchor-link heading3"><div>Metafile</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#node-paths" class="anchor-link heading3"><div>Node paths</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#out-extension" class="anchor-link heading3"><div>Out extension</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#outbase" class="anchor-link heading3"><div>Outbase</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#preserve-symlinks" class="anchor-link heading3"><div>Preserve symlinks</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#public-path" class="anchor-link heading3"><div>Public path</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#pure" class="anchor-link heading3"><div>Pure</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#resolve-extensions" class="anchor-link heading3"><div>Resolve extensions</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#source-root" class="anchor-link heading3"><div>Source Root</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#sourcefile" class="anchor-link heading3"><div>Sourcefile</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#sources-content" class="anchor-link heading3"><div>Sources Content</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#stdin" class="anchor-link heading3"><div>Stdin</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#tree-shaking" class="anchor-link heading3"><div>Tree shaking</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#tsconfig" class="anchor-link heading3"><div>Tsconfig</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#tsconfig-raw" class="anchor-link heading3"><div>Tsconfig raw</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#working-directory" class="anchor-link heading3"><div>Working directory</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#js-specific-details" class="anchor-link heading2"><div>JS-specific details</div></a></li><li class="anchor"><a href="/notes/esbuild/api/transform/#running-in-the-browser" class="anchor-link heading3"><div>Running in the browser</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="transform-build-api"><a href="#transform-build-api" class="header-anchor">#</a> Transform &amp; Build Api</h1> <h2 id="transform-api"><a href="#transform-api" class="header-anchor">#</a> Transform Api</h2> <p>转换 API 调用对单个字符串进行操作，而无需访问文件系统。这使其非常适合在没有文件系统的环境（例如浏览器）中使用或作为其他工具链的一部分使用。下面是一个简单的转换：</p> <!----> <p>如果未提供输入文件且不存在 --bundle 标志，则命令行界面将使用此 API 调用。在这种情况下，输入字符串来自标准输入，输出字符串进入标准输出。转换 API 可以采用以下选项：</p> <h3 id="基础配置"><a href="#基础配置" class="header-anchor">#</a> 基础配置</h3> <p><a href="/notes/esbuild/api/transform.html#define">Define</a> <a href="/notes/esbuild/api/transform.html#format">Format</a> <a href="/notes/esbuild/api/transform.html#loader">Loader</a> <a href="/notes/esbuild/api/transform.html#minify">Minify</a> <a href="/notes/esbuild/api/transform.html#sourcemap">SourceMap</a> <a href="/notes/esbuild/api/transform.html#target">Target</a></p> <h3 id="高级配置"><a href="#高级配置" class="header-anchor">#</a> 高级配置</h3> <p><a href="/notes/esbuild/api/transform.html#banner">Banner</a> <a href="/notes/esbuild/api/transform.html#charset">Charset</a> <a href="/notes/esbuild/api/transform.html#color">Color</a> <a href="/notes/esbuild/api/transform.html#footer">Footer</a> <a href="/notes/esbuild/api/transform.html#global-name">Global name</a> <a href="/notes/esbuild/api/transform.html#jsx">JSX</a> <a href="/notes/esbuild/api/transform.html#jsx-factory">JSX factory</a> <a href="/notes/esbuild/api/transform.html#jsx-fragment">JSX fragment</a> <a href="/notes/esbuild/api/transform.html#keep-names">Keep names</a> <a href="/notes/esbuild/api/transform.html#legal-comments">Legal comments</a> <a href="/notes/esbuild/api/transform.html#log-level">Log level</a> <a href="/notes/esbuild/api/transform.html#log-limit">Log limit</a> <a href="/notes/esbuild/api/transform.html#pure">Pure</a> <a href="/notes/esbuild/api/transform.html#source-root">Source Root</a> <a href="/notes/esbuild/api/transform.html#sourcefile">Sourcefile</a> <a href="/notes/esbuild/api/transform.html#sources-content">Sources Content</a> <a href="/notes/esbuild/api/transform.html#tree-shaking">Tree shaking</a> <a href="/notes/esbuild/api/transform.html#tsconfig-raw">Tsconfig raw</a></p> <h2 id="build-api"><a href="#build-api" class="header-anchor">#</a> Build API</h2> <p>构建 API 调用对文件系统中的一个或多个文件进行操作。这允许文件相互引用并捆绑在一起。下面是一个简单的构建</p> <!----> <p>如果提供了至少一个输入文件或存在 --bundle 标志，则命令行界面将使用此 API 调用。请注意，默认情况下 esbuild 不捆绑。您必须显式传递 --bundle 标志以启用捆绑。如果未提供输入文件，则从标准输入读取单个输入文件。构建 API 可以采用以下选项：</p> <h3 id="基础配置-2"><a href="#基础配置-2" class="header-anchor">#</a> 基础配置</h3> <p><a href="/notes/esbuild/api/transform.html#bundle">Bundle</a> <a href="/notes/esbuild/api/transform.html#define">Define</a> <a href="/notes/esbuild/api/transform.html#entry-points">Entry points</a> <a href="/notes/esbuild/api/transform.html#external">External</a> <a href="/notes/esbuild/api/transform.html#format">Format</a> <a href="/notes/esbuild/api/transform.html#inject">Inject</a> <a href="/notes/esbuild/api/transform.html#loader">Loader</a> <a href="/notes/esbuild/api/transform.html#minify">Minify</a> <a href="/notes/esbuild/api/transform.html#outdir">Outdir</a> <a href="/notes/esbuild/api/transform.html#outfile">Outfile</a> <a href="/notes/esbuild/api/transform.html#platform">Platform</a> <a href="/notes/esbuild/api/transform.html#serve">Serve</a> <a href="/notes/esbuild/api/transform.html#sourcemap">Sourcemap</a> <a href="/notes/esbuild/api/transform.html#splitting">Splitting</a> <a href="/notes/esbuild/api/transform.html#target">Target</a> <a href="/notes/esbuild/api/transform.html#watch">Watch</a> <a href="/notes/esbuild/api/transform.html#write">Write</a></p> <h3 id="高级配置-2"><a href="#高级配置-2" class="header-anchor">#</a> 高级配置</h3> <p><a href="/notes/esbuild/api/transform.html#allow-overwrite">Allow overwrite</a> <a href="/notes/esbuild/api/transform.html#asset-names">Asset names</a> <a href="/notes/esbuild/api/transform.html#banner">Banner</a> <a href="/notes/esbuild/api/transform.html#charset">Charset</a> <a href="/notes/esbuild/api/transform.html#chunk-names">Chunk names</a> <a href="/notes/esbuild/api/transform.html#color">Color</a> <a href="/notes/esbuild/api/transform.html#conditions">Conditions</a> <a href="/notes/esbuild/api/transform.html#entry-names">Entry names</a> <a href="/notes/esbuild/api/transform.html#footer">Footer</a> <a href="/notes/esbuild/api/transform.html#global-name">Global name</a> <a href="/notes/esbuild/api/transform.html#incremental">Incremental</a> <a href="/notes/esbuild/api/transform.html#jsx">JSX</a> <a href="/notes/esbuild/api/transform.html#jsx-factory">JSX factory</a> <a href="/notes/esbuild/api/transform.html#jsx-fragment">JSX fragment</a> <a href="/notes/esbuild/api/transform.html#keep-names">Keep names</a> <a href="/notes/esbuild/api/transform.html#legal-comments">Legal comments</a> <a href="/notes/esbuild/api/transform.html#log-level">Log level</a> <a href="/notes/esbuild/api/transform.html#log-limit">Log limit</a> <a href="/notes/esbuild/api/transform.html#main-fields">Main fields</a> <a href="/notes/esbuild/api/transform.html#metafile">Metafile</a> <a href="/notes/esbuild/api/transform.html#node-paths">Node paths</a> <a href="/notes/esbuild/api/transform.html#out-extension">Out extension</a> <a href="/notes/esbuild/api/transform.html#outbase">Outbase</a> <a href="/notes/esbuild/api/transform.html#preserve-symlinks">Preserve symlinks</a> <a href="/notes/esbuild/api/transform.html#public-path">Public path</a> <a href="/notes/esbuild/api/transform.html#pure">Pure</a> <a href="/notes/esbuild/api/transform.html#resolve-extensions">Resolve extensions</a> <a href="/notes/esbuild/api/transform.html#source-root">Source Root</a> <a href="/notes/esbuild/api/transform.html#sourcefile">Sourcefile</a> <a href="/notes/esbuild/api/transform.html#sources-content">Sources Content</a> <a href="/notes/esbuild/api/transform.html#stdin">Stdin</a> <a href="/notes/esbuild/api/transform.html#tree-shaking">Tree shaking</a> <a href="/notes/esbuild/api/transform.html#tsconfig">Tsconfig</a> <a href="/notes/esbuild/api/transform.html#working-directory">Working directory</a></p> <h2 id="simple-options"><a href="#simple-options" class="header-anchor">#</a> Simple options</h2> <h3 id="bundle"><a href="#bundle" class="header-anchor">#</a> Bundle</h3> <p>支持: Build</p> <p>捆绑文件意味着将任何导入的依赖项内联到文件本身中。此过程是递归的，因此依赖项（等等）的依赖项也将被内联。默认情况下，esbuild 不会捆绑输入文件。必须像这样显式启用捆绑：</p> <!----> <p>请注意，捆绑与文件串联不同。在启用捆绑的情况下传递 esbuild 多个输入文件将创建多个单独的捆绑包，而不是将输入文件连接在一起。要将一组文件与 esbuild 连接在一起，请将它们全部导入到一个单一的入口点文件中，并将该文件与 esbuild 捆绑在一起。</p> <p>另请注意，捆绑仅适用于静态定义的导入（即当导入路径是字符串文字时）。在运行时定义的导入（即依赖于运行时代码评估的导入）不会被捆绑，因为捆绑是一个编译时操作。如果您需要捆绑执行此操作的代码，您可能需要使用另一个捆绑器而不是 esbuild。例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Static imports (will be bundled by esbuild)</span>
<span class="token keyword">import</span> <span class="token string">'pkg'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'pkg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'pkg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Dynamic imports (will not be bundled by esbuild)</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">pkg/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>foo<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">pkg/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>foo<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token string">'pkg'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>require<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="define"><a href="#define" class="header-anchor">#</a> Define</h3> <p>支持: Transform | Build</p> <p>此功能提供了一种用常量表达式替换全局标识符的方法。它可以是一种在构建之间更改某些代码行为而不更改代码本身的方法：</p> <!----> <p>替换表达式必须是 JSON 对象（空值、布尔值、数字、字符串、数组或对象）或单个标识符。数组和对象以外的替换表达式是内联替换的，这意味着它们可以参与常量折叠。数组和对象替换表达式存储在变量中，然后使用标识符引用而不是内联替换，这避免了替换值的重复副本，但意味着值不参与常量折叠。</p> <p>如果您想用字符串文字替换某些内容，请记住传递给 esbuild 的替换值本身必须包含引号。省略引号意味着替换值是一个标识符：</p> <!----> <p>替换表达式必须是 JSON 对象（空值、布尔值、数字、字符串、数组或对象）或单个标识符。数组和对象以外的替换表达式是内联替换的，这意味着它们可以参与常量折叠。数组和对象替换表达式存储在变量中，然后使用标识符引用而不是内联替换，这避免了替换值的重复副本，但意味着值不参与常量折叠。</p> <p>如果您想用字符串文字替换某些内容，请记住传递给 esbuild 的替换值本身必须包含引号。省略引号意味着替换值是一个标识符：</p> <!----> <p>替换表达式必须是 JSON 对象（空值、布尔值、数字、字符串、数组或对象）或单个标识符。数组和对象以外的替换表达式是内联替换的，这意味着它们可以参与常量折叠。数组和对象替换表达式存储在变量中，然后使用标识符引用而不是内联替换，这避免了替换值的重复副本，但意味着值不参与常量折叠。</p> <p>如果您想用字符串文字替换某些内容，请记住传递给 esbuild 的替换值本身必须包含引号。省略引号意味着替换值是一个标识符：</p> <!----> <p>替换表达式必须是 JSON 对象（空值、布尔值、数字、字符串、数组或对象）或单个标识符。数组和对象以外的替换表达式是内联替换的，这意味着它们可以参与常量折叠。数组和对象替换表达式存储在变量中，然后使用标识符引用而不是内联替换，这避免了替换值的重复副本，但意味着值不参与常量折叠。</p> <p>如果您想用字符串文字替换某些内容，请记住传递给 esbuild 的替换值本身必须包含引号。省略引号意味着替换值是一个标识符：</p> <!----> <p>如果您使用的是 CLI，请记住，不同的 shell 对如何转义双引号字符（当替换值是字符串时这是必需的）有不同的规则。使用 &quot; 反斜杠转义，因为它适用于 bash 和 Windows 命令提示符。在 bash 中工作的其他转义双引号的方法（例如用单引号将它们括起来）在 Windows 上不起作用，因为 Windows 命令提示符不会删除单引号. 当在 package.json 文件中使用 npm 脚本中的 CLI 时，这是相关的，人们希望它可以在所有平台上工作：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esbuild --define:process.env.NODE_ENV=\\\&quot;production\\\&quot; app.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果您仍然遇到使用不同 shell 的跨平台报价转义问题，您可能希望改用 JavaScript API。在那里您可以使用常规 JavaScript 语法来消除跨平台差异。</p> <h3 id="entry-points"><a href="#entry-points" class="header-anchor">#</a> Entry points</h3> <p>支持: Build</p> <p>这是一个文件数组，每个文件都用作捆绑算法的输入。它们被称为“入口点”，因为每个入口点都是被评估的初始脚本，然后加载它所代表的代码的所有其他方面。不是使用 <code>&lt;script&gt;</code> 标签在页面中加载许多库，而是使用 <code>import</code> 语句将它们导入到您的入口点（或另一个文件，然后导入到您的入口点）。</p> <p>简单的应用程序只需要一个入口点，但如果有多个逻辑上独立的代码组（例如主线程和工作线程），或者应用程序具有独立的相对不相关的区域（例如着陆页、编辑器），则附加入口点会很有用页面和设置页面。单独的入口点有助于引入关注点分离，并有助于减少浏览器需要下载的不必要代码量。如果适用，在浏览到第二个页面时，启用代码拆分可以进一步减少下载大小，第二个页面的入口点与已经访问过的第一个页面共享一些已下载的代码。</p> <p>指定入口点的简单方法是只传递一个文件路径数组：</p> <!----> <p>这将生成两个输出文件，<code>out/home.js</code> 和 <code>out/settings.js</code>，分别对应两个入口点 <code>home.ts</code> 和 <code>settings.ts</code>。</p> <p>为了进一步控制如何从相应的输入入口点派生输出文件的路径，您应该查看以下选项：</p> <ul><li><p><a href="">Entry names</a></p></li> <li><p><a href="">Out extension</a></p></li> <li><p><a href="">Outbase</a></p></li> <li><p><a href="">Outdir</a></p></li> <li><p><a href="">Outfile</a></p></li></ul> <p>此外，您还可以使用替代入口点语法为每个单独的入口点指定完全自定义的输出路径：</p> <!----> <p>这将生成两个输出文件，<code>out/out1.js</code> 和 <code>out/out2.j</code>s，分别对应两个入口点 <code>home.ts</code> 和 <code>settings.ts</code>。</p> <h3 id="external"><a href="#external" class="header-anchor">#</a> External</h3> <p>支持: Build</p> <p>您可以将文件或包标记为外部以将其从构建中排除。导入不会被捆绑，而是被保留（对 <code>iife</code> 和 <code>cjs</code> 格式使用 <code>require</code>，对 <code>esm</code> 格式使用 <code>import</code>）并将在运行时进行评估。</p> <p>这有多种用途。首先，它可用于从您的包中修剪不必要的代码，以便您知道永远不会执行的代码路径。例如，一个包可能包含只在 <code>node</code> 中运行的代码，但你只能在浏览器中使用该包。它还可以用于在运行时从无法捆绑的包中导入 <code>node</code> 中的代码。例如，<code>fsevents</code> 包包含一个原生扩展，<code>esbuild</code> 不支持该扩展。将某些内容标记为外部内容如下所示：</p> <!----> <p>您还可以在外部路径中使用 <code>*</code> 通配符将匹配该模式的所有文件标记为外部。例如，您可以使用 <code>*.png</code> 删除所有 <code>.png</code> 文件或使用 <code>/images/*</code> 删除所有以 <code>/images</code>/ 开头的路径。当外部路径中存在 <code>*</code> 通配符时，该模式将应用于源代码中的原始路径，而不是解析为实际文件系统路径后的路径。这使您可以匹配不是真实文件系统路径的路径。</p> <h3 id="format"><a href="#format" class="header-anchor">#</a> Format</h3> <p>支持: Transform | Build</p> <p>这将设置生成的 JavaScript 文件的输出格式。目前有三个可能的值：<code>iife</code>、<code>cjs</code> 和 <code>esm</code>。</p> <h4 id="iife"><a href="#iife" class="header-anchor">#</a> IIFE</h4> <p><code>iife</code> 格式代表“立即调用的函数表达式”，旨在在浏览器中运行。将代码包装在函数表达式中可确保代码中的任何变量不会意外地与全局范围内的变量发生冲突。如果您的入口点具有要在浏览器中公开为全局的导出，您可以使用全局名称设置来配置该全局的名称。 <code>iife</code> 格式是默认格式，除非您将平台设置为node。使用它看起来像这样：</p> <!----> <h4 id="commonjs"><a href="#commonjs" class="header-anchor">#</a> CommonJS</h4> <p><code>cjs</code> 格式代表“CommonJS”，旨在在 <code>node.js</code> 中运行。它假设环境包含<code>exports</code>, <code>require</code>, 和 <code>module</code>。使用 <code>ECMAScript</code> 模块语法导出的入口点将被转换为一个模块，每个导出名称的导出都有一个 <code>getter</code>。当您将 <a href="/notes/esbuild/api/transform/#platform">platform</a>设置为<code>node</code>时，<code>cjs</code> 格式是默认格式。使用它看起来像这样：</p> <!----> <h4 id="esm"><a href="#esm" class="header-anchor">#</a> ESM</h4> <p><code>esm</code> 格式代表“ECMAScript 模块”。它假定环境支持<code>import</code>和<code>export</code>语法。 <code>CommonJS</code> 模块语法中带有导出的入口点将被转换为 <code>module.exports</code> 值的单个默认导出。使用它看起来像这样：</p> <!----> <p><code>esm</code> 格式既可以在浏览器中使用，也可以在node中使用，但是您必须将其作为模块显式加载。如果您从另一个模块<code>import</code>它，这会自动发生。否则：</p> <ul><li><p>在浏览器中，您可以使用 <code>&lt;script src=&quot;file.js&quot; type=&quot;module&quot;&gt;&lt;/script&gt;</code> 加载模块。</p></li> <li><p>在 <code>node</code> 中，您可以使用 <code>node --experimental-modules file.mjs</code> 加载模块。请注意，node需要 <code>.mjs</code> 扩展名，除非您在 package.json 文件中配置了 <code>&quot;type&quot;: &quot;module&quot;</code>。您可以使用 <code>esbuild</code> 中的 <code>out</code> 扩展设置来自定义 <code>esbuild</code> 生成的文件的输出扩展。您可以在此处阅读有关在node中使用 <a href="https://nodejs.org/api/esm.html" target="_blank" rel="noopener noreferrer">ECMAScript 模块<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的更多信息。</p></li></ul> <h3 id="inject"><a href="#inject" class="header-anchor">#</a> Inject</h3> <p>支持：Build</p> <p>此选项允许您使用来自另一个文件的导入自动替换全局变量。这可能是一个有用的工具，可以将您无法控制的代码适应新环境。例如，假设您有一个名为 <code>process-shim.js</code> 的文件，它导出名为 <code>process</code> 的变量：</p> <!----> <p>这旨在替换 <code>node</code> 的 <code>process.cwd()</code> 函数的使用，以防止调用它的包在浏览器中运行时崩溃。您可以使用注入功能将全局标识符过程的所有使用替换为对该文件的导入：</p> <!----> <p>结果是这样的：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// out.js</span>
<span class="token keyword">let</span> process <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token function-variable function">cwd</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>使用带定义的<a href="/notes/esbuild/api/transform/#define">注入</a></strong></li></ul> <p>您还可以将其与定义<a href="/notes/esbuild/api/transform/#define">功能</a>结合起来，以便对您导入的内容更具选择性。例如：</p> <!----> <p>您可以使用定义功能将 <code>process.cwd</code> 映射到 <code>dummy_process_cwd</code>，然后使用注入功能从 <code>process-shim.js</code> 注入 <code>dummy_process_cwd</code>：</p> <!----> <p>这导致以下输出：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// out.js</span>
<span class="token keyword">function</span> <span class="token function">dummy_process_cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">dummy_process_cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong><a href="https://esbuild.github.io/content-types/#jsx" target="_blank" rel="noopener noreferrer">JSX<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的自动导入</strong></li></ul> <p>您可以使用注入功能自动提供 <code>JSX</code> 表达式的实现。比如你可以自动导入<code>react</code>包来提供<code>React.createElement</code>等功能。有关详细信息，<a href="https://esbuild.github.io/content-types/#auto-import-for-jsx" target="_blank" rel="noopener noreferrer">请参阅 JSX 文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <ul><li><strong>在没有导入的情况下注入文件</strong></li></ul> <p>您还可以将此功能用于没有导出的文件。在这种情况下，注入的文件只是在输出的其余部分之前出现，就好像每个输入文件都包含导入<code>“./file.js”</code>。由于 ECMAScript 模块的工作方式，这种注入仍然是“hygienic”，因为不同文件中具有相同名称的符号被重命名，因此它们不会相互冲突。</p> <ul><li><strong>有条件地注入文件</strong></li></ul> <p>如果您只想在实际使用导出时有条件地导入文件，您应该将注入的文件标记为没有副作用，将其放入包中并在该包的 <code>package.json</code> 文件中添加 <code>&quot;sideEffects&quot;: false</code> 。此设置是<a href="https://webpack.js.org/guides/tree-shaking/#mark-the-file-as-side-effect-free" target="_blank" rel="noopener noreferrer">来自 Webpack 的约定<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，esbuild 尊重任何导入的文件，而不仅仅是用于注入的文件。</p> <h3 id="loader"><a href="#loader" class="header-anchor">#</a> Loader</h3> <p>支持：Transform | Build</p> <p>此选项更改给定输入文件的解释方式。例如，<code>js</code> 加载器将文件解释为 JavaScript，而 <code>css</code> 加载器将文件解释为 CSS。有关所有内置加载器的完整列表，<a href="https://esbuild.github.io/content-types/" target="_blank" rel="noopener noreferrer">请参阅内容类型页面<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>为给定的文件类型配置加载器允许您使用<code>import</code> 语句或 <code>require</code> 调用加载该文件类型。例如，将 <code>.png</code> 文件扩展名配置为使用<a href="https://esbuild.github.io/content-types/#data-url" target="_blank" rel="noopener noreferrer">数据 URL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 加载器意味着导入 <code>.png</code> 文件会为您提供一个包含该图像内容的数据 URL：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> url <span class="token keyword">from</span> <span class="token string">'./example.png'</span>
<span class="token keyword">let</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span>
image<span class="token punctuation">.</span>src <span class="token operator">=</span> url
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span>

<span class="token keyword">import</span> svg <span class="token keyword">from</span> <span class="token string">'./example.svg'</span>
<span class="token keyword">let</span> doc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DOMParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parseFromString</span><span class="token punctuation">(</span>svg<span class="token punctuation">,</span> <span class="token string">'application/xml'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> node <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">importNode</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span>documentElement<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
</code></pre></div><p>上面的代码可以使用构建 API 调用进行<a href="/notes/esbuild/api/transform/#build-api">捆绑</a>，如下所示：</p> <!----> <p>如果您将构建 API 与来自 stdin 的输入一起使用，则此选项的指定方式不同，因为 <a href="/notes/esbuild/api/transform/#stdin">stdin</a> 没有文件扩展名。使用构建 API 为 stdin 配置加载器如下所示：</p> <!----> <p>如果您将构建 API 与来自 <a href="/notes/esbuild/api/transform/#stdin">stdin</a> 的输入一起使用，则此选项的指定方式不同，因为 stdin 没有文件扩展名。使用构建 API 为 stdin 配置加载器如下所示：</p> <!----> <p><a href="/notes/esbuild/api/transform/#transform-api">转换 API</a> 调用只需要一个加载器，因为它不涉及与文件系统的交互，因此不处理文件扩展名。为转换 API 配置加载器（在本例中为 <code>ts</code> 加载器）如下所示：</p> <!----> <h3 id="minify"><a href="#minify" class="header-anchor">#</a> Minify</h3> <p>支持：Transform | Build</p> <p>启用后，生成的代码将被压缩而不是漂亮的打印。压缩代码通常等同于非压缩代码，但更小，这意味着它下载速度更快但更难调试。通常你会在生产中而不是在开发中压缩代码。</p> <p>在 esbuild 中启用压缩如下所示：</p> <!----> <p>此选项组合执行三个独立的操作：删除空格，将语法重写为更紧凑，并将局部变量重命名为更短。通常你想要做所有这些事情，但如果需要，也可以单独启用这些选项：</p> <!----> <p>这些相同的概念也适用于 CSS，而不仅仅是 JavaScript：</p> <!----> <p>esbuild 中的 JavaScript 压缩算法通常生成的输出非常接近行业标准 JavaScript 压缩工具的压缩输出大小。该<a href="https://github.com/privatenumber/minification-benchmarks/tree/cd3e5acb8d38da5f86426d44ac95974812559683#readme" target="_blank" rel="noopener noreferrer">基准<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>测试对不同压缩器之间的输出大小进行了示例比较。虽然 esbuild 不是所有情况下的最佳 JavaScript 压缩器（并且不会尝试成为），但它努力在大多数代码的专用压缩工具大小的百分之几内生成压缩的输出，并且当然做得更快比其他工具。</p> <h4 id="思考"><a href="#思考" class="header-anchor">#</a> 思考</h4> <p>以下是使用 esbuild 作为压缩器时要记住的一些事项：</p> <ul><li><p>您可能还应该在启用压缩时设置目标<a href="/notes/esbuild/api/transform/#target">选项</a>。默认情况下，esbuild 利用现代 JavaScript 功能来使您的代码更小。例如，<code>a === undefined ||一个 === 空？ 1 : a</code> 可以压缩为 <code>a ?? 1</code>. 如果您不希望 esbuild 在压缩时利用现代 JavaScript 功能，您应该使用较旧的语言目标，例如 <code>--target=es6</code>。</p></li> <li><p>压缩对于 100% 的 JavaScript 代码都是不安全的。这对于 esbuild 以及其他流行的 JavaScript 压缩器（如 terser）都是如此。特别是，esbuild 并非旨在保留对函数调用 <code>.toString()</code> 的值。这样做的原因是因为如果所有函数中的所有代码都必须逐字保存，那么压缩几乎不会做任何事情并且几乎毫无用处。然而，这意味着依赖 <code>.toString()</code> 返回值的 JavaScript 代码在压缩时可能会中断。例如，当代码被压缩时，AngularJS 框架中的一些模式会中断，因为 AngularJS 使用 <code>.toString()</code> 来读取函数的参数名称。解决方法是<a href="https://docs.angularjs.org/api/auto/service/$injector#injection-function-annotation" target="_blank" rel="noopener noreferrer">改用显式注释<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></li> <li><p>默认情况下，esbuild 不会在函数和类对象上保留 <code>.name</code> 的值。这是因为大多数代码不依赖于这个属性，使用较短的名称是一个重要的大小优化。但是，某些代码确实依赖 <code>.name</code> 属性进行注册和绑定。如果您需要依赖它，您应该启用<a href="/notes/esbuild/api/transform/#keep-names">保留名称</a>选项。</p></li> <li><p>使用某些 JavaScript 功能可以禁用许多 esbuild 的优化，包括压缩。具体来说，使用直接 <code>eval</code> 和/或 <code>with</code> 语句可以防止 esbuild 将标识符重命名为较小的名称，因为这些功能会导致标识符绑定发生在运行时而不是编译时。这几乎总是无意的，并且只是因为人们不知道直接 <code>eval</code> 是什么以及它为什么不好。</p></li></ul> <blockquote><p>如果您正在考虑编写一些这样的代码：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Direct eval (will disable minification for the whole file)</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span>something<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>您可能应该像这样编写代码，以便可以压缩代码：</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Indirect eval (has no effect on the surrounding code)</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> eval<span class="token punctuation">)</span><span class="token punctuation">(</span>something<span class="token punctuation">)</span>
</code></pre></div><p>这里有关于直接<code>eval</code>的后果和可用替代方案的更多信息。</p> <ul><li><p>esbuild 中的压缩算法尚未进行高级代码优化。特别是，以下代码优化对于 JavaScript 代码是可能的，但不是由 esbuild 完成的（不是详尽的列表）：</p> <ul><li><p>函数体内的死代码消除</p></li> <li><p>函数内联</p></li> <li><p>跨语句常量传播</p></li> <li><p>对象形状建模</p></li> <li><p>分配下沉</p></li> <li><p>方法去虚拟化</p></li> <li><p>符号执行</p></li> <li><p>JSX 表达式提升</p></li> <li><p>TypeScript 枚举检测和内联</p></li></ul></li></ul> <p>如果您的代码使用的模式要求其中一些代码优化形式紧凑，或者您正在为您的用例搜索最佳 JavaScript 压缩算法，您应该考虑使用其他工具。实现其中一些高级代码优化的工具的一些示例包括 <a href="https://github.com/terser/terser#readme" target="_blank" rel="noopener noreferrer">Terser<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://github.com/google/closure-compiler#readme" target="_blank" rel="noopener noreferrer">Google Closure Compiler<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="outdir"><a href="#outdir" class="header-anchor">#</a> Outdir</h3> <p>支持：Build</p> <p>此选项设置构建操作的输出目录。例如，此命令将生成一个名为的目录</p> <!----> <p>如果输出目录尚不存在，则会生成输出目录，但如果已包含某些文件，则不会清除它。任何生成的文件都会以静默方式覆盖同名的现有文件。如果您希望输出目录仅包含来自当前 esbuild 运行的文件，您应该在运行 esbuild 之前自己清除输出目录。</p> <p>如果您的构建在不同的目录中包含多个入口点，则目录结构将从所有输入入口点路径中最低的<a href="https://en.wikipedia.org/wiki/Lowest_common_ancestor" target="_blank" rel="noopener noreferrer">公共祖先目录<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>开始复制到输出目录中。例如，如果有两个入口点 <code>src/home/index.ts</code> 和 <code>src/about/index.ts</code>，则输出目录将包含 <code>home/index.js</code> 和 <code>about/index.js</code>。如果要自定义此行为，则应更改 <a href="/notes/esbuild/api/transform/#outbase">outbase 目录</a>。</p> <h3 id="outfile"><a href="#outfile" class="header-anchor">#</a> Outfile</h3> <p>支持: Build</p> <p>此选项设置构建操作的输出文件名。这仅适用于有单个入口点的情况。如果有多个入口点，则必须改用 <a href="/notes/esbuild/api/transform/#outdir">outdir</a> 选项来指定输出目录。使用 outfile 看起来像这样：</p> <!----> <h3 id="platform"><a href="#platform" class="header-anchor">#</a> Platform</h3> <p>支持：Build</p> <p>默认情况下，esbuild 的 bundler 被配置为生成用于浏览器的代码。如果您的捆绑代码打算在 node 中运行，您应该将平台设置为 <code>node</code>：</p> <!----> <p>当平台设置为<code>浏览器(browser)</code>时（默认值）：</p> <ul><li><p>默认输出<a href="/notes/esbuild/api/transform/#format">格式</a>设置为 <code>iife</code>，它将生成的 JavaScript 代码包装在立即调用的函数表达式中，以防止变量泄漏到全局范围内。</p></li> <li><p>如果包在其 <code>package.json</code> 文件中为<code>浏览器</code>字段指定了映射，esbuild 将使用该映射将特定文件或模块替换为其浏览器友好版本。例如，一个包可能包含用 <code>path-browserify</code> 替换<code>路径</code>。</p></li> <li><p><a href="/notes/esbuild/api/transform/#main-fields">主要字段</a>设置设置为 <code>browser,module,main</code> 但有一些额外的特殊行为。如果包支持 <code>module</code> 和 <code>main</code> 但不支持<code>浏览器</code>，那么如果使用 <code>require()</code> 导入该<code>包</code>，则使用 <code>main</code> 而不是 <code>module</code>。此行为通过将函数分配给 <code>module.exports</code> 来提高与导出函数的 CommonJS 模块的兼容性。</p></li> <li><p><a href="/notes/esbuild/api/transform/#conditions">条件</a>设置自动包含<code>浏览器</code>条件。这改变了 <code>package.json</code> 文件中的<code>导出</code>字段被解释为更喜欢浏览器特定代码的方式。</p></li> <li><p>如果启用了所有<a href="/notes/esbuild/api/transform/#minify">压缩选项</a>，则所有 <code>process.env.NODE_ENV</code> 表达式都会<a href="/notes/esbuild/api/transform/#define">自动定义</a>为<code>“production”</code>，否则为<code>“development”</code>。仅当 <code>process</code>、<code>process.env</code> 和 <code>process.env.NODE_ENV</code> 尚未定义时才会发生这种情况。这种替换对于避免基于 React 的代码立即崩溃是必要的（因为<code>进程</code>是node API，而不是 Web API）。</p></li></ul> <p>当平台设置为node时：</p> <ul><li><p>默认输出<a href="/notes/esbuild/api/transform/#format">格式</a>设置为<code>cjs</code>，代表CommonJS（node使用的模块格式）。使用 <code>export</code> 语句的 ES6 样式导出将转换为 CommonJS <code>导出</code>对象上的 getter。</p></li> <li><p>所有<a href="https://nodejs.org/docs/latest/api/" target="_blank" rel="noopener noreferrer">内置node模块<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（例如 <code>fs</code>）都会自动标记为<a href="/notes/esbuild/api/transform/#external">外部</a>模块，因此当捆绑器尝试捆绑它们时，它们不会导致错误。</p> <ul><li><p><a href="/notes/esbuild/api/transform/#main-fields">主要字段</a>设置设置为 <code>main,module</code>。这意味着同时提供 <code>module</code> 和 <code>main</code> 的包可能不会发生摇树，因为摇树适用于 ECMAScript 模块，但不适用于 CommonJS 模块。</p></li> <li><p>不幸的是，一些包错误地将模块视为“浏览器代码”而不是“ECMAScript <code>模块</code>代码”，因此为了兼容性需要这种默认行为。如果您想启用摇树并且知道这样做是安全的，您可以手动将<a href="/notes/esbuild/api/transform/#main-fields">主要字段</a>设置配置为 <code>module,main</code>。</p></li></ul></li> <li><p><a href="/notes/esbuild/api/transform/#conditions">条件</a>设置自动包含<code>node</code>条件。这改变了 <code>package.json</code> 文件中的<code>导出</code>字段被解释为更喜欢特定于node的代码的方式。</p></li></ul> <p>当平台设置为neutral时：</p> <ul><li><p>默认输出<a href="/notes/esbuild/api/transform/#format">格式</a>设置为 <code>esm</code>，它使用 ECMAScript 2015（即 ES6）引入的<code>导出</code>语法。如果此默认值不合适，您可以更改输出格式。</p></li> <li><p>默认情况下，<a href="/notes/esbuild/api/transform/#main-fields">主要字段</a>设置为空。如果您想使用 npm 样式的包，您可能必须将其配置为其他内容，例如 node 使用的标准 <code>main</code> 字段的 main 。</p></li> <li><p><a href="/notes/esbuild/api/transform/#conditions">条件</a>设置不会自动包含任何特定于平台的值。</p></li></ul> <p>另请参阅<a href="https://esbuild.github.io/getting-started/#bundling-for-the-browser" target="_blank" rel="noopener noreferrer">浏览器的捆绑<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和<a href="https://esbuild.github.io/getting-started/#bundling-for-node" target="_blank" rel="noopener noreferrer">node的捆绑<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="serve"><a href="#serve" class="header-anchor">#</a> Serve</h3> <p>支持: Build</p> <p>在开发过程中，进行更改时通常会在文本编辑器和浏览器之间来回切换。在浏览器中重新加载代码之前手动重新运行 esbuild 很不方便。有几种方法可以自动执行此操作：</p> <ul><li><p>使用<a href="/notes/esbuild/api/transform/#watch">监视模式</a>在文件更改时重新运行 esbuild</p></li> <li><p>配置您的文本编辑器以在每次保存时运行 esbuild</p></li> <li><p>使用根据每个请求重建的 Web 服务器为您的代码提供服务</p></li></ul> <p>这个 API 调用实现了最后一个方法。服务 API 类似于<a href="/notes/esbuild/api/transform/#build-api">构建 API</a> 调用，但它不是将生成的文件写入文件系统，而是启动一个长期存在的本地 HTTP Web 服务器，为最新构建的生成文件提供服务。每一批新请求都会导致 esbuild 在响应请求之前重新运行构建命令，以便您的文件始终是最新的。</p> <p>与其他方法相比，这种方法的优势在于 Web 服务器可以延迟浏览器的请求，直到构建完成。这样，在最新构建完成之前在浏览器中重新加载代码将永远不会运行先前构建中的代码。这些文件是从内存中提供的，不会写入文件系统，以确保无法观察到过时的文件。</p> <p>请注意，这仅用于开发。不要在生产中使用它。在生产中，您应该在不使用 esbuild 作为 Web 服务器的情况下提供静态文件。</p> <p>使用服务 API 有两种不同的方法：</p> <h4 id="方法一-用-esbuild-服务一切"><a href="#方法一-用-esbuild-服务一切" class="header-anchor">#</a> 方法一：用 esbuild 服务一切</h4> <p>使用这种方法，除了 esbuild 生成的文件之外，您还为 esbuild 提供了一个名为 <code>serveir 的目录</code>，其中包含要提供的额外内容。这适用于创建一些静态 HTML 页面并希望使用 esbuild 捆绑 JavaScript 和/或 CSS 的简单情况。您可以将您的 HTML 文件放在 <code>servedir</code> 中，并将您的其他源代码放在 <code>servedir</code> 之外，然后将 <code>outdir</code> 设置在 <code>servedir</code> 内的某个位置：</p> <!----> <p>在上面的例子中，你的 <code>www/index.html</code> 页面可以像这样引用 <code>src/app.js</code> 中的编译代码：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>js/app.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>当您这样做时，每个 HTTP 请求都会导致 esbuild 重建您的代码并为您提供最新版本。因此，每次您重新加载页面时，<code>js/app.js</code> 将始终是最新的。请注意，虽然生成的代码似乎在 <code>outdir</code> 目录中，但它实际上从未使用 serve API 写入文件系统。相反，生成的代码阴影的路径（即优先于）<code>servedir</code> 和生成的文件中的其他路径直接从内存中提供。</p> <p>这样做的好处是您可以在开发和生产中使用完全相同的 HTML 页面。在开发中，您可以使用 <code>--servedir=</code> 运行 esbuild，esbuild 将直接提供生成的输出文件。对于生产，您可以省略该标志，esbuild 会将生成的文件写入文件系统。在这两种情况下，您应该在开发和生产中使用完全相同的代码在浏览器中获得完全相同的结果。</p> <p>默认情况下，端口会自动选择为第一个等于或大于 8000 的开放端口。端口号从 API 调用返回（或打印到 CLI 的终端），因此您可以知道要访问哪个 URL。如有必要，可以将端口设置为特定的内容（在下面进一步描述）。</p> <h4 id="方法-2-仅使用-esbuild-提供生成的文件"><a href="#方法-2-仅使用-esbuild-提供生成的文件" class="header-anchor">#</a> 方法 2：仅使用 esbuild 提供生成的文件</h4> <p>使用这种方法，您只需告诉 esbuild 提供 <a href="/notes/esbuild/api/transform/#outdir">outdir</a> 的内容，而无需为其提供任何额外的内容。这适用于更复杂的开发设置。例如，您可能希望使用 NGINX 作为反向代理，在开发过程中将不同路径路由到单独的后端服务（例如 <code>/static/</code> 到 NGINX、<code>/api/</code> 到 node、<code>/js/</code> 到 esbuild 等）。通过这种方法使用 esbuild 看起来像这样：</p> <!----> <p>上面示例中的 API 调用将在 <a href="http://localhost:8000/out.js" target="_blank" rel="noopener noreferrer">http://localhost:8000/out.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 处提供 src/app.js 的编译内容。就像第一种方法一样，每个 HTTP 请求都会导致 esbuild 重建您的代码并为您提供最新版本，因此 <code>out.js</code> 将始终是最新的。然后，您的 HTML 文件（由另一个端口上的另一个 Web 服务器提供服务）可以像这样从您的 HTML 引用编译后的文件：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://localhost:8000/out.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在未启用 Web 服务器的情况下使用普通构建命令时，Web 服务器的 URL 结构完全反映<a href="/notes/esbuild/api/transform/#outdir">输出目录</a>的 URL 结构。例如，如果输出目录通常包含一个名为 <code>./pages/about.js</code> 的文件，则 Web 服务器将具有相应的 <code>/pages/about.js</code> 路径。</p> <p>如果您想浏览 Web 服务器以查看哪些 URL 可用，您可以通过访问目录名而不是文件名来使用内置目录列表。例如，如果您在端口 8000 上运行 esbuild 的 Web 服务器，则可以在浏览器中访问 <a href="http://localhost:8000/" target="_blank" rel="noopener noreferrer">http://localhost:8000/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 以查看 Web 服务器的根目录。从那里您可以单击链接以浏览 Web 服务器上的不同文件和目录。</p> <h4 id="arguments"><a href="#arguments" class="header-anchor">#</a> Arguments</h4> <p>请注意，服务 API 是与<a href="/notes/esbuild/api/transform/#build-api">构建 API</a> 不同的 API 调用。这是因为启动一个长时间运行的 Web 服务器是不同的，足以保证不同的参数和返回值。服务 API 调用的第一个参数是带有服务特定选项的选项对象：</p> <!----> <ul><li>port</li></ul> <p>可以选择在此处配置 HTTP 端口。如果省略，则默认为开放端口，优先选择端口 8000。您可以在命令行上使用 <code>--serve=8000</code> 而不是 <code>--serve</code> 设置端口。</p> <ul><li>host</li></ul> <p>默认情况下，esbuild 使 Web 服务器可用于所有 IPv4 网络接口。这对应于 <code>0.0.0.0</code> 的主机地址。如果您想配置不同的主机（例如，仅在 <code>127.0.0.1</code> 环回接口上提供服务而不向网络公开任何内容），您可以使用此参数指定主机。您可以使用 <code>--serve=127.0.0.1:8000</code> 而不是 <code>--serve</code> 在命令行上设置主机。</p> <p>如果您需要使用 IPv6 而不是 IPv4，您只需要指定一个 IPv6 主机地址。等效于 IPv6 中的 <code>127.0.0.1</code> 环回接口是 <code>::1</code>，等效于 IPv6 中的 <code>0.0.0.0</code> 通用接口是 <code>::</code>。如果在命令行中将主机设置为 IPv6 地址，则需要用方括号将 IPv6 地址括起来，以区分地址中的冒号和分隔主机和端口的冒号，如下所示：<code>--serve=[:: ]：8000</code>。</p> <ul><li>servedir</li></ul> <p>当传入请求与任何生成的输出文件路径不匹配时，这是 esbuild 的 HTTP 服务器提供的额外内容目录，而不是 404。这使您可以将 esbuild 用作通用的本地 Web 服务器。例如，使用 <code>esbuild --servedir=</code>。为<code>本地</code>主机上的<code>当前目录</code>提供服务。在前面关于不同方法的部分中更详细地描述了使用 serveir。</p> <ul><li>onRequest</li></ul> <p>每个传入请求都会调用一次，并提供有关请求的一些信息。 CLI 使用此回调为每个请求打印日志消息。时间字段是为请求生成数据的时间，但不包括将请求流式传输到客户端的时间。</p> <p>请注意，这是在请求完成后调用的。无法使用此回调以任何方式修改请求。如果你想这样做，你应该<a href="/notes/esbuild/api/transform/#customizing-server-behavior">在 esbuild 前面放置一个代理</a>。</p> <p>服务 API 调用的第二个参数是在每个请求上调用的底层构建 API 的正常选项集。有关这些选项的更多信息，请参阅<a href="/notes/esbuild/api/transform/#build-api">构建 API</a> 的文档。</p> <h4 id="return-values"><a href="#return-values" class="header-anchor">#</a> Return values</h4> <!----> <ul><li>port</li></ul> <p>这是 Web 服务器最终使用的端口。如果您没有指定端口，您将需要使用它，因为 esbuild 最终会选择一个任意的开放端口，并且您需要知道它选择了哪个端口才能连接到它。如果您使用的是 CLI，则此端口号将打印到终端中的 stderr。</p> <ul><li>host</li></ul> <p>这是最终被 Web 服务器使用的主机。除非配置了自定义主机，否则它将是 <code>0.0.0.0</code>（即在所有可用的网络接口上提供服务）。</p> <ul><li>wait</li></ul> <p>只要可以打开套接字，服务 API 调用就会立即返回。<code>await</code>返回值提供了一种在 Web 服务器终止时通知的方法，无论是由于网络错误还是由于在将来的某个时间点<code>stop</code>调用。</p> <ul><li>stop</li></ul> <p>调用这个回调来停止 web 服务器，当你不再需要它来清理资源时你应该这样做。这将立即终止所有打开的连接并唤醒任何<code>等待</code>等待返回值的代码。</p> <h4 id="customizing-server-behavior"><a href="#customizing-server-behavior" class="header-anchor">#</a> Customizing server behavior</h4> <p>无法连接到 esbuild 的本地服务器来自定义服务器本身的行为。相反，应该通过在 esbuild 前面放置一个代理来自定义行为。</p> <p>这是一个简单的代理服务器示例，可帮助您入门。它添加了一个自定义的 404 页面，而不是 esbuild 的默认 404 页面：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// js</span>

<span class="token keyword">const</span> esbuild <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'esbuild'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Start esbuild's server on a random local port</span>
esbuild<span class="token punctuation">.</span><span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  servedir<span class="token operator">:</span> __dirname<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... your build options go here ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// The result tells us where esbuild's local server is</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>host<span class="token punctuation">,</span> port<span class="token punctuation">}</span> <span class="token operator">=</span> result

  <span class="token comment">// Then start a proxy server on port 3000</span>
  http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
      hostname<span class="token operator">:</span> host<span class="token punctuation">,</span>
      port<span class="token operator">:</span> port<span class="token punctuation">,</span>
      path<span class="token operator">:</span> req<span class="token punctuation">.</span>url<span class="token punctuation">,</span>
      method<span class="token operator">:</span> req<span class="token punctuation">.</span>method<span class="token punctuation">,</span>
      headers<span class="token operator">:</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Forward each incoming request to esbuild</span>
    <span class="token keyword">const</span> proxyReq <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token parameter">proxyRes</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// If esbuild returns &quot;not found&quot;, send a custom 404 page</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>proxyRes<span class="token punctuation">.</span>statusCode <span class="token operator">===</span> <span class="token number">404</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'text/html'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'&lt;h1&gt;A custom 404 page&lt;/h1&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// Otherwise, forward the response from esbuild to the client</span>
      res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span>proxyRes<span class="token punctuation">.</span>statusCode<span class="token punctuation">,</span> proxyRes<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">;</span>
      proxyRes<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token punctuation">{</span> end<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Forward the body of the request to esbuild</span>
    req<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>proxyReq<span class="token punctuation">,</span> <span class="token punctuation">{</span> end<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>此代码在随机本地端口上启动 esbuild 的服务器，然后在端口 3000 上启动代理服务器。在开发过程中，您将在浏览器中加载 <a href="http://localhost:3000" target="_blank" rel="noopener noreferrer">http://localhost:3000<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，它与代理通信。此示例演示在 esbuild 处理请求后修改响应，但您也可以在 esbuild 处理请求之前修改或替换请求。</p> <p>你可以用这样的代理做很多事情，包括：</p> <ul><li><p>注入你自己的 404 页面（上面的例子）</p></li> <li><p>自定义路由到文件系统上文件的映射</p></li> <li><p>将一些路由重定向到 API 服务器而不是 esbuild</p></li> <li><p>使用您自己的自签名证书添加对 HTTPS 的支持</p></li></ul> <p>如果您有更高级的需求，也可以使用真正的代理，例如 <a href="https://nginx.org/en/docs/beginners_guide.html#proxy" target="_blank" rel="noopener noreferrer">NGINX<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="sourcemap"><a href="#sourcemap" class="header-anchor">#</a> Sourcemap</h3> <p>支持：Transform | Build</p> <p>源映射可以使调试代码更容易。它们对将生成的输出文件中的行/列偏移转换回相应原始输入文件中的行/列偏移所需的信息进行编码。如果您生成的代码与原始代码有很大不同（例如，您的原始代码是 TypeScript 或您启用了<a href="/notes/esbuild/api/transform/#minify">压缩</a>），这将非常有用。如果您更喜欢在浏览器的开发人员工具中查看单个文件而不是一个大的捆绑文件，这也很有用。</p> <p>请注意，JavaScript 和 CSS 都支持源地图输出，并且相同的选项适用于两者。下面讨论 <code>.js</code> 文件的所有内容也同样适用于 <code>.css</code> 文件。</p> <p>启用源映射生成将在任何生成的 .js 文件旁边生成一个 <code>.js.map</code> 文件，并在指向 <code>.js.map</code> 文件的 <code>.js</code> 文件底部添加一个特殊的 <code>//# sourceMappingURL=</code> 注释：</p> <!----> <p>如果输入文件本身包含一个特殊的 <code>//# sourceMappingURL=</code> 注释，esbuild 将自动尝试解析链接的源映射。如果成功，生成的源映射中的映射将一直映射回输入源映射中引用的原始源代码。</p> <p>如果你想从生成的 <code>.js</code> 文件中省略特殊的 <code>//# sourceMappingURL=</code> 注释，但你仍然想生成 <code>.js.map</code> 文件，你应该将源映射模式设置为<code>外部</code>：</p> <!----> <p>如果要将整个源映射插入 <code>.js</code> 文件而不是生成单独的 <code>.js.map</code> 文件，则应将源映射模式设置为<code>内联</code>：</p> <!----> <p>请记住，源映射通常非常大，因为它们包含您所有的原始源代码，因此您通常不希望发布包含<code>内联</code>源映射的代码。要从源映射中删除源代码（仅保留文件名和行/列映射），请使用<a href="/notes/esbuild/api/transform/#sources-content">源内容</a>选项。</p> <p>如果你想同时拥有<code>inline</code>和<code>external</code>的效果，你应该将source map mode设置为<code>both</code>：</p> <!----> <h4 id="using-source-maps"><a href="#using-source-maps" class="header-anchor">#</a> Using source maps</h4> <p>在浏览器中，只要启用了源映射设置，浏览器的开发人员工具就会自动获取源映射。请注意，浏览器仅使用源映射在记录到控制台时更改堆栈跟踪的显示。堆栈跟踪本身不会被修改，因此在您的代码中检查 <code>error.stack</code> 仍然会提供包含已编译代码的未映射堆栈跟踪。以下是在浏览器的开发人员工具中启用此设置的方法：</p> <ul><li><p>Chrome：⚙ → 启用 JavaScript 源映射</p></li> <li><p>Safari: ⚙ → Sources → Enable source maps</p></li> <li><p>Firefox：···→ 启用源地图</p></li></ul> <p>在 node 中，从 <a href="https://nodejs.org/en/blog/release/v12.12.0/" target="_blank" rel="noopener noreferrer">v12.12.0<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 版本开始原生支持源映射。默认情况下禁用此功能，但可以使用标志启用。与浏览器不同，实际的堆栈跟踪也在 node 中修改，因此检查代码中的 <code>error.stack</code> 将提供包含原始源代码的映射堆栈跟踪。以下是如何在node中启用此设置（<code>--enable-source-maps</code> 标志必须位于脚本文件名之前）：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>
node --enable-source-maps app.js
</code></pre></div><h3 id="splitting"><a href="#splitting" class="header-anchor">#</a> Splitting</h3> <p>支持: Build</p> <blockquote><p>代码拆分仍然是正在进行的工作。它目前仅适用于<code>ESM</code>输出<a href="/notes/esbuild/api/transform/#format">格式</a>。还有一个 <a href="https://github.com/evanw/esbuild/issues/399" target="_blank" rel="noopener noreferrer">ordering issue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 问题，横跨代码拆分块具有<code>导入</code>语句。您可以遵循关于此功能的<a href="https://github.com/evanw/esbuild/issues/16" target="_blank" rel="noopener noreferrer">the tracking issue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>问题。</p></blockquote> <p>这使得“代码拆分”能够用于两个目的：</p> <ul><li><p>在多个入口点之间共享的代码被拆分为入口点导入的单独的共享文件。这样，如果用户首先浏览一个页面然后到另一个页面，如果共享部分已被下载并被其浏览器缓存，则它们不必从头下载第二页的所有JavaScript。</p></li> <li><p>通过异步<code>import()</code>表达式引用的代码将被拆分为单独的文件，并且仅在评估该表达式时加载。这允许您通过仅下载您需要的代码来改进应用的初始下载时间，然后在稍后需要懒惰下载其他代码。</p></li> <li><p>没有代码拆分启用，<code>import()</code> 表达式变为Promise.resolve().then(() =&gt; require())。这仍然保留了表达式的异步语义，但这意味着导入的代码包含在同一捆绑包中，而不是将其拆分为单独的文件。</p></li></ul> <p>启用代码拆分时，还必须使用<a href="/notes/esbuild/api/transform/#outdir">outir</a>的设置配置输出目录：</p> <!----> <h3 id="target"><a href="#target" class="header-anchor">#</a> Target</h3> <p>支持：Transform | Build</p> <p>这为生成的JavaScript代码设置了目标环境。例如，您可以将eSbuild配置为不生成node版本10无法处理的任何较新的JavaScript。目标可以设置为诸如<code>ES2020</code>的JavaScript语言版本，也可以是单个引擎的版本列表（目前是<code>Chrome</code>，<code>Firefox</code>，<code>Safari</code>，<code>Edge</code>或<code>node</code>）。默认目标是<code>esnext</code>，这意味着默认情况下，eSbuild将假设支持所有最新的JavaScript功能。</p> <p>以下是一个使用esbuild中的所有可用目标环境名称的示例。请注意，您不需要指定所有这些;您只需指定项目所关心的目标环境的子集。如果您想要的（例如<code>Node12.19.0</code>而不是<code>Node12</code>），您也可以更精确地了解版本号</p> <!----> <p>您可以参考<a href="https://esbuild.github.io/content-types/#javascript" target="_blank" rel="noopener noreferrer">JavaScript Loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，了解有关哪些语法功能的详细信息，其中包含语言版本。请记住，虽然<code>ES2020</code>等JavaScript语言版本在年份中确定，但这是规范批准的一年。它与年份无关，所有主要浏览器都实施该规范，这些规范通常会发生在早年或更晚于该年。</p> <p>请注意，如果使用eSbuild尚未支持转换为当前语言目标的语法功能，则Esbuild将生成不支持的语法的错误。例如，这通常是针对<code>ES5</code>语言版本的情况，因为eSbuild仅支持将大多数较新的JavaScript语法功能转换为<code>ES6</code>。</p> <h3 id="watch"><a href="#watch" class="header-anchor">#</a> Watch</h3> <p>支持：Build</p> <p>在构建API上启用监视模式告诉eSBuild侦听文件系统的更改，并在可以使构建无效的文件更改时重建。使用它看起来像这样：</p> <!----> <p>如果您使用的是JavaScript或Go API，则可以选择在增量构建完成时提供调用的回调。一旦构建完成，这可以用来做某事（例如，在浏览器中重新加载您的应用程序）：</p> <!----> <p>使用轮询而不是OS特定文件系统API实现eSBuild中的监视模式以进行可移植性。投票系统旨在使用相对较少的CPU与一个传统的投票系统一次扫描整个目录树。文件系统仍然是定期扫描的，但每个扫描只检查文件的随机子集，这意味着在更改之后将在更改之后不久会拾取文件的更改，但不一定立即才能拾取文件。</p> <p>凭借目前的启发式，应在每2秒内完全扫描大型项目，所以在最坏的情况下，最多可能需要2秒钟进行注意。但是，在发生了变化之后，更改的路径在最近更改的路径的短期列表中，在每次扫描中检查，因此应几乎立即注意到最近更改的文件的进一步更改。</p> <p>请注意，如果您不想使用基于轮询的方法，仍然可以使用esbuild的<a href="/notes/esbuild/api/transform/#incremental">增量构建API</a>和文件观察者库来实现手表模式。</p> <h3 id="write"><a href="#write" class="header-anchor">#</a> Write</h3> <p>支持：Build</p> <p>构建API调用可以直接写入文件系统，也可以返回将作为内存缓冲区中写入的文件。默认情况下，CLI和JavaScript API写入文件系统和GO API。要使用内存缓冲区：</p> <!----> <h2 id="高级选项"><a href="#高级选项" class="header-anchor">#</a> 高级选项</h2> <h3 id="allow-overwrite"><a href="#allow-overwrite" class="header-anchor">#</a> Allow overwrite</h3> <p>支持：Build</p> <p>启用此设置允许输出文件覆盖输入文件。它默认情况下未启用，因为这样做意味着覆盖源代码，如果未选中您的代码，则会导致数据丢失。但是，通过避免对临时目录的需求来说，支持这使得某些工作流程更容易。因此，您可以在要故意覆盖源代码时启用此项：</p> <!----> <h3 id="asset-names"><a href="#asset-names" class="header-anchor">#</a> Asset names</h3> <p>支持：Build</p> <p>此选项控制<a href="/notes/esbuild/api/transform/#loader">加载器</a>设置为<a href="https://esbuild.github.io/content-types/#external-file" target="_blank" rel="noopener noreferrer">文件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>时生成的附加输出文件的文件名。它使用带有占位符的模板配置输出路径，该占位符将被替换为在生成输出路径时由特定于文件的值替换。例如，指定资产的<code>assets/ [name] - [hash]</code>将所有资产放入输出目录中的名为<code>assets</code>的子目录中，并包括文件名中资产的内容散列。这样看起来如此：</p> <!----> <p>有三个占位符可以在assets路径模板中使用：</p> <ul><li><code>[dir]</code></li></ul> <p>这是从包含资产文件到outbase目录的目录的相对路径。其目的是通过镜像<a href="/notes/esbuild/api/transform/#outbase">输出目录</a>内的输入目录结构来帮助资产输出路径看起来更美观令人愉悦。</p> <ul><li><code>[name]</code></li></ul> <p>这是没有扩展的资产的原始文件名。例如，如果资产最初是名为<code>Image.png</code>，则<code>[name]</code>将被模板中的<code>图像</code>替换。没有必要使用这个占位符;它只存在提供人类友好的资产名称来使调试更容易。</p> <ul><li><code>[hash]</code></li></ul> <p>这是assets的内容哈希值，这对于避免名称碰撞是有用的。例如，您的代码可能导入<code>components/button/icon.png</code>和<code>components/select/icon.png</code>，在这种情况下，您需要散列来区分两个名为图标的两个<code>icon</code>。</p> <p>assets路径模板不需要包含文件扩展名。在模板替换后，资产的原始文件扩展将自动添加到输出路径的末尾。</p> <p>此选项类似于<a href="/notes/esbuild/api/transform/#chunk-names">块名称</a>和<a href="/notes/esbuild/api/transform/#entry-names">条目名称</a>选项。</p> <h3 id="banner"><a href="#banner" class="header-anchor">#</a> Banner</h3> <p>支持：Transform | Build</p> <p>使用此功能可在生成的JavaScript和CSS文件的开头插入任意字符串。这通常用于插入评论：</p> <!----> <p>这类似于在<a href="/notes/esbuild/api/transform/#footer">最后</a>插入的页脚而不是开始。</p> <p>请注意，如果要将非注释代码插入CSS文件，请注意，CSS忽略非<code>@import</code>规则（除<code>@CharSet</code>规则之外）之后的non-<code>@import</code>规则，因此使用横幅注入CSS规则可能会意外禁用外部样式表的进口。</p> <h3 id="charset"><a href="#charset" class="header-anchor">#</a> Charset</h3> <p>支持：Transform | Build</p> <p>默认情况下，eSbuild的输出仅为ASCII。使用反斜杠转义序列逃离任何非ASCII字符。一个原因是因为默认情况下，浏览器误解了非ASCII字符，导致混淆。您必须将<code>&lt;meta charset =“utf-8”&gt;</code>显式添加到您的HTML或用正确的<code>Content-Type</code>标题为浏览器提供服务，以不敲打代码。另一个原因是非ASCII字符可以<a href="https://v8.dev/blog/scanner" target="_blank" rel="noopener noreferrer">显着慢下浏览器的解析器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。但是，使用转义序列使生成的输出略大，并且还更难读取。</p> <p>如果您希望在不使用转义序列的情况下打印原始字符，并且确保浏览器将代码解释为UTF-8，则可以通过设置Charset来禁用字符逃避：</p> <!----> <p>一些警告：</p> <ul><li><p>这尚未逃避嵌入正则表达式中的非ASCII字符。这是因为eSbuild目前根本没有解析正则表达式的内容。尽管有此限制，因此添加了该标志，因为它对不包含这样的案例的代码仍然有用。</p></li> <li><p>此标志不适用于评论。我相信在注释中保留非ASCII数据应该是正常的，因为即使编码是错误的，运行时环境也应该完全忽略所有评论的内容。例如，V8博客发布提到了一种优化，避免完全解码评论内容。无论如何都是由伊斯邦尔剥离了许可证相关评论之外的所有评论。</p></li> <li><p>此选项同时适用于所有输出文件类型（JavaScript，CSS和JSON）。因此，如果将Web服务器配置为发送正确的<code>Content-Type</code>标题并希望使用UTF-8 Charset，请确保将Web服务器配置为将<code>.js</code>和<code>.css</code>文件视为UTF-8。</p></li></ul> <h3 id="chunk-names"><a href="#chunk-names" class="header-anchor">#</a> Chunk names</h3> <p>支持：Build</p> <p>此选项控制启用<a href="/notes/esbuild/api/transform/#splitting">代码拆分</a>时自动生成的共享代码块的文件名。它使用带有占位符的模板配置输出路径，当生成输出路径时，这些占位符将替换为特定于块的值。例如，指定 <code>chunks/[name]-[hash]</code> 的块名称模板会将所有生成的块放入输出目录中名为 chunks 的子目录中，并在文件名中包含块的内容哈希。这样做看起来像这样：</p> <!----> <p>有两个占位符可用于块路径模板：</p> <ul><li><code>[name]</code></li></ul> <p>目前这将始终是<code>文本块</code>，尽管此占位符可能会在未来版本中采用其他值。</p> <ul><li><code>[hash]</code></li></ul> <p>这是块的内容哈希。在生成多个共享代码块的情况下，为了将不同的块彼此区分开来，必须包括这一点。</p> <p>块路径模板不需要包含文件扩展名。模板替换后，为适当的内容类型配置的<a href="/notes/esbuild/api/transform/#out-extension">输出扩展</a>名将自动添加到输出路径的末尾。</p> <p>请注意，此选项仅控制自动生成的共享代码块的名称。它不控制与入口点相关的输出文件的名称。这些名称当前是根据原始入口点文件相对于 <a href="/notes/esbuild/api/transform/#outbase">outbase</a> 目录的路径确定的，并且无法更改此行为。将来会添加一个额外的 API 选项，让您可以更改入口点输出文件的文件名。</p> <p>此选项类似于<a href="/notes/esbuild/api/transform/#asset-names">资产名称</a>和<a href="/notes/esbuild/api/transform/#entry-names">条目名称</a>选项。</p> <h3 id="color"><a href="#color" class="header-anchor">#</a> Color</h3> <p>支持：Transform | Build</p> <p>此选项启用或禁用 esbuild 写入终端中 stderr 文件描述符的错误和警告消息中的颜色。默认情况下，如果 stderr 是 TTY 会话，则自动启用颜色，否则自动禁用。 esbuild 中的彩色输出如下所示：</p> <p><img src="/notes/assets/design/1629696207477.jpg" alt="demo"></p> <p>可以通过将 color 设置为 <code>true</code> 来强制启用彩色输出。如果您自己将 esbuild 的 stderr 输出通过管道传输到 TTY，这将非常有用：</p> <!----> <p>也可以将彩色输出设置为 <code>false</code> 以禁用颜色。</p> <h3 id="conditions"><a href="#conditions" class="header-anchor">#</a> Conditions</h3> <p>支持：Build</p> <p>此功能控制如何解释 <code>package.json</code> 中的<code>导出字段</code>。可以使用条件设置添加自定义条件。您可以根据需要指定任意数量的这些，这些的含义完全取决于包作者。 Node 目前只认可推荐使用的<code>开发</code>和<code>生产</code>自定义条件。以下是添加自定义条件 <code>custom1</code> 和 <code>custom2</code> 的示例：</p> <!----> <h4 id="how-conditions-work"><a href="#how-conditions-work" class="header-anchor">#</a> How conditions work</h4> <p>条件允许您在不同情况下将相同的导入路径重定向到不同的文件位置。包含条件和路径的重定向映射存储在包的 <code>package.json</code> 文件的<code>导出字段</code>中。例如，这会将 <code>require('pkg/foo')</code> 重新映射到 <code>pkg/required.cjs</code> 并使用 <code>import</code> 和 <code>require</code> 条件将 <code>'pkg/foo'</code> 导入到 <code>pkg/imported.mjs</code>：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pkg&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;./foo&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./imported.mjs&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./required.cjs&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./fallback.js&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>条件按照它们在 JSON 文件中出现的顺序进行检查。所以上面的例子表现得有点像这样：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>importPath <span class="token operator">===</span> <span class="token string">'./foo'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>conditions<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">'import'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'./imported.mjs'</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>conditions<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">'require'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'./required.cjs'</span>
  <span class="token keyword">return</span> <span class="token string">'./fallback.js'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>默认情况下，esbuild 内置了五个具有特殊行为的条件，并且无法禁用：</p> <ul><li><code>default</code></li></ul> <p>此条件始终处于活动状态。它旨在最后出现，并让您在没有其他条件适用时提供后备。</p> <ul><li><code>import</code></li></ul> <p>此条件仅在导入路径来自 ESM <code>导入语句</code>或 <code>import()</code> 表达式时才有效。它可用于提供特定于 ESM 的代码。</p> <ul><li><code>require</code></li></ul> <p>此条件仅在导入路径来自 CommonJS <code>require()</code> 调用时才有效。它可用于提供 CommonJS 特定的代码。</p> <ul><li><code>browser</code></li></ul> <p>当esbuild的<a href="/notes/esbuild/api/transform/#platform">平台设置</a>设置为<code>浏览器</code>时，此条件仅激活。它可用于提供特定于浏览器的代码。</p> <ul><li><code>node</code></li></ul> <p>当eSbuild的<a href="/notes/esbuild/api/transform/#platform">平台设置设</a>置为<code>node</code>时，此条件仅激活。它可用于提供特定于node的代码。</p> <p>请注意，当您使用<code>require</code>和<code>import</code>条件时，您的包裹可能会多次捆绑在捆绑包中！这是一个微妙的问题，除了围绕生成的捆绑包之外，由于代码状态的重复副本，可能会导致错误。这通常被称为<a href="https://nodejs.org/docs/latest/api/packages.html#packages_dual_package_hazard" target="_blank" rel="noopener noreferrer">双包危险<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。避免此方法的主要方式是将所有代码放在<code>require</code>条件下，并具有<code>import</code>条件只是一个非受控块<code>require</code>，可在您的包装上调用，并使用ESM语法重新导出包裹。</p> <h3 id="entry-names"><a href="#entry-names" class="header-anchor">#</a> Entry names</h3> <p>支持：Build</p> <p>此选项控制对应于每个输入条目点文件的输出文件的文件名。它使用带有占位符的模板配置输出路径，该占位符将被替换为在生成输出路径时由特定于文件的值替换。例如，指定<code>[dir]/[name]-[hash]</code>的条目名称模板包括文件名中的输出文件的哈希，并将文件放入输出目录中，可能会在子目录下（请参阅有关[<code>[ Dir]</code>下面）。这样看起来如此：</p> <!----> <p>有三个占位符可以在进入路径模板中使用：</p> <ul><li><code>[dir]</code></li></ul> <p>这是从包含输入条目点文件到<a href="/notes/esbuild/api/transform/#outbase">outbase</a>目录的目录的相对路径。其目的是帮助您避免不同子目录中相同名为的入口点之间的碰撞。</p> <p>例如，如果有两个条目点<code>src/pages/home/index.ts</code>和<code>src/pages/about/index.ts</code>，则<code>outbase</code>目录是<code>src</code>，条目名称模板是<code>[dir]/[name]</code>，输出目录将包含<code>pages/home/index.js</code>和<code>pages/about/index.js</code>。如果输入名称模板只是<code>[name]</code>而言，捆绑将失败，因为输出目录中存在两个具有相同输出路径索​​引的输出文件。</p> <ul><li><code>[name]</code></li></ul> <p>这是没有扩展名的入口点的原始文件名。例如，如果输入条目点文件名为<code>App.js</code>，则<code>[Name]</code>将在模板中的<code>应用程序</code>替换。</p> <ul><li><code>[hash]</code></li></ul> <p>这是输出文件的内容散列，可用于采取浏览器缓存的最佳优势。将<code>[hash]</code>添加到您的入口点名称意味着eSbuild将计算与相应的输出文件中的所有内容相关的散列（以及如果<a href="/notes/esbuild/api/transform/#splitting">代码拆分</a>是活动的任何输出文件，则它导入的任何输出文件）。散列旨在且仅在更改与该输出文件相关的任何输入文件时才更改。</p> <p>之后，您可以让您的Web服务器告诉浏览器，以便将浏览器永远缓存这些文件（在练习中，您可以说他们从现在就像在一年中那样长时间到期）。然后，您可以使用<a href="/notes/esbuild/api/transform/#metafile">元文件</a>中的信息来确定哪个输出文件路径对应于哪个输入条目点，以便您知道<code>&lt;script&gt;</code>标记中包含的路径包含在哪条路径中。</p> <p>条目路径模板不需要包含文件扩展名。基于文件类型的适当<a href="/notes/esbuild/api/transform/#out-extension">突出</a>扩展将在模板替换后自动添加到输出路径的末尾。</p> <p>此选项类似于<a href="/notes/esbuild/api/transform/#asset-names">资产名称</a>和<a href="/notes/esbuild/api/transform/#chunk-names">块名称</a>选项。</p> <h3 id="footer"><a href="#footer" class="header-anchor">#</a> Footer</h3> <p>支持：Transform | Build</p> <p>使用此选项可在生成的JavaScript和CSS文件的末尾插入任意字符串。这通常用于插入评论：</p> <!----> <p>这类似于<a href="/notes/esbuild/api/transform/#banner">横幅</a>，该横幅在开始而不是结束时插入。</p> <h3 id="global-name"><a href="#global-name" class="header-anchor">#</a> Global name</h3> <p>支持：Transform | Build</p> <p>此选项仅在<a href="/notes/esbuild/api/transform/#format">格式</a>设置为<code>IIFE</code>时事项（代表立即调用的函数表达式）。它设置全局变量的名称，用于从入口点存储导出：</p> <!----> <p>使用<code>iife</code>格式指定全局名称将生成查看类似的代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> xyz <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token keyword">var</span> require_stdin <span class="token operator">=</span> <span class="token function">__commonJS</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">exports<span class="token punctuation">,</span> module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">require_stdin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>全局名称也可以是复合属性表达式，在这种情况下，eSbuild将生成具有该属性的全局变量。不覆盖冲突的现有全局变量。这可以用于实现“命名方式”，其中多个独立脚本将导出添加到同一全局对象上。例如：</p> <!----> <p>上面使用的复合全局名称生成如下所示的代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> example <span class="token operator">=</span> example <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
example<span class="token punctuation">.</span>versions <span class="token operator">=</span> example<span class="token punctuation">.</span>versions <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
example<span class="token punctuation">.</span>versions<span class="token punctuation">[</span><span class="token string">&quot;1.0&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token keyword">var</span> require_stdin <span class="token operator">=</span> <span class="token function">__commonJS</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">exports<span class="token punctuation">,</span> module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">require_stdin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="incremental"><a href="#incremental" class="header-anchor">#</a> Incremental</h3> <p>支持：Build</p> <p>如果您的用例涉及使用相同的选项致电呼叫eSbuild的<a href="/notes/esbuild/api/transform/#build-api">构建API</a>，则可能希望使用此API。例如，如果您正在实现文件观察者服务，这将是有用的。增量构建比常规构建更有效，因为有些数据被缓存，并且如果自上次构建以来原始文件没有更改，则可以重用。目前，增量构建API使用两种形式的缓存：</p> <ul><li><p>文件存储在内存中，如果文件元数据自上次构建以来未更改，则不会从文件系统重新读取。此优化仅适用于文件系统路径。它不适用于由<a href="https://esbuild.github.io/plugins/" target="_blank" rel="noopener noreferrer">插件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>创建的虚拟模块。</p></li> <li><p>解析<a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree" target="_blank" rel="noopener noreferrer">AST<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>存储在内存中，如果文件内容自上次构建以来没有更改，则避免重新解析AST。除了文件系统模块之外，此优化还适用于由Plugins创建的虚拟模块，只要虚拟模块路径保持不变。</p></li></ul> <p>以下是如何进行增量构建：</p> <!----> <h3 id="jsx"><a href="#jsx" class="header-anchor">#</a> JSX</h3> <p>支持：Transform | Build</p> <p>此选项告诉eSBuild如何处理JSX语法。您可以将eSBuild转换为JS（默认值）或保留输出中的JSX语法。保留JSX语法：</p> <!----> <p>请注意，如果保留JSX语法，则输出文件不再有效JavaScript代码。当您希望在捆绑后通过另一个工具在eSBuild的输出文件中将JSX语法转换为eSbuild的输出文件中的JSX语法，通常是与一个eSBuild实现不同的JSX-to-JS转换。</p> <h3 id="jsx-factory"><a href="#jsx-factory" class="header-anchor">#</a> JSX factory</h3> <p>支持：Transform | Build</p> <p>这设置了对每个JSX元素调用的函数。通常是诸如此类的JSX表达式：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Example text</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>被编译成函数调用<code>React.createElement</code>。如下所示：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;Example text&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>您可以通过更改JSX工厂来调用除<code>React.createLement</code>之外的内容。例如，要调用函数<code>h</code>（而不是由其他库使用，例如 <a href="https://preactjs.com/" target="_blank" rel="noopener noreferrer">Preact<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）：</p> <!----> <p>或者，如果您使用的是类型签字，只需通过将此添加到<code>TSConfig.JSON</code>文件和eSbuild即可自动将其拾取而无法配置：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;jsxFactory&quot;</span><span class="token operator">:</span> <span class="token string">&quot;h&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="jsx-fragment"><a href="#jsx-fragment" class="header-anchor">#</a> JSX fragment</h3> <p>支持：Transform | Build</p> <p>这设置了对每个JSX片段调用的函数。通常是一个JSX片段表达式，如下所示：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Stuff</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>被编译为使用<code>React.Fragment</code>组件如下所示：</p> <div class="language-js extra-class"><pre class="language-js"><code>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>React<span class="token punctuation">.</span>Fragment<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;Stuff&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>您可以通过更改JSX片段，使用除<code>React.fragment</code>之外的组件。例如，要使用组件<code>Fragment</code>（由其他库使用，例如<a href="https://preactjs.com/" target="_blank" rel="noopener noreferrer"> Preact<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）：</p> <!----> <p>或者，如果您使用的是类型签字，只需通过将此添加到<code>tsconfig.json</code>文件和eSbuild即可自动将其拾取而无法配置：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;jsxFragmentFactory&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Fragment&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="keep-names"><a href="#keep-names" class="header-anchor">#</a> Keep names</h3> <p>支持：Transform | Build</p> <p>在JavaScript中，函数的<code>名称</code>属性和类默认为源代码中的附近标识符。这些语法表单都将函数的<code>名称</code>属性设置为<code>“fn”</code>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span><span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span><span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>但是，<a href="/notes/esbuild/api/transform/#minify">压缩</a>重命名符号以降低代码大小和捆绑有时需要重命名符号以避免冲突。这对这些案例中的许多情况进行了<code>名称</code>属性的值。这通常很好，因为<code>名称</code>属性通常仅用于调试。但是，某些框架依赖于<code>名称</code>属性进行注册和绑定目的。如果是这种情况，您可以启用此选项即使在压缩代码中也可以保留原始<code>名称</code>值：</p> <!----> <h3 id="legal-comments"><a href="#legal-comments" class="header-anchor">#</a> Legal comments</h3> <p>支持：Transform | Build</p> <p>“法律评论”被认为是包含<code>@License</code>或<code>@PreServe</code>或以//开始的任何声明级别评论<code>//!</code>或<code>/*!</code>默认情况下，这些注释保留在输出文件中，因为它遵循代码的原始作者的意图。但是，可以使用以下选项之一来配置此行为：</p> <ul><li><code>none</code></li></ul> <p>不要保留任何法律评论。</p> <ul><li><code>inline</code></li></ul> <p>保留所有法律评论。</p> <ul><li><code>eof</code></li></ul> <p>将所有法律评论移动到文件的末尾。</p> <ul><li><code>linked</code></li></ul> <p>将所有法律评论移动到<code>.legal.txt</code>文件并用评论链接到它们。</p> <ul><li><code>external</code></li></ul> <p>将所有法律评论移动到<code>.legal.txt</code>文件，但不链接到它们。</p> <p>默认行为是<code>EOF</code>当<a href="/notes/esbuild/api/transform/#bundle">捆绑</a>包启用并否则<code>内联</code>。设置法律评论模式如下所示：</p> <!----> <p>请注意，“语句级别”表示注释必须在允许多个语句的上下文中出现，例如在顶级范围或语句块中。因此表达中的评论不被视为许可评论。</p> <h3 id="log-level"><a href="#log-level" class="header-anchor">#</a> Log level</h3> <p>支持：Transform | Build</p> <p>可以更改日志级别以防止eSbuild打印警告和/或错误消息到终端。六个日志级别为：</p> <ul><li><code>silent</code></li></ul> <p>请勿显示任何日志输出。</p> <ul><li><code>error</code></li></ul> <p>只显示错误。</p> <ul><li><code>warning</code></li></ul> <p>只显示警告和错误。</p> <ul><li><code>info</code></li></ul> <p>显示警告，错误和输出文件摘要。这是默认的日志级别。</p> <ul><li><code>debug</code></li></ul> <p>从<code>信息</code>和一些可以帮助您调试损坏捆绑包的其他邮件记录所有内容。此日志级别具有性能影响，其中一些消息可能是误报，因此默认情况下未显示此信息。</p> <ul><li><code>verbose</code></li></ul> <p>这会生成一个日志消息的洪流，并添加到带有文件系统驱动程序的调试问题。它不适用于一般使用。</p> <p>可以设置日志级别：</p> <!----> <h3 id="log-limit"><a href="#log-limit" class="header-anchor">#</a> Log limit</h3> <p>支持：Transform | Build</p> <p>默认情况下，eSBuild在报告10条消息后停止报告日志消息。这避免了意外生成压倒性数量的日志消息，这可以轻松锁定较慢的终端仿真器，例如Windows命令提示符。它还避免使用具有有限滚动缓冲器的终端仿真器的整个滚动缓冲区。</p> <p>日志限制可以更改为另一个值，也可以通过将其设置为零完全禁用。这将显示所有日志消息：</p> <!----> <h3 id="main-fields"><a href="#main-fields" class="header-anchor">#</a> Main fields</h3> <p>支持：Build</p> <p>当您在node中导入包时，该软件包包中的<code>mane</code> <code>package.json</code>文件确定导入哪个文件（以及<a href="https://nodejs.org/api/modules.html#modules_all_together" target="_blank" rel="noopener noreferrer">许多其他规则<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）。包括eSBuild的主要JavaScript Bundlers，允许您指定其他包。json字段以在解析包时尝试。通常有三个这些领域：</p> <ul><li><code>main</code></li></ul> <p>这是<a href="https://docs.npmjs.com/files/package.json#main" target="_blank" rel="noopener noreferrer">标准字段<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，用于与node一起使用的所有包。名称<code>Main</code>中硬编码为Node的模块分辨率逻辑本身。因为它旨在与node一起使用，所以可以合理地期望此字段中的文件路径是CommonJS样式模块。</p> <ul><li><code>module</code></li></ul> <p>该领域来自如何将EcMasscript模块集成到node中的<a href="https://github.com/dherman/defense-of-dot-js/blob/f31319be735b21739756b87d551f6711bd7aa283/proposal.md" target="_blank" rel="noopener noreferrer">提案<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。因此，预计此字段中的文件路径是ECMAScript风格模块是合理的。node未采用此提议（Node使用<code>“type”</code>：<code>“module”</code>而不是），但主要是主要的捆绑程序采用，因为ECMAScript风格模块导致更好的<a href="/notes/esbuild/api/transform/#tree-shaking">树抖动</a>，或拆除死亡代码。</p> <p>对于包作者：某些软件包错误地使用特定于浏览器代码的<code>模块</code>字段，为<code>main</code>留下特定于node的代码。这可能是因为node忽略了<code>模块</code>字段，人们通常只使用Bundlers特定于浏览器代码。然而，捆绑的node特定代码也有价值（例如，它减少了下载和启动时间），并将特定于<code>模块</code>中的浏览器代码的软件包阻止捆绑程序能够有效地进行树摇动。如果您尝试在包中发布特定于浏览器的代码，请使用<code>浏览器</code>字段。</p> <ul><li><code>browser</code></li></ul> <p>此字段来自一个<a href="https://gist.github.com/defunctzombie/4339901/49493836fb873ddaa4b8a7aa0ef2352119f69211" target="_blank" rel="noopener noreferrer">提议<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，允许捆绑程序用浏览器友好版本替换特定于node的文件或模块。它允许您指定备用浏览器特定的入口点。请注意，程序包可以一起使用<code>浏览器</code>和<code>模块</code>字段（请参阅下面的注释）。</p> <p>默认主字段取决于当前平台<a href="/notes/esbuild/api/transform/#platform">设置</a>，并且基本上是<code>浏览器</code>，<code>模块</code>，<code>main</code>和主要的<code>main</code>，node <code>module</code>。这些默认值应该是与现有包生态系统最广泛兼容。但如果您愿意，您可以根据这样自定义它们：</p> <!----> <p>对于包作者：如果要创建使用<code>浏览器</code>字段的包与<code>模块</code>字段结合使用浏览器字段以填写完整CommonJS-VS-ESM和浏览器-VS-Node兼容性矩阵中的所有四个条目，则要使用展开的<code>浏览器</code>字段的形式，即地图而不是仅限字符串：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./node-cjs.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./node-esm.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;browser&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;./node-cjs.js&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./browser-cjs.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;./node-esm.js&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./browser-esm.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="metafile"><a href="#metafile" class="header-anchor">#</a> Metafile</h3> <p>支持：Build</p> <p>此选项告诉ESBuild以JSON格式生成有关构建的一些元数据。以下示例将元数据放在名为<code>meta.json</code>的文件中：</p> <!----> <p>然后可以通过其他工具分析此数据。例如，<a href="https://www.bundle-buddy.com/esbuild" target="_blank" rel="noopener noreferrer">Bundle Buddy<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>可以消耗eSBuild的元数据格式，并在捆绑包中生成模块的Treemap可视化以及每个人占用多少空间。</p> <p>元数据JSON格式如图所示（使用typescript界面描述）：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Metadata</span> <span class="token punctuation">{</span>
  inputs<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      bytes<span class="token operator">:</span> <span class="token builtin">number</span>
      imports<span class="token operator">:</span> <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token builtin">string</span>
        kind<span class="token operator">:</span> <span class="token builtin">string</span>
      <span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  outputs<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      bytes<span class="token operator">:</span> <span class="token builtin">number</span>
      inputs<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          bytesInOutput<span class="token operator">:</span> <span class="token builtin">number</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      imports<span class="token operator">:</span> <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token builtin">string</span>
        kind<span class="token operator">:</span> <span class="token builtin">string</span>
      <span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
      exports<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
      entryPoint<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="node-paths"><a href="#node-paths" class="header-anchor">#</a> Node paths</h3> <p>支持：Build</p> <p>node的模块分辨率算法支持一个名为<a href="https://nodejs.org/api/modules.html#modules_loading_from_the_global_folders" target="_blank" rel="noopener noreferrer">node_path<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的环境变量，其中包含在解析导入路径时使用的全局目录列表。除了所有父目录中的<code>node_modules</code>目录之外，还搜索这些路径。您可以使用带有CLI的环境变量并使用JS和GO API的阵列将此目录列表传递给eSBuild列表：</p> <!----> <p>如果您使用的是CLI并希望使用<code>Node_Path</code>传递多个目录，则必须将它们分开<code>:</code>UNIX和<code>;</code>在Windows上。这是node本身使用的格式相同的格式。</p> <h3 id="out-extension"><a href="#out-extension" class="header-anchor">#</a> Out extension</h3> <p>支持：Build</p> <p>此选项允许您自定义 esbuild 生成的文件的文件扩展名，而不是 <code>.js</code> 或 <code>.css</code>。特别是<code>.mjs</code> 和<code>.cjs</code> 文件扩展名在node 中有特殊含义（它们分别表示ESM 和CommonJS 格式的文件）。如果您使用 esbuild 生成多个文件并且必须使用 <a href="/notes/esbuild/api/transform/#outdir">outdir</a> 选项而不是 <a href="/notes/esbuild/api/transform/#outfile">outfile</a> 选项，则此选项很有用。你可以这样使用它：</p> <!----> <h3 id="outbase"><a href="#outbase" class="header-anchor">#</a> Outbase</h3> <p>支持：Build</p> <p>如果您的构建在单独的目录中包含多个入口点，则目录结构将复制到相对于 outbase 目录的<a href="/notes/esbuild/api/transform/#outdir">输出目录</a>中。例如，如果有两个入口点 <code>src/pages/home/index.ts</code> 和 <code>src/pages/about/index.ts</code> 并且 outbase 目录是 <code>src</code>，则输出目录将包含 <code>pages/home/index.js</code> 和 <code>pages/about/index.js</code>。以下是如何使用它：</p> <!----> <p>如果未指定 outbase 目录，则默认为所有输入入口点路径中<a href="https://en.wikipedia.org/wiki/Lowest_common_ancestor" target="_blank" rel="noopener noreferrer">最低的公共祖先<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>目录。这是上面示例中的 <code>src/pages</code>，这意味着默认情况下输出目录将包含 <code>home/index.js</code> 和 <code>about/index.js</code>。</p> <h3 id="preserve-symlinks"><a href="#preserve-symlinks" class="header-anchor">#</a> Preserve symlinks</h3> <p>支持：Build</p> <p>此设置反映了节点中的 <a href="https://nodejs.org/api/cli.html#cli_preserve_symlinks" target="_blank" rel="noopener noreferrer">--preserve-symlinks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 设置。如果您使用该设置（或 Webpack 中类似的 <a href="https://webpack.js.org/configuration/resolve/#resolvesymlinks" target="_blank" rel="noopener noreferrer">resolve.symlinks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 设置），您可能也需要在 esbuild 中启用此设置。它可以像这样启用：</p> <!----> <p>启用此设置会导致 esbuild 通过原始文件路径（即没有跟随符号链接的路径）而不是真实文件路径（即跟随符号链接之后的路径）来确定文件标识。这对于某些目录结构是有益的。请记住，这意味着如果有多个符号链接指向一个文件，它可能会被赋予多个身份，这可能导致它在生成的输出文件中多次出现。</p> <p>注意：术语“符号链接”表示<a href="https://en.wikipedia.org/wiki/Symbolic_link" target="_blank" rel="noopener noreferrer">符号链接<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，指的是一种文件系统功能，其中一个路径可以重定向到另一个路径。</p> <h3 id="public-path"><a href="#public-path" class="header-anchor">#</a> Public path</h3> <p>支持：Build</p> <p>这与外部文件加载器结合使用很有用。默认情况下，加载器使用<code>默认</code>导出将导入文件的名称导出为字符串。公共路径选项允许您在此加载程序加载的每个文件的导出字符串之前添加基本路径：</p> <!----> <h3 id="pure"><a href="#pure" class="header-anchor">#</a> Pure</h3> <p>支持：Transform | Build</p> <p>各种 JavaScript 工具都使用一个约定，其中在 new 或 call 表达式之前包含 <code>/* @__PURE__ */</code> 或 <code>/* #__PURE__ */</code> 的特殊注释意味着如果结果值未使用，则可以删除该表达式。它看起来像这样：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> button <span class="token operator">=</span> <span class="token comment">/* @__PURE__ */</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>Button<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在打包程序无法自行证明删除是安全的情况下，打包程序（例如 esbuild 在摇树（又名死代码删除）期间使用此信息来执行跨模块边界的未使用导入的细粒度删除） JavaScript 代码的动态特性。</p> <p>请注意，虽然注释说“pure”，但令人困惑的是，它并不表示被调用的函数是纯函数。例如，它并不表示可以缓存对该函数的重复调用。该名称本质上只是“如果未使用则可以删除”的抽象简写。</p> <p>一些表达式如 JSX 和某些内置全局变量在 esbuild 中自动注释为 <code>/* @__PURE__ */</code>。您还可以配置其他全局变量以标记为 <code>/* @__PURE__ */</code>。例如，您可以将全局 <code>console.log</code> 函数标记为这样，以便在包缩小时自动将其从包中删除，只要结果未被使用。</p> <p>值得一提的是，注解的作用只扩展到调用本身，而不扩展到参数。仍然保留有副作用的参数：</p> <!----> <h3 id="resolve-extensions"><a href="#resolve-extensions" class="header-anchor">#</a> Resolve extensions</h3> <p>支持：Build</p> <p><a href="https://nodejs.org/api/modules.html#modules_file_modules" target="_blank" rel="noopener noreferrer">node 使用的解析算法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>支持隐式文件扩展名。您可以 <code>require('./file')</code> ，它会按顺序检查 <code>./file</code>、.<code>/file.js</code>、<code>./file.json</code> 和 <code>./file.node</code>。包括 esbuild 在内的现代打包器也将此概念扩展到其他文件类型。可以使用解析扩展名设置自定义 esbuild 中隐式文件扩展名的完整顺序，默认为 <code>.tsx</code>,<code>.ts</code>,<code>.jsx</code>,<code>.js</code>,<code>.css</code>,<code>.json</code>：</p> <!----> <h3 id="source-root"><a href="#source-root" class="header-anchor">#</a> Source Root</h3> <p>支持：Transform | Build</p> <p>此功能仅在启用源映射时相关。它允许您设置<a href="/notes/esbuild/api/transform/#sourcemap">源映射</a>中的 <code>sourceRoot</code> 字段的值，该值指定源映射中所有其他路径相对于的路径。如果此字段不存在，则源映射中的所有路径都被解释为相对于包含源映射的目录。</p> <p>您可以像这样配置 <code>sourceRoot</code>：</p> <!----> <h3 id="sourcefile"><a href="#sourcefile" class="header-anchor">#</a> Sourcefile</h3> <p>支持：Transform | Build</p> <p>当使用没有文件名的输入时，此选项设置文件名。使用转换 API 和使用带有标准输入的构建 API 时会发生这种情况。配置的文件名反映在错误消息和源映射中。如果未配置，则文件名默认为 <code>&lt;stdin&gt;</code>。它可以这样配置：</p> <!----> <h3 id="sources-content"><a href="#sources-content" class="header-anchor">#</a> Sources Content</h3> <p>支持：Transform | Build</p> <p><a href="/notes/esbuild/api/transform/#sourcemap">源映射</a>是使用源映射格式的<a href="https://sourcemaps.info/spec.html" target="_blank" rel="noopener noreferrer">第 3 版<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>生成的，这是迄今为止最广泛支持的变体。每个源映射看起来像这样：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sources&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;bar.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;foo.js&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sourcesContent&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;bar()&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;foo()\nimport './bar'&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token string">&quot;;AAAA;;;ACAA;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;names&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>sourcesContent</code> 字段是一个可选字段，包含所有原始源代码。这对调试很有帮助，因为这意味着原始源代码将在调试器中可用。</p> <p>但是，在某些情况下不需要它。例如，如果您只是在生产中使用源映射来生成包含原始文件名的堆栈跟踪，则不需要原始源代码，因为不涉及调试器。在这种情况下，可能需要省略 <code>sourcesContent</code> 字段以使源映射更小：</p> <!----> <h3 id="stdin"><a href="#stdin" class="header-anchor">#</a> Stdin</h3> <p>支持：Build</p> <p>通常，构建 API 调用将一个或多个文件名作为输入。但是，此选项可用于在文件系统上根本不存在模块的情况下运行构建。它被称为“标准输入”，因为它对应于在命令行上将文件通过管道传输到标准输入。</p> <p>除了指定 stdin 文件的内容之外，您还可以选择指定解析目录（用于确定相对导入的位置）、<a href="/notes/esbuild/api/transform/#sourcefile">源文件</a>（在错误消息和源映射中使用的文件名）和<a href="/notes/esbuild/api/transform/#loader">加载程序</a>（这决定了文件内容的解释方式）。 CLI 无法指定解析目录。相反，它会自动设置为当前工作目录。</p> <p>以下是如何使用此功能：</p> <!----> <h3 id="tree-shaking"><a href="#tree-shaking" class="header-anchor">#</a> Tree shaking</h3> <p>支持：Transform | Build</p> <p>摇树是 JavaScript 社区用于消除死代码的术语，这是一种常见的编译器优化，可自动删除无法访问的代码。请注意，esbuild 中的树抖动在捆绑期间始终处于启用状态，并且无法关闭，因为修剪未使用的代码会使生成的文件更小，而不会改变可观察的行为。</p> <p>用一个例子来解释摇树是最容易的。考虑以下文件。有一个使用的函数和一个未使用的函数：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// input.js</span>
<span class="token keyword">function</span> <span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'one'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">two</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'two'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>如果您将此文件与 <code>esbuild --bundle input.js --outfile=output.js</code> 捆绑在一起，则未使用的函数将自动被丢弃，留下以下输出：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// input.js</span>
<span class="token keyword">function</span> <span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果我们将函数拆分成一个单独的库文件并使用 <code>import</code> 语句导入它们，这甚至可以工作：</p> <!----> <p>如果您将此文件与 <code>esbuild --bundle input.js --outfile=output.js</code> 捆绑在一起，未使用的函数和未使用的导入仍将被自动丢弃，留下以下输出：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// lib.js</span>
<span class="token keyword">function</span> <span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// input.js</span>
<span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这样 esbuild 只会捆绑您实际使用的库的部分，这有时可以节省大量的大小。请注意，esbuild 的摇树实现依赖于 ECMAScript 模块<code>导入</code>和<code>导出</code>语句的使用。它不适用于 <code>CommonJS</code> 模块。 npm 上的许多库都包含这两种格式，而 esbuild 尝试选择默认情况下适用于摇树的格式。您可以使用<a href="/notes/esbuild/api/transform/#main-fields">主字段选</a>项自定义 esbuild 选择的格式。</p> <h4 id="manual-tree-shaking-annotations-手动摇树注释"><a href="#manual-tree-shaking-annotations-手动摇树注释" class="header-anchor">#</a> Manual tree shaking annotations(手动摇树注释)</h4> <p>由于 JavaScript 是一种动态语言，有时对于编译器来说识别未使用的代码非常困难，因此社区开发了某些注释来帮助告诉编译器哪些代码应该被视为未使用。目前esbuild支持两种形式的摇树注解：</p> <ul><li><p>函数调用前的内联 <code>/* @__PURE__ */</code> 注释告诉 esbuild 如果不使用结果值，可以删除函数调用。有关更多信息，请参阅<a href="/notes/esbuild/api/transform/#pure">pure API</a> 选项。</p></li> <li><p><code>package.json</code> 中的 <code>sideEffects</code> 字段可用于告诉 esbuild 如果来自该文件的所有导入最终都未使用，则可以删除包中的哪些文件。这是来自 Webpack 的约定，许多发布到 npm 的库已经在它们的包定义中包含了这个字段。您可以在该字段的 <a href="https://webpack.js.org/guides/tree-shaking/" target="_blank" rel="noopener noreferrer">Webpack 文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中了解有关该字段的更多信息。</p></li></ul> <p>这些注释可能有问题，因为编译器的准确性完全依赖于开发人员，而且开发人员偶尔会发布带有不正确注释的包。 <code>sideEffects</code> 字段对于开发人员来说特别容易出错，因为默认情况下，如果不使用导入，它会导致包中的所有文件都被视为死代码。如果您添加一个包含副作用的新文件并忘记更新该字段，那么当人们尝试捆绑它时，您的包可能会损坏。</p> <p>这就是为什么 esbuild 包含一种忽略摇树注释的方法。只有在遇到包被破坏的问题时，才应该启用此功能，因为必需的代码意外地从包中删除：</p> <!----> <p>启用这意味着 esbuild 将不再尊重 <code>/* @__PURE__ */</code> 注释或 <code>sideEffects</code> 字段。然而，它仍然会对未使用的导入进行自动树摇动，因为这不依赖于开发人员的注释。理想情况下，此标志只是一种临时解决方法。您应该将这些问题报告给软件包的维护者以修复它们，因为它们表明软件包存在问题，并且也可能会绊倒其他人。</p> <h3 id="tsconfig"><a href="#tsconfig" class="header-anchor">#</a> Tsconfig</h3> <p>支持：Build</p> <p>通常，<a href="/notes/esbuild/api/transform/#build-api">构建 API</a> 会自动发现 <code>tsconfig.json</code> 文件并在构建过程中读取它们的内容。但是，您也可以配置自定义 <code>tsconfig.json</code> 文件来代替使用。如果您需要使用不同的设置对同一代码进行多次构建，这会很有用：</p> <!----> <h3 id="tsconfig-raw"><a href="#tsconfig-raw" class="header-anchor">#</a> Tsconfig raw</h3> <p>支持：Transform</p> <p>此选项可用于将您的 <code>tsconfig.json</code> 文件传递​​给不访问文件系统的<a href="/notes/esbuild/api/transform/#transform-api">transform API</a>。使用它看起来像这样：</p> <!----> <h3 id="working-directory"><a href="#working-directory" class="header-anchor">#</a> Working directory</h3> <p>支持：Build</p> <p>此 API 选项允许您指定用于构建的工作目录。它通常默认为您用来调用 esbuild 的 API 的进程的<a href="https://en.wikipedia.org/wiki/Working_directory" target="_blank" rel="noopener noreferrer">当前工作目录<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。 esbuild 将工作目录用于一些不同的事情，包括将作为 API 选项给出的相对路径解析为绝对路径，以及将绝对路径漂亮地打印为日志消息中的相对路径。以下是覆盖它的方法：</p> <!----> <h2 id="js-specific-details"><a href="#js-specific-details" class="header-anchor">#</a> JS-specific details</h2> <p>因为 JavaScript 是单线程的，所以有几种不同的方式来调用 API，并具有不同的性能和便利性权衡。重要的是要了解差异以根据您的情况选择正确的差异。</p> <p>首先是同步 API。这是最方便的选项，因为单线程 JavaScript 代码具有最干净的语法。如果您只需要运行 esbuild 然后退出，这也是最佳性能。但是，它会阻塞主线程，因此如果您在此期间还有其他工作要执行，您就不想使用它。这也是唯一不能使用插件的选项（因为插件是异步的）。它看起来像这样：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> esbuild <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'esbuild'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> result1 <span class="token operator">=</span> esbuild<span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
<span class="token keyword">let</span> result2 <span class="token operator">=</span> esbuild<span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
</code></pre></div><p>然后是异步 API。每次调用都会返回一个承诺而不是立即完成。在幕后，esbuild 二进制文件作为单个子进程生成，在主机进程中的所有调用之间共享。主机使用自定义二进制协议通过 stdin、stdout 和 stderr 管道与子进程通信。如果您只需要运行 esbuild 一次但需要在后台做其他工作，这是理想的选择。它还允许您同时运行许多同时运行的 esbuild API 调用，然后将这些调用分布在所有可用内核中以获得最大性能。使用它看起来像这样：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> esbuild <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'esbuild'</span><span class="token punctuation">)</span>
esbuild<span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
esbuild<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="running-in-the-browser"><a href="#running-in-the-browser" class="header-anchor">#</a> Running in the browser</h3> <p>esbuild API 也可以在 Web Worker 中使用 WebAssembly 在浏览器中运行。要利用这一点，您需要安装 <code>esbuild-wasm</code> 包而不是 <code>esbuild</code> 包：</p> <div class="language- extra-class"><pre class="language-text"><code>// cli

npm install esbuild-wasm
</code></pre></div><p>浏览器的 API 与 node 的 API 类似，只是需要先调用 <code>initialize()</code>，并且需要传递 WebAssembly 二进制文件的 URL。 API 的同步版本也不可用。假设您使用的是打包器，它看起来像这样：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> esbuild <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'esbuild-wasm'</span><span class="token punctuation">)</span>

esbuild<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  wasmURL<span class="token operator">:</span> <span class="token string">'./node_modules/esbuild-wasm/esbuild.wasm'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  esbuild<span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  esbuild<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>如果您已经从一个 worker 运行此代码并且不想 <code>initialize</code> 创建另一个 worker，您可以将 worker: <code>false</code> 传递给它。然后它将在与调用 <code>initialize</code> 的线程相同的线程中创建一个 WebAssembly 模块。</p> <p>您还可以通过注入 <code>lib/browser.min.js</code> 文件，将 esbuild 的 API 用作 HTML 文件中的脚本标记，而无需使用捆绑程序。在这种情况下，API 创建了一个名为 <code>esbuild</code> 的全局对象，用于保存 API 对象：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./node_modules/esbuild-wasm/lib/browser.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  esbuild<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    wasmURL<span class="token operator">:</span> <span class="token string">'./node_modules/esbuild-wasm/esbuild.wasm'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>如果您需要将此 API 与 ECMAScript 模块一起使用，您应该导入 <code>esm/browser.min.js</code> 文件：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> esbuild <span class="token keyword">from</span> <span class="token string">'./node_modules/esbuild-wasm/esm/browser.min.js'</span>

  esbuild<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    wasmURL<span class="token operator">:</span> <span class="token string">'./node_modules/esbuild-wasm/esbuild.wasm'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><div class="edit-link"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon edit-icon"><path d="M117.953 696.992 64.306 959.696l265.931-49.336 450.204-452.505-212.284-213.376-450.204 452.513zm496.384-296.326L219.039 797.993l-46.108-46.34L568.233 354.33l46.104 46.335zm345.357-122.99-114.45 115.04-212.288-213.377 114.45-115.035 212.288 213.371zm0 0" fill="currentColor"></path></svg> <a href="https://github.com/sykinggg/notes/edit/main/docs/esbuild/api/transform.md" target="_blank" rel="noopener noreferrer">Edit this page</a></div> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">November 1, 2021 01:39</span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/notes/esbuild/description/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 0 1-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 0 1 9.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        基本概念
      </a></span> <span class="next"><a href="/notes/esbuild/contentTypes/content/">
        Content Types
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 0 1-18.616.092 15.368 15.368 0 0 1-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 0 1 5.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 0 1 5.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button class="pswp__button pswp__button--close"></button> <button class="pswp__button pswp__button--share"></button> <button class="pswp__button pswp__button--fs"></button> <button class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button class="pswp__button pswp__button--arrow--left"></button> <button class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><div class="my-popup" style="display:none;" data-v-5f98aac3><div class="my-popup-container" data-v-5f98aac3><div class="my-popup-exit" data-v-5f98aac3></div> <img src="" alt data-v-5f98aac3></div></div></div></div>
    <script src="/notes/assets/js/app.c7721e7f.js" defer></script><script src="/notes/assets/js/vendors~layout-Layout.54a145ed.js" defer></script><script src="/notes/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.f2412bde.js" defer></script><script src="/notes/assets/js/page-TransformBuildApi.27ba10e7.js" defer></script><script src="/notes/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.8a19680c.js" defer></script>
  </body>
</html>
