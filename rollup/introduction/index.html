<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Introduction | 前端 学习</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <link rel="manifest" href="/notes/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="君子藏器于身 待时而动 天下有道则见 无道则隐">
    <meta property="og:url" content="/notes/rollup/introduction.html">
    <meta property="og:site_name" content="前端 学习">
    <meta property="og:title" content="Introduction">
    <meta property="og:description" content="Introduction Overview Rollup 是一个用于 JavaScript 的模块打包器，它将小段代码编译成更大更复杂的东西，比如库或应用程序。它对包含在 JavaScript 的 ES6 修订版中的代码模块使用新的标准化格式，而不是以前的特殊解决方案，例如 CommonJS 和 AMD。 ES 模块让您可以自由无缝地组合您最喜欢的库中最有用">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="前端 学习">
    <meta property="article:author" content="sy">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <link rel="preload" href="/notes/assets/css/0.styles.33b160dd.css" as="style"><link rel="preload" href="/notes/assets/js/app.63ccacd1.js" as="script"><link rel="preload" href="/notes/assets/js/vendors~layout-Layout.73b90aff.js" as="script"><link rel="preload" href="/notes/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.fd95594f.js" as="script"><link rel="preload" href="/notes/assets/js/page-Introduction.191ef184.js" as="script"><link rel="preload" href="/notes/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.5018eb2c.js" as="script"><link rel="prefetch" href="/notes/assets/js/596.db3f1f9e.js"><link rel="prefetch" href="/notes/assets/js/597.e1ba1a0f.js"><link rel="prefetch" href="/notes/assets/js/598.47172c5a.js"><link rel="prefetch" href="/notes/assets/js/layout-Blog.b230af33.js"><link rel="prefetch" href="/notes/assets/js/layout-Layout.cb0003cf.js"><link rel="prefetch" href="/notes/assets/js/layout-NotFound.6331fdd1.js"><link rel="prefetch" href="/notes/assets/js/layout-Slide.da176676.js"><link rel="prefetch" href="/notes/assets/js/mermaid.1acaf644.js"><link rel="prefetch" href="/notes/assets/js/page-$mount.4a24cf72.js"><link rel="prefetch" href="/notes/assets/js/page--0036d571.6434cd7a.js"><link rel="prefetch" href="/notes/assets/js/page--022ad8a1.3f838b49.js"><link rel="prefetch" href="/notes/assets/js/page--049c9a9f.2aa45e9e.js"><link rel="prefetch" href="/notes/assets/js/page--050f4996.8304f340.js"><link rel="prefetch" href="/notes/assets/js/page--05ca34d9.3fdf7ce4.js"><link rel="prefetch" href="/notes/assets/js/page--06138101.6a5e622a.js"><link rel="prefetch" href="/notes/assets/js/page--078553ea.ade233d5.js"><link rel="prefetch" href="/notes/assets/js/page--07c5ad21.9a454343.js"><link rel="prefetch" href="/notes/assets/js/page--07f0b7af.479fa34a.js"><link rel="prefetch" href="/notes/assets/js/page--08402fbe.11a4734e.js"><link rel="prefetch" href="/notes/assets/js/page--0a137961.c2be30dd.js"><link rel="prefetch" href="/notes/assets/js/page--0b6292d3.6d069490.js"><link rel="prefetch" href="/notes/assets/js/page--0b81571e.4cc3064a.js"><link rel="prefetch" href="/notes/assets/js/page--0c7d4a27.9459f3be.js"><link rel="prefetch" href="/notes/assets/js/page--0d936993.f2783385.js"><link rel="prefetch" href="/notes/assets/js/page--0e573275.737a1e8f.js"><link rel="prefetch" href="/notes/assets/js/page--0f2ef575.283e1562.js"><link rel="prefetch" href="/notes/assets/js/page--0fb13921.7e28d4be.js"><link rel="prefetch" href="/notes/assets/js/page--0fe0372e.2944798f.js"><link rel="prefetch" href="/notes/assets/js/page--10902ffe.c01ef43c.js"><link rel="prefetch" href="/notes/assets/js/page--12bc566b.0591b2fa.js"><link rel="prefetch" href="/notes/assets/js/page--135834a1.423f432e.js"><link rel="prefetch" href="/notes/assets/js/page--15961e72.abebf138.js"><link rel="prefetch" href="/notes/assets/js/page--17036b33.10ebcc27.js"><link rel="prefetch" href="/notes/assets/js/page--172068b9.01ae13f0.js"><link rel="prefetch" href="/notes/assets/js/page--18126b85.df3e8fcc.js"><link rel="prefetch" href="/notes/assets/js/page--19a1b422.c3ebbe2d.js"><link rel="prefetch" href="/notes/assets/js/page--1a00028a.a5af1847.js"><link rel="prefetch" href="/notes/assets/js/page--1c6aa5c2.bb7451d3.js"><link rel="prefetch" href="/notes/assets/js/page--1fece121.385717cc.js"><link rel="prefetch" href="/notes/assets/js/page--201cfbe1.445a0c1d.js"><link rel="prefetch" href="/notes/assets/js/page--2095282b.7036a17b.js"><link rel="prefetch" href="/notes/assets/js/page--21792c01.8852bfa9.js"><link rel="prefetch" href="/notes/assets/js/page--226f1079.542c5506.js"><link rel="prefetch" href="/notes/assets/js/page--2518076e.6ff9ab1a.js"><link rel="prefetch" href="/notes/assets/js/page--25cb6e5f.8319e361.js"><link rel="prefetch" href="/notes/assets/js/page--2616bc7e.0ee9ba6d.js"><link rel="prefetch" href="/notes/assets/js/page--27a556ad.2883682d.js"><link rel="prefetch" href="/notes/assets/js/page--27c21126.22e09585.js"><link rel="prefetch" href="/notes/assets/js/page--28435cbb.67e4b063.js"><link rel="prefetch" href="/notes/assets/js/page--28c148fe.5ed5f395.js"><link rel="prefetch" href="/notes/assets/js/page--2ae50662.385d02b0.js"><link rel="prefetch" href="/notes/assets/js/page--2c665981.a9c95168.js"><link rel="prefetch" href="/notes/assets/js/page--2d021821.c613f2b7.js"><link rel="prefetch" href="/notes/assets/js/page--31799879.7b511d30.js"><link rel="prefetch" href="/notes/assets/js/page--33b11326.9305b454.js"><link rel="prefetch" href="/notes/assets/js/page--3477437b.c13895ea.js"><link rel="prefetch" href="/notes/assets/js/page--34ad062f.1969fb44.js"><link rel="prefetch" href="/notes/assets/js/page--357aec57.aae1c855.js"><link rel="prefetch" href="/notes/assets/js/page--35f61a61.8bdcc83d.js"><link rel="prefetch" href="/notes/assets/js/page--36897e27.ae2cb64d.js"><link rel="prefetch" href="/notes/assets/js/page--36b30161.724af83c.js"><link rel="prefetch" href="/notes/assets/js/page--377508c1.5cc66b9d.js"><link rel="prefetch" href="/notes/assets/js/page--3779bcfe.d70b9b5d.js"><link rel="prefetch" href="/notes/assets/js/page--389d5da5.4cee606a.js"><link rel="prefetch" href="/notes/assets/js/page--38ef908f.01a792ad.js"><link rel="prefetch" href="/notes/assets/js/page--39c1a916.e0a05cdf.js"><link rel="prefetch" href="/notes/assets/js/page--39e34c63.2b4f2868.js"><link rel="prefetch" href="/notes/assets/js/page--3bbd34b1.f70484d7.js"><link rel="prefetch" href="/notes/assets/js/page--3d00ca45.5c197c8f.js"><link rel="prefetch" href="/notes/assets/js/page--3d121781.fb1f4d05.js"><link rel="prefetch" href="/notes/assets/js/page--3d5ab373.15981d84.js"><link rel="prefetch" href="/notes/assets/js/page--41d1702a.274d1283.js"><link rel="prefetch" href="/notes/assets/js/page--427db7c1.67caa326.js"><link rel="prefetch" href="/notes/assets/js/page--4365fcbe.fbe834f0.js"><link rel="prefetch" href="/notes/assets/js/page--466a516d.2d36f77e.js"><link rel="prefetch" href="/notes/assets/js/page--46f53541.016d3077.js"><link rel="prefetch" href="/notes/assets/js/page--4776c269.fa55c9b1.js"><link rel="prefetch" href="/notes/assets/js/page--4803a967.6d3f34c6.js"><link rel="prefetch" href="/notes/assets/js/page--48c4e433.cba0be06.js"><link rel="prefetch" href="/notes/assets/js/page--48f9c9d9.a658ba5b.js"><link rel="prefetch" href="/notes/assets/js/page--4a252f57.96f5b187.js"><link rel="prefetch" href="/notes/assets/js/page--4b35cd6a.815cabfc.js"><link rel="prefetch" href="/notes/assets/js/page--4bd2c839.9c254ad6.js"><link rel="prefetch" href="/notes/assets/js/page--4be1980d.2aa9a6e5.js"><link rel="prefetch" href="/notes/assets/js/page--4c3dfc92.e0f966f1.js"><link rel="prefetch" href="/notes/assets/js/page--4c9b9bf3.eadd2cb2.js"><link rel="prefetch" href="/notes/assets/js/page--4caf2956.52f0f132.js"><link rel="prefetch" href="/notes/assets/js/page--4df59ba1.7da8848b.js"><link rel="prefetch" href="/notes/assets/js/page--4dfb2a67.8d1153e8.js"><link rel="prefetch" href="/notes/assets/js/page--4e2425dd.530ff427.js"><link rel="prefetch" href="/notes/assets/js/page--4eb2620a.6b4b0641.js"><link rel="prefetch" href="/notes/assets/js/page--4fd512b5.84e8f83d.js"><link rel="prefetch" href="/notes/assets/js/page--4ff1cd2e.69063a21.js"><link rel="prefetch" href="/notes/assets/js/page--505dfb41.dd611f96.js"><link rel="prefetch" href="/notes/assets/js/page--5293e923.7d7bb4c5.js"><link rel="prefetch" href="/notes/assets/js/page--5381ba01.a19f6d31.js"><link rel="prefetch" href="/notes/assets/js/page--550b58e9.f3c0f2c4.js"><link rel="prefetch" href="/notes/assets/js/page--564b24b3.6ef748ee.js"><link rel="prefetch" href="/notes/assets/js/page--598867f3.b18b6df9.js"><link rel="prefetch" href="/notes/assets/js/page--5be0cf2e.3464555b.js"><link rel="prefetch" href="/notes/assets/js/page--5c1b876b.b13402d2.js"><link rel="prefetch" href="/notes/assets/js/page--60c3812d.73dd0227.js"><link rel="prefetch" href="/notes/assets/js/page--6213086b.89567975.js"><link rel="prefetch" href="/notes/assets/js/page--624c4841.11f99d1c.js"><link rel="prefetch" href="/notes/assets/js/page--6389398f.2a67b985.js"><link rel="prefetch" href="/notes/assets/js/page--6497f0a1.7be614f7.js"><link rel="prefetch" href="/notes/assets/js/page--649d273e.2d9ec683.js"><link rel="prefetch" href="/notes/assets/js/page--663eaefe.d36d2ab2.js"><link rel="prefetch" href="/notes/assets/js/page--66f10201.a1a7d046.js"><link rel="prefetch" href="/notes/assets/js/page--6877a3e2.13ace38c.js"><link rel="prefetch" href="/notes/assets/js/page--6afe7ce1.51498eaa.js"><link rel="prefetch" href="/notes/assets/js/page--6cbf38e1.cedab12c.js"><link rel="prefetch" href="/notes/assets/js/page--6ce92f3e.affd65d4.js"><link rel="prefetch" href="/notes/assets/js/page--6e597d21.f5a162c5.js"><link rel="prefetch" href="/notes/assets/js/page--6e740896.40c2578c.js"><link rel="prefetch" href="/notes/assets/js/page--6f049967.debe6a68.js"><link rel="prefetch" href="/notes/assets/js/page--6ff33237.30b90714.js"><link rel="prefetch" href="/notes/assets/js/page--70f1ad1b.bf70d599.js"><link rel="prefetch" href="/notes/assets/js/page--7458eaaa.311e1ef6.js"><link rel="prefetch" href="/notes/assets/js/page--746db89a.d6014940.js"><link rel="prefetch" href="/notes/assets/js/page--762ae66f.0af4eb30.js"><link rel="prefetch" href="/notes/assets/js/page--78218936.9943e2be.js"><link rel="prefetch" href="/notes/assets/js/page--7a6b8eb1.45803ac5.js"><link rel="prefetch" href="/notes/assets/js/page--7b0b14b7.252bc2d4.js"><link rel="prefetch" href="/notes/assets/js/page--7b24903e.c8926890.js"><link rel="prefetch" href="/notes/assets/js/page--7c0f4619.79f6e665.js"><link rel="prefetch" href="/notes/assets/js/page--7c62eb01.ab10ad09.js"><link rel="prefetch" href="/notes/assets/js/page--7c8b8781.4a4f852e.js"><link rel="prefetch" href="/notes/assets/js/page--7d3b14f1.dc58e6eb.js"><link rel="prefetch" href="/notes/assets/js/page--7e94c3bb.0f204597.js"><link rel="prefetch" href="/notes/assets/js/page--7fc7e4a1.d62419af.js"><link rel="prefetch" href="/notes/assets/js/page--82271b92.bee5fa8e.js"><link rel="prefetch" href="/notes/assets/js/page--828e159e.a455ae0e.js"><link rel="prefetch" href="/notes/assets/js/page--8cd36aaa.b2810233.js"><link rel="prefetch" href="/notes/assets/js/page--8e28d8be.a4c85df3.js"><link rel="prefetch" href="/notes/assets/js/page--9009daaa.79ab2330.js"><link rel="prefetch" href="/notes/assets/js/page--9230e83a.4d2964f4.js"><link rel="prefetch" href="/notes/assets/js/page--9fdba57e.7c3d553b.js"><link rel="prefetch" href="/notes/assets/js/page--a051453e.6902b3b5.js"><link rel="prefetch" href="/notes/assets/js/page--a1c4239e.a191791a.js"><link rel="prefetch" href="/notes/assets/js/page--a8a8c1be.d30fc906.js"><link rel="prefetch" href="/notes/assets/js/page--aabdd1a6.f134e7d5.js"><link rel="prefetch" href="/notes/assets/js/page--b0ec1952.954cdc0f.js"><link rel="prefetch" href="/notes/assets/js/page--b5901aa6.0312498f.js"><link rel="prefetch" href="/notes/assets/js/page--c185ca2a.178abb9e.js"><link rel="prefetch" href="/notes/assets/js/page--c4cd30aa.5a3612cb.js"><link rel="prefetch" href="/notes/assets/js/page--cba59586.f2e51db1.js"><link rel="prefetch" href="/notes/assets/js/page--cc19dc5e.0ff72337.js"><link rel="prefetch" href="/notes/assets/js/page--cf39bd12.aecbb58b.js"><link rel="prefetch" href="/notes/assets/js/page--d0d30f3e.fcd22ce6.js"><link rel="prefetch" href="/notes/assets/js/page--d206ab7e.3ee78051.js"><link rel="prefetch" href="/notes/assets/js/page--d2ed8dae.43f948e6.js"><link rel="prefetch" href="/notes/assets/js/page--d676831e.6c3159a1.js"><link rel="prefetch" href="/notes/assets/js/page--d6d819fe.5d4a1bab.js"><link rel="prefetch" href="/notes/assets/js/page--d994fd7e.6a80b924.js"><link rel="prefetch" href="/notes/assets/js/page--dd5a1a16.e1273416.js"><link rel="prefetch" href="/notes/assets/js/page--df9ce13a.d75d1aa5.js"><link rel="prefetch" href="/notes/assets/js/page--e0b57efe.5bfeda2b.js"><link rel="prefetch" href="/notes/assets/js/page--eb673c12.3e06d122.js"><link rel="prefetch" href="/notes/assets/js/page--ebf2773e.17dea2e2.js"><link rel="prefetch" href="/notes/assets/js/page--ef64acb6.9f35c09a.js"><link rel="prefetch" href="/notes/assets/js/page--f77f473e.0149cbba.js"><link rel="prefetch" href="/notes/assets/js/page--fb1d49b6.89181d29.js"><link rel="prefetch" href="/notes/assets/js/page-1、说说你对SPA单页面的理解，它的优缺点分别是什么？.5c69b4dc.js"><link rel="prefetch" href="/notes/assets/js/page-49个CSS知识点.e9e714e5.js"><link rel="prefetch" href="/notes/assets/js/page-@charset.e43c17d3.js"><link rel="prefetch" href="/notes/assets/js/page-@types.b5c4e933.js"><link rel="prefetch" href="/notes/assets/js/page-@umijsplugin-dva.c564d47d.js"><link rel="prefetch" href="/notes/assets/js/page-@umijsplugin-qiankun.a78193b9.js"><link rel="prefetch" href="/notes/assets/js/page-AMD模块.71ab9929.js"><link rel="prefetch" href="/notes/assets/js/page-API.085a5385.js"><link rel="prefetch" href="/notes/assets/js/page-Arrayprototypeflat().ec50ddec.js"><link rel="prefetch" href="/notes/assets/js/page-Barrel.f661fdde.js"><link rel="prefetch" href="/notes/assets/js/page-Bind是有害的.88b50a48.js"><link rel="prefetch" href="/notes/assets/js/page-CSSGrid网格布局教程.a72c496b.js"><link rel="prefetch" href="/notes/assets/js/page-CSS选择符.ebd95820.js"><link rel="prefetch" href="/notes/assets/js/page-Canvas和SVG区别.2a1b4fc4.js"><link rel="prefetch" href="/notes/assets/js/page-CommonJS.220a5445.js"><link rel="prefetch" href="/notes/assets/js/page-Configuration.6e8f66a7.js"><link rel="prefetch" href="/notes/assets/js/page-Consumer向上找不到Provider的时候怎么办.507c066f.js"><link rel="prefetch" href="/notes/assets/js/page-ContentTypes.83b9a47b.js"><link rel="prefetch" href="/notes/assets/js/page-Css单位.c6803f01.js"><link rel="prefetch" href="/notes/assets/js/page-Decorators.000b9ba0.js"><link rel="prefetch" href="/notes/assets/js/page-Diff算法.e8e92f72.js"><link rel="prefetch" href="/notes/assets/js/page-ES10新特性（2019）.8516feb3.js"><link rel="prefetch" href="/notes/assets/js/page-ES6新特性（2015）.d324b4b3.js"><link rel="prefetch" href="/notes/assets/js/page-ES7新特性（2016）.77cbe7d5.js"><link rel="prefetch" href="/notes/assets/js/page-ES8新特性（2017）.179a1341.js"><link rel="prefetch" href="/notes/assets/js/page-ES9新特性（2018）.13057858.js"><link rel="prefetch" href="/notes/assets/js/page-FetchAPI教程.e40fbf2c.js"><link rel="prefetch" href="/notes/assets/js/page-FileReader.29c0a322.js"><link rel="prefetch" href="/notes/assets/js/page-Flex布局教程：实例篇.35d7ee92.js"><link rel="prefetch" href="/notes/assets/js/page-Flex布局教程：语法篇.3dbd35cf.js"><link rel="prefetch" href="/notes/assets/js/page-Flyweight模式.5dc94291.js"><link rel="prefetch" href="/notes/assets/js/page-Fragment.b3e85374.js"><link rel="prefetch" href="/notes/assets/js/page-Freshness.64b3b1c3.js"><link rel="prefetch" href="/notes/assets/js/page-Generator.53ad96b1.js"><link rel="prefetch" href="/notes/assets/js/page-Git面试知识点.18005a4d.js"><link rel="prefetch" href="/notes/assets/js/page-HTML5datalist标签.382de4ca.js"><link rel="prefetch" href="/notes/assets/js/page-HTML常用特殊字符.3176c14e.js"><link rel="prefetch" href="/notes/assets/js/page-Home.59e67adb.js"><link rel="prefetch" href="/notes/assets/js/page-Hybrid.61248296.js"><link rel="prefetch" href="/notes/assets/js/page-ID选择器.603288d4.js"><link rel="prefetch" href="/notes/assets/js/page-ImmutableData.ee044c2c.js"><link rel="prefetch" href="/notes/assets/js/page-JSX和React.9b274aa5.js"><link rel="prefetch" href="/notes/assets/js/page-JavaScript实现双向链表.517e2422.js"><link rel="prefetch" href="/notes/assets/js/page-JavaScript执行机制.84176724.js"><link rel="prefetch" href="/notes/assets/js/page-JavaScript设计模式的分类.254c15e5.js"><link rel="prefetch" href="/notes/assets/js/page-MVC模式.07b9ecd8.js"><link rel="prefetch" href="/notes/assets/js/page-MVP模式.a591f538.js"><link rel="prefetch" href="/notes/assets/js/page-MVVM.9c20a641.js"><link rel="prefetch" href="/notes/assets/js/page-Map.bfa22301.js"><link rel="prefetch" href="/notes/assets/js/page-Mixin模式.b0df3544.js"><link rel="prefetch" href="/notes/assets/js/page-Modulardesign(模块化设计).b916ebd1.js"><link rel="prefetch" href="/notes/assets/js/page-Never.c37b1b08.js"><link rel="prefetch" href="/notes/assets/js/page-Objectis（）.100a4b0d.js"><link rel="prefetch" href="/notes/assets/js/page-Portals.e8dcfe88.js"><link rel="prefetch" href="/notes/assets/js/page-Promise.a932a2b9.js"><link rel="prefetch" href="/notes/assets/js/page-Promise面试题总结.ca5798a6.js"><link rel="prefetch" href="/notes/assets/js/page-Props(v2611).42dfdad5.js"><link rel="prefetch" href="/notes/assets/js/page-Quirks模式是什么？它和Standards模式有什么区别.d7fc1714.js"><link rel="prefetch" href="/notes/assets/js/page-React+TypeScript规范.93633720.js"><link rel="prefetch" href="/notes/assets/js/page-ReactComponent.38eb0d0e.js"><link rel="prefetch" href="/notes/assets/js/page-ReactJSX.01272c8a.js"><link rel="prefetch" href="/notes/assets/js/page-React引用传递ForwardingRefs.7c3bce91.js"><link rel="prefetch" href="/notes/assets/js/page-React源码解析.e774ed27.js"><link rel="prefetch" href="/notes/assets/js/page-React高阶组件(HOC).8e952c8b.js"><link rel="prefetch" href="/notes/assets/js/page-ReflectMetadata.7b524dd8.js"><link rel="prefetch" href="/notes/assets/js/page-Stack.bbf07a5e.js"><link rel="prefetch" href="/notes/assets/js/page-StickyFooter，完美的绝对底部.6bc69a8e.js"><link rel="prefetch" href="/notes/assets/js/page-String.9b03218c.js"><link rel="prefetch" href="/notes/assets/js/page-Suspense组件.466505ad.js"><link rel="prefetch" href="/notes/assets/js/page-Symbol.650c702c.js"><link rel="prefetch" href="/notes/assets/js/page-ThisType.de220a2e.js"><link rel="prefetch" href="/notes/assets/js/page-TransformBuildApi.860c9af8.js"><link rel="prefetch" href="/notes/assets/js/page-Truthy.6453a842.js"><link rel="prefetch" href="/notes/assets/js/page-TypeScript37.c78ac916.js"><link rel="prefetch" href="/notes/assets/js/page-TypeScript38.bf234664.js"><link rel="prefetch" href="/notes/assets/js/page-TypeScript39.be2d1d8c.js"><link rel="prefetch" href="/notes/assets/js/page-TypeScript中的静态构造函数.c1c1db50.js"><link rel="prefetch" href="/notes/assets/js/page-VNode.d4eef1fc.js"><link rel="prefetch" href="/notes/assets/js/page-VirtualDOM.6c742a22.js"><link rel="prefetch" href="/notes/assets/js/page-Vue-Router.e7326241.js"><link rel="prefetch" href="/notes/assets/js/page-VueRouter对象.a1c05d29.js"><link rel="prefetch" href="/notes/assets/js/page-Vuejs源码构建.d157253a.js"><link rel="prefetch" href="/notes/assets/js/page-Vuejs源码目录设计.68643a81.js"><link rel="prefetch" href="/notes/assets/js/page-Vuex.975a110e.js"><link rel="prefetch" href="/notes/assets/js/page-Vuex初始化.a4c67c70.js"><link rel="prefetch" href="/notes/assets/js/page-Vue事件API.4d0d0794.js"><link rel="prefetch" href="/notes/assets/js/page-Vue实例挂载的实现.82472459.js"><link rel="prefetch" href="/notes/assets/js/page-Vue模板渲染的原理.4f98176a.js"><link rel="prefetch" href="/notes/assets/js/page-Webpack.4fcf7c34.js"><link rel="prefetch" href="/notes/assets/js/page-XMLHttpRequest.ae3bfb3b.js"><link rel="prefetch" href="/notes/assets/js/page-accesskey.e518f09a.js"><link rel="prefetch" href="/notes/assets/js/page-arguments[]函数参数数组.958d0de5.js"><link rel="prefetch" href="/notes/assets/js/page-babel编译原理.1de0db65.js"><link rel="prefetch" href="/notes/assets/js/page-before和after中双冒号和单冒号.9d7a85fe.js"><link rel="prefetch" href="/notes/assets/js/page-beginWork.d80bdb39.js"><link rel="prefetch" href="/notes/assets/js/page-codegen.0f5b0048.js"><link rel="prefetch" href="/notes/assets/js/page-coerceRef.3ae34f44.js"><link rel="prefetch" href="/notes/assets/js/page-commitAllHostEffects.97be7e93.js"><link rel="prefetch" href="/notes/assets/js/page-commitAllLifeCycles.9a5101a1.js"><link rel="prefetch" href="/notes/assets/js/page-commitBeforeMutationLifecycles.f0143beb.js"><link rel="prefetch" href="/notes/assets/js/page-commitDeletion.2bec63be.js"><link rel="prefetch" href="/notes/assets/js/page-commitPlacement.fc870781.js"><link rel="prefetch" href="/notes/assets/js/page-commitRoot.0a0dd0e0.js"><link rel="prefetch" href="/notes/assets/js/page-commitWork.35c9d578.js"><link rel="prefetch" href="/notes/assets/js/page-constructor和getInitialState.9401f009.js"><link rel="prefetch" href="/notes/assets/js/page-createComponent.7f55591c.js"><link rel="prefetch" href="/notes/assets/js/page-createElement.17e3cfb4.js"><link rel="prefetch" href="/notes/assets/js/page-css优先级：.0e291efc.js"><link rel="prefetch" href="/notes/assets/js/page-css兼容性整理.073128e6.js"><link rel="prefetch" href="/notes/assets/js/page-css基础面试.61cdb415.js"><link rel="prefetch" href="/notes/assets/js/page-demo.c74526d4.js"><link rel="prefetch" href="/notes/assets/js/page-device.b951e248.js"><link rel="prefetch" href="/notes/assets/js/page-divonClick={handlerClick}单击单击div有什么区别.11b9d206.js"><link rel="prefetch" href="/notes/assets/js/page-es6module.93c0f0d1.js"><link rel="prefetch" href="/notes/assets/js/page-event.506c1f8b.js"><link rel="prefetch" href="/notes/assets/js/page-exportdefault被认为是有害的.a3b1c227.js"><link rel="prefetch" href="/notes/assets/js/page-function.549033bd.js"><link rel="prefetch" href="/notes/assets/js/page-gitrebase.e48ff1a7.js"><link rel="prefetch" href="/notes/assets/js/page-hydrate.11f27cf8.js"><link rel="prefetch" href="/notes/assets/js/page-infer.b3350230.js"><link rel="prefetch" href="/notes/assets/js/page-inline-block元素间间距.ea94f1c7.js"><link rel="prefetch" href="/notes/assets/js/page-invokeGuardedCallback.f444a4ce.js"><link rel="prefetch" href="/notes/assets/js/page-js奇怪的小问题.5485f9ec.js"><link rel="prefetch" href="/notes/assets/js/page-js异步历史.365766a9.js"><link rel="prefetch" href="/notes/assets/js/page-js总结.3359739a.js"><link rel="prefetch" href="/notes/assets/js/page-keep-alive.754366b7.js"><link rel="prefetch" href="/notes/assets/js/page-lazycomponent.799eb9c2.js"><link rel="prefetch" href="/notes/assets/js/page-libdts.b6581b5c.js"><link rel="prefetch" href="/notes/assets/js/page-loader.aa310964.js"><link rel="prefetch" href="/notes/assets/js/page-matcher.e67a1ba5.js"><link rel="prefetch" href="/notes/assets/js/page-module、export、import分别有什么作用？.895da70b.js"><link rel="prefetch" href="/notes/assets/js/page-mountIndeterminateComponent.62e3baad.js"><link rel="prefetch" href="/notes/assets/js/page-mountLazyCompont.6e2678fb.js"><link rel="prefetch" href="/notes/assets/js/page-newVue发生了什么.825b893b.js"><link rel="prefetch" href="/notes/assets/js/page-nextTick.81b28adc.js"><link rel="prefetch" href="/notes/assets/js/page-optimize.902ed350.js"><link rel="prefetch" href="/notes/assets/js/page-parse.72404bb9.js"><link rel="prefetch" href="/notes/assets/js/page-patch.ccd447f1.js"><link rel="prefetch" href="/notes/assets/js/page-plugin.f11c9370.js"><link rel="prefetch" href="/notes/assets/js/page-plugins.2b0dc420.js"><link rel="prefetch" href="/notes/assets/js/page-public设置.723a2ffa.js"><link rel="prefetch" href="/notes/assets/js/page-react-dom.b426322f.js"><link rel="prefetch" href="/notes/assets/js/page-react-hooks.89184a8a.js"><link rel="prefetch" href="/notes/assets/js/page-react-hooks使用.a0d2086b.js"><link rel="prefetch" href="/notes/assets/js/page-react-hooks原理.43c8321a.js"><link rel="prefetch" href="/notes/assets/js/page-react-redux源码.6bdd07d0.js"><link rel="prefetch" href="/notes/assets/js/page-readonly.3d319b3b.js"><link rel="prefetch" href="/notes/assets/js/page-reconcileChildren.59fdc557.js"><link rel="prefetch" href="/notes/assets/js/page-reconcileChildrenArray.8df42c39.js"><link rel="prefetch" href="/notes/assets/js/page-reconcileSingleElement.ea1dbb01.js"><link rel="prefetch" href="/notes/assets/js/page-redux源码解读.14b94b73.js"><link rel="prefetch" href="/notes/assets/js/page-render.8b5a001d.js"><link rel="prefetch" href="/notes/assets/js/page-resolveCurrentlyRenderingFiber.a7f31c87.js"><link rel="prefetch" href="/notes/assets/js/page-set.bdf3ed28.js"><link rel="prefetch" href="/notes/assets/js/page-setState.c5584d94.js"><link rel="prefetch" href="/notes/assets/js/page-setState执行流程.2fc318cf.js"><link rel="prefetch" href="/notes/assets/js/page-setState背后的批量更新如何实现.28ac9de4.js"><link rel="prefetch" href="/notes/assets/js/page-slot.1b69e45a.js"><link rel="prefetch" href="/notes/assets/js/page-suspense.8abe0bf9.js"><link rel="prefetch" href="/notes/assets/js/page-throwException.3679bb49.js"><link rel="prefetch" href="/notes/assets/js/page-transition-group.63cb1855.js"><link rel="prefetch" href="/notes/assets/js/page-transition.cb19747f.js"><link rel="prefetch" href="/notes/assets/js/page-tsconfigjson的行为.554099b1.js"><link rel="prefetch" href="/notes/assets/js/page-typescript综合面试.98468932.js"><link rel="prefetch" href="/notes/assets/js/page-update.69895124.js"><link rel="prefetch" href="/notes/assets/js/page-updateClassComponent.04015a09.js"><link rel="prefetch" href="/notes/assets/js/page-updateContextConsumer.6556ace9.js"><link rel="prefetch" href="/notes/assets/js/page-updateContextProvider.bbe4de6a.js"><link rel="prefetch" href="/notes/assets/js/page-updateForwardRef.6df04786.js"><link rel="prefetch" href="/notes/assets/js/page-updateFragment.61e8e43a.js"><link rel="prefetch" href="/notes/assets/js/page-updateFunctionalComponent.125860f4.js"><link rel="prefetch" href="/notes/assets/js/page-updateHostComponent.43214c0d.js"><link rel="prefetch" href="/notes/assets/js/page-updateHostRoot.1f10874a.js"><link rel="prefetch" href="/notes/assets/js/page-updateHostText.6af99406.js"><link rel="prefetch" href="/notes/assets/js/page-updateMode.bb225f24.js"><link rel="prefetch" href="/notes/assets/js/page-updatePortalComponent.637ff37c.js"><link rel="prefetch" href="/notes/assets/js/page-updateProfiler.4f817769.js"><link rel="prefetch" href="/notes/assets/js/page-updateSuspenseComponent.3d646a78.js"><link rel="prefetch" href="/notes/assets/js/page-useCallbackuseMemo.3fc89a06.js"><link rel="prefetch" href="/notes/assets/js/page-useContext.2fdf0e21.js"><link rel="prefetch" href="/notes/assets/js/page-useEffect.fb41b7e5.js"><link rel="prefetch" href="/notes/assets/js/page-useState.dd65e2cc.js"><link rel="prefetch" href="/notes/assets/js/page-v-model.91c2bbad.js"><link rel="prefetch" href="/notes/assets/js/page-vue响应式详解（重学前端-vue篇1）.56f44162.js"><link rel="prefetch" href="/notes/assets/js/page-vue的优点.c2b6e7e3.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶1-1期】理解JavaScript中的执行上下文和执行栈.df92ec5d.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶1-2期】JavaScript深入之执行上下文栈和变量对象.27316558.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶1-3期】JavaScript深入之内存空间详细图解.42610f4e.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶1-4期】JavaScript深入之带走进内存机制.a4105edd.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶1-5期】JavaScript深入之4类常见内存泄漏及如何避免.146f90e5.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶2-1期】深入浅出图解作用域链和闭包.759ecdf4.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶2-2期】JavaScript深入之从作用域链理解闭包.f4c9a734.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶2-3期】JavaScript深入之闭包面试题解.d73e2a8a.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶3-1期】JavaScript深入之史上最全--5种this绑定全面解析.30f282ce.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶3-2期】JavaScript深入之重新认识箭头函数的this.d64bc151.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶3-3期】深度广度解析call和apply原理、使用场景及实现.88381d94.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶3-4期】深度解析bind原理、使用场景及模拟实现.302a7650.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶3-5期】深度解析new原理及模拟实现.81cecb05.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶4-1期】详细解析赋值、浅拷贝和深拷贝的区别.0045ec87.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶4-2期】Objectassign原理及其实现.b7a8808b.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶4-3期】面试题之如何实现一个深拷贝.63278e0c.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶4-4期】Lodash是如何实现深拷贝的.d7abdcb9.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶5-1期】重新认识构造函数、原型和原型链.da5212fe.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶5-2期】图解原型链及其继承优缺点.4383274e.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶5-3期】深入探究FunctionObject鸡蛋问题.ebaeefb2.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶6-1期】JavaScript高阶函数浅析.311cade4.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶6-2期】深入高阶函数应用之柯里化.04da4d51.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶6-3期】Array原型方法源码实现大解密.565ebb9e.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶7-1期】深入浅出节流函数throttle.fae2dc9a.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶7-2期】深入浅出防抖函数debounce.e89758d2.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶7-3期】Throttle和Debounce在React中的应用.60d026e2.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶7-4期】深入篇阿里P6必会Lodash防抖节流函数实现原理.d6fa444e.js"><link rel="prefetch" href="/notes/assets/js/page-【进阶7-5期】浅出篇7个角度吃透Lodash防抖节流原理.973d0f8d.js"><link rel="prefetch" href="/notes/assets/js/page-一、Webpack原理.4f582aa0.js"><link rel="prefetch" href="/notes/assets/js/page-一、为什么JavaScript是单线程？.a7f94a58.js"><link rel="prefetch" href="/notes/assets/js/page-一、概述.c4d6dcb8.js"><link rel="prefetch" href="/notes/assets/js/page-一、简介.c688bf2c.js"><link rel="prefetch" href="/notes/assets/js/page-一些不能按预期工作的代码.59a2f86e.js"><link rel="prefetch" href="/notes/assets/js/page-一些常见的Feature需求.45186d64.js"><link rel="prefetch" href="/notes/assets/js/page-一些常见的「bug」并不是bug.7071490c.js"><link rel="prefetch" href="/notes/assets/js/page-一正确理解react-router.a545862e.js"><link rel="prefetch" href="/notes/assets/js/page-严格模式.9c2e695e.js"><link rel="prefetch" href="/notes/assets/js/page-中介者模式.7d0f22bd.js"><link rel="prefetch" href="/notes/assets/js/page-事件模块的注入模式.f8b3b4d3.js"><link rel="prefetch" href="/notes/assets/js/page-事件监听句柄.b3823529.js"><link rel="prefetch" href="/notes/assets/js/page-事件绑定.5d4fa427.js"><link rel="prefetch" href="/notes/assets/js/page-事件触发.a0cab1ad.js"><link rel="prefetch" href="/notes/assets/js/page-从JavaScript迁移.0bfe7ffa.js"><link rel="prefetch" href="/notes/assets/js/page-从new一个Vue对象开始.603656ad.js"><link rel="prefetch" href="/notes/assets/js/page-从入口开始.e5f02a15.js"><link rel="prefetch" href="/notes/assets/js/page-代理模式.c308d690.js"><link rel="prefetch" href="/notes/assets/js/page-代码分割.654c3e56.js"><link rel="prefetch" href="/notes/assets/js/page-代码分离.ee950891.js"><link rel="prefetch" href="/notes/assets/js/page-传参.e0c1278b.js"><link rel="prefetch" href="/notes/assets/js/page-伪元素.d0698a96.js"><link rel="prefetch" href="/notes/assets/js/page-伪类.7dd9a92f.js"><link rel="prefetch" href="/notes/assets/js/page-作用.41581bd9.js"><link rel="prefetch" href="/notes/assets/js/page-依赖收集.eda6dd14.js"><link rel="prefetch" href="/notes/assets/js/page-元素选择器.5bf83fe5.js"><link rel="prefetch" href="/notes/assets/js/page-入口起点(entrypoints).9172ec22.js"><link rel="prefetch" href="/notes/assets/js/page-全局属性：用于任何HTML5元素的属性.6267e9c5.js"><link rel="prefetch" href="/notes/assets/js/page-关于ReactHooks.a772ac3e.js"><link rel="prefetch" href="/notes/assets/js/page-具体使用.5701c26e.js"><link rel="prefetch" href="/notes/assets/js/page-写一个方法去掉字符串中的空格.f91bc3e7.js"><link rel="prefetch" href="/notes/assets/js/page-减少setter属性的使用.c691f7da.js"><link rel="prefetch" href="/notes/assets/js/page-函数.86e8431a.js"><link rel="prefetch" href="/notes/assets/js/page-函数参数.ce989beb.js"><link rel="prefetch" href="/notes/assets/js/page-函数式编程.b7f69987.js"><link rel="prefetch" href="/notes/assets/js/page-创建event对象.04f250d9.js"><link rel="prefetch" href="/notes/assets/js/page-创建数组.14bb5ac4.js"><link rel="prefetch" href="/notes/assets/js/page-动态导入表达式.6be97d6a.js"><link rel="prefetch" href="/notes/assets/js/page-协变与逆变.7be32055.js"><link rel="prefetch" href="/notes/assets/js/page-单例模式.ed7e68e7.js"><link rel="prefetch" href="/notes/assets/js/page-原型模式.aefa29ed.js"><link rel="prefetch" href="/notes/assets/js/page-原理图.5c1e661d.js"><link rel="prefetch" href="/notes/assets/js/page-发射器.f3b28c4f.js"><link rel="prefetch" href="/notes/assets/js/page-可能不需要使用派生state.5a98667b.js"><link rel="prefetch" href="/notes/assets/js/page-可调用的.ca956ec8.js"><link rel="prefetch" href="/notes/assets/js/page-合并配置.840f5fd0.js"><link rel="prefetch" href="/notes/assets/js/page-名义化类型.8c00fad2.js"><link rel="prefetch" href="/notes/assets/js/page-后代选择器.bb1cfbf4.js"><link rel="prefetch" href="/notes/assets/js/page-命令模式.564e889b.js"><link rel="prefetch" href="/notes/assets/js/page-命令行的行为.cdeac454.js"><link rel="prefetch" href="/notes/assets/js/page-命名空间.05e05c21.js"><link rel="prefetch" href="/notes/assets/js/page-响应式对象.84f7de30.js"><link rel="prefetch" href="/notes/assets/js/page-块格式化上下文.930ec96d.js"><link rel="prefetch" href="/notes/assets/js/page-基于字符串的枚举.c337a299.js"><link rel="prefetch" href="/notes/assets/js/page-基本概念.9999cbbe.js"><link rel="prefetch" href="/notes/assets/js/page-基础分类.978b3b95.js"><link rel="prefetch" href="/notes/assets/js/page-声明空间.39bd8811.js"><link rel="prefetch" href="/notes/assets/js/page-外观模式.2a1d4302.js"><link rel="prefetch" href="/notes/assets/js/page-外边距重叠.10a97f33.js"><link rel="prefetch" href="/notes/assets/js/page-如何关闭表单自动填充.63b2b7c4.js"><link rel="prefetch" href="/notes/assets/js/page-子选择器.3e77c3ce.js"><link rel="prefetch" href="/notes/assets/js/page-字面量类型.abb7e6e7.js"><link rel="prefetch" href="/notes/assets/js/page-对象字面量的惰性初始化.decdc0da.js"><link rel="prefetch" href="/notes/assets/js/page-层叠上下文.fb2b3e62.js"><link rel="prefetch" href="/notes/assets/js/page-展开语法.cce572bf.js"><link rel="prefetch" href="/notes/assets/js/page-展示长列表.f6b59f57.js"><link rel="prefetch" href="/notes/assets/js/page-属性选择器.e4b259e2.js"><link rel="prefetch" href="/notes/assets/js/page-工具类.628a5599.js"><link rel="prefetch" href="/notes/assets/js/page-工厂模式.fb44fd1b.js"><link rel="prefetch" href="/notes/assets/js/page-布局和包含块.76d2bfb9.js"><link rel="prefetch" href="/notes/assets/js/page-常用块级元素：.60370784.js"><link rel="prefetch" href="/notes/assets/js/page-常见的Error.61c7ad63.js"><link rel="prefetch" href="/notes/assets/js/page-并发模型与事件循环.e1185fd0.js"><link rel="prefetch" href="/notes/assets/js/page-建造者模式.f9234f02.js"><link rel="prefetch" href="/notes/assets/js/page-开始.76cd636d.js"><link rel="prefetch" href="/notes/assets/js/page-异常处理.a645fb8d.js"><link rel="prefetch" href="/notes/assets/js/page-异步组件.2dad3b63.js"><link rel="prefetch" href="/notes/assets/js/page-引入.50d77beb.js"><link rel="prefetch" href="/notes/assets/js/page-引用.f9fd38df.js"><link rel="prefetch" href="/notes/assets/js/page-引用官网.99dcf9af.js"><link rel="prefetch" href="/notes/assets/js/page-总结.504d3b84.js"><link rel="prefetch" href="/notes/assets/js/page-惰性初始模式.07af4bd9.js"><link rel="prefetch" href="/notes/assets/js/page-扩展.ba69d26e.js"><link rel="prefetch" href="/notes/assets/js/page-扫描器.1028c9d5.js"><link rel="prefetch" href="/notes/assets/js/page-抽象DOM树.1622eb90.js"><link rel="prefetch" href="/notes/assets/js/page-抽象语法树.bf80b9c7.js"><link rel="prefetch" href="/notes/assets/js/page-接口.fbf8c16c.js"><link rel="prefetch" href="/notes/assets/js/page-插件.f207249d.js"><link rel="prefetch" href="/notes/assets/js/page-操作DOM.f289ce0b.js"><link rel="prefetch" href="/notes/assets/js/page-支持JSX.20f503fb.js"><link rel="prefetch" href="/notes/assets/js/page-改善antdTable组件的渲染效率.1a474908.js"><link rel="prefetch" href="/notes/assets/js/page-数据绑定原理.94e90bb8.js"><link rel="prefetch" href="/notes/assets/js/page-数据驱动.155cbbaf.js"><link rel="prefetch" href="/notes/assets/js/page-文档声明区别.93b13ebb.js"><link rel="prefetch" href="/notes/assets/js/page-新js环境要求.4ef1f9cb.js"><link rel="prefetch" href="/notes/assets/js/page-暴露模块模式.d373d3a7.js"><link rel="prefetch" href="/notes/assets/js/page-服务器基础.81ad51d8.js"><link rel="prefetch" href="/notes/assets/js/page-术语表.f7343bec.js"><link rel="prefetch" href="/notes/assets/js/page-构建切换.efc34c4b.js"><link rel="prefetch" href="/notes/assets/js/page-构造器模式.a35a1151.js"><link rel="prefetch" href="/notes/assets/js/page-枚举.3cd0ced6.js"><link rel="prefetch" href="/notes/assets/js/page-柯里化.0fadb428.js"><link rel="prefetch" href="/notes/assets/js/page-标准的CSS的盒子模型？低版本IE的盒子模型.3f235bad.js"><link rel="prefetch" href="/notes/assets/js/page-检查器.7d3ae097.js"><link rel="prefetch" href="/notes/assets/js/page-检测变化的注意事项.37ac4fb1.js"><link rel="prefetch" href="/notes/assets/js/page-概念.96036083.js"><link rel="prefetch" href="/notes/assets/js/page-概览.106ae5d3.js"><link rel="prefetch" href="/notes/assets/js/page-模块.4d9d8f95.js"><link rel="prefetch" href="/notes/assets/js/page-模块化模式.9b605e58.js"><link rel="prefetch" href="/notes/assets/js/page-泛型.38e2b6b5.js"><link rel="prefetch" href="/notes/assets/js/page-泛型的实例化类型.4d2c58a9.js"><link rel="prefetch" href="/notes/assets/js/page-派发更新.949d2132.js"><link rel="prefetch" href="/notes/assets/js/page-流动的类型.ff513853.js"><link rel="prefetch" href="/notes/assets/js/page-浏览器输入URL.d08169a3.js"><link rel="prefetch" href="/notes/assets/js/page-深入TypeScript.ee1edd35.js"><link rel="prefetch" href="/notes/assets/js/page-深入响应式原理.6e031537.js"><link rel="prefetch" href="/notes/assets/js/page-深入源码剖析componentWillXXX为什么UNSAFE.7878cabc.js"><link rel="prefetch" href="/notes/assets/js/page-混合.c81a4790.js"><link rel="prefetch" href="/notes/assets/js/page-状态函数.73163d3b.js"><link rel="prefetch" href="/notes/assets/js/page-环境声明.dcc2fb4c.js"><link rel="prefetch" href="/notes/assets/js/page-生命周期.bf14f5e1.js"><link rel="prefetch" href="/notes/assets/js/page-用递归算法实现，数组长度为5且元素的随机数在2-32间不重复的值.2bd55be8.js"><link rel="prefetch" href="/notes/assets/js/page-相邻兄弟选择器.3c2b1faf.js"><link rel="prefetch" href="/notes/assets/js/page-知识体系.1a0aeb6f.js"><link rel="prefetch" href="/notes/assets/js/page-程序.b99b047f.js"><link rel="prefetch" href="/notes/assets/js/page-第10天简要描述下什么是回调函数并写一个例子出来.a1dbb316.js"><link rel="prefetch" href="/notes/assets/js/page-第11天简要描述下JS有哪些内置的对象.498da5d0.js"><link rel="prefetch" href="/notes/assets/js/page-第12天写一个获取当前url查询字符串中的参数的方法.622548a2.js"><link rel="prefetch" href="/notes/assets/js/page-第13天说说你对javascript的作用域的理解.0ba5c314.js"><link rel="prefetch" href="/notes/assets/js/page-第14天什么是闭包？优缺点分别是什么？.8027a794.js"><link rel="prefetch" href="/notes/assets/js/page-第15天写一个数组去重的方法（支持多维数组）.2eb9dfe7.js"><link rel="prefetch" href="/notes/assets/js/page-第16天返回到顶部的方法有哪些？把其中一个方法出来.5533680e.js"><link rel="prefetch" href="/notes/assets/js/page-第17天typeof('abc')和typeof'abc'都是string,那么typeof是操作符还是函数？.dffb4aab.js"><link rel="prefetch" href="/notes/assets/js/page-第18天你理解的usestrict;是什么使用它有什么优缺点？.447210d3.js"><link rel="prefetch" href="/notes/assets/js/page-第19天attribute和property有什么不同？.4f94d03f.js"><link rel="prefetch" href="/notes/assets/js/page-第1天用递归算法实现，数组长度为5且元素的随机数在2-32间不重复的值.46a71592.js"><link rel="prefetch" href="/notes/assets/js/page-第20天写一个验证身份证号的方法.de3a53a1.js"><link rel="prefetch" href="/notes/assets/js/page-第21天写一个方法验证是否为中文.f145be07.js"><link rel="prefetch" href="/notes/assets/js/page-第22天你对new操作符的理解是什么？手动实现一个new方法.65fccb7e.js"><link rel="prefetch" href="/notes/assets/js/page-第23天01+02、01+03和0102分别等于多少？并解释下为什么？.0289f907.js"><link rel="prefetch" href="/notes/assets/js/page-第24天如何快速让一个数组乱序，写出来.91a099e3.js"><link rel="prefetch" href="/notes/assets/js/page-第25天写一个判断设备来源的方法.8df5cc79.js"><link rel="prefetch" href="/notes/assets/js/page-第26天说说bind、call、apply的区别？并手写实现一个bind的方法.8d3d4cf7.js"><link rel="prefetch" href="/notes/assets/js/page-第27天说说你对arguments的理解，它是数组吗？.0acd09f2.js"><link rel="prefetch" href="/notes/assets/js/page-第28天解释下这段代码的意思！.1e98198e.js"><link rel="prefetch" href="/notes/assets/js/page-第29天写一个获取数组的最大值、最小值的方法.92c2ac54.js"><link rel="prefetch" href="/notes/assets/js/page-第2天写一个方法去掉字符串中的空格.f60ff3cd.js"><link rel="prefetch" href="/notes/assets/js/page-第30天写一个方法判断字符串是否为回文字符串.db10e32b.js"><link rel="prefetch" href="/notes/assets/js/page-第3天去除字符串中最后一个指定的字符.cb4a520c.js"><link rel="prefetch" href="/notes/assets/js/page-第4天写一个方法把下划线命名转成大驼峰命名.cf713f1e.js"><link rel="prefetch" href="/notes/assets/js/page-第5天写一个把字符串大小写切换的方法.792ea1a9.js"><link rel="prefetch" href="/notes/assets/js/page-第6天写一个去除制表符和换行符的方法.f8e8e6bb.js"><link rel="prefetch" href="/notes/assets/js/page-第7天统计某一字符或字符串在另一个字符串中出现的次数.1936ef68.js"><link rel="prefetch" href="/notes/assets/js/page-第8天写一个加密字符串的方法.80ae8007.js"><link rel="prefetch" href="/notes/assets/js/page-第9天写一个判断数据类型的方法.fcaf89ce.js"><link rel="prefetch" href="/notes/assets/js/page-第一套js综合基础面试题.f4c5e430.js"><link rel="prefetch" href="/notes/assets/js/page-第一套webpack综合基础面试题.6ee0b373.js"><link rel="prefetch" href="/notes/assets/js/page-管理资源.2e36606f.js"><link rel="prefetch" href="/notes/assets/js/page-类.4684fa2c.js"><link rel="prefetch" href="/notes/assets/js/page-类型保护.7305fa2c.js"><link rel="prefetch" href="/notes/assets/js/page-类型兼容性.8a26ca8c.js"><link rel="prefetch" href="/notes/assets/js/page-类型守卫.11c0ec5e.js"><link rel="prefetch" href="/notes/assets/js/page-类型安全的EventEmitter.10a64690.js"><link rel="prefetch" href="/notes/assets/js/page-类型推断.2c0f1cf3.js"><link rel="prefetch" href="/notes/assets/js/page-类型断言.901d4f9a.js"><link rel="prefetch" href="/notes/assets/js/page-类型系统的行为.3e466a5b.js"><link rel="prefetch" href="/notes/assets/js/page-类是有用的.fde69972.js"><link rel="prefetch" href="/notes/assets/js/page-类选择器.69bf46ad.js"><link rel="prefetch" href="/notes/assets/js/page-索引签名.27bf3641.js"><link rel="prefetch" href="/notes/assets/js/page-组件化.98ad7c7a.js"><link rel="prefetch" href="/notes/assets/js/page-组件卸载前，加在DOM元素的监听事件和定时器要不要手动清除.21e5375e.js"><link rel="prefetch" href="/notes/assets/js/page-组件更新.bd5f0502.js"><link rel="prefetch" href="/notes/assets/js/page-组件注册.02e6bea7.js"><link rel="prefetch" href="/notes/assets/js/page-组件类.b3d83585.js"><link rel="prefetch" href="/notes/assets/js/page-组合模式.81351cff.js"><link rel="prefetch" href="/notes/assets/js/page-绑定器.1a224ffa.js"><link rel="prefetch" href="/notes/assets/js/page-结论.a755e8fa.js"><link rel="prefetch" href="/notes/assets/js/page-编译.92a26f40.js"><link rel="prefetch" href="/notes/assets/js/page-编译上下文.d9b7d418.js"><link rel="prefetch" href="/notes/assets/js/page-编译入口.b7c1b8aa.js"><link rel="prefetch" href="/notes/assets/js/page-网站favicon图标.b4f588c5.js"><link rel="prefetch" href="/notes/assets/js/page-自定义hooks.fb2b4229.js"><link rel="prefetch" href="/notes/assets/js/page-获取localStorage和sessionStorage当前已存储大小.179477e7.js"><link rel="prefetch" href="/notes/assets/js/page-虚拟DOM和DOM-diff.591b0d4e.js"><link rel="prefetch" href="/notes/assets/js/page-表单数据.2baa3ea4.js"><link rel="prefetch" href="/notes/assets/js/page-装饰器.0a7347c1.js"><link rel="prefetch" href="/notes/assets/js/page-装饰模式.d9d87f74.js"><link rel="prefetch" href="/notes/assets/js/page-观察者模式.4c511581.js"><link rel="prefetch" href="/notes/assets/js/page-解析器.c02cb4d2.js"><link rel="prefetch" href="/notes/assets/js/page-解读Errors.64701f72.js"><link rel="prefetch" href="/notes/assets/js/page-计算属性VS侦听属性.967bad2d.js"><link rel="prefetch" href="/notes/assets/js/page-认识Flow.2ee20212.js"><link rel="prefetch" href="/notes/assets/js/page-评论.16d7751a.js"><link rel="prefetch" href="/notes/assets/js/page-详解箭头函数和普通函数的区别以及箭头函数的注意事项、不适用场景.8966c156.js"><link rel="prefetch" href="/notes/assets/js/page-说说对SPA单页面的理解，它的优缺点分别是什么？.2dcf9062.js"><link rel="prefetch" href="/notes/assets/js/page-调和的过程.aefb7dd4.js"><link rel="prefetch" href="/notes/assets/js/page-调度原理.404b9f54.js"><link rel="prefetch" href="/notes/assets/js/page-谨慎使用--outFile.a6d83e72.js"><link rel="prefetch" href="/notes/assets/js/page-超链接target属性.600d5f67.js"><link rel="prefetch" href="/notes/assets/js/page-路径切换.77e3738a.js"><link rel="prefetch" href="/notes/assets/js/page-路由注册.2673bfe7.js"><link rel="prefetch" href="/notes/assets/js/page-输出(output).36317dad.js"><link rel="prefetch" href="/notes/assets/js/page-辨析联合类型.63428809.js"><link rel="prefetch" href="/notes/assets/js/page-迭代协议.628496be.js"><link rel="prefetch" href="/notes/assets/js/page-迭代器模式.e704fb9f.js"><link rel="prefetch" href="/notes/assets/js/page-适配器模式.0a0d7cd4.js"><link rel="prefetch" href="/notes/assets/js/page-选择器列表.ba564d42.js"><link rel="prefetch" href="/notes/assets/js/page-通用兄弟选择器.44387fde.js"><link rel="prefetch" href="/notes/assets/js/page-通过标签语义化优化SEO.fed04985.js"><link rel="prefetch" href="/notes/assets/js/page-通配选择器.ed55d245.js"><link rel="prefetch" href="/notes/assets/js/page-需求分析.707f593a.js"><link rel="prefetch" href="/notes/assets/js/page-非ReactJSX.c1d88dad.js"><link rel="prefetch" href="/notes/assets/js/page-项目性能优化.8fe42d19.js"><link rel="prefetch" href="/notes/assets/js/page-🗿HEAD.805ab289.js"><link rel="prefetch" href="/notes/assets/js/vendors~flowchart.8f386ec5.js"><link rel="prefetch" href="/notes/assets/js/vendors~mermaid.7c690b3b.js"><link rel="prefetch" href="/notes/assets/js/vendors~photo-swipe.732a6cfc.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.33b160dd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/notes/" class="home-link router-link-active"><!----> <!----> <span class="site-name can-hide">前端 学习</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="js" class="dropdown-title"><span class="title"><!---->
        js
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/mozillajs/baseObject/symbol.html" class="nav-link"><!---->
  mozilla：基本对象
</a></li><li class="dropdown-item"><a href="/notes/jsInterview/baseInterview.html" class="nav-link"><!---->
  基础面试题
</a></li><li class="dropdown-item"><a href="/notes/js/stack/executionStack.html" class="nav-link"><!---->
  js 概念
</a></li><li class="dropdown-item"><a href="/notes/es6/interview1.html" class="nav-link"><!---->
  es6
</a></li><li class="dropdown-item"><a href="/notes/es7/interview1.html" class="nav-link"><!---->
  es7
</a></li><li class="dropdown-item"><a href="/notes/es8/interview1.html" class="nav-link"><!---->
  es8
</a></li><li class="dropdown-item"><a href="/notes/es9/interview1.html" class="nav-link"><!---->
  es9
</a></li><li class="dropdown-item"><a href="/notes/es10/interview1.html" class="nav-link"><!---->
  es10
</a></li><li class="dropdown-item"><a href="/notes/ts/jsx/support.html" class="nav-link"><!---->
  JSX
</a></li><li class="dropdown-item"><a href="/notes/ts/project/inDepthTs.html" class="nav-link"><!---->
  TypeScript 项目
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="css" class="dropdown-title"><span class="title"><!---->
        css
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/mozillaCss/reference/universalSelectors.html" class="nav-link"><!---->
  第 1 期：CSS API
</a></li><li class="dropdown-item"><a href="/notes/css/interview/baseCss.html" class="nav-link"><!---->
  零散记录
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="html" class="dropdown-title"><span class="title"><!---->
        html
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/html/interview/linkImport.html" class="nav-link"><!---->
  零散记录
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="端" class="dropdown-title"><span class="title"><!---->
        端
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/browser/interview/baseInterview.html" class="nav-link"><!---->
  基础浏览器
</a></li><li class="dropdown-item"><a href="/notes/http/interview/baseInterview.html" class="nav-link"><!---->
  基础http
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title"><!---->
        工具
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/webpack/interview/webpackInterview.html" class="nav-link"><!---->
  webpack
</a></li><li class="dropdown-item"><a href="/notes/esbuild/description.html" class="nav-link"><!---->
  esbuild
</a></li><li class="dropdown-item"><a href="/notes/rollup/introduction.html" class="nav-link"><!---->
  rollup
</a></li><li class="dropdown-item"><a href="/notes/git/indx.html" class="nav-link"><!---->
  git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="react" class="dropdown-title"><span class="title"><!---->
        react
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/ILoveDevelop/react/principle/base.html" class="nav-link"><!---->
  react 源码阅读 代码视角
</a></li><li class="dropdown-item"><a href="/notes/react/preparation/idea.html" class="nav-link"><!---->
  react 源码阅读 思想视角
</a></li><li class="dropdown-item"><a href="/notes/umi/interview/pluginDva.html" class="nav-link"><!---->
  umi
</a></li><li class="dropdown-item"><a href="/notes/reactInterview/interview1.html" class="nav-link"><!---->
  整理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title"><!---->
        vue
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/vue/prepare/flow.html" class="nav-link"><!---->
  第 1 期：源码解读-准备工作
</a></li><li class="dropdown-item"><a href="/notes/vue/data-driven/_index.html" class="nav-link"><!---->
  第2期：源码解读-数据驱动
</a></li><li class="dropdown-item"><a href="/notes/vue/components/create-component.html" class="nav-link"><!---->
  第3期：源码解读-组件化
</a></li><li class="dropdown-item"><a href="/notes/vue/reactive/reactive-object.html" class="nav-link"><!---->
  第4期：源码解读-深入响应式原理
</a></li><li class="dropdown-item"><a href="/notes/vue/compile/entrance.html" class="nav-link"><!---->
  第5期：源码解读-编译
</a></li><li class="dropdown-item"><a href="/notes/vue/extend/event.html" class="nav-link"><!---->
  第6期：源码解读-扩展
</a></li><li class="dropdown-item"><a href="/notes/vue/vue-router/install.html" class="nav-link"><!---->
  第7期：源码解读-VueRouter
</a></li><li class="dropdown-item"><a href="/notes/vue/vuex/idex.html" class="nav-link"><!---->
  第8期：源码解读-Vuex
</a></li><li class="dropdown-item"><a href="/notes/vue/interview/baseInterview.html" class="nav-link"><!---->
  第9期：基础面试题
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法&amp;设计" class="dropdown-title"><span class="title"><!---->
        算法&amp;设计
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/notes/algorithm/interview/baseInterview.html" class="nav-link"><!---->
  第 1 期：基础面试题
</a></li><li class="dropdown-item"><a href="/notes/design/overview.html" class="nav-link"><!---->
  设计模式
</a></li></ul></div></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="js" class="dropdown-title"><span class="title"><!---->
      js
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/mozillajs/baseObject/symbol.html" class="nav-link"><!---->
  mozilla：基本对象
</a></li><li class="dropdown-item"><!----> <a href="/notes/jsInterview/baseInterview.html" class="nav-link"><!---->
  基础面试题
</a></li><li class="dropdown-item"><!----> <a href="/notes/js/stack/executionStack.html" class="nav-link"><!---->
  js 概念
</a></li><li class="dropdown-item"><!----> <a href="/notes/es6/interview1.html" class="nav-link"><!---->
  es6
</a></li><li class="dropdown-item"><!----> <a href="/notes/es7/interview1.html" class="nav-link"><!---->
  es7
</a></li><li class="dropdown-item"><!----> <a href="/notes/es8/interview1.html" class="nav-link"><!---->
  es8
</a></li><li class="dropdown-item"><!----> <a href="/notes/es9/interview1.html" class="nav-link"><!---->
  es9
</a></li><li class="dropdown-item"><!----> <a href="/notes/es10/interview1.html" class="nav-link"><!---->
  es10
</a></li><li class="dropdown-item"><!----> <a href="/notes/ts/jsx/support.html" class="nav-link"><!---->
  JSX
</a></li><li class="dropdown-item"><!----> <a href="/notes/ts/project/inDepthTs.html" class="nav-link"><!---->
  TypeScript 项目
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="css" class="dropdown-title"><span class="title"><!---->
      css
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/mozillaCss/reference/universalSelectors.html" class="nav-link"><!---->
  第 1 期：CSS API
</a></li><li class="dropdown-item"><!----> <a href="/notes/css/interview/baseCss.html" class="nav-link"><!---->
  零散记录
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="html" class="dropdown-title"><span class="title"><!---->
      html
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/html/interview/linkImport.html" class="nav-link"><!---->
  零散记录
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="端" class="dropdown-title"><span class="title"><!---->
      端
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/browser/interview/baseInterview.html" class="nav-link"><!---->
  基础浏览器
</a></li><li class="dropdown-item"><!----> <a href="/notes/http/interview/baseInterview.html" class="nav-link"><!---->
  基础http
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title"><!---->
      工具
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/webpack/interview/webpackInterview.html" class="nav-link"><!---->
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/notes/esbuild/description.html" class="nav-link"><!---->
  esbuild
</a></li><li class="dropdown-item"><!----> <a href="/notes/rollup/introduction.html" class="nav-link"><!---->
  rollup
</a></li><li class="dropdown-item"><!----> <a href="/notes/git/indx.html" class="nav-link"><!---->
  git
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="react" class="dropdown-title"><span class="title"><!---->
      react
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/ILoveDevelop/react/principle/base.html" class="nav-link"><!---->
  react 源码阅读 代码视角
</a></li><li class="dropdown-item"><!----> <a href="/notes/react/preparation/idea.html" class="nav-link"><!---->
  react 源码阅读 思想视角
</a></li><li class="dropdown-item"><!----> <a href="/notes/umi/interview/pluginDva.html" class="nav-link"><!---->
  umi
</a></li><li class="dropdown-item"><!----> <a href="/notes/reactInterview/interview1.html" class="nav-link"><!---->
  整理
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title"><!---->
      vue
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/vue/prepare/flow.html" class="nav-link"><!---->
  第 1 期：源码解读-准备工作
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/data-driven/_index.html" class="nav-link"><!---->
  第2期：源码解读-数据驱动
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/components/create-component.html" class="nav-link"><!---->
  第3期：源码解读-组件化
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/reactive/reactive-object.html" class="nav-link"><!---->
  第4期：源码解读-深入响应式原理
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/compile/entrance.html" class="nav-link"><!---->
  第5期：源码解读-编译
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/extend/event.html" class="nav-link"><!---->
  第6期：源码解读-扩展
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/vue-router/install.html" class="nav-link"><!---->
  第7期：源码解读-VueRouter
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/vuex/idex.html" class="nav-link"><!---->
  第8期：源码解读-Vuex
</a></li><li class="dropdown-item"><!----> <a href="/notes/vue/interview/baseInterview.html" class="nav-link"><!---->
  第9期：基础面试题
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="算法&amp;设计" class="dropdown-title"><span class="title"><!---->
      算法&amp;设计
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/algorithm/interview/baseInterview.html" class="nav-link"><!---->
  第 1 期：基础面试题
</a></li><li class="dropdown-item"><!----> <a href="/notes/design/overview.html" class="nav-link"><!---->
  设计模式
</a></li></ul></div></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><a href="/notes/rollup/introduction/" aria-current="page" class="active sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#installation" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#quick-start" class="sidebar-link">Quick start</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#产生原因" class="sidebar-link heading3">产生原因</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#tree-shaking" class="sidebar-link heading3">Tree-Shaking</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#compatibility" class="sidebar-link heading3">Compatibility</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#command-line-interface" class="sidebar-link">Command Line Interface</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#configuration-files" class="sidebar-link heading3">Configuration Files</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#config-intellisense" class="sidebar-link heading3">Config Intellisense</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#differences-to-the-javascript-api" class="sidebar-link heading3">Differences to the JavaScript API</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#loading-a-configuration-from-a-node-package" class="sidebar-link heading3">Loading a configuration from a Node package</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#using-untranspiled-config-files" class="sidebar-link heading3">Using untranspiled config files</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#command-line-flags" class="sidebar-link heading3">Command line flags</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#reading-a-file-from-stdin" class="sidebar-link heading3">Reading a file from stdin</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#javascript-api" class="sidebar-link">JavaScript API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#rollup-rollup" class="sidebar-link heading3">rollup.rollup</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#rollup-watch" class="sidebar-link heading3">rollup.watch</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#es-module-syntax" class="sidebar-link">ES Module Syntax</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#importing" class="sidebar-link heading3">Importing</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#exporting" class="sidebar-link heading3">Exporting</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#how-bindings-work" class="sidebar-link heading3">How bindings work</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#tutorial" class="sidebar-link">Tutorial</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#creating-your-first-bundle" class="sidebar-link heading3">Creating Your First Bundle</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#using-config-files" class="sidebar-link heading3">Using Config Files</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#installing-rollup-locally" class="sidebar-link heading3">Installing Rollup locally</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#using-plugins" class="sidebar-link heading3">Using plugins</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#using-output-plugins" class="sidebar-link heading3">Using output plugins</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#code-splitting" class="sidebar-link heading3">Code Splitting</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#plugin-development" class="sidebar-link">Plugin Development</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#plugins-overview" class="sidebar-link heading3">Plugins Overview</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#a-simple-example" class="sidebar-link heading3">A Simple Example</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#conventions" class="sidebar-link heading3">Conventions</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#properties" class="sidebar-link heading3">Properties</a></li><li class="sidebar-sub-header"><a href="/notes/rollup/introduction/#build-hooks" class="sidebar-link heading3">Build Hooks</a></li></ul></li></ul></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb disable"><!----></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">Introduction</span></h1> <div class="page-info"><!----> <!----><!----><span aria-label="Writing Date📅" data-balloon-pos="down" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2021-9-6</span></span><!----><!----><span aria-label="Reading Time⌛" data-balloon-pos="down" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon timer-icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z" fill="currentColor"></path></svg> <span>About 48 min</span> <meta property="timeRequired" content="PT48M"></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/notes/rollup/introduction/#overview" class="anchor-link heading2"><div>Overview</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#installation" class="anchor-link heading2"><div>Installation</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#quick-start" class="anchor-link heading2"><div>Quick start</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#产生原因" class="anchor-link heading3"><div>产生原因</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#tree-shaking" class="anchor-link heading3"><div>Tree-Shaking</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#compatibility" class="anchor-link heading3"><div>Compatibility</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#command-line-interface" class="anchor-link heading2"><div>Command Line Interface</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#configuration-files" class="anchor-link heading3"><div>Configuration Files</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#config-intellisense" class="anchor-link heading3"><div>Config Intellisense</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#differences-to-the-javascript-api" class="anchor-link heading3"><div>Differences to the JavaScript API</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#loading-a-configuration-from-a-node-package" class="anchor-link heading3"><div>Loading a configuration from a Node package</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#using-untranspiled-config-files" class="anchor-link heading3"><div>Using untranspiled config files</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#command-line-flags" class="anchor-link heading3"><div>Command line flags</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#reading-a-file-from-stdin" class="anchor-link heading3"><div>Reading a file from stdin</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#javascript-api" class="anchor-link heading2"><div>JavaScript API</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#rollup-rollup" class="anchor-link heading3"><div>rollup.rollup</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#rollup-watch" class="anchor-link heading3"><div>rollup.watch</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#es-module-syntax" class="anchor-link heading2"><div>ES Module Syntax</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#importing" class="anchor-link heading3"><div>Importing</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#exporting" class="anchor-link heading3"><div>Exporting</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#how-bindings-work" class="anchor-link heading3"><div>How bindings work</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#tutorial" class="anchor-link heading2"><div>Tutorial</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#creating-your-first-bundle" class="anchor-link heading3"><div>Creating Your First Bundle</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#using-config-files" class="anchor-link heading3"><div>Using Config Files</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#installing-rollup-locally" class="anchor-link heading3"><div>Installing Rollup locally</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#using-plugins" class="anchor-link heading3"><div>Using plugins</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#using-output-plugins" class="anchor-link heading3"><div>Using output plugins</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#code-splitting" class="anchor-link heading3"><div>Code Splitting</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#plugin-development" class="anchor-link heading2"><div>Plugin Development</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#plugins-overview" class="anchor-link heading3"><div>Plugins Overview</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#a-simple-example" class="anchor-link heading3"><div>A Simple Example</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#conventions" class="anchor-link heading3"><div>Conventions</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#properties" class="anchor-link heading3"><div>Properties</div></a></li><li class="anchor"><a href="/notes/rollup/introduction/#build-hooks" class="anchor-link heading3"><div>Build Hooks</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h1> <h2 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h2> <p>Rollup 是一个用于 JavaScript 的模块打包器，它将小段代码编译成更大更复杂的东西，比如库或应用程序。它对包含在 JavaScript 的 ES6 修订版中的代码模块使用新的标准化格式，而不是以前的特殊解决方案，例如 CommonJS 和 AMD。 ES 模块让您可以自由无缝地组合您最喜欢的库中最有用的单个功能。这最终在任何地方都可以实现，但是 Rollup 让你今天就可以做到。</p> <h2 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h2> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> --global rollup
</code></pre></div><p>这将使 Rollup 可用作全局命令行工具。您也可以在本地安装，请参阅在<a href="https://rollupjs.org/guide/en/#installing-rollup-locally" target="_blank" rel="noopener noreferrer">本地安装 Rollup<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="quick-start"><a href="#quick-start" class="header-anchor">#</a> Quick start</h2> <p>可以通过带有可选配置文件的<a href="https://rollupjs.org/guide/en/#command-line-reference" target="_blank" rel="noopener noreferrer">命令行界面<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>或通过其 <a href="https://rollupjs.org/guide/en/#javascript-api" target="_blank" rel="noopener noreferrer">JavaScript API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 使用 Rollup。运行 rollup --help 以查看可用选项和参数。</p> <div class="custom-block danger"><p class="custom-block-title">警告</p> <p>请参阅 <a href="https://github.com/rollup/rollup-starter-lib" target="_blank" rel="noopener noreferrer">rollup-starter-lib<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://github.com/rollup/rollup-starter-app" target="_blank" rel="noopener noreferrer">rollup-starter-app<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 以查看使用 Rollup 的示例库和应用程序项目</p></div> <p>这些命令假定应用程序的入口点名为 main.js，并且您希望所有导入都编译到一个名为 bundle.js 的文件中。</p> <!----> <h3 id="产生原因"><a href="#产生原因" class="header-anchor">#</a> 产生原因</h3> <p>如果您将项目分成更小的独立部分，开发软件通常会更容易，因为这通常会消除意外的交互并显着降低您需要解决的问题的复杂性，并且首先简单地编写较小的项目不一定是回答。不幸的是，JavaScript 历史上并没有将此功能作为该语言的核心功能。
这最终随着 JavaScript 的 ES6 修订版而改变，其中包括用于导入和导出函数和数据的语法，以便它们可以在不同的脚本之间共享。该规范现已修复，但仅在现代浏览器中实现，并未在 Node.js 中最终确定。 Rollup 允许您使用新的模块系统编写代码，然后将其编译回现有支持的格式，例如 CommonJS 模块、AMD 模块和 IIFE 风格的脚本。这意味着您可以编写面向未来的代码，并且您还可以获得……的巨大好处。</p> <h3 id="tree-shaking"><a href="#tree-shaking" class="header-anchor">#</a> Tree-Shaking</h3> <p>除了启用 ES 模块的使用外，Rollup 还会静态分析您正在导入的代码，并将排除任何实际未使用的代码。这使您可以在现有工具和模块的基础上进行构建，而无需添加额外的依赖项或增加项目的大小。</p> <p>例如，对于 CommonJS，必须导入整个工具或库。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// import the entire utils object with CommonJS</span>
<span class="token keyword">const</span> utils <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./utils'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token string">'Rollup'</span><span class="token punctuation">;</span>
<span class="token comment">// use the ajax method of the utils object</span>
utils<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://api.example.com?search=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>query<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>handleResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>使用 ES 模块，我们可以只导入我们需要的一个 ajax 函数，而不是导入整个 utils 对象：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// import the ajax function with an ES6 import statement</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ajax <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./utils'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token string">'Rollup'</span><span class="token punctuation">;</span>
<span class="token comment">// call the ajax function</span>
<span class="token function">ajax</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://api.example.com?search=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>query<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>handleResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>因为 Rollup 包括最低限度，所以它产生更轻、更快、更简单的库和应用程序。由于这种方法可以使用显式导入和导出语句，因此它比简单地运行自动缩小器来检测编译输出代码中未使用的变量更有效。</p> <h3 id="compatibility"><a href="#compatibility" class="header-anchor">#</a> Compatibility</h3> <h4 id="导入-commonjs"><a href="#导入-commonjs" class="header-anchor">#</a> 导入 CommonJS</h4> <p>Rollup 可以通过<a href="https://github.com/rollup/plugins/tree/master/packages/commonjs" target="_blank" rel="noopener noreferrer">插件导入<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>现有的 CommonJS 模块。</p> <h4 id="发布-es-模块"><a href="#发布-es-模块" class="header-anchor">#</a> 发布 ES 模块</h4> <p>为了确保您的 ES 模块可以立即被与 CommonJS 一起使用的工具（例如 Node.js 和 webpack）使用，您可以使用 Rollup 编译为 UMD 或 CommonJS 格式，然后使用包中的 main 属性指向该编译版本。 .json 文件。如果你的 package.json 文件也有 module 字段，ES-module-aware 工具如 Rollup 和 <a href="https://webpack.js.org/" target="_blank" rel="noopener noreferrer">webpack 2+<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 将直接<a href="https://github.com/rollup/rollup/wiki/pkg.module" target="_blank" rel="noopener noreferrer">导入 ES 模块版本<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="command-line-interface"><a href="#command-line-interface" class="header-anchor">#</a> Command Line Interface</h2> <p>通常应从命令行使用RollUp。您可以提供一个可选的 Rollup 配置文件来简化命令行使用并启用高级 Rollup 功能。</p> <h3 id="configuration-files"><a href="#configuration-files" class="header-anchor">#</a> Configuration Files</h3> <p>Rollup 配置文件是可选的，但它们功能强大且方便，因此推荐使用。配置文件是一个 ES 模块，它导出具有所需选项的默认对象：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  input<span class="token operator">:</span> <span class="token string">'src/main.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    file<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    format<span class="token operator">:</span> <span class="token string">'cjs'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>通常，它称为 rollup.config.js 并位于项目的根目录中。在幕后，Rollup 通常会在需要之前将此文件及其相关依赖项转换并捆绑到 CommonJS。这样做的好处是您可以与 ES 模块代码库共享代码，同时与 Node 生态系统具有完全的互操作性。</p> <p>如果要使用Require和Module.Exports将Config写为CommonJS模块，则应将文件扩展名更改为.cjs，这将阻止RollUp尝试转换该文件。此外，如果您在节点13+上，将文件扩展名更改为.mjs还将阻止RollUp从转介IT转移，但将文件导入ES模块。有关更多详细信息，请参阅<a href="https://rollupjs.org/guide/en/#using-untranspiled-config-files" target="_blank" rel="noopener noreferrer">使用未转换的配置文件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>以及为什么您可能想要执行此操作。</p> <p>您还可以使用其他语言进行配置文件，如类型键。要执行此操作，请安装相应的rollup插件，如@ rollup / plugin-typescript，并使用<a href="https://rollupjs.org/guide/en/#--configplugin-plugin" target="_blank" rel="noopener noreferrer">--configplugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>选项：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>rollup --config rollup.config.ts --configPlugin typescript
</code></pre></div><p>另外看看<a href="https://rollupjs.org/guide/en/#config-intellisense" target="_blank" rel="noopener noreferrer">Config IntelliSense<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>以获取更多方法，以便在CONFIG文件中使用Typescript键入。</p> <p>配置文件支持下面列出的选项。有关每个选项的详细信息，请咨询<a href="https://rollupjs.org/guide/en/#big-list-of-options" target="_blank" rel="noopener noreferrer">大型选项列表<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// rollup.config.js</span>

<span class="token comment">// can be an array (for multiple inputs)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// core input options</span>
  external<span class="token punctuation">,</span>
  input<span class="token punctuation">,</span> <span class="token comment">// conditionally required</span>
  plugins<span class="token punctuation">,</span>

  <span class="token comment">// advanced input options</span>
  cache<span class="token punctuation">,</span>
  onwarn<span class="token punctuation">,</span>
  preserveEntrySignatures<span class="token punctuation">,</span>
  strictDeprecations<span class="token punctuation">,</span>

  <span class="token comment">// danger zone</span>
  acorn<span class="token punctuation">,</span>
  acornInjectPlugins<span class="token punctuation">,</span>
  context<span class="token punctuation">,</span>
  moduleContext<span class="token punctuation">,</span>
  preserveSymlinks<span class="token punctuation">,</span>
  shimMissingExports<span class="token punctuation">,</span>
  treeshake<span class="token punctuation">,</span>

  <span class="token comment">// experimental</span>
  experimentalCacheExpiry<span class="token punctuation">,</span>
  perf<span class="token punctuation">,</span>

  <span class="token comment">// required (can be an array, for multiple outputs)</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// core output options</span>
    dir<span class="token punctuation">,</span>
    file<span class="token punctuation">,</span>
    format<span class="token punctuation">,</span> <span class="token comment">// required</span>
    globals<span class="token punctuation">,</span>
    name<span class="token punctuation">,</span>
    plugins<span class="token punctuation">,</span>

    <span class="token comment">// advanced output options</span>
    assetFileNames<span class="token punctuation">,</span>
    banner<span class="token punctuation">,</span>
    chunkFileNames<span class="token punctuation">,</span>
    compact<span class="token punctuation">,</span>
    entryFileNames<span class="token punctuation">,</span>
    extend<span class="token punctuation">,</span>
    footer<span class="token punctuation">,</span>
    hoistTransitiveImports<span class="token punctuation">,</span>
    inlineDynamicImports<span class="token punctuation">,</span>
    interop<span class="token punctuation">,</span>
    intro<span class="token punctuation">,</span>
    manualChunks<span class="token punctuation">,</span>
    minifyInternalExports<span class="token punctuation">,</span>
    outro<span class="token punctuation">,</span>
    paths<span class="token punctuation">,</span>
    preserveModules<span class="token punctuation">,</span>
    preserveModulesRoot<span class="token punctuation">,</span>
    sourcemap<span class="token punctuation">,</span>
    sourcemapExcludeSources<span class="token punctuation">,</span>
    sourcemapFile<span class="token punctuation">,</span>
    sourcemapPathTransform<span class="token punctuation">,</span>
    validate<span class="token punctuation">,</span>

    <span class="token comment">// danger zone</span>
    amd<span class="token punctuation">,</span>
    esModule<span class="token punctuation">,</span>
    exports<span class="token punctuation">,</span>
    externalLiveBindings<span class="token punctuation">,</span>
    freeze<span class="token punctuation">,</span>
    indent<span class="token punctuation">,</span>
    namespaceToStringTag<span class="token punctuation">,</span>
    noConflict<span class="token punctuation">,</span>
    preferConst<span class="token punctuation">,</span>
    sanitizeFileName<span class="token punctuation">,</span>
    strict<span class="token punctuation">,</span>
    systemNullSetters
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  watch<span class="token operator">:</span> <span class="token punctuation">{</span>
    buildDelay<span class="token punctuation">,</span>
    chokidar<span class="token punctuation">,</span>
    clearScreen<span class="token punctuation">,</span>
    skipWrite<span class="token punctuation">,</span>
    exclude<span class="token punctuation">,</span>
    include
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>您可以从配置文件中导出数组，即使在Watch模式下，即使在Watch模式下也可以将数组从多个不相关的输入中构建捆绑包。要使用相同的输入构建不同的捆绑包，可以为每个输入提供一系列输出选项：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// rollup.config.js (building more than one bundle)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    input<span class="token operator">:</span> <span class="token string">'main-a.js'</span><span class="token punctuation">,</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span>
      file<span class="token operator">:</span> <span class="token string">'dist/bundle-a.js'</span><span class="token punctuation">,</span>
      format<span class="token operator">:</span> <span class="token string">'cjs'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    input<span class="token operator">:</span> <span class="token string">'main-b.js'</span><span class="token punctuation">,</span>
    output<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        file<span class="token operator">:</span> <span class="token string">'dist/bundle-b1.js'</span><span class="token punctuation">,</span>
        format<span class="token operator">:</span> <span class="token string">'cjs'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        file<span class="token operator">:</span> <span class="token string">'dist/bundle-b2.js'</span><span class="token punctuation">,</span>
        format<span class="token operator">:</span> <span class="token string">'es'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>如果要异步地创建配置，Rollup还可以处理解析为对象或数组的承诺。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// rollup.config.js</span>
<span class="token keyword">import</span> fetch <span class="token keyword">from</span> <span class="token string">'node-fetch'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/some-remote-service-or-file-which-returns-actual-config'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>同样，您也可以执行以下操作：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// rollup.config.js (Promise resolving an array)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'get-config-1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'get-config-2'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>要使用配置文件RollUp，请传递--config或-c标志：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># pass a custom config file location to Rollup</span>
rollup --config my.config.js

<span class="token comment"># if you do not pass a file name, Rollup will try to load</span>
<span class="token comment"># configuration files in the following order:</span>
<span class="token comment"># rollup.config.mjs -&gt; rollup.config.cjs -&gt; rollup.config.js</span>
rollup --config
</code></pre></div><p>您还可以导出返回任何上述配置格式的函数。此函数将传递当前命令行参数，以便您可以动态地调整配置以尊重例如。 <a href="https://rollupjs.org/guide/en/#--silent" target="_blank" rel="noopener noreferrer">--silent<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。如果您使用Config以配置为前缀，您甚至可以定义自己的命令行选项：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// rollup.config.js</span>
<span class="token keyword">import</span> defaultConfig <span class="token keyword">from</span> <span class="token string">'./rollup.default.config.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> debugConfig <span class="token keyword">from</span> <span class="token string">'./rollup.debug.config.js'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token parameter">commandLineArgs</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>commandLineArgs<span class="token punctuation">.</span>configDebug <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> debugConfig<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> defaultConfig<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>如果您现在运行<code>rollup --config --configdebug</code>，则将使用调试配置。</p> <p>默认情况下，命令行参数将始终覆盖从配置文件导出的各个值。如果要更改此行为，则可以通过从<code>commandlineargs</code>对象删除它们来使rollup忽略命令行参数：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// rollup.config.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token parameter">commandLineArgs</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> inputBase <span class="token operator">=</span> commandLineArgs<span class="token punctuation">.</span>input <span class="token operator">||</span> <span class="token string">'main.js'</span><span class="token punctuation">;</span>

  <span class="token comment">// this will make Rollup ignore the CLI argument</span>
  <span class="token keyword">delete</span> commandLineArgs<span class="token punctuation">.</span>input<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    input<span class="token operator">:</span> <span class="token string">'src/entries/'</span> <span class="token operator">+</span> inputBase<span class="token punctuation">,</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="config-intellisense"><a href="#config-intellisense" class="header-anchor">#</a> Config Intellisense</h3> <p>由于Rollup带有TypeScript的类型，你可以利用IDE的Intellisense与JSDoc类型提示。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// rollup.config.js</span>
<span class="token comment">/**
 * @type {import('rollup').RollupOptions}
 */</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> config<span class="token punctuation">;</span>
</code></pre></div><p>或者，你可以使用<code>defineConfig</code>助手，它应该提供Intellisense而不需要JSDoc注释。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// rollup.config.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rollup'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>除了<code>RollupOptions</code>和封装这种类型的<code>defineConfig</code>帮助器，以下类型也可以证明是有用的。</p> <ul><li><p><code>OutputOptions</code>: 配置文件的输出部分</p></li> <li><p><code>Plugin</code>: 一个插件对象，它提供了一个名称和一些钩子。所有的钩子都是完全类型化的，以帮助插件的开发。</p></li> <li><p><code>pluginimpl</code>：将选项对象映射到插件对象的函数。大多数公共rollup插件遵循此模式。</p></li></ul> <p>您还可以通过<a href="https://rollupjs.org/guide/en/#--configplugin-plugin" target="_blank" rel="noopener noreferrer">--configplugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>选项直接在键入版中编写CONFIC。</p> <h3 id="differences-to-the-javascript-api"><a href="#differences-to-the-javascript-api" class="header-anchor">#</a> Differences to the JavaScript API</h3> <p>虽然配置文件提供了一种配置RollUp的简单方法，但它们还会限制如何调用和配置RollUp。特别是如果您将RollUp到另一个构建工具或想要将其集成到高级构建过程中，则可以更好地从脚本上编程地调用RollUp。</p> <p>如果要从配置文件切换到在某些时候使用<a href="https://rollupjs.org/guide/en/#javascript-api" target="_blank" rel="noopener noreferrer">JavaScript API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，则会有一些重要的差异：</p> <ul><li><p>使用JavaScript API时，将传递给Rollup.rollup必须是一个对象，不能以承诺或函数包裹。</p></li> <li><p>您无法再使用一系列配置。相反，您应该为每组<code>InputOptions</code>运行Rollup.rollup.rollup。</p></li> <li><p>输出选项将被忽略。相反，对于每组输出选项，您应该运行<code>bundle.generate(outputOptions)</code>或<code>bundle.write(outputOptions)</code>。</p></li></ul> <h3 id="loading-a-configuration-from-a-node-package"><a href="#loading-a-configuration-from-a-node-package" class="header-anchor">#</a> Loading a configuration from a Node package</h3> <p>对于互操作性，Rollup还支持从安装到<code>node_modules</code>的包中加载配置文件：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># this will first try to load the package &quot;rollup-config-my-special-config&quot;;</span>
<span class="token comment"># if that fails, it will then try to load &quot;my-special-config&quot;</span>
rollup --config node:my-special-config
</code></pre></div><h3 id="using-untranspiled-config-files"><a href="#using-untranspiled-config-files" class="header-anchor">#</a> Using untranspiled config files</h3> <p>默认情况下，Rollup将期望配置文件是eS模块，并将其发送并转换为它们，并在要求它们之前向CommonJS进行传输。这是一个快速的过程，并且具有易于在配置和ES模块代码库之间共享代码的优点。如果要将配置写入CommonJs，则可以使用<code>.cjs</code>扩展名来跳过此过程：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// rollup.config.cjs</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  input<span class="token operator">:</span> <span class="token string">'src/main.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    file<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    format<span class="token operator">:</span> <span class="token string">'cjs'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>如果您想不仅从命令行使用CONFIC文件，而且可以从以编程方式从您的自定义脚本使用，但可能是相关的。</p> <p>另一方面，如果你至少使用Node 13并且在<code>package.json</code>文件中有 <code>&quot;type&quot;</code>: <code>&quot;模块&quot;</code>，Rollup的转译会阻止你的配置文件导入本身是ES模块的包。在这种情况下，将你的文件扩展名改为.mjs将指示Rollup将你的配置直接作为ES模块导入。然而，请注意，这是专门针对Node 13+的；在更早的Node版本中，<code>.mjs</code>的处理方式与<code>.js</code>相同。</p> <p>在**Node 13+**上使用<code>.mjs</code>时，有一些潜在的麻烦。</p> <ul><li><p>您只能从CommonJS插件获取默认导出</p></li> <li><p>你可能无法导入JSON文件，如你的package.json文件。有两种方法可以解决这个问题。</p> <ul><li>通过以下方式运行Rollup CLI</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>node --experimental-json-modules ./node_modules/.bin/rollup --config
</code></pre></div><ul><li>创建一个需要JSON文件的CommonJS包装器：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// load-package.cjs</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./package.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// rollup.config.mjs</span>
<span class="token keyword">import</span> pkg <span class="token keyword">from</span> <span class="token string">'./load-package.cjs'</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
</code></pre></div></li></ul> <h3 id="command-line-flags"><a href="#command-line-flags" class="header-anchor">#</a> Command line flags</h3> <p>许多选项都有对应的命令行。在这些情况下，如果你使用的是配置文件，那么这里传递的任何参数都将覆盖配置文件的内容。这是一个所有支持的选项的列表。</p> <div class="language- extra-class"><pre class="language-text"><code>-c, --config &lt;filename&gt; 使用这个配置文件（如果参数被使用，但值没有指定
未指定，默认为rollup.config.js)
-d, --dir &lt;dirname&gt; 块的目录（如果没有，打印到stdout）。
-e, --external &lt;ids&gt; 逗号分隔的要排除的模块ID列表
-f, --format &lt;format&gt; 输出的类型(amd, cjs, es, iife, umd, system)
-g, --globals &lt;pairs&gt; 逗号分隔的 &quot;moduleID:Global &quot;配对列表
-h, --help 显示此帮助信息
-i, --input &lt;filename&gt; 输入（替代&lt;entry file&gt;）。
-m, --sourcemap 生成源码图（`-m inline`表示内联图
-n, --name &lt;名称&gt; 用于UMD输出的名称
-o, --file &lt;output&gt;单个输出文件（如果没有，则打印到stdout）。
-p, --plugin &lt;plugin&gt; 使用指定的插件（可以重复）。
-v, --version 显示版本号
-w, --watch 观察软件包中的文件，并在发生变化时重新构建
--amd.id &lt;id&gt; AMD模块的ID（默认为匿名）。
--amd.autoId 根据块的名称生成AMD的ID
--amd.basePath &lt;prefix&gt; 在自动生成的AMD ID前加上的路径
--amd.define &lt;name&gt; 用来代替`define`的函数。
--assetFileNames &lt;pattern&gt; 排放资产的名称模式
--banner &lt;text&gt; 在bundle顶部插入代码（在wrapper之外）。
--chunkFileNames &lt;pattern&gt; 排放的二级块的名称模式
--compact 缩减包装器代码
--context &lt;variable&gt; 指定顶层的`this`值
--entryFileNames &lt;pattern&gt; 排放的入口块的名称模式
--environment &lt;values&gt; 传递给配置文件的设置（见示例）。
--no-esModule 不添加__esModule属性
--exports &lt;mode&gt; 指定输出模式（自动、默认、命名、无）。
--extend 扩展由 --name 定义的全局变量
--no-externalLiveBindings 不生成支持实时绑定的代码
--failAfterWarnings 如果构建过程中产生了警告，则以错误退出
--footer &lt;text&gt; 在bundle的末尾插入代码（在wrapper之外）。
--no-freeze 不冻结命名空间对象
--no-hoist TransitiveImports 不把横向导入的内容挂到入口块中。
--no-indent 不要缩进结果。
--no-interop 不包括互操作块
--inlineDynamicImports 当使用动态导入时，创建单个捆绑包。
--intro &lt;text&gt; 在bundle的顶部插入代码（在wrapper里面）。
--minifyInternalExports 强制或禁止对内部导出文件进行最小化处理
--namespaceToStringTag 为命名空间创建适当的`.toString`方法
--noConflict 为UMD globals生成一个noConflict方法
--outro &lt;text&gt; 在bundle的末尾插入代码（在wrapper内）。
--preferConst 使用`const`而不是`var`进行输出
--no-preserveEntrySignatures 避免使用入口点的facade chunks。
--preserveModules 保留模块结构
--preserveModulesRoot 将保留的模块放在根级的这个路径下
--preserveSymlinks 在解析文件时不遵循符号链接。
--no-sanitizeFileName 不替换文件名中的无效字符
--shimMissingExports 为丢失的出口创建shim变量。
--silent 不打印警告信息
--sourcemapExcludeSources 不在源码图中包括源代码
--sourcemapFile &lt;file&gt; 为源码地图指定捆绑位置
--stdin=ext 指定用于stdin输入的文件扩展名
--no-stdin 不要从stdin读取&quot;-&quot;。
--no-strict 不要在生成的模块中发出`&quot;use strict&quot;;`。
--strictDeprecations 对已废弃的功能抛出错误
--systemNullSetters 用 &quot;null &quot;替换空的SystemJS设置器。
--no-treeshake 禁用树形抖动优化功能
--no-treeshake.annotations 忽略纯调用注释
--no-treeshake.moduleSideEffects 假设模块没有副作用
--no-treeshake.propertyReadSideEffects 忽略属性访问的副作用
--no-treeshake.tryCatchDeoptimization 不关闭尝试抓取树状结构的功能
--no-treeshake.unknownGlobalSideEffects 假设未知的globals不会抛出
--waitForBundleInput 等待bundle输入文件
--watch.buildDelay &lt;number&gt; 节约手表重建的时间
--no-watch.clearScreen 重建时不清除屏幕
--watch.skipWrite 观察时不写文件到磁盘。
--watch.exclude &lt;files&gt; 排除被监视的文件
--watch.include &lt;files&gt; 限制监视到指定的文件
--validate 验证输出
</code></pre></div><p>下面列出的标志只能通过命令行界面使用。所有其他标志都对应并覆盖它们的配置文件对应物，详见<a href="https://rollupjs.org/guide/en/#big-list-of-options" target="_blank" rel="noopener noreferrer">选项大列表<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h4 id="h-help"><a href="#h-help" class="header-anchor">#</a> -h/--help</h4> <p>打印帮助文档。</p> <h4 id="p-plugin-plugin-plugin"><a href="#p-plugin-plugin-plugin" class="header-anchor">#</a> -p (plugin), --plugin (plugin)</h4> <p>使用指定的插件。有几种方法可以在此指定插件：</p> <ul><li>通过相对路径：</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>rollup -i input.js -f es -p ./my-plugin.js
</code></pre></div><p>该文件应导出返回Plugin对象的函数。</p> <ul><li>通过安装在本地或全局<code>Node_Modules</code>文件夹中的插件的名称：</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>rollup -i input.js -f es -p @rollup/plugin-node-resolve
</code></pre></div><p>如果插件名称无法以<code>Rollup-plugin-</code>or <code>@rollup / plugin--</code>，RollUp将自动尝试添加这些前缀：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>rollup -i input.js -f es -p node-resolve
</code></pre></div><ul><li>通过内联实现：</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>rollup -i input.js -f es -p <span class="token string">'{transform: (c, i) =&gt; `/* ${JSON.stringify(i)} */\n${c}`}'</span>
</code></pre></div><p>如果要加载多个插件，可以重复该选项或提供逗号分隔的名称列表：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>rollup -i input.js -f es -p node-resolve -p commonjs,json
</code></pre></div><p>默认情况下，将调用插件函数，没有参数来创建插件。但是，您也可以传递自定义参数：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>rollup -i input.js -f es -p <span class="token string">'terser={output: {beautify: true, indent_level: 2}}'</span>
</code></pre></div><h4 id="configplugin-plugin"><a href="#configplugin-plugin" class="header-anchor">#</a> --configPlugin (plugin)</h4> <p>允许将RollUp插件指定要转换或以其他方式控制配置文件的解析。主要好处是它允许您使用非JavaScript配置文件。例如，以下内容将允许您在输入的类型中编写配置，只要您安装了<code>@rollup/plugin-typescript</code>：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>rollup --config rollup.config.ts --configPlugin @rollup/plugin-typescript
</code></pre></div><p>它支持与<a href="https://rollupjs.org/guide/en/#-p-plugin---plugin-plugin" target="_blank" rel="noopener noreferrer">-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>选项相同的语法i.e.，您可以多次指定选项，可以省略@ rollup / plugin-前缀并只需编写打印键，您可以通过= {...}指定插件选项。</p> <h4 id="v-version"><a href="#v-version" class="header-anchor">#</a> -v/--version</h4> <p>打印安装的版本号。</p> <h4 id="w-watch"><a href="#w-watch" class="header-anchor">#</a> -w/--watch</h4> <p>当其源文件更改磁盘时重建捆绑包。</p> <p>注意：在观察模式下，***ROLLUP_WATCH***环境变量将被Rollup的命令行界面设置为 ***&quot;true&quot;***，并且可以被其他进程检查。插件应该检查<a href="https://rollupjs.org/guide/en/#thismeta-rollupversion-string-watchmode-boolean" target="_blank" rel="noopener noreferrer">this.meta.watchMode<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，它与命令行界面无关。</p> <h4 id="silent"><a href="#silent" class="header-anchor">#</a> --silent</h4> <p>不要向控制台打印警告。如果你的配置文件包含一个onwarn处理程序，这个处理程序仍然会被调用。要手动防止这种情况，你可以在配置文件中访问命令行选项，如<a href="https://rollupjs.org/guide/en/#configuration-files" target="_blank" rel="noopener noreferrer">配置文件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>末尾所述。</p> <h4 id="failafterwarnings"><a href="#failafterwarnings" class="header-anchor">#</a> --failAfterWarnings</h4> <p>构建完成后，如果发生任何警告，则以错误退出构建。</p> <h4 id="environment-values"><a href="#environment-values" class="header-anchor">#</a> --environment (values)</h4> <p>通过<code>process.ENV</code>向配置文件传递额外的设置。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>rollup -c --environment INCLUDE_DEPS,BUILD:production
</code></pre></div><p>将设置 <code>process.env.INCLUDE_DEPS === 'true'</code> 和 <code>process.env.BUILD === 'production'</code>。你可以多次使用这个选项。在这种情况下，随后设置的变量将覆盖之前的定义。这使得你可以在<code>package.json</code>脚本中覆盖环境变量。</p> <p>如果您通过以下方式调用此脚本：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> run build -- --environment BUILD:development
</code></pre></div><p>那么配置文件将收到 <code>process.env.INCLUDE_DEPS === 'true'</code> 和 <code>process.env.BUILD === 'development'</code>。</p> <h4 id="waitforbundleinput"><a href="#waitforbundleinput" class="header-anchor">#</a> --waitForBundleInput</h4> <p>如果其中一个入口点文件不可用，它不会抛出一个错误。相反，它将等待，直到所有的文件都存在才开始构建。这很有用，特别是在观察模式下，当Rollup正在消耗另一个进程的输出时。</p> <h4 id="stdin-ext"><a href="#stdin-ext" class="header-anchor">#</a> --stdin=ext</h4> <p>当从stdin读取内容时，指定一个虚拟文件扩展名。默认情况下，Rollup将使用虚拟文件名--对于从stdin读取的内容没有扩展名。然而，一些插件依靠文件扩展名来决定它们是否应该处理一个文件。请参见<a href="https://rollupjs.org/guide/en/#reading-a-file-from-stdin" target="_blank" rel="noopener noreferrer">从stdin读取文件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h4 id="no-stdin"><a href="#no-stdin" class="header-anchor">#</a> --no-stdin</h4> <p>不要从stdin中读取文件。设置这个标志可以防止向Rollup输送内容，并确保Rollup将-和-.[ext]解释为普通的文件名，而不是将这些解释为stdin的名称。<a href="https://rollupjs.org/guide/en/#reading-a-file-from-stdin" target="_blank" rel="noopener noreferrer">参见从stdin读取文件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="reading-a-file-from-stdin"><a href="#reading-a-file-from-stdin" class="header-anchor">#</a> Reading a file from stdin</h3> <p>当使用命令行界面时，Rollup也可以从stdin读取内容。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;export const foo = 42;&quot;</span> <span class="token operator">|</span> rollup --format cjs --file out.js
</code></pre></div><p>当这个文件包含导入时，Rollup会尝试相对于当前工作目录来解决。当使用配置文件时，Rollup只会使用stdin作为入口点，如果入口点的文件名是-。要从stdin读取一个非入口点文件，只需调用-，这是内部用来引用<code>stdin</code>的文件名。即</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> foo <span class="token keyword">from</span> <span class="token string">'-'</span><span class="token punctuation">;</span>
</code></pre></div><p>在任何文件中都会提示Rollup尝试从stdin中读取导入的文件，并将默认的出口分配给foo。你可以向Rollup传递<a href="https://rollupjs.org/guide/en/#--no-stdin" target="_blank" rel="noopener noreferrer">--no-stdin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> CLI标志，将--作为一个普通的文件名来处理。</p> <p>由于一些插件依靠文件扩展名来处理文件，你可以通过<code>-stdin=ext</code>为stdin指定一个文件扩展名，其中ext是所需的扩展名。在这种情况下，虚拟文件名将是<code>-.ext</code>。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> <span class="token string">'{&quot;foo&quot;: 42, &quot;bar&quot;: &quot;ok&quot;}'</span> <span class="token operator">|</span> rollup --stdin<span class="token operator">=</span>json -p json
</code></pre></div><p>JavaScript API会一直把<code>-</code>和<code>-.ext</code>当作普通的文件名。</p> <h2 id="javascript-api"><a href="#javascript-api" class="header-anchor">#</a> JavaScript API</h2> <p>Rollup提供了一个可以从Node.js使用的JavaScript API。你很少需要使用它，而应该使用命令行API，除非你正在扩展Rollup本身或使用它做一些深奥的事情，比如以编程方式生成捆绑包。</p> <h3 id="rollup-rollup"><a href="#rollup-rollup" class="header-anchor">#</a> rollup.rollup</h3> <p><code>rollup.rollup</code>函数接收一个输入选项对象作为参数，并返回一个Promise，该Promise可解析为一个具有各种属性和方法的bundle对象，如下图所示。在这一步骤中，Rollup将构建模块图并执行树形摇动，但不会产生任何输出。</p> <p>在一个<code>bundle</code>对象上，你可以用不同的输出选项对象多次调用<code>bundle.generate</code>来在内存中生成不同的bundle。如果你直接想把它们写到磁盘上，请使用<code>bundle.write</code>代替。</p> <p>一旦你完成了对bundle对象的处理，你应该调用<code>bundle.close()</code>，这将让插件通过<a href="https://rollupjs.org/guide/en/#closebundle" target="_blank" rel="noopener noreferrer">closeBundle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>钩子清理其外部进程或服务。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> rollup <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'rollup'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// see below for details on the options</span>
<span class="token keyword">const</span> inputOptions <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> outputOptions <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// create a bundle</span>
  <span class="token keyword">const</span> bundle <span class="token operator">=</span> <span class="token keyword">await</span> rollup<span class="token punctuation">.</span><span class="token function">rollup</span><span class="token punctuation">(</span>inputOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bundle<span class="token punctuation">.</span>watchFiles<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// an array of file names this bundle depends on</span>

  <span class="token comment">// generate output specific code in-memory</span>
  <span class="token comment">// you can call this function multiple times on the same bundle object</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> output <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> bundle<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span>outputOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> chunkOrAsset <span class="token keyword">of</span> output<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>chunkOrAsset<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'asset'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// For assets, this contains</span>
      <span class="token comment">// {</span>
      <span class="token comment">//   fileName: string,              // the asset file name</span>
      <span class="token comment">//   source: string | Uint8Array    // the asset source</span>
      <span class="token comment">//   type: 'asset'                  // signifies that this is an asset</span>
      <span class="token comment">// }</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Asset'</span><span class="token punctuation">,</span> chunkOrAsset<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// For chunks, this contains</span>
      <span class="token comment">// {</span>
      <span class="token comment">//   code: string,                  // the generated JS code</span>
      <span class="token comment">//   dynamicImports: string[],      // external modules imported dynamically by the chunk</span>
      <span class="token comment">//   exports: string[],             // exported variable names</span>
      <span class="token comment">//   facadeModuleId: string | null, // the id of a module that this chunk corresponds to</span>
      <span class="token comment">//   fileName: string,              // the chunk file name</span>
      <span class="token comment">//   implicitlyLoadedBefore: string[]; // entries that should only be loaded after this chunk</span>
      <span class="token comment">//   imports: string[],             // external modules imported statically by the chunk</span>
      <span class="token comment">//   importedBindings: {[imported: string]: string[]} // imported bindings per dependency</span>
      <span class="token comment">//   isDynamicEntry: boolean,       // is this chunk a dynamic entry point</span>
      <span class="token comment">//   isEntry: boolean,              // is this chunk a static entry point</span>
      <span class="token comment">//   isImplicitEntry: boolean,      // should this chunk only be loaded after other chunks</span>
      <span class="token comment">//   map: string | null,            // sourcemaps if present</span>
      <span class="token comment">//   modules: {                     // information about the modules in this chunk</span>
      <span class="token comment">//     [id: string]: {</span>
      <span class="token comment">//       renderedExports: string[]; // exported variable names that were included</span>
      <span class="token comment">//       removedExports: string[];  // exported variable names that were removed</span>
      <span class="token comment">//       renderedLength: number;    // the length of the remaining code in this module</span>
      <span class="token comment">//       originalLength: number;    // the original length of the code in this module</span>
      <span class="token comment">//       code: string | null;       // remaining code in this module</span>
      <span class="token comment">//     };</span>
      <span class="token comment">//   },</span>
      <span class="token comment">//   name: string                   // the name of this chunk as used in naming patterns</span>
      <span class="token comment">//   referencedFiles: string[]      // files referenced via import.meta.ROLLUP_FILE_URL_&lt;id&gt;</span>
      <span class="token comment">//   type: 'chunk',                 // signifies that this is a chunk</span>
      <span class="token comment">// }</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Chunk'</span><span class="token punctuation">,</span> chunkOrAsset<span class="token punctuation">.</span>modules<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// or write the bundle to disk</span>
  <span class="token keyword">await</span> bundle<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>outputOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// closes the bundle</span>
  <span class="token keyword">await</span> bundle<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="inputoptions-object"><a href="#inputoptions-object" class="header-anchor">#</a> inputOptions object</h4> <p><code>inputOptions</code>对象可以包含以下属性（关于这些属性的完整细节，请参见<a href="https://rollupjs.org/guide/en/#big-list-of-options" target="_blank" rel="noopener noreferrer">选项大列表<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> inputOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// core input options</span>
  external<span class="token punctuation">,</span>
  input<span class="token punctuation">,</span> <span class="token comment">// conditionally required</span>
  plugins<span class="token punctuation">,</span>

  <span class="token comment">// advanced input options</span>
  cache<span class="token punctuation">,</span>
  onwarn<span class="token punctuation">,</span>
  preserveEntrySignatures<span class="token punctuation">,</span>
  strictDeprecations<span class="token punctuation">,</span>

  <span class="token comment">// danger zone</span>
  acorn<span class="token punctuation">,</span>
  acornInjectPlugins<span class="token punctuation">,</span>
  context<span class="token punctuation">,</span>
  moduleContext<span class="token punctuation">,</span>
  preserveSymlinks<span class="token punctuation">,</span>
  shimMissingExports<span class="token punctuation">,</span>
  treeshake<span class="token punctuation">,</span>

  <span class="token comment">// experimental</span>
  experimentalCacheExpiry<span class="token punctuation">,</span>
  perf
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="outputoptions-object"><a href="#outputoptions-object" class="header-anchor">#</a> outputOptions object</h4> <p><code>outputOptions</code>对象可以包含以下属性（关于这些属性的完整细节，请参见<a href="https://rollupjs.org/guide/en/#big-list-of-options" target="_blank" rel="noopener noreferrer">选项大列表<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> outputOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// core output options</span>
  dir<span class="token punctuation">,</span>
  file<span class="token punctuation">,</span>
  format<span class="token punctuation">,</span> <span class="token comment">// required</span>
  globals<span class="token punctuation">,</span>
  name<span class="token punctuation">,</span>
  plugins<span class="token punctuation">,</span>

  <span class="token comment">// advanced output options</span>
  assetFileNames<span class="token punctuation">,</span>
  banner<span class="token punctuation">,</span>
  chunkFileNames<span class="token punctuation">,</span>
  compact<span class="token punctuation">,</span>
  entryFileNames<span class="token punctuation">,</span>
  extend<span class="token punctuation">,</span>
  externalLiveBindings<span class="token punctuation">,</span>
  footer<span class="token punctuation">,</span>
  hoistTransitiveImports<span class="token punctuation">,</span>
  inlineDynamicImports<span class="token punctuation">,</span>
  interop<span class="token punctuation">,</span>
  intro<span class="token punctuation">,</span>
  manualChunks<span class="token punctuation">,</span>
  minifyInternalExports<span class="token punctuation">,</span>
  outro<span class="token punctuation">,</span>
  paths<span class="token punctuation">,</span>
  preserveModules<span class="token punctuation">,</span>
  preserveModulesRoot<span class="token punctuation">,</span>
  sourcemap<span class="token punctuation">,</span>
  sourcemapExcludeSources<span class="token punctuation">,</span>
  sourcemapFile<span class="token punctuation">,</span>
  sourcemapPathTransform<span class="token punctuation">,</span>
  validate<span class="token punctuation">,</span>

  <span class="token comment">// danger zone</span>
  amd<span class="token punctuation">,</span>
  esModule<span class="token punctuation">,</span>
  exports<span class="token punctuation">,</span>
  freeze<span class="token punctuation">,</span>
  indent<span class="token punctuation">,</span>
  namespaceToStringTag<span class="token punctuation">,</span>
  noConflict<span class="token punctuation">,</span>
  preferConst<span class="token punctuation">,</span>
  sanitizeFileName<span class="token punctuation">,</span>
  strict<span class="token punctuation">,</span>
  systemNullSetters
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="rollup-watch"><a href="#rollup-watch" class="header-anchor">#</a> rollup.watch</h3> <p>Rollup还提供了一个<code>rollup.watch</code>函数，当它检测到个别模块在磁盘上发生变化时，会重建你的捆绑包。当你从命令行中用<code>--watch</code>标志运行Rollup时，它被内部使用。注意，当通过JavaScript API使用观察模式时，你有责任在响应<code>BUNDLE_END</code>事件时调用<code>event.result.close()</code>，以允许插件清理<a href="https://rollupjs.org/guide/en/#closebundle" target="_blank" rel="noopener noreferrer">closeBundle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>钩中的资源，见下文。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> rollup <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'rollup'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> watchOptions <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> watcher <span class="token operator">=</span> rollup<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span>watchOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>

watcher<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'event'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// event.code can be one of:</span>
  <span class="token comment">//   START        — the watcher is (re)starting</span>
  <span class="token comment">//   BUNDLE_START — building an individual bundle</span>
  <span class="token comment">//                  * event.input will be the input options object if present</span>
  <span class="token comment">//                  * event.output contains an array of the &quot;file&quot; or</span>
  <span class="token comment">//                    &quot;dir&quot; option values of the generated outputs</span>
  <span class="token comment">//   BUNDLE_END   — finished building a bundle</span>
  <span class="token comment">//                  * event.input will be the input options object if present</span>
  <span class="token comment">//                  * event.output contains an array of the &quot;file&quot; or</span>
  <span class="token comment">//                    &quot;dir&quot; option values of the generated outputs</span>
  <span class="token comment">//                  * event.duration is the build duration in milliseconds</span>
  <span class="token comment">//                  * event.result contains the bundle object that can be</span>
  <span class="token comment">//                    used to generate additional outputs by calling</span>
  <span class="token comment">//                    bundle.generate or bundle.write. This is especially</span>
  <span class="token comment">//                    important when the watch.skipWrite option is used.</span>
  <span class="token comment">//                  You should call &quot;event.result.close()&quot; once you are done</span>
  <span class="token comment">//                  generating outputs, or if you do not generate outputs.</span>
  <span class="token comment">//                  This will allow plugins to clean up resources via the</span>
  <span class="token comment">//                  &quot;closeBundle&quot; hook.</span>
  <span class="token comment">//   END          — finished building all bundles</span>
  <span class="token comment">//   ERROR        — encountered an error while bundling</span>
  <span class="token comment">//                  * event.error contains the error that was thrown</span>
  <span class="token comment">//                  * event.result is null for build errors and contains the</span>
  <span class="token comment">//                    bundle object for output generation errors. As with</span>
  <span class="token comment">//                    &quot;BUNDLE_END&quot;, you should call &quot;event.result.close()&quot; if</span>
  <span class="token comment">//                    present once you are done.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// This will make sure that bundles are properly closed after each run</span>
watcher<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'event'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> result <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	result<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// stop watching</span>
watcher<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="watchoptions"><a href="#watchoptions" class="header-anchor">#</a> watchOptions</h4> <p><code>watchOptions</code>参数是一个配置（或一个配置数组），你将从一个配置文件中导出。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> watchOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>inputOptions<span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">[</span>outputOptions<span class="token punctuation">]</span><span class="token punctuation">,</span>
  watch<span class="token operator">:</span> <span class="token punctuation">{</span>
    buildDelay<span class="token punctuation">,</span>
    chokidar<span class="token punctuation">,</span>
    clearScreen<span class="token punctuation">,</span>
    skipWrite<span class="token punctuation">,</span>
    exclude<span class="token punctuation">,</span>
    include
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>关于<code>inputOptions</code>和<code>outputOptions</code>的细节，见上文，或者<a href="https://rollupjs.org/guide/en/#big-list-of-options" target="_blank" rel="noopener noreferrer">查阅大的选项列表<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，了解关于<code>chokidar</code>、<code>include</code>和<code>exclude</code>的信息。</p> <h4 id="programmatically-loading-a-config-file"><a href="#programmatically-loading-a-config-file" class="header-anchor">#</a> Programmatically loading a config file</h4> <p>为了帮助生成这样的配置，rollup通过一个单独的入口点公开了它用来在其命令行界面中加载配置文件的帮助器。这个帮助器接收一个已解决的<code>fileName</code>和一个包含命令行参数的对象。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> loadConfigFile <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'rollup/dist/loadConfigFile'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> rollup <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'rollup'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// load the config file next to the current script;</span>
<span class="token comment">// the provided config object has the same effect as passing &quot;--format es&quot;</span>
<span class="token comment">// on the command line and will override the format of all outputs</span>
<span class="token function">loadConfigFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'rollup.config.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> format<span class="token operator">:</span> <span class="token string">'es'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
  <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> options<span class="token punctuation">,</span> warnings <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// &quot;warnings&quot; wraps the default `onwarn` handler passed by the CLI.</span>
    <span class="token comment">// This prints all warnings up to this point:</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">We currently have </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>warnings<span class="token punctuation">.</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> warnings</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// This prints all deferred warnings</span>
    warnings<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// options is an array of &quot;inputOptions&quot; objects with an additional &quot;output&quot;</span>
    <span class="token comment">// property that contains an array of &quot;outputOptions&quot;.</span>
    <span class="token comment">// The following will generate all outputs for all inputs, and write them to disk the same</span>
    <span class="token comment">// way the CLI does it:</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> optionsObj <span class="token keyword">of</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> bundle <span class="token operator">=</span> <span class="token keyword">await</span> rollup<span class="token punctuation">.</span><span class="token function">rollup</span><span class="token punctuation">(</span>optionsObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>optionsObj<span class="token punctuation">.</span>output<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>bundle<span class="token punctuation">.</span>write<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// You can also pass this directly to &quot;rollup.watch&quot;</span>
    rollup<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="es-module-syntax"><a href="#es-module-syntax" class="header-anchor">#</a> ES Module Syntax</h2> <p>以下是<a href="https://www.ecma-international.org/ecma-262/6.0/" target="_blank" rel="noopener noreferrer">ES2015规范<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中定义的模块行为的轻量级参考，因为正确理解导入和导出语句对成功使用Rollup至关重要。</p> <h3 id="importing"><a href="#importing" class="header-anchor">#</a> Importing</h3> <p>导入的值不能被重新分配，尽管导入的对象和数组可以被突变（并且导出模块和任何其他导入者都会受到突变的影响）。在这方面，它们的行为类似于<code>常量</code>声明。</p> <h4 id="named-imports"><a href="#named-imports" class="header-anchor">#</a> Named Imports</h4> <p>从源模块导入一个特定的项目，并使用其原始名称。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> something <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./module.js'</span><span class="token punctuation">;</span>
</code></pre></div><p>从源模块导入一个特定的项目，导入时指定一个自定义的名称。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> something <span class="token keyword">as</span> somethingElse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./module.js'</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="namespace-imports"><a href="#namespace-imports" class="header-anchor">#</a> Namespace Imports</h4> <p>将源模块的所有内容导入一个对象，该对象将源模块的所有命名出口作为属性和方法公开。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> module <span class="token keyword">from</span> <span class="token string">'./module.js'</span><span class="token punctuation">;</span>
</code></pre></div><p>上面的例子中的东西将作为一个属性附加到导入的对象上，例如<code>module.something</code>。如果存在，可以通过<code>module.default</code>访问默认导出。</p> <h4 id="default-import"><a href="#default-import" class="header-anchor">#</a> Default Import</h4> <p>导入源模块的<strong>默认导出</strong>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> something <span class="token keyword">from</span> <span class="token string">'./module.js'</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="empty-import"><a href="#empty-import" class="header-anchor">#</a> Empty Import</h4> <p>加载模块代码，但不要让任何新对象可用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'./module.js'</span><span class="token punctuation">;</span>
</code></pre></div><p>这对polyfills很有用，或者当导入代码的主要目的是为了混用原型时。</p> <h4 id="dynamic-import"><a href="#dynamic-import" class="header-anchor">#</a> Dynamic Import</h4> <p>使用<a href="https://github.com/tc39/proposal-dynamic-import#import" target="_blank" rel="noopener noreferrer">动态导入 API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 导入模块。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./modules.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> DefaultExport<span class="token punctuation">,</span> NamedExport <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// do something with modules.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这对代码拆分应用和即时使用模块很有用。</p> <h3 id="exporting"><a href="#exporting" class="header-anchor">#</a> Exporting</h3> <h4 id="named-exports"><a href="#named-exports" class="header-anchor">#</a> Named exports</h4> <p>导出先前声明的值：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> something <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> something <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>重命名导出：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token punctuation">{</span> something <span class="token keyword">as</span> somethingElse <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>声明后立即导出价值：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// this works with `var`, `let`, `const`, `class`, and `function`</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> something <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="default-export"><a href="#default-export" class="header-anchor">#</a> Default Export</h4> <p>输出一个单一的值作为源模块的默认出口。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> something<span class="token punctuation">;</span>
</code></pre></div><p>只有您的源模块只有一个导出，才会建议使用此操作。</p> <p>在同一模块中混合默认和命名导出的惯例是不好的，但规范允许。</p> <h3 id="how-bindings-work"><a href="#how-bindings-work" class="header-anchor">#</a> How bindings work</h3> <p>ES模块导出的是活的绑定，而不是值，所以值可以在最初导入后按照<a href="https://rollupjs.org/repl/?shareable=JTdCJTIybW9kdWxlcyUyMiUzQSU1QiU3QiUyMm5hbWUlMjIlM0ElMjJtYWluLmpzJTIyJTJDJTIyY29kZSUyMiUzQSUyMmltcG9ydCUyMCU3QiUyMGNvdW50JTJDJTIwaW5jcmVtZW50JTIwJTdEJTIwZnJvbSUyMCcuJTJGaW5jcmVtZW50ZXIuanMnJTNCJTVDbiU1Q25jb25zb2xlLmxvZyhjb3VudCklM0IlNUNuaW5jcmVtZW50KCklM0IlNUNuY29uc29sZS5sb2coY291bnQpJTNCJTIyJTdEJTJDJTdCJTIybmFtZSUyMiUzQSUyMmluY3JlbWVudGVyLmpzJTIyJTJDJTIyY29kZSUyMiUzQSUyMmV4cG9ydCUyMGxldCUyMGNvdW50JTIwJTNEJTIwMCUzQiU1Q24lNUNuZXhwb3J0JTIwZnVuY3Rpb24lMjBpbmNyZW1lbnQoKSUyMCU3QiU1Q24lNUN0Y291bnQlMjAlMkIlM0QlMjAxJTNCJTVDbiU3RCUyMiU3RCU1RCUyQyUyMm9wdGlvbnMlMjIlM0ElN0IlMjJmb3JtYXQlMjIlM0ElMjJjanMlMjIlMkMlMjJnbG9iYWxzJTIyJTNBJTdCJTdEJTJDJTIybW9kdWxlSWQlMjIlM0ElMjIlMjIlMkMlMjJuYW1lJTIyJTNBJTIybXlCdW5kbGUlMjIlN0QlMkMlMjJleGFtcGxlJTIyJTNBbnVsbCU3RA==" target="_blank" rel="noopener noreferrer">这个演示<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>进行更改。</p> <!----> <h2 id="tutorial"><a href="#tutorial" class="header-anchor">#</a> Tutorial</h2> <ul><li><p><a href="">Creating Your First Bundle</a></p></li> <li><p><a href="">Using Config Files</a></p></li> <li><p><a href="">Installing Rollup locally</a></p></li> <li><p><a href="">Using plugins</a></p></li> <li><p><a href="">Using output plugins</a></p></li> <li><p><a href="">Code Splitting</a></p></li></ul> <h3 id="creating-your-first-bundle"><a href="#creating-your-first-bundle" class="header-anchor">#</a> Creating Your First Bundle</h3> <p>在我们开始之前，你需要安装<a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">Node.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，以便你可以使用<a href="https://npmjs.com/" target="_blank" rel="noopener noreferrer">NPM<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。你还需要知道如何访问你机器上的<a href="https://www.codecademy.com/learn/learn-the-command-line" target="_blank" rel="noopener noreferrer">命令行<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>使用Rollup的最简单方法是通过命令行界面（或CLI）。现在，我们将在全局范围内安装它（稍后我们将学习如何在你的项目中本地安装它，以便你的构建过程是可移植的，但先不要担心这个问题）。在命令行中键入以下内容。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> rollup --global
<span class="token comment"># or `npm i rollup -g` for short</span>
</code></pre></div><p>您现在可以运行rollup命令。尝试一下！</p> <div class="language-sh extra-class"><pre class="language-sh"><code>rollup
</code></pre></div><p>由于没有传递参数，Rollup打印出使用说明。这与运行<code>rollup --help</code>或<code>rollup -h</code>相同。</p> <p>让我们创建一个简单的项目：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">mkdir</span> -p my-rollup-project/src
<span class="token builtin class-name">cd</span> my-rollup-project
</code></pre></div><p>首先，我们需要一个入口点。将其粘贴到一个名为 src/main.js 的新文件中。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/main.js</span>
<span class="token keyword">import</span> foo <span class="token keyword">from</span> <span class="token string">'./foo.js'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后，让我们创建我们的入口点导入的<code>foo.js</code>模块：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/foo.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token string">'hello world!'</span><span class="token punctuation">;</span>
</code></pre></div><p>现在我们已准备好创建一个捆绑包：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>rollup src/main.js -f cjs
</code></pre></div><p><code>-f</code>选项（<code>--format</code>的缩写）指定了我们要创建的是哪种捆绑包--在本例中是CommonJS（将在Node.js中运行）。因为我们没有指定输出文件，它将被直接打印到<code>stdout</code>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token string">'hello world!'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> main<span class="token punctuation">;</span>
</code></pre></div><p>您可以将捆绑包保存为如此：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>rollup src/main.js -o bundle.js -f cjs
</code></pre></div><p>(你也可以做<code>rollup src/main.js -f cjs &gt; bundle.js</code>，但正如我们稍后看到的，如果你要生成源代码地图，这就不那么灵活了)。</p> <p>尝试运行代码：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>node
<span class="token operator">&gt;</span> var myBundle <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">'./bundle.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&gt;</span> myBundle<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token string">'hello world!'</span>
</code></pre></div><p>恭喜你！你已经用Rollup创建了你的第一个包。</p> <h3 id="using-config-files"><a href="#using-config-files" class="header-anchor">#</a> Using Config Files</h3> <p>到目前为止，情况还不错，但当我们开始添加更多的选项时，打出命令就变得有点麻烦了。</p> <p>为了节省重复劳动，我们可以创建一个包含所有我们需要的选项的配置文件。配置文件是用JavaScript编写的，比原始CLI更灵活。</p> <p>在项目根部创建一个名为<code>rollup.config.js</code>的文件，并添加以下代码。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// rollup.config.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  input<span class="token operator">:</span> <span class="token string">'src/main.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    file<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    format<span class="token operator">:</span> <span class="token string">'cjs'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>(注意，你可以使用CJS模块，因此<code>module.exports = {/* config */}</code>)</p> <p>要使用配置文件，我们使用<code>--config</code>或<code>-c</code>标志：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">rm</span> bundle.js <span class="token comment"># so we can check the command works!</span>
rollup -c
</code></pre></div><p>你可以用相应的命令行选项来覆盖配置文件中的任何选项。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>rollup -c -o bundle-2.js <span class="token comment"># `-o` is equivalent to `--file` (formerly &quot;output&quot;)</span>
</code></pre></div><p>注意：Rollup本身会处理配置文件，这就是为什么我们能够使用<code>导出的默认语法</code>--代码没有被Babel或类似的东西转译，所以你只能使用你所运行的Node.js版本所支持的ES2015特性。</p> <p>如果你愿意，你可以指定一个不同于默认<code>rollup.config.js</code>的配置文件。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>rollup --config rollup.config.dev.js
rollup --config rollup.config.prod.js
</code></pre></div><h3 id="installing-rollup-locally"><a href="#installing-rollup-locally" class="header-anchor">#</a> Installing Rollup locally</h3> <p>当在团队或分布式环境中工作时，将Rollup作为一个本地依赖项添加是明智的。在本地安装Rollup可以避免要求多个贡献者分别安装Rollup的额外步骤，并确保所有贡献者使用相同版本的Rollup。</p> <p>要使用NPM本地安装汇总：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> rollup --save-dev
</code></pre></div><p>或用yarn：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> -D <span class="token function">add</span> rollup
</code></pre></div><p>安装后，Rollup可以在你的项目的根目录下运行。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>npx rollup --config
</code></pre></div><p>或用yarn：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> rollup --config
</code></pre></div><p>一旦安装完毕，通常的做法是在<code>package.json</code>中添加一个单一的构建脚本，为所有贡献者提供一个方便的命令。 例如</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rollup --config&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注意：一旦安装到本地，NPM和Yarn都会解析依赖的bin文件，并在从包脚本调用时执行Rollup。</p> <h3 id="using-plugins"><a href="#using-plugins" class="header-anchor">#</a> Using plugins</h3> <p>到目前为止，我们已经从一个入口点和一个通过相对路径导入的模块创建了一个简单的捆绑程序。当你建立更复杂的软件包时，你往往需要更多的灵活性--导入用NPM安装的模块，用Babel编译代码，用JSON文件工作等等。</p> <p>为此，我们使用插件，在捆绑过程的关键点上改变Rollup的行为。在Rollup Awesome List上<a href="https://github.com/rollup/awesome" target="_blank" rel="noopener noreferrer">有一个插件列表<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>在本教程中，我们将使用<a href="https://github.com/rollup/plugins/tree/master/packages/json" target="_blank" rel="noopener noreferrer">@rollup/plugin-json<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，它允许Rollup从JSON文件导入数据。</p> <p>在项目根部创建一个名为<code>package.json</code>的文件，并添加以下内容。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rollup-tutorial&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rollup -c&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>将@rollup/plugin-json安装为开发依赖项。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev @rollup/plugin-json
</code></pre></div><p>（我们正在使用<code>--save-dev</code>而不是<code>--save</code>，因为我们的代码实际上并没有依赖于运行时的插件 - 只有在我们构建捆绑包时才依赖于插件。）</p> <p>更新你的<code>src/main.js</code>文件，使其从<code>package.json</code>而不是<code>src/foo.js</code>导入。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/main.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> version <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../package.json'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'version '</span> <span class="token operator">+</span> version<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>编辑您的<code>Rollup.config.js</code>文件以包含JSON插件：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// rollup.config.js</span>
<span class="token keyword">import</span> json <span class="token keyword">from</span> <span class="token string">'@rollup/plugin-json'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  input<span class="token operator">:</span> <span class="token string">'src/main.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    file<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    format<span class="token operator">:</span> <span class="token string">'cjs'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>用<code>npm run build</code>运行Rollup。结果应该是这样的。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> version <span class="token operator">=</span> <span class="token string">'1.0.0'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'version '</span> <span class="token operator">+</span> version<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> main<span class="token punctuation">;</span>
</code></pre></div><p>注意：只有我们真正需要的数据被导入<code>--name</code>和<code>devDependencies</code>以及<code>package.json</code>的其他部分被忽略。这就是<strong>树状结构的作用</strong>。</p> <h3 id="using-output-plugins"><a href="#using-output-plugins" class="header-anchor">#</a> Using output plugins</h3> <p>一些插件也可以专门应用于某些输出。关于特定输出的插件能做什么的技术细节，请看<a href="https://rollupjs.org/guide/en/#build-hooks" target="_blank" rel="noopener noreferrer">插件钩子<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。简而言之，那些插件只能在Rollup的主要分析完成后修改代码。如果一个不兼容的插件被用作输出特定插件，Rollup会发出警告。一个可能的用例是对在浏览器中使用的包进行最小化。</p> <p>让我们扩展前面的例子，以提供一个减化的构建和非减化的构建。为此，我们安装<code>rollup-plugin-terser</code>。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev rollup-plugin-terser
</code></pre></div><p>编辑你的<code>rollup.config.js</code>文件，添加第二个最小化的输出。作为格式，我们选择<code>iife</code>。这种格式包装了代码，以便它可以通过浏览器中的脚本标签来消费，同时避免与其他代码进行不必要的交互。由于我们有一个输出，我们需要提供一个全局变量的名字，这个变量将由我们的bundle创建，这样其他代码就可以通过这个变量访问我们的输出。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// rollup.config.js</span>
<span class="token keyword">import</span> json <span class="token keyword">from</span> <span class="token string">'@rollup/plugin-json'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> terser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rollup-plugin-terser'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  input<span class="token operator">:</span> <span class="token string">'src/main.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      file<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
      format<span class="token operator">:</span> <span class="token string">'cjs'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      file<span class="token operator">:</span> <span class="token string">'bundle.min.js'</span><span class="token punctuation">,</span>
      format<span class="token operator">:</span> <span class="token string">'iife'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'version'</span><span class="token punctuation">,</span>
      plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">terser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>除了<code>bundle.js</code>，Rollup现在会创建第二个文件<code>bundle.min.js</code>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> version <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">'use strict'</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token string">'1.0.0'</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'version '</span> <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="code-splitting"><a href="#code-splitting" class="header-anchor">#</a> Code Splitting</h3> <p>对于代码分割，有些情况下，Rollup会自动将代码分割成几块，比如动态加载或多个入口点，还有一种方法是通过<a href="https://rollupjs.org/guide/en/#outputmanualchunks" target="_blank" rel="noopener noreferrer">output.manualChunks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>选项明确告诉Rollup哪些模块要分割成独立的几块。</p> <p>为了使用代码拆分功能来实现懒惰的动态加载（一些导入的模块只在执行函数后才被加载），我们回到原来的例子，修改 <code>src/main.js</code>，动态加载 <code>src/foo.js</code> 而不是静态加载。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/main.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./foo.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> foo <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Rollup将使用动态导入来创建一个单独的块，只在需要时加载。为了让Rollup知道在哪里放置第二个数据块，我们没有使用<code>--file</code>选项，而是使用<code>--dir</code>选项设置了一个要输出的文件夹。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>rollup src/main.js -f cjs -d dist
</code></pre></div><p>这将创建一个文件夹<code>dist</code>，包含两个文件，<code>main.js</code>和<code>chunk-[hash].js</code>，其中<code>[hash]</code>是一个基于内容的哈希字符串。你可以通过指定<a href="https://rollupjs.org/guide/en/#outputchunkfilenames" target="_blank" rel="noopener noreferrer">output.chunkFileNames<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和<a href="https://rollupjs.org/guide/en/#outputentryfilenames" target="_blank" rel="noopener noreferrer">output.entryFileNames<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>选项提供你自己的命名模式。</p> <p>你仍然可以像以前一样运行你的代码，有相同的输出，尽管速度稍慢，因为只有当我们第一次调用导出的函数时，才会开始加载和解析<code>./foo.js</code>。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>node -e <span class="token string">&quot;require('./dist/main.js')()&quot;</span>
</code></pre></div><p>如果我们不使用<code>-dir</code>选项，Rollup会再次将块打印到stdout，并添加注释以突出块的边界。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//→ main.js:</span>
<span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./chunk-b8774ea3.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> foo <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> main<span class="token punctuation">;</span>

<span class="token comment">//→ chunk-b8774ea3.js:</span>
<span class="token punctuation">(</span><span class="token string">'use strict'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token string">'hello world!'</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span>default <span class="token operator">=</span> foo<span class="token punctuation">;</span>
</code></pre></div><p>如果要在使用时才能加载和解析等开销大的功能，这将是有用的。</p> <p>代码拆分的另一个用途是能够指定几个共享某些依赖关系的入口点。我们再次扩展我们的例子，添加第二个入口点 <code>src/main2.js</code>，它静态地导入 <code>src/foo.js</code>，就像我们在原始例子中做的那样。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/main2.js</span>
<span class="token keyword">import</span> foo <span class="token keyword">from</span> <span class="token string">'./foo.js'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果我们向rollup提供两个入口点，就会创建三个块。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>rollup src/main.js src/main2.js -f cjs
</code></pre></div><p>将输出</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//→ main.js:</span>
<span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./chunk-b8774ea3.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> foo <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> main<span class="token punctuation">;</span>

<span class="token comment">//→ main2.js:</span>
<span class="token punctuation">(</span><span class="token string">'use strict'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> foo_js <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./chunk-b8774ea3.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">main2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo_js<span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> main2<span class="token punctuation">;</span>

<span class="token comment">//→ chunk-b8774ea3.js:</span>
<span class="token punctuation">(</span><span class="token string">'use strict'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token string">'hello world!'</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span>default <span class="token operator">=</span> foo<span class="token punctuation">;</span>
</code></pre></div><p>注意这两个入口点是如何导入同一个共享块的。Rollup不会重复代码，而是创建额外的块，只加载必要的最低限度。同样，通过<code>-dir</code>选项将把文件写到磁盘上。</p> <p>你可以通过本地ES模块、AMD加载器或SystemJS为浏览器构建相同的代码。</p> <p>例如，使用<code>-f es</code>进行本机模块：</p> <!----> <p>对于SystemJS，用<code>-f system</code>。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>rollup src/main.js src/main2.js -f system -d dist
</code></pre></div><p>安装SystemJS Via.</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev systemjs
</code></pre></div><p>然后根据需要在一个HTML页面中加载任一或两个入口点。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>node_modules/systemjs/dist/s.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  System<span class="token punctuation">.</span><span class="token function">import</span><span class="token punctuation">(</span><span class="token string">'./dist/main2.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> main <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>请参阅<a href="https://github.com/rollup/rollup-starter-code-splitting" target="_blank" rel="noopener noreferrer">rollup-starter-code-splitting<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，了解如何在支持本地ES模块的浏览器上设置Web应用，并在必要时回退到SystemJS。</p> <h2 id="plugin-development"><a href="#plugin-development" class="header-anchor">#</a> Plugin Development</h2> <ul><li><p><a href="">Plugins Overview</a></p></li> <li><p><a href="">A Simple Example</a></p></li> <li><p><a href="">Conventions</a></p></li> <li><p><a href="">Properties</a></p> <ul><li><a href="">name</a></li></ul></li> <li><p><a href="">Build Hooks</a></p> <ul><li><p><a href="">buildEnd</a></p></li> <li><p><a href="">buildStart</a></p></li> <li><p><a href="">closeWatcher</a></p></li> <li><p><a href="">load</a></p></li> <li><p><a href="">moduleParsed</a></p></li> <li><p><a href="">options</a></p></li> <li><p><a href="">resolveDynamicImport</a></p></li> <li><p><a href="">resolveId</a></p></li> <li><p><a href="">transform</a></p></li> <li><p><a href="">watchChange</a></p></li></ul></li> <li><p><a href="">Output Generation Hooks</a></p> <ul><li><p><a href="">augmentChunkHash</a></p></li> <li><p><a href="">banner</a></p></li> <li><p><a href="">closeBundle</a></p></li> <li><p><a href="">footer</a></p></li> <li><p><a href="">generateBundle</a></p></li> <li><p><a href="">intro</a></p></li> <li><p><a href="">outputOptions</a></p></li> <li><p><a href="">outro</a></p></li> <li><p><a href="">renderChunk</a></p></li> <li><p><a href="">renderDynamicImport</a></p></li> <li><p><a href="">renderError</a></p></li> <li><p><a href="">renderStart</a></p></li> <li><p><a href="">resolveFileUrl</a></p></li> <li><p><a href="">resolveImportMeta</a></p></li> <li><p><a href="">writeBundle</a></p></li></ul></li> <li><p><a href="">Deprecated Hooks</a></p></li> <li><p><a href="">Plugin Context</a></p> <ul><li><p><a href="">this.addWatchFile(id: string) =&gt; void</a></p></li> <li><p><a href="">this.emitFile(emittedFile: EmittedChunk | EmittedAsset) =&gt; string</a></p></li> <li><p><a href="">this.error(error: string | Error, position?: number | { column: number; line: number }) =&gt; never</a></p></li> <li><p><a href="">this.getCombinedSourcemap() =&gt; SourceMap</a></p></li> <li><p><a href="">this.getFileName(referenceId: string) =&gt; string</a></p></li> <li><p><a href="">this.getModuleIds() =&gt; IterableIterator(string)</a></p></li> <li><p><a href="">this.getModuleInfo(moduleId: string) =&gt; (ModuleInfo | null)</a></p></li> <li><p><a href="">this.getWatchFiles() =&gt; string[]</a></p></li> <li><p><a href="">this.meta: {rollupVersion: string, watchMode: boolean}</a></p></li> <li><p><a href="">this.parse(code: string, acornOptions?: AcornOptions) =&gt; ESTree.Program</a></p></li> <li><p><a href="">this.resolve(source: string, importer?: string, options?: {skipSelf?: boolean, custom?: {[plugin: string]: any}}) =&gt; Promise&lt;{id: string, external: boolean | &quot;absolute&quot;, moduleSideEffects: boolean | 'no-treeshake', syntheticNamedExports: boolean | string, meta: {[plugin: string]: any}} | null&gt;</a></p></li> <li><p><a href="">this.setAssetSource(referenceId: string, source: string | Uint8Array) =&gt; void</a></p></li> <li><p><a href="">this.warn(warning: string | RollupWarning, position?: number | { column: number; line: number }) =&gt; void</a></p></li></ul></li> <li><p><a href="">Deprecated Context Functions</a></p></li> <li><p><a href="">File URLs</a></p></li> <li><p><a href="">Transformers</a></p> <ul><li><p><a href="">Example Transformer</a></p></li> <li><p><a href="">Source Code Transformations</a></p></li></ul></li> <li><p><a href="">Synthetic named exports</a></p></li> <li><p><a href="">Inter-plugin communication</a></p> <ul><li><p><a href="">Custom resolver options</a></p></li> <li><p><a href="">Custom module meta-data</a></p></li> <li><p><a href="">Direct plugin communication</a></p></li></ul></li></ul> <h3 id="plugins-overview"><a href="#plugins-overview" class="header-anchor">#</a> Plugins Overview</h3> <p>一个Rollup插件是一个具有下面描述的一个或多个<a href="https://rollupjs.org/guide/en/#properties" target="_blank" rel="noopener noreferrer">属性<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://rollupjs.org/guide/en/#build-hooks" target="_blank" rel="noopener noreferrer">构建钩子<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和<a href="https://rollupjs.org/guide/en/#output-generation-hooks" target="_blank" rel="noopener noreferrer">输出生成钩子的对象<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，并遵循我们的惯例。一个插件应该以包的形式<a href="https://rollupjs.org/guide/en/#conventions" target="_blank" rel="noopener noreferrer">发布<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，该包导出一个可以用插件特定选项调用的函数，并返回这样一个对象。</p> <p>插件允许你自定义Rollup的行为，例如，在捆绑前转译代码，或在你的node_modules文件夹中寻找第三方模块。关于如何使用它们的例子，请参阅<a href="https://rollupjs.org/guide/en/#using-plugins" target="_blank" rel="noopener noreferrer">使用插件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>插件列表可以在<a href="https://github.com/rollup/awesome" target="_blank" rel="noopener noreferrer">github.com/rollup/awesome<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>找到。如果你想对一个插件提出建议，请提交一个Pull Request。</p> <h3 id="a-simple-example"><a href="#a-simple-example" class="header-anchor">#</a> A Simple Example</h3> <p>下面的插件将拦截任何<code>虚拟模块</code>的导入而不访问文件系统。例如，如果你想在浏览器中使用Rollup，这是必要的。它甚至可以用来替换入口点，如例子中所示。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// rollup-plugin-my-example.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">myExample</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'my-example'</span><span class="token punctuation">,</span> <span class="token comment">// this name will show up in warnings and errors</span>
    <span class="token function">resolveId</span> <span class="token punctuation">(</span> <span class="token parameter">source</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>source <span class="token operator">===</span> <span class="token string">'virtual-module'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> source<span class="token punctuation">;</span> <span class="token comment">// this signals that rollup should not ask other plugins or check the file system to find this id</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// other ids should be handled as usually</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">load</span> <span class="token punctuation">(</span> <span class="token parameter">id</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">===</span> <span class="token string">'virtual-module'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'export default &quot;This is virtual!&quot;'</span><span class="token punctuation">;</span> <span class="token comment">// the source code for &quot;virtual-module&quot;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// other ids should be handled as usually</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// rollup.config.js</span>
<span class="token keyword">import</span> myExample <span class="token keyword">from</span> <span class="token string">'./rollup-plugin-my-example.js'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  input<span class="token operator">:</span> <span class="token string">'virtual-module'</span><span class="token punctuation">,</span> <span class="token comment">// resolved by our plugin</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">myExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    file<span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    format<span class="token operator">:</span> <span class="token string">'es'</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="conventions"><a href="#conventions" class="header-anchor">#</a> Conventions</h3> <div class="custom-block tip"><p class="custom-block-title">约定:</p> <ul><li><p>插件应该有一个明确的名称，并带有rollup-plugin-前缀。</p></li> <li><p>在package.json中包括rollup-plugin关键字。</p></li> <li><p>插件应该被测试。我们推荐mocha或ava，它们支持开箱即用的承诺。</p></li> <li><p>在可能的情况下使用异步方法。</p></li> <li><p>用英文记录你的插件。</p></li> <li><p>如果合适的话，确保你的插件输出正确的源映射。</p></li> <li><p>如果你的插件使用 &quot;虚拟模块&quot;（例如，用于辅助函数），请在模块ID前加上 &quot;0&quot;。这可以防止其他插件试图处理它。</p></li></ul></div> <h3 id="properties"><a href="#properties" class="header-anchor">#</a> Properties</h3> <p><code>name</code></p> <p>Type: <code>string</code></p> <p>The name of the plugin, for use in error messages and warnings.</p> <h3 id="build-hooks"><a href="#build-hooks" class="header-anchor">#</a> Build Hooks</h3> <p>为了与构建过程互动，你的插件对象包括 &quot;钩子&quot;。钩子是在构建的不同阶段被调用的函数。钩子可以影响构建的运行方式，提供关于构建的信息，或者在构建完成后对其进行修改。有不同种类的钩子。</p> <ul><li><p><code>async</code>: 钩子也可以返回一个解析为相同类型的值的承诺；否则，钩子被标记为同步。</p></li> <li><p><code>first</code>: 如果有几个插件实现了这个钩子，那么这些钩子将按顺序运行，直到一个钩子返回一个非空或未定义的值。</p></li> <li><p><code>sequential</code>: 如果有几个插件实现了这个钩子，所有的钩子将按照指定的插件顺序运行。如果一个钩子是异步的，后续的这种钩子将等待，直到当前钩子被解决。</p></li> <li><p><code>parallel</code>: 如果有几个插件实现了这个钩子，它们都将按照指定的插件顺序来运行。如果一个钩子是异步的，后续的这类钩子将被平行运行，而不会等待当前的钩子。</p></li></ul> <p>构建钩子在构建阶段运行，这是由<code>rollup.rollup(inputOptions)</code>触发的。它们主要是在Rollup处理输入文件之前，对其进行定位、提供和转换。构建阶段的第一个钩子是<a href="https://rollupjs.org/guide/en/#options" target="_blank" rel="noopener noreferrer">options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，最后一个钩子总是<a href="https://rollupjs.org/guide/en/#buildend" target="_blank" rel="noopener noreferrer">buildEnd<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。如果有一个构建错误，之后将调用<a href="https://rollupjs.org/guide/en/#closebundle" target="_blank" rel="noopener noreferrer">closeBundle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p><img src="/notes/assets/rollup/1630648412252.jpg" alt="demo"></p> <p>此外，在观察模式下，<a href="https://rollupjs.org/guide/en/#watchchange" target="_blank" rel="noopener noreferrer">watchChange<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>钩子可以在任何时候被触发，以通知新的运行将在当前运行产生其输出后被触发。另外，当watcher关闭时，<a href="https://rollupjs.org/guide/en/#closewatcher" target="_blank" rel="noopener noreferrer">closeWatcher<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>钩将被触发。</p> <p>参见<a href="https://rollupjs.org/guide/en/#output-generation-hooks" target="_blank" rel="noopener noreferrer">输出生成钩子<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，了解在输出生成阶段运行的钩子，以修改生成的输出。</p> <h4 id="buildend"><a href="#buildend" class="header-anchor">#</a> buildEnd</h4> <p>Type: <code>(error?: Error) =&gt; void</code>
Kind: <code>async</code>, <code>parallel</code>
Previous Hook: <a href="https://rollupjs.org/guide/en/#moduleparsed" target="_blank" rel="noopener noreferrer">moduleParsed<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://rollupjs.org/guide/en/#resolveid" target="_blank" rel="noopener noreferrer">resolveId<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or <a href="https://rollupjs.org/guide/en/#resolvedynamicimport" target="_blank" rel="noopener noreferrer">resolveDynamicImport<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.
Next Hook: 输出生成阶段的<a href="https://rollupjs.org/guide/en/#outputoptions" target="_blank" rel="noopener noreferrer">outputOptions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，因为这是构建阶段的最后一个钩子.</p> <p>当rollup完成捆绑，但在<code>generate</code>或<code>write</code>被调用之前被调用；你也可以返回一个Promise。如果在构建过程中发生了错误，它将被传递给这个钩子。</p> <h4 id="buildstart"><a href="#buildstart" class="header-anchor">#</a> buildStart</h4> <p>Type: <code>(options: InputOptions) =&gt; void</code>
Kind: <code>async</code>, <code>parallel</code>
Previous Hook: <a href="https://rollupjs.org/guide/en/#options" target="_blank" rel="noopener noreferrer">options<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
Next Hook：<a href="https://rollupjs.org/guide/en/#resolveid" target="_blank" rel="noopener noreferrer">resolveId<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 并行解析每个入口点。</p> <p>在每次<code>rollup.rollup</code>构建时被调用。当你需要访问传递给<code>rollup.rollup()</code>的选项时，推荐使用这个钩子，因为它考虑到了所有<a href="https://rollupjs.org/guide/en/#options" target="_blank" rel="noopener noreferrer">选项<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>钩子的转换，也包含了未设置选项的正确默认值。</p> <h4 id="closewatcher"><a href="#closewatcher" class="header-anchor">#</a> closeWatcher</h4> <p>Type: <code>() =&gt; void</code>
Kind: <code>sync</code>, <code>sequential</code>
Previous/Next Hook: 这个钩子可以在任何时候被触发，无论是在构建阶段还是在输出生成阶段。如果是这种情况，当前的构建仍将继续进行，但不会有新的<a href="https://rollupjs.org/guide/en/#watchchange" target="_blank" rel="noopener noreferrer">watchChange<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>事件被触发。</p> <p>当观察者进程关闭时通知一个插件，所有打开的资源也应该关闭。这个钩子不能被输出插件使用。</p> <h4 id="load"><a href="#load" class="header-anchor">#</a> load</h4> <p>Type: <code>(id: string) =&gt; string | null | {code: string, map?: string | SourceMap, ast? : ESTree.Program, moduleSideEffects?: boolean | &quot;no-treeshake&quot; | null, syntheticNamedExports?: boolean | string | null, meta?: {[plugin: string]: any} | null}</code>
Kind: <code>async</code>, <code>first</code>
Previous Hook: 解析加载的 ID 的 <a href="https://rollupjs.org/guide/en/#resolveid" target="_blank" rel="noopener noreferrer">resolveId<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 或 <a href="https://rollupjs.org/guide/en/#resolvedynamicimport" target="_blank" rel="noopener noreferrer">resolveDynamicImport<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。
Next Hook: <a href="https://rollupjs.org/guide/en/#transform" target="_blank" rel="noopener noreferrer">transform<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 转换加载的文件。</p> <p>定义自定义加载器。返回 null 延迟到其他加载函数（以及最终从文件系统加载的默认行为）。为了防止额外的解析开销，例如由于某种原因，这个钩子已经使用 <code>this.parse</code> 来生成一个 AST，这个钩子可以选择返回一个 <code>{ code, ast, map }</code> 对象。 ast 必须是标准的 ESTree AST，每个节点都有开始和结束属性。如果转换不移动代码，您可以通过将 map 设置为 null 来保留现有的源映射。否则，您可能需要生成源映射。<a href="https://rollupjs.org/#source-code-transformations" target="_blank" rel="noopener noreferrer">请参阅有关源代码转换的部分<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>如果为 <code>moduleSideEffects</code> 返回 <code>false</code> 并且没有其他模块从该模块导入任何内容，则即使该模块有副作用，该模块也不会包含在包中。如果返回 <code>true</code>，Rollup 将使用其默认算法来包含模块中具有副作用（例如修改全局或导出变量）的所有语句。如果返回“<code>no-treeshake</code>”，则此模块的 <code>treeshaking</code> 将关闭，并且即使它为空，它也会包含在生成的块之一中。如果返回 null 或省略标志，则 <code>moduleSideEffects</code> 将由解析此模块的第一个 <code>resolveId</code> 钩子、<code>treeshake.moduleSideEffects</code> 选项确定，或最终默认为 <code>true</code>。变换钩子可以覆盖它。</p> <p>关于 <code>syntheticNamedExports</code> 选项的效果，请参阅 <a href="https://rollupjs.org/guide/en/#synthetic-named-exports" target="_blank" rel="noopener noreferrer">syntheticNamedExports<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。如果返回<code>null</code>或者省略该标志，那么<code>syntheticNamedExports</code>将由解析该模块的第一个<code>resolveId</code>钩子决定，或者最终默认为<code>false</code>。<code>transform</code>钩子可以覆盖这一点。</p> <p>关于如何使用meta选项，请参阅<a href="https://rollupjs.org/guide/en/#custom-module-meta-data" target="_blank" rel="noopener noreferrer">自定义模块元数据<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。如果这个钩子返回一个元对象，它将与由 resolveId 钩子返回的任何元对象进行浅层合并。如果没有钩子返回一个元对象，它将默认为一个空对象。transform钩子可以进一步添加或替换这个对象的属性。</p> <p>你可以使用<a href="https://rollupjs.org/guide/en/#thisgetmoduleinfomoduleid-string--moduleinfo--null" target="_blank" rel="noopener noreferrer">this.getModuleInfo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>来找出这个钩子里面的moduleSideEffects、syntheticNamedExports和meta的前一个值。</p> <h4 id="moduleparsed"><a href="#moduleparsed" class="header-anchor">#</a> moduleParsed</h4> <p>Type: (moduleInfo: ModuleInfo) =&gt; void
Kind: async, parallel
Previous Hook: <a href="https://rollupjs.org/guide/en/#transform" target="_blank" rel="noopener noreferrer">transform<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>当前处理的文件的转换位置
NextHook: <a href="https://rollupjs.org/guide/en/#resolveid" target="_blank" rel="noopener noreferrer">resolveId<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和<a href="https://rollupjs.org/guide/en/#resolvedynamicimport" target="_blank" rel="noopener noreferrer">resolveDynamicImport<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>来解决所有发现的静态和动态导入（如果存在），否则<a href="https://rollupjs.org/guide/en/#buildend" target="_blank" rel="noopener noreferrer">buildEnd<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>每次 Rollup 完全解析模块时都会调用此钩子。有关传递给此钩子的信息，请参阅 <a href="https://rollupjs.org/guide/en/#thisgetmoduleinfomoduleid-string--moduleinfo--null" target="_blank" rel="noopener noreferrer">this.getModuleInfo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>与<a href="https://rollupjs.org/guide/en/#transform" target="_blank" rel="noopener noreferrer">转换<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>钩子相反，这个钩子从不被缓存，可以用来获取缓存和其他模块的信息，包括元属性的最终形状、代码和星号。</p> <p>请注意，这个钩子中还没有关于导入模块的信息，而且关于导入模块的信息可能是不完整的，因为后来可能会发现更多的导入者。如果你需要这些信息，请使用<a href="https://rollupjs.org/guide/en/#buildend" target="_blank" rel="noopener noreferrer">buildEnd<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>钩子。</p> <h4 id="options"><a href="#options" class="header-anchor">#</a> options</h4> <p>Type: (options: InputOptions) =&gt; InputOptions | null
Kind: async, sequential
Previous Hook: 这是构建阶段的第一个钩子。
Next Hook: <a href="https://rollupjs.org/guide/en/#buildstart" target="_blank" rel="noopener noreferrer">buildStart<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>替换或操作传递给rollup.rollup的选项对象。返回null不会替换任何东西。如果你只需要读取选项，建议使用<a href="https://rollupjs.org/guide/en/#buildstart" target="_blank" rel="noopener noreferrer">buildStart<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>钩子，因为该钩子可以在考虑到所有选项钩子的转换后访问选项。</p> <p>这是唯一不能访问大多数插件上下文<a href="https://rollupjs.org/guide/en/#plugin-context" target="_blank" rel="noopener noreferrer">实用功能<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的钩子，因为它是在rollup完全配置之前运行的。</p> <h4 id="resolvedynamicimport"><a href="#resolvedynamicimport" class="header-anchor">#</a> resolveDynamicImport</h4> <p>Type: (specifier: string | ESTree.Node, importer: string) =&gt; string | false | null | {id: string, external?: boolean}
Kind: async, first
Previous Hook: 为导入文件<a href="https://rollupjs.org/guide/en/#moduleparsed" target="_blank" rel="noopener noreferrer">解析模块<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。
Next Hook: 如果钩子解决了一个尚未加载的id，则为<a href="https://rollupjs.org/guide/en/#load" target="_blank" rel="noopener noreferrer">load<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>；如果动态导入包含一个字符串，且未被钩子解决，则为<a href="https://rollupjs.org/guide/en/#resolveid" target="_blank" rel="noopener noreferrer">resolveId<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>；否则为<a href="https://rollupjs.org/guide/en/#buildend" target="_blank" rel="noopener noreferrer">buildEnd<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>定义了一个用于动态导入的自定义解析器。返回 false 表示导入应该保持原样，不被传递给其他解析器，从而使其成为外部的。与 <a href="https://rollupjs.org/guide/en/#resolveid" target="_blank" rel="noopener noreferrer">resolveId<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 钩子类似，你也可以返回一个对象来将导入解析为一个不同的 id，同时将其标记为外部。</p> <p>如果一个动态导入被传递一个字符串作为参数，从这个钩子返回的字符串将被解释为一个现有的模块ID，而返回null将推迟到其他解析器并最终到resolveId。</p> <p>如果动态导入没有传递一个字符串作为参数，这个钩子就会获得原始AST节点的分析权，并在以下方面表现得略有不同。</p> <ul><li><p>如果所有的插件都返回null，则导入被视为<code>外部的</code>，没有警告。</p></li> <li><p>如果返回一个字符串，这个字符串不会被解释为模块ID，而是被用作import参数的替代。确保生成的代码是有效的，这是插件的责任。</p></li> <li><p>为了解决这样一个导入现有模块的问题，你仍然可以返回一个对象<code>{id, external}</code>。</p></li></ul> <p>请注意，这个钩子的返回值之后不会传递给 <code>resolveId</code>；如果你需要访问静态解析算法，你可以在插件上下文上使用 <a href="https://rollupjs.org/guide/en/#thisresolvesource-string-importer-string-options-skipself-boolean-custom-plugin-string-any--promiseid-string-external-boolean--absolute-modulesideeffects-boolean--no-treeshake-syntheticnamedexports-boolean--string-meta-plugin-string-any--null" target="_blank" rel="noopener noreferrer">this.resolve(source, importer)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 。</p> <h4 id="resolveid"><a href="#resolveid" class="header-anchor">#</a> resolveId</h4> <p>Type: (source: string, importer: string | undefined, options: {custom?: {[plugin: string]: any}) =&gt; string | false | null | {id: string, external?: boolean | &quot;relative&quot; | &quot;absolute&quot;, moduleSideEffects?: boolean | &quot;no-treeshake&quot; | null, syntheticNamedExports?: boolean | string | null, meta?: {[plugin: string]: any} | null}
Kind: async, first
Previous Hook: 如果我们正在解决一个入口点，则使用<a href="https://rollupjs.org/guide/en/#buildstart" target="_blank" rel="noopener noreferrer">buildStart<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>；如果我们正在解决一个导入，则使用<a href="https://rollupjs.org/guide/en/#moduleparsed" target="_blank" rel="noopener noreferrer">moduleParsed<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>；或者作为<a href="https://rollupjs.org/guide/en/#resolvedynamicimport" target="_blank" rel="noopener noreferrer">resolveDynamicImport<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的回退。此外，这个钩子可以在构建阶段通过调用<a href="https://rollupjs.org/guide/en/#thisemitfileemittedfile-emittedchunk--emittedasset--string" target="_blank" rel="noopener noreferrer">this.emitFile<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>来触发一个入口点，或者在任何时候通过调用<a href="https://rollupjs.org/guide/en/#thisresolvesource-string-importer-string-options-skipself-boolean-custom-plugin-string-any--promiseid-string-external-boolean--absolute-modulesideeffects-boolean--no-treeshake-syntheticnamedexports-boolean--string-meta-plugin-string-any--null" target="_blank" rel="noopener noreferrer">this.resolve<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>来手动解析一个id。
Next Hook: 如果解决了尚未<a href="https://rollupjs.org/guide/en/#load" target="_blank" rel="noopener noreferrer">加载<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的id，则加载，否则<a href="https://rollupjs.org/guide/en/#buildend" target="_blank" rel="noopener noreferrer">buildEnd<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>定义了一个自定义的解析器。解析器对于定位第三方的依赖关系等非常有用。这里的source是指导入者，与导入语句中写的完全一样，也就是说，对于</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> foo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../bar.js'</span><span class="token punctuation">;</span>
</code></pre></div><p>源将是“../bar.js”“。</p> <p><code>importer</code>是导入模块的完全解析id。当解析入口点时，importer将是未定义的。例如，你可以把它作为一种机制，为入口点定义自定义代理模块。</p> <p>下面的插件将只从入口点暴露默认的出口，同时仍然保持命名的出口可用于内部使用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token function">resolveId</span><span class="token punctuation">(</span><span class="token parameter">source<span class="token punctuation">,</span>importer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>importer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// We need to skip this plugin to avoid an infinite loop</span>
    <span class="token keyword">const</span> resolution <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> skipSelf<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// If it cannot be resolved, return `null` so that Rollup displays an error</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>resolution<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>resolution<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?entry-proxy</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">load</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>id<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'?entry-proxy'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> importee <span class="token operator">=</span> id<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token string">'?entry-proxy'</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Note that this will throw if there is no default export</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">export {default} from '</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>importee<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">';</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>返回<code>null</code>会推迟到其他的<code>resolveId</code>函数，最终是默认的解析行为。返回 <code>false</code> 表示 <code>source</code> 应该被视为外部模块而不包括在捆绑包中。如果这发生在相对导入的情况下，id将被重新规范化，与使用外部选项时的方式相同。</p> <p>如果你返回一个对象，那么就有可能将一个导入解析为一个不同的id，同时将其从捆绑中排除。这允许你用外部依赖替换依赖，而不需要用户通过外部选项手动将其标记为 &quot;<code>外部</code>&quot;。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">resolveId</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>source <span class="token operator">===</span> <span class="token string">'my-dependency'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token string">'my-dependency-develop'</span><span class="token punctuation">,</span> external<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果<code>external</code>为真，那么绝对id将根据用户对<a href="https://rollupjs.org/guide/en/#makeabsoluteexternalsrelative" target="_blank" rel="noopener noreferrer">makeAbsoluteExternalsRelative<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>选项的选择被转换为相对id。这个选择可以通过传递<code>external: &quot;relative &quot;</code>来始终将绝对id转换为相对<code>id</code>，或者将<code>external: &quot;absolute &quot;</code>来保持它是一个绝对id。当返回一个对象时，相对的外部id，即以./或./开头的id，将不会被内部转换为绝对id，并在输出中转换为相对id，而是不变地包含在输出中。如果你想让相对的id被重新规范化和重复利用，请返回一个绝对的文件系统位置作为id并选择<code>external: &quot;relative&quot;</code>。</p> <p>如果在第一个解析模块ID的钩子中，<code>moduleSideEffects</code>返回<code>false</code>，并且没有其他模块从这个模块导入任何东西，那么即使这个模块会有副作用，也不会被包括在内。如果返回 &quot;true&quot;，Rollup将使用其默认算法，包括该模块中所有有副作用的语句（如修改全局或导出的变量）。如果返回 &quot;no-treeshake&quot;，这个模块的树形处理将被关闭，即使它是空的，也会被包含在一个生成的块中。如果返回null或者省略该标志，那么moduleSideEffects将由<code>treeshake.moduleSideEffects</code>选项决定或者默认为true。<code>加载</code>和转换钩子可以覆盖这一点。</p> <p>请参阅<a href="https://rollupjs.org/guide/en/#synthetic-named-exports" target="_blank" rel="noopener noreferrer">SyntheticnamedExports<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>选项的效果的合成名称导出。如果返回<code>null</code>或省略标志，则<code>SyntheticnamedExports</code>将默认为<code>false</code>。负载和变换钩可以覆盖此。</p> <p>关于如何<a href="https://rollupjs.org/guide/en/#custom-module-meta-data" target="_blank" rel="noopener noreferrer">使用meta选项<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，请参阅自定义模块元数据。如果返回null或者省略了该选项，那么meta将默认为一个空对象。加载和转换钩子可以添加或替换这个对象的属性。</p> <p>当通过<a href="https://rollupjs.org/guide/en/#thisresolvesource-string-importer-string-options-skipself-boolean-custom-plugin-string-any--promiseid-string-external-boolean--absolute-modulesideeffects-boolean--no-treeshake-syntheticnamedexports-boolean--string-meta-plugin-string-any--null" target="_blank" rel="noopener noreferrer">this.resolve(source, importer, options)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>从一个插件触发这个钩子时，可以向这个钩子传递一个自定义选项对象。虽然这个对象将被传递，未经修改，但插件应该遵循惯例，用一个对象添加一个自定义属性，其中的键对应于选项所针对的插件的名称。详情见<a href="https://rollupjs.org/guide/en/#custom-resolver-options" target="_blank" rel="noopener noreferrer">自定义解析器选项<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><div class="edit-link"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon edit-icon"><path d="M117.953 696.992 64.306 959.696l265.931-49.336 450.204-452.505-212.284-213.376-450.204 452.513zm496.384-296.326L219.039 797.993l-46.108-46.34L568.233 354.33l46.104 46.335zm345.357-122.99-114.45 115.04-212.288-213.377 114.45-115.035 212.288 213.371zm0 0" fill="currentColor"></path></svg> <a href="https://github.com/sykinggg/notes/edit/main/docs/rollup/introduction.md" target="_blank" rel="noopener noreferrer">Edit this page</a></div> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">September 6, 2021 01:47</span></div> <!----></footer> <!----> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button class="pswp__button pswp__button--close"></button> <button class="pswp__button pswp__button--share"></button> <button class="pswp__button pswp__button--fs"></button> <button class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button class="pswp__button pswp__button--arrow--left"></button> <button class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><div class="my-popup" style="display:none;" data-v-5f98aac3><div class="my-popup-container" data-v-5f98aac3><div class="my-popup-exit" data-v-5f98aac3></div> <img src="" alt data-v-5f98aac3></div></div></div></div>
    <script src="/notes/assets/js/app.63ccacd1.js" defer></script><script src="/notes/assets/js/vendors~layout-Layout.73b90aff.js" defer></script><script src="/notes/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.fd95594f.js" defer></script><script src="/notes/assets/js/page-Introduction.191ef184.js" defer></script><script src="/notes/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.5018eb2c.js" defer></script>
  </body>
</html>
