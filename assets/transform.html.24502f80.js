import{_ as l}from"./plugin-vue_export-helper.21dcd24c.js";import{r as i,o as u,c as r,b as n,d as a,w as e,a as p,e as s}from"./app.5da1017a.js";const d={},k=p(`<h1 id="transform-build-api" tabindex="-1"><a class="header-anchor" href="#transform-build-api" aria-hidden="true">#</a> Transform &amp; Build Api</h1><h2 id="transform-api" tabindex="-1"><a class="header-anchor" href="#transform-api" aria-hidden="true">#</a> Transform Api</h2><p>\u8F6C\u6362 API \u8C03\u7528\u5BF9\u5355\u4E2A\u5B57\u7B26\u4E32\u8FDB\u884C\u64CD\u4F5C\uFF0C\u800C\u65E0\u9700\u8BBF\u95EE\u6587\u4EF6\u7CFB\u7EDF\u3002\u8FD9\u4F7F\u5176\u975E\u5E38\u9002\u5408\u5728\u6CA1\u6709\u6587\u4EF6\u7CFB\u7EDF\u7684\u73AF\u5883\uFF08\u4F8B\u5982\u6D4F\u89C8\u5668\uFF09\u4E2D\u4F7F\u7528\u6216\u4F5C\u4E3A\u5176\u4ED6\u5DE5\u5177\u94FE\u7684\u4E00\u90E8\u5206\u4F7F\u7528\u3002\u4E0B\u9762\u662F\u4E00\u4E2A\u7B80\u5355\u7684\u8F6C\u6362\uFF1A</p><blockquote><p>cli</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&#39;let x: number = 1&#39;</span> <span class="token operator">|</span> esbuild --loader<span class="token operator">=</span>ts
<span class="token builtin class-name">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>js</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span><span class="token string">&#39;let x: number = 1&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;ts&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;let x = 1;\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>go</p></blockquote><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span><span class="token string">&quot;let x: number = 1&quot;</span><span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Loader<span class="token punctuation">:</span> api<span class="token punctuation">.</span>LoaderTS<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u672A\u63D0\u4F9B\u8F93\u5165\u6587\u4EF6\u4E14\u4E0D\u5B58\u5728 --bundle \u6807\u5FD7\uFF0C\u5219\u547D\u4EE4\u884C\u754C\u9762\u5C06\u4F7F\u7528\u6B64 API \u8C03\u7528\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u8F93\u5165\u5B57\u7B26\u4E32\u6765\u81EA\u6807\u51C6\u8F93\u5165\uFF0C\u8F93\u51FA\u5B57\u7B26\u4E32\u8FDB\u5165\u6807\u51C6\u8F93\u51FA\u3002\u8F6C\u6362 API \u53EF\u4EE5\u91C7\u7528\u4EE5\u4E0B\u9009\u9879\uFF1A</p><h3 id="\u57FA\u7840\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u57FA\u7840\u914D\u7F6E" aria-hidden="true">#</a> \u57FA\u7840\u914D\u7F6E</h3>`,11),v=s("Define"),m=s("Format"),b=s("Loader"),g=s("Minify"),h=s("SourceMap"),f=s("Target"),_=n("h3",{id:"\u9AD8\u7EA7\u914D\u7F6E",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u9AD8\u7EA7\u914D\u7F6E","aria-hidden":"true"},"#"),s(" \u9AD8\u7EA7\u914D\u7F6E")],-1),y=s("Banner"),q=s("Charset"),j=s("Color"),w=s("Footer"),x=s("Global name"),S=s("JSX"),E=s("JSX factory"),P=s("JSX fragment"),B=s("Keep names"),O=s("Legal comments"),T=s("Log level"),C=s("Log limit"),I=s("Pure"),A=s("Source Root"),J=s("Sourcefile"),L=s("Sources Content"),M=s("Tree shaking"),W=s("Tsconfig raw"),F=n("h2",{id:"build-api",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#build-api","aria-hidden":"true"},"#"),s(" Build API")],-1),R=n("p",null,"\u6784\u5EFA API \u8C03\u7528\u5BF9\u6587\u4EF6\u7CFB\u7EDF\u4E2D\u7684\u4E00\u4E2A\u6216\u591A\u4E2A\u6587\u4EF6\u8FDB\u884C\u64CD\u4F5C\u3002\u8FD9\u5141\u8BB8\u6587\u4EF6\u76F8\u4E92\u5F15\u7528\u5E76\u6346\u7ED1\u5728\u4E00\u8D77\u3002\u4E0B\u9762\u662F\u4E00\u4E2A\u7B80\u5355\u7684\u6784\u5EFA",-1),D=n("div",null,[n("div",{title:"cli",active:""},[n("div",{class:"language-bash ext-sh line-numbers-mode"},[n("pre",{class:"language-bash"},[n("code",null,[n("span",{class:"token builtin class-name"},"echo"),s(),n("span",{class:"token string"},"'let x: number = 1'"),s(),n("span",{class:"token operator"},">"),s(` in.ts
esbuild in.ts --outfile`),n("span",{class:"token operator"},"="),s(`out.js
`),n("span",{class:"token function"},"cat"),s(` out.js
`),n("span",{class:"token builtin class-name"},"let"),s(" x "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])])]),n("div",{title:"js"},[n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'fs'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"writeFileSync"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'in.ts'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'let x: number = 1'"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'esbuild'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"buildSync"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"entryPoints"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'in.ts'"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token literal-property property"},"outfile"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'out.js'"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"errors"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"warnings"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'fs'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"readFileSync"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'out.js'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'utf8'"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token string"},"'let x = 1;\\n'"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])])]),n("div",{title:"go"},[n("div",{class:"language-go ext-go line-numbers-mode"},[n("pre",{class:"language-go"},[n("code",null,[n("span",{class:"token keyword"},"package"),s(` main

`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token string"},'"io/ioutil"'),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token string"},'"github.com/evanw/esbuild/pkg/api"'),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token string"},'"os"'),s(`

`),n("span",{class:"token keyword"},"func"),s(),n("span",{class:"token function"},"main"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  ioutil`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"WriteFile"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"in.ts"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token function"},"byte"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"let x: number = 1"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0644"),n("span",{class:"token punctuation"},")"),s(`

  result `),n("span",{class:"token operator"},":="),s(" api"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Build"),n("span",{class:"token punctuation"},"("),s("api"),n("span",{class:"token punctuation"},"."),s("BuildOptions"),n("span",{class:"token punctuation"},"{"),s(`
    EntryPoints`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token string"},'"in.ts"'),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    Outfile`),n("span",{class:"token punctuation"},":"),s("     "),n("span",{class:"token string"},'"out.js"'),n("span",{class:"token punctuation"},","),s(`
    Write`),n("span",{class:"token punctuation"},":"),s("       "),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

  `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token function"},"len"),n("span",{class:"token punctuation"},"("),s("result"),n("span",{class:"token punctuation"},"."),s("Errors"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},">"),s(),n("span",{class:"token number"},"0"),s(),n("span",{class:"token punctuation"},"{"),s(`
    os`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Exit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])])])],-1),U=n("p",null,"\u5982\u679C\u63D0\u4F9B\u4E86\u81F3\u5C11\u4E00\u4E2A\u8F93\u5165\u6587\u4EF6\u6216\u5B58\u5728 --bundle \u6807\u5FD7\uFF0C\u5219\u547D\u4EE4\u884C\u754C\u9762\u5C06\u4F7F\u7528\u6B64 API \u8C03\u7528\u3002\u8BF7\u6CE8\u610F\uFF0C\u9ED8\u8BA4\u60C5\u51B5\u4E0B esbuild \u4E0D\u6346\u7ED1\u3002\u60A8\u5FC5\u987B\u663E\u5F0F\u4F20\u9012 --bundle \u6807\u5FD7\u4EE5\u542F\u7528\u6346\u7ED1\u3002\u5982\u679C\u672A\u63D0\u4F9B\u8F93\u5165\u6587\u4EF6\uFF0C\u5219\u4ECE\u6807\u51C6\u8F93\u5165\u8BFB\u53D6\u5355\u4E2A\u8F93\u5165\u6587\u4EF6\u3002\u6784\u5EFA API \u53EF\u4EE5\u91C7\u7528\u4EE5\u4E0B\u9009\u9879\uFF1A",-1),N=n("h3",{id:"\u57FA\u7840\u914D\u7F6E-1",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u57FA\u7840\u914D\u7F6E-1","aria-hidden":"true"},"#"),s(" \u57FA\u7840\u914D\u7F6E")],-1),G=s("Bundle"),X=s("Define"),H=s("Entry points"),z=s("External"),V=s("Format"),K=s("Inject"),$=s("Loader"),Y=s("Minify"),Q=s("Outdir"),Z=s("Outfile"),nn=s("Platform"),sn=s("Serve"),an=s("Sourcemap"),tn=s("Splitting"),en=s("Target"),pn=s("Watch"),on=s("Write"),cn=n("h3",{id:"\u9AD8\u7EA7\u914D\u7F6E-1",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u9AD8\u7EA7\u914D\u7F6E-1","aria-hidden":"true"},"#"),s(" \u9AD8\u7EA7\u914D\u7F6E")],-1),ln=s("Allow overwrite"),un=s("Asset names"),rn=s("Banner"),dn=s("Charset"),kn=s("Chunk names"),vn=s("Color"),mn=s("Conditions"),bn=s("Entry names"),gn=s("Footer"),hn=s("Global name"),fn=s("Incremental"),_n=s("JSX"),yn=s("JSX factory"),qn=s("JSX fragment"),jn=s("Keep names"),wn=s("Legal comments"),xn=s("Log level"),Sn=s("Log limit"),En=s("Main fields"),Pn=s("Metafile"),Bn=s("Node paths"),On=s("Out extension"),Tn=s("Outbase"),Cn=s("Preserve symlinks"),In=s("Public path"),An=s("Pure"),Jn=s("Resolve extensions"),Ln=s("Source Root"),Mn=s("Sourcefile"),Wn=s("Sources Content"),Fn=s("Stdin"),Rn=s("Tree shaking"),Dn=s("Tsconfig"),Un=s("Working directory"),Nn=n("h2",{id:"simple-options",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#simple-options","aria-hidden":"true"},"#"),s(" Simple options")],-1),Gn=n("h3",{id:"bundle",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#bundle","aria-hidden":"true"},"#"),s(" Bundle")],-1),Xn=n("p",null,"\u652F\u6301: Build",-1),Hn=n("p",null,"\u6346\u7ED1\u6587\u4EF6\u610F\u5473\u7740\u5C06\u4EFB\u4F55\u5BFC\u5165\u7684\u4F9D\u8D56\u9879\u5185\u8054\u5230\u6587\u4EF6\u672C\u8EAB\u4E2D\u3002\u6B64\u8FC7\u7A0B\u662F\u9012\u5F52\u7684\uFF0C\u56E0\u6B64\u4F9D\u8D56\u9879\uFF08\u7B49\u7B49\uFF09\u7684\u4F9D\u8D56\u9879\u4E5F\u5C06\u88AB\u5185\u8054\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Cesbuild \u4E0D\u4F1A\u6346\u7ED1\u8F93\u5165\u6587\u4EF6\u3002\u5FC5\u987B\u50CF\u8FD9\u6837\u663E\u5F0F\u542F\u7528\u6346\u7ED1\uFF1A",-1),zn=n("div",null,[n("div",{title:"cli",active:""},[n("div",{class:"language-s ext-s line-numbers-mode"},[n("pre",{class:"language-s"},[n("code",null,`esbuild in.js --bundle
`)]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])])]),n("div",{title:"js"},[n("div",{class:"language-javascript ext-js line-numbers-mode"},[n("pre",{class:"language-javascript"},[n("code",null,[s(`
`),n("span",{class:"token function"},"require"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'esbuild'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"buildSync"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"entryPoints"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'in.js'"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token literal-property property"},"bundle"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token literal-property property"},"outfile"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'out.js'"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"errors"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"warnings"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])])]),n("div",{title:"go"},[n("div",{class:"language-go ext-go line-numbers-mode"},[n("pre",{class:"language-go"},[n("code",null,[s(`
`),n("span",{class:"token keyword"},"package"),s(` main

`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token string"},'"github.com/evanw/esbuild/pkg/api"'),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token string"},'"os"'),s(`

`),n("span",{class:"token keyword"},"func"),s(),n("span",{class:"token function"},"main"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
  result `),n("span",{class:"token operator"},":="),s(" api"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Build"),n("span",{class:"token punctuation"},"("),s("api"),n("span",{class:"token punctuation"},"."),s("BuildOptions"),n("span",{class:"token punctuation"},"{"),s(`
    EntryPoints`),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token builtin"},"string"),n("span",{class:"token punctuation"},"{"),n("span",{class:"token string"},'"in.js"'),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
    Bundle`),n("span",{class:"token punctuation"},":"),s("      "),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),s(`

  `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token function"},"len"),n("span",{class:"token punctuation"},"("),s("result"),n("span",{class:"token punctuation"},"."),s("Errors"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},">"),s(),n("span",{class:"token number"},"0"),s(),n("span",{class:"token punctuation"},"{"),s(`
    os`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"Exit"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token punctuation"},"}"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])])])],-1),Vn=p(`<p>\u8BF7\u6CE8\u610F\uFF0C\u6346\u7ED1\u4E0E\u6587\u4EF6\u4E32\u8054\u4E0D\u540C\u3002\u5728\u542F\u7528\u6346\u7ED1\u7684\u60C5\u51B5\u4E0B\u4F20\u9012 esbuild \u591A\u4E2A\u8F93\u5165\u6587\u4EF6\u5C06\u521B\u5EFA\u591A\u4E2A\u5355\u72EC\u7684\u6346\u7ED1\u5305\uFF0C\u800C\u4E0D\u662F\u5C06\u8F93\u5165\u6587\u4EF6\u8FDE\u63A5\u5728\u4E00\u8D77\u3002\u8981\u5C06\u4E00\u7EC4\u6587\u4EF6\u4E0E esbuild \u8FDE\u63A5\u5728\u4E00\u8D77\uFF0C\u8BF7\u5C06\u5B83\u4EEC\u5168\u90E8\u5BFC\u5165\u5230\u4E00\u4E2A\u5355\u4E00\u7684\u5165\u53E3\u70B9\u6587\u4EF6\u4E2D\uFF0C\u5E76\u5C06\u8BE5\u6587\u4EF6\u4E0E esbuild \u6346\u7ED1\u5728\u4E00\u8D77\u3002</p><p>\u53E6\u8BF7\u6CE8\u610F\uFF0C\u6346\u7ED1\u4EC5\u9002\u7528\u4E8E\u9759\u6001\u5B9A\u4E49\u7684\u5BFC\u5165\uFF08\u5373\u5F53\u5BFC\u5165\u8DEF\u5F84\u662F\u5B57\u7B26\u4E32\u6587\u5B57\u65F6\uFF09\u3002\u5728\u8FD0\u884C\u65F6\u5B9A\u4E49\u7684\u5BFC\u5165\uFF08\u5373\u4F9D\u8D56\u4E8E\u8FD0\u884C\u65F6\u4EE3\u7801\u8BC4\u4F30\u7684\u5BFC\u5165\uFF09\u4E0D\u4F1A\u88AB\u6346\u7ED1\uFF0C\u56E0\u4E3A\u6346\u7ED1\u662F\u4E00\u4E2A\u7F16\u8BD1\u65F6\u64CD\u4F5C\u3002\u5982\u679C\u60A8\u9700\u8981\u6346\u7ED1\u6267\u884C\u6B64\u64CD\u4F5C\u7684\u4EE3\u7801\uFF0C\u60A8\u53EF\u80FD\u9700\u8981\u4F7F\u7528\u53E6\u4E00\u4E2A\u6346\u7ED1\u5668\u800C\u4E0D\u662F esbuild\u3002\u4F8B\u5982\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Static imports (will be bundled by esbuild)</span>
<span class="token keyword">import</span> <span class="token string">&#39;pkg&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;pkg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;pkg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Dynamic imports (will not be bundled by esbuild)</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">pkg/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>foo<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">pkg/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>foo<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token string">&#39;pkg&#39;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>require<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="define" tabindex="-1"><a class="header-anchor" href="#define" aria-hidden="true">#</a> Define</h3><p>\u652F\u6301: Transform | Build</p><p>\u6B64\u529F\u80FD\u63D0\u4F9B\u4E86\u4E00\u79CD\u7528\u5E38\u91CF\u8868\u8FBE\u5F0F\u66FF\u6362\u5168\u5C40\u6807\u8BC6\u7B26\u7684\u65B9\u6CD5\u3002\u5B83\u53EF\u4EE5\u662F\u4E00\u79CD\u5728\u6784\u5EFA\u4E4B\u95F4\u66F4\u6539\u67D0\u4E9B\u4EE3\u7801\u884C\u4E3A\u800C\u4E0D\u66F4\u6539\u4EE3\u7801\u672C\u8EAB\u7684\u65B9\u6CD5\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;DEBUG &amp;&amp; require(&quot;hooks&quot;)&#39;</span> <span class="token operator">|</span> esbuild --define:DEBUG<span class="token operator">=</span>true
require<span class="token punctuation">(</span><span class="token string">&quot;hooks&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;DEBUG &amp;&amp; require(&quot;hooks&quot;)&#39;</span> <span class="token operator">|</span> esbuild --define:DEBUG<span class="token operator">=</span>false
<span class="token boolean">false</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">let</span> js <span class="token operator">=</span> <span class="token string">&#39;DEBUG &amp;&amp; require(&quot;hooks&quot;)&#39;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">define</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token constant">DEBUG</span><span class="token operator">:</span> <span class="token string">&#39;true&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;require(&quot;hooks&quot;);\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">define</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token constant">DEBUG</span><span class="token operator">:</span> <span class="token string">&#39;false&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;false;\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  js <span class="token operator">:=</span> <span class="token string">&quot;DEBUG &amp;&amp; require(&#39;hooks&#39;)&quot;</span>

  result1 <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Define<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;DEBUG&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result1<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result1<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  result2 <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Define<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;DEBUG&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;false&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result2<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result2<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u66FF\u6362\u8868\u8FBE\u5F0F\u5FC5\u987B\u662F JSON \u5BF9\u8C61\uFF08\u7A7A\u503C\u3001\u5E03\u5C14\u503C\u3001\u6570\u5B57\u3001\u5B57\u7B26\u4E32\u3001\u6570\u7EC4\u6216\u5BF9\u8C61\uFF09\u6216\u5355\u4E2A\u6807\u8BC6\u7B26\u3002\u6570\u7EC4\u548C\u5BF9\u8C61\u4EE5\u5916\u7684\u66FF\u6362\u8868\u8FBE\u5F0F\u662F\u5185\u8054\u66FF\u6362\u7684\uFF0C\u8FD9\u610F\u5473\u7740\u5B83\u4EEC\u53EF\u4EE5\u53C2\u4E0E\u5E38\u91CF\u6298\u53E0\u3002\u6570\u7EC4\u548C\u5BF9\u8C61\u66FF\u6362\u8868\u8FBE\u5F0F\u5B58\u50A8\u5728\u53D8\u91CF\u4E2D\uFF0C\u7136\u540E\u4F7F\u7528\u6807\u8BC6\u7B26\u5F15\u7528\u800C\u4E0D\u662F\u5185\u8054\u66FF\u6362\uFF0C\u8FD9\u907F\u514D\u4E86\u66FF\u6362\u503C\u7684\u91CD\u590D\u526F\u672C\uFF0C\u4F46\u610F\u5473\u7740\u503C\u4E0D\u53C2\u4E0E\u5E38\u91CF\u6298\u53E0\u3002</p><p>\u5982\u679C\u60A8\u60F3\u7528\u5B57\u7B26\u4E32\u6587\u5B57\u66FF\u6362\u67D0\u4E9B\u5185\u5BB9\uFF0C\u8BF7\u8BB0\u4F4F\u4F20\u9012\u7ED9 esbuild \u7684\u66FF\u6362\u503C\u672C\u8EAB\u5FC5\u987B\u5305\u542B\u5F15\u53F7\u3002\u7701\u7565\u5F15\u53F7\u610F\u5473\u7740\u66FF\u6362\u503C\u662F\u4E00\u4E2A\u6807\u8BC6\u7B26\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;id, str&#39;</span> <span class="token operator">|</span> esbuild --define:id<span class="token operator">=</span>text --define:str<span class="token operator">=</span><span class="token punctuation">\\</span>&quot;text<span class="token punctuation">\\</span>&quot;
text, <span class="token string">&quot;text&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// js</span>

<span class="token keyword">let</span> js <span class="token operator">=</span> <span class="token string">&#39;DEBUG &amp;&amp; require(&quot;hooks&quot;)&#39;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">define</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token constant">DEBUG</span><span class="token operator">:</span> <span class="token string">&#39;true&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;require(&quot;hooks&quot;);\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">define</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token constant">DEBUG</span><span class="token operator">:</span> <span class="token string">&#39;false&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;false;\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// go</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  js <span class="token operator">:=</span> <span class="token string">&quot;DEBUG &amp;&amp; require(&#39;hooks&#39;)&quot;</span>

  result1 <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Define<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;DEBUG&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result1<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result1<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  result2 <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Define<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;DEBUG&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;false&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result2<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result2<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u66FF\u6362\u8868\u8FBE\u5F0F\u5FC5\u987B\u662F JSON \u5BF9\u8C61\uFF08\u7A7A\u503C\u3001\u5E03\u5C14\u503C\u3001\u6570\u5B57\u3001\u5B57\u7B26\u4E32\u3001\u6570\u7EC4\u6216\u5BF9\u8C61\uFF09\u6216\u5355\u4E2A\u6807\u8BC6\u7B26\u3002\u6570\u7EC4\u548C\u5BF9\u8C61\u4EE5\u5916\u7684\u66FF\u6362\u8868\u8FBE\u5F0F\u662F\u5185\u8054\u66FF\u6362\u7684\uFF0C\u8FD9\u610F\u5473\u7740\u5B83\u4EEC\u53EF\u4EE5\u53C2\u4E0E\u5E38\u91CF\u6298\u53E0\u3002\u6570\u7EC4\u548C\u5BF9\u8C61\u66FF\u6362\u8868\u8FBE\u5F0F\u5B58\u50A8\u5728\u53D8\u91CF\u4E2D\uFF0C\u7136\u540E\u4F7F\u7528\u6807\u8BC6\u7B26\u5F15\u7528\u800C\u4E0D\u662F\u5185\u8054\u66FF\u6362\uFF0C\u8FD9\u907F\u514D\u4E86\u66FF\u6362\u503C\u7684\u91CD\u590D\u526F\u672C\uFF0C\u4F46\u610F\u5473\u7740\u503C\u4E0D\u53C2\u4E0E\u5E38\u91CF\u6298\u53E0\u3002</p><p>\u5982\u679C\u60A8\u60F3\u7528\u5B57\u7B26\u4E32\u6587\u5B57\u66FF\u6362\u67D0\u4E9B\u5185\u5BB9\uFF0C\u8BF7\u8BB0\u4F4F\u4F20\u9012\u7ED9 esbuild \u7684\u66FF\u6362\u503C\u672C\u8EAB\u5FC5\u987B\u5305\u542B\u5F15\u53F7\u3002\u7701\u7565\u5F15\u53F7\u610F\u5473\u7740\u66FF\u6362\u503C\u662F\u4E00\u4E2A\u6807\u8BC6\u7B26\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;id, str&#39;</span> <span class="token operator">|</span> esbuild --define:id<span class="token operator">=</span>text --define:str<span class="token operator">=</span><span class="token punctuation">\\</span>&quot;text<span class="token punctuation">\\</span>&quot;
text, <span class="token string">&quot;text&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">let</span> js <span class="token operator">=</span> <span class="token string">&#39;DEBUG &amp;&amp; require(&quot;hooks&quot;)&#39;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">define</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token constant">DEBUG</span><span class="token operator">:</span> <span class="token string">&#39;true&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;require(&quot;hooks&quot;);\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">define</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token constant">DEBUG</span><span class="token operator">:</span> <span class="token string">&#39;false&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;false;\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  js <span class="token operator">:=</span> <span class="token string">&quot;DEBUG &amp;&amp; require(&#39;hooks&#39;)&quot;</span>

  result1 <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Define<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;DEBUG&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result1<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result1<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  result2 <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Define<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;DEBUG&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;false&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result2<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result2<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u66FF\u6362\u8868\u8FBE\u5F0F\u5FC5\u987B\u662F JSON \u5BF9\u8C61\uFF08\u7A7A\u503C\u3001\u5E03\u5C14\u503C\u3001\u6570\u5B57\u3001\u5B57\u7B26\u4E32\u3001\u6570\u7EC4\u6216\u5BF9\u8C61\uFF09\u6216\u5355\u4E2A\u6807\u8BC6\u7B26\u3002\u6570\u7EC4\u548C\u5BF9\u8C61\u4EE5\u5916\u7684\u66FF\u6362\u8868\u8FBE\u5F0F\u662F\u5185\u8054\u66FF\u6362\u7684\uFF0C\u8FD9\u610F\u5473\u7740\u5B83\u4EEC\u53EF\u4EE5\u53C2\u4E0E\u5E38\u91CF\u6298\u53E0\u3002\u6570\u7EC4\u548C\u5BF9\u8C61\u66FF\u6362\u8868\u8FBE\u5F0F\u5B58\u50A8\u5728\u53D8\u91CF\u4E2D\uFF0C\u7136\u540E\u4F7F\u7528\u6807\u8BC6\u7B26\u5F15\u7528\u800C\u4E0D\u662F\u5185\u8054\u66FF\u6362\uFF0C\u8FD9\u907F\u514D\u4E86\u66FF\u6362\u503C\u7684\u91CD\u590D\u526F\u672C\uFF0C\u4F46\u610F\u5473\u7740\u503C\u4E0D\u53C2\u4E0E\u5E38\u91CF\u6298\u53E0\u3002</p><p>\u5982\u679C\u60A8\u60F3\u7528\u5B57\u7B26\u4E32\u6587\u5B57\u66FF\u6362\u67D0\u4E9B\u5185\u5BB9\uFF0C\u8BF7\u8BB0\u4F4F\u4F20\u9012\u7ED9 esbuild \u7684\u66FF\u6362\u503C\u672C\u8EAB\u5FC5\u987B\u5305\u542B\u5F15\u53F7\u3002\u7701\u7565\u5F15\u53F7\u610F\u5473\u7740\u66FF\u6362\u503C\u662F\u4E00\u4E2A\u6807\u8BC6\u7B26\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;id, str&#39;</span> <span class="token operator">|</span> esbuild --define:id<span class="token operator">=</span>text --define:str<span class="token operator">=</span><span class="token punctuation">\\</span>&quot;text<span class="token punctuation">\\</span>&quot;
text, <span class="token string">&quot;text&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">let</span> js <span class="token operator">=</span> <span class="token string">&#39;DEBUG &amp;&amp; require(&quot;hooks&quot;)&#39;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">define</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token constant">DEBUG</span><span class="token operator">:</span> <span class="token string">&#39;true&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;require(&quot;hooks&quot;);\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">define</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token constant">DEBUG</span><span class="token operator">:</span> <span class="token string">&#39;false&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;false;\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  js <span class="token operator">:=</span> <span class="token string">&quot;DEBUG &amp;&amp; require(&#39;hooks&#39;)&quot;</span>

  result1 <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Define<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;DEBUG&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result1<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result1<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  result2 <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Define<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;DEBUG&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;false&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result2<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result2<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u66FF\u6362\u8868\u8FBE\u5F0F\u5FC5\u987B\u662F JSON \u5BF9\u8C61\uFF08\u7A7A\u503C\u3001\u5E03\u5C14\u503C\u3001\u6570\u5B57\u3001\u5B57\u7B26\u4E32\u3001\u6570\u7EC4\u6216\u5BF9\u8C61\uFF09\u6216\u5355\u4E2A\u6807\u8BC6\u7B26\u3002\u6570\u7EC4\u548C\u5BF9\u8C61\u4EE5\u5916\u7684\u66FF\u6362\u8868\u8FBE\u5F0F\u662F\u5185\u8054\u66FF\u6362\u7684\uFF0C\u8FD9\u610F\u5473\u7740\u5B83\u4EEC\u53EF\u4EE5\u53C2\u4E0E\u5E38\u91CF\u6298\u53E0\u3002\u6570\u7EC4\u548C\u5BF9\u8C61\u66FF\u6362\u8868\u8FBE\u5F0F\u5B58\u50A8\u5728\u53D8\u91CF\u4E2D\uFF0C\u7136\u540E\u4F7F\u7528\u6807\u8BC6\u7B26\u5F15\u7528\u800C\u4E0D\u662F\u5185\u8054\u66FF\u6362\uFF0C\u8FD9\u907F\u514D\u4E86\u66FF\u6362\u503C\u7684\u91CD\u590D\u526F\u672C\uFF0C\u4F46\u610F\u5473\u7740\u503C\u4E0D\u53C2\u4E0E\u5E38\u91CF\u6298\u53E0\u3002</p><p>\u5982\u679C\u60A8\u60F3\u7528\u5B57\u7B26\u4E32\u6587\u5B57\u66FF\u6362\u67D0\u4E9B\u5185\u5BB9\uFF0C\u8BF7\u8BB0\u4F4F\u4F20\u9012\u7ED9 esbuild \u7684\u66FF\u6362\u503C\u672C\u8EAB\u5FC5\u987B\u5305\u542B\u5F15\u53F7\u3002\u7701\u7565\u5F15\u53F7\u610F\u5473\u7740\u66FF\u6362\u503C\u662F\u4E00\u4E2A\u6807\u8BC6\u7B26\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;id, str&#39;</span> <span class="token operator">|</span> esbuild --define:id<span class="token operator">=</span>text --define:str<span class="token operator">=</span><span class="token punctuation">\\</span>&quot;text<span class="token punctuation">\\</span>&quot;
text, <span class="token string">&quot;text&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span><span class="token string">&#39;id, str&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">define</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;text&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">str</span><span class="token operator">:</span> <span class="token string">&#39;&quot;text&quot;&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;text, &quot;text&quot;;\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span><span class="token string">&quot;id, text&quot;</span><span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Define<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>
      <span class="token string">&quot;id&quot;</span><span class="token punctuation">:</span>  <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;str&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;\\&quot;text\\&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u5982\u679C\u60A8\u4F7F\u7528\u7684\u662F CLI\uFF0C\u8BF7\u8BB0\u4F4F\uFF0C\u4E0D\u540C\u7684 shell \u5BF9\u5982\u4F55\u8F6C\u4E49\u53CC\u5F15\u53F7\u5B57\u7B26\uFF08\u5F53\u66FF\u6362\u503C\u662F\u5B57\u7B26\u4E32\u65F6\u8FD9\u662F\u5FC5\u9700\u7684\uFF09\u6709\u4E0D\u540C\u7684\u89C4\u5219\u3002\u4F7F\u7528 &quot; \u53CD\u659C\u6760\u8F6C\u4E49\uFF0C\u56E0\u4E3A\u5B83\u9002\u7528\u4E8E bash \u548C Windows \u547D\u4EE4\u63D0\u793A\u7B26\u3002\u5728 bash \u4E2D\u5DE5\u4F5C\u7684\u5176\u4ED6\u8F6C\u4E49\u53CC\u5F15\u53F7\u7684\u65B9\u6CD5\uFF08\u4F8B\u5982\u7528\u5355\u5F15\u53F7\u5C06\u5B83\u4EEC\u62EC\u8D77\u6765\uFF09\u5728 Windows \u4E0A\u4E0D\u8D77\u4F5C\u7528\uFF0C\u56E0\u4E3A Windows \u547D\u4EE4\u63D0\u793A\u7B26\u4E0D\u4F1A\u5220\u9664\u5355\u5F15\u53F7. \u5F53\u5728 package.json \u6587\u4EF6\u4E2D\u4F7F\u7528 npm \u811A\u672C\u4E2D\u7684 CLI \u65F6\uFF0C\u8FD9\u662F\u76F8\u5173\u7684\uFF0C\u4EBA\u4EEC\u5E0C\u671B\u5B83\u53EF\u4EE5\u5728\u6240\u6709\u5E73\u53F0\u4E0A\u5DE5\u4F5C\uFF1A</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esbuild --define:p<wbr>rocess.env.NODE_ENV=\\\\\\&quot;production\\\\\\&quot; app.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u60A8\u4ECD\u7136\u9047\u5230\u4F7F\u7528\u4E0D\u540C shell \u7684\u8DE8\u5E73\u53F0\u62A5\u4EF7\u8F6C\u4E49\u95EE\u9898\uFF0C\u60A8\u53EF\u80FD\u5E0C\u671B\u6539\u7528 JavaScript API\u3002\u5728\u90A3\u91CC\u60A8\u53EF\u4EE5\u4F7F\u7528\u5E38\u89C4 JavaScript \u8BED\u6CD5\u6765\u6D88\u9664\u8DE8\u5E73\u53F0\u5DEE\u5F02\u3002</p><h3 id="entry-points" tabindex="-1"><a class="header-anchor" href="#entry-points" aria-hidden="true">#</a> Entry points</h3><p>\u652F\u6301: Build</p><p>\u8FD9\u662F\u4E00\u4E2A\u6587\u4EF6\u6570\u7EC4\uFF0C\u6BCF\u4E2A\u6587\u4EF6\u90FD\u7528\u4F5C\u6346\u7ED1\u7B97\u6CD5\u7684\u8F93\u5165\u3002\u5B83\u4EEC\u88AB\u79F0\u4E3A\u201C\u5165\u53E3\u70B9\u201D\uFF0C\u56E0\u4E3A\u6BCF\u4E2A\u5165\u53E3\u70B9\u90FD\u662F\u88AB\u8BC4\u4F30\u7684\u521D\u59CB\u811A\u672C\uFF0C\u7136\u540E\u52A0\u8F7D\u5B83\u6240\u4EE3\u8868\u7684\u4EE3\u7801\u7684\u6240\u6709\u5176\u4ED6\u65B9\u9762\u3002\u4E0D\u662F\u4F7F\u7528 <code>&lt;script&gt;</code> \u6807\u7B7E\u5728\u9875\u9762\u4E2D\u52A0\u8F7D\u8BB8\u591A\u5E93\uFF0C\u800C\u662F\u4F7F\u7528 <code>import</code> \u8BED\u53E5\u5C06\u5B83\u4EEC\u5BFC\u5165\u5230\u60A8\u7684\u5165\u53E3\u70B9\uFF08\u6216\u53E6\u4E00\u4E2A\u6587\u4EF6\uFF0C\u7136\u540E\u5BFC\u5165\u5230\u60A8\u7684\u5165\u53E3\u70B9\uFF09\u3002</p><p>\u7B80\u5355\u7684\u5E94\u7528\u7A0B\u5E8F\u53EA\u9700\u8981\u4E00\u4E2A\u5165\u53E3\u70B9\uFF0C\u4F46\u5982\u679C\u6709\u591A\u4E2A\u903B\u8F91\u4E0A\u72EC\u7ACB\u7684\u4EE3\u7801\u7EC4\uFF08\u4F8B\u5982\u4E3B\u7EBF\u7A0B\u548C\u5DE5\u4F5C\u7EBF\u7A0B\uFF09\uFF0C\u6216\u8005\u5E94\u7528\u7A0B\u5E8F\u5177\u6709\u72EC\u7ACB\u7684\u76F8\u5BF9\u4E0D\u76F8\u5173\u7684\u533A\u57DF\uFF08\u4F8B\u5982\u7740\u9646\u9875\u3001\u7F16\u8F91\u5668\uFF09\uFF0C\u5219\u9644\u52A0\u5165\u53E3\u70B9\u4F1A\u5F88\u6709\u7528\u9875\u9762\u548C\u8BBE\u7F6E\u9875\u9762\u3002\u5355\u72EC\u7684\u5165\u53E3\u70B9\u6709\u52A9\u4E8E\u5F15\u5165\u5173\u6CE8\u70B9\u5206\u79BB\uFF0C\u5E76\u6709\u52A9\u4E8E\u51CF\u5C11\u6D4F\u89C8\u5668\u9700\u8981\u4E0B\u8F7D\u7684\u4E0D\u5FC5\u8981\u4EE3\u7801\u91CF\u3002\u5982\u679C\u9002\u7528\uFF0C\u5728\u6D4F\u89C8\u5230\u7B2C\u4E8C\u4E2A\u9875\u9762\u65F6\uFF0C\u542F\u7528\u4EE3\u7801\u62C6\u5206\u53EF\u4EE5\u8FDB\u4E00\u6B65\u51CF\u5C11\u4E0B\u8F7D\u5927\u5C0F\uFF0C\u7B2C\u4E8C\u4E2A\u9875\u9762\u7684\u5165\u53E3\u70B9\u4E0E\u5DF2\u7ECF\u8BBF\u95EE\u8FC7\u7684\u7B2C\u4E00\u4E2A\u9875\u9762\u5171\u4EAB\u4E00\u4E9B\u5DF2\u4E0B\u8F7D\u7684\u4EE3\u7801\u3002</p><p>\u6307\u5B9A\u5165\u53E3\u70B9\u7684\u7B80\u5355\u65B9\u6CD5\u662F\u53EA\u4F20\u9012\u4E00\u4E2A\u6587\u4EF6\u8DEF\u5F84\u6570\u7EC4\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>esbuild home.ts settings.ts --bundle --outdir<span class="token operator">=</span>out
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;home.ts&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;settings.ts&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">write</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outdir</span><span class="token operator">:</span> <span class="token string">&#39;out&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;home.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;settings.ts&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>       <span class="token boolean">true</span><span class="token punctuation">,</span>
    Outdir<span class="token punctuation">:</span>      <span class="token string">&quot;out&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u8FD9\u5C06\u751F\u6210\u4E24\u4E2A\u8F93\u51FA\u6587\u4EF6\uFF0C<code>out/home.js</code> \u548C <code>out/settings.js</code>\uFF0C\u5206\u522B\u5BF9\u5E94\u4E24\u4E2A\u5165\u53E3\u70B9 <code>home.ts</code> \u548C <code>settings.ts</code>\u3002</p><p>\u4E3A\u4E86\u8FDB\u4E00\u6B65\u63A7\u5236\u5982\u4F55\u4ECE\u76F8\u5E94\u7684\u8F93\u5165\u5165\u53E3\u70B9\u6D3E\u751F\u8F93\u51FA\u6587\u4EF6\u7684\u8DEF\u5F84\uFF0C\u60A8\u5E94\u8BE5\u67E5\u770B\u4EE5\u4E0B\u9009\u9879\uFF1A</p><ul><li><p><a href="">Entry names</a></p></li><li><p><a href="">Out extension</a></p></li><li><p><a href="">Outbase</a></p></li><li><p><a href="">Outdir</a></p></li><li><p><a href="">Outfile</a></p></li></ul><p>\u6B64\u5916\uFF0C\u60A8\u8FD8\u53EF\u4EE5\u4F7F\u7528\u66FF\u4EE3\u5165\u53E3\u70B9\u8BED\u6CD5\u4E3A\u6BCF\u4E2A\u5355\u72EC\u7684\u5165\u53E3\u70B9\u6307\u5B9A\u5B8C\u5168\u81EA\u5B9A\u4E49\u7684\u8F93\u51FA\u8DEF\u5F84\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>esbuild <span class="token assign-left variable">out1</span><span class="token operator">=</span>home.js <span class="token assign-left variable">out2</span><span class="token operator">=</span>settings.js --bundle --outdir<span class="token operator">=</span>out
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">out1</span><span class="token operator">:</span> <span class="token string">&#39;home.js&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">out2</span><span class="token operator">:</span> <span class="token string">&#39;settings.js&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">write</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outdir</span><span class="token operator">:</span> <span class="token string">&#39;out&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPointsAdvanced<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>api<span class="token punctuation">.</span>EntryPoint<span class="token punctuation">{</span><span class="token punctuation">{</span>
      OutputPath<span class="token punctuation">:</span> <span class="token string">&quot;out1&quot;</span><span class="token punctuation">,</span>
      InputPath<span class="token punctuation">:</span>  <span class="token string">&quot;home.js&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      OutputPath<span class="token punctuation">:</span> <span class="token string">&quot;out2&quot;</span><span class="token punctuation">,</span>
      InputPath<span class="token punctuation">:</span>  <span class="token string">&quot;settings.js&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>  <span class="token boolean">true</span><span class="token punctuation">,</span>
    Outdir<span class="token punctuation">:</span> <span class="token string">&quot;out&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u8FD9\u5C06\u751F\u6210\u4E24\u4E2A\u8F93\u51FA\u6587\u4EF6\uFF0C<code>out/out1.js</code> \u548C <code>out/out2.j</code>s\uFF0C\u5206\u522B\u5BF9\u5E94\u4E24\u4E2A\u5165\u53E3\u70B9 <code>home.ts</code> \u548C <code>settings.ts</code>\u3002</p><h3 id="external" tabindex="-1"><a class="header-anchor" href="#external" aria-hidden="true">#</a> External</h3><p>\u652F\u6301: Build</p><p>\u60A8\u53EF\u4EE5\u5C06\u6587\u4EF6\u6216\u5305\u6807\u8BB0\u4E3A\u5916\u90E8\u4EE5\u5C06\u5176\u4ECE\u6784\u5EFA\u4E2D\u6392\u9664\u3002\u5BFC\u5165\u4E0D\u4F1A\u88AB\u6346\u7ED1\uFF0C\u800C\u662F\u88AB\u4FDD\u7559\uFF08\u5BF9 <code>iife</code> \u548C <code>cjs</code> \u683C\u5F0F\u4F7F\u7528 <code>require</code>\uFF0C\u5BF9 <code>esm</code> \u683C\u5F0F\u4F7F\u7528 <code>import</code>\uFF09\u5E76\u5C06\u5728\u8FD0\u884C\u65F6\u8FDB\u884C\u8BC4\u4F30\u3002</p><p>\u8FD9\u6709\u591A\u79CD\u7528\u9014\u3002\u9996\u5148\uFF0C\u5B83\u53EF\u7528\u4E8E\u4ECE\u60A8\u7684\u5305\u4E2D\u4FEE\u526A\u4E0D\u5FC5\u8981\u7684\u4EE3\u7801\uFF0C\u4EE5\u4FBF\u60A8\u77E5\u9053\u6C38\u8FDC\u4E0D\u4F1A\u6267\u884C\u7684\u4EE3\u7801\u8DEF\u5F84\u3002\u4F8B\u5982\uFF0C\u4E00\u4E2A\u5305\u53EF\u80FD\u5305\u542B\u53EA\u5728 <code>node</code> \u4E2D\u8FD0\u884C\u7684\u4EE3\u7801\uFF0C\u4F46\u4F60\u53EA\u80FD\u5728\u6D4F\u89C8\u5668\u4E2D\u4F7F\u7528\u8BE5\u5305\u3002\u5B83\u8FD8\u53EF\u4EE5\u7528\u4E8E\u5728\u8FD0\u884C\u65F6\u4ECE\u65E0\u6CD5\u6346\u7ED1\u7684\u5305\u4E2D\u5BFC\u5165 <code>node</code> \u4E2D\u7684\u4EE3\u7801\u3002\u4F8B\u5982\uFF0C<code>fsevents</code> \u5305\u5305\u542B\u4E00\u4E2A\u539F\u751F\u6269\u5C55\uFF0C<code>esbuild</code> \u4E0D\u652F\u6301\u8BE5\u6269\u5C55\u3002\u5C06\u67D0\u4E9B\u5185\u5BB9\u6807\u8BB0\u4E3A\u5916\u90E8\u5185\u5BB9\u5982\u4E0B\u6240\u793A\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;require(&quot;fsevents&quot;)&#39;</span> <span class="token operator">&gt;</span> app.js
esbuild app.js --bundle --external:fsevents --platform<span class="token operator">=</span>node
// app.js
require<span class="token punctuation">(</span><span class="token string">&quot;fsevents&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;require(&quot;fsevents&quot;)&#39;</span><span class="token punctuation">)</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">platform</span><span class="token operator">:</span> <span class="token string">&#39;node&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">external</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;fsevents&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;io/ioutil&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  ioutil<span class="token punctuation">.</span><span class="token function">WriteFile</span><span class="token punctuation">(</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">&quot;require(\\&quot;fsevents\\&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0644</span><span class="token punctuation">)</span>

  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Outfile<span class="token punctuation">:</span>     <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>       <span class="token boolean">true</span><span class="token punctuation">,</span>
    Platform<span class="token punctuation">:</span>    api<span class="token punctuation">.</span>PlatformNode<span class="token punctuation">,</span>
    External<span class="token punctuation">:</span>    <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;fsevents&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u60A8\u8FD8\u53EF\u4EE5\u5728\u5916\u90E8\u8DEF\u5F84\u4E2D\u4F7F\u7528 <code>*</code> \u901A\u914D\u7B26\u5C06\u5339\u914D\u8BE5\u6A21\u5F0F\u7684\u6240\u6709\u6587\u4EF6\u6807\u8BB0\u4E3A\u5916\u90E8\u3002\u4F8B\u5982\uFF0C\u60A8\u53EF\u4EE5\u4F7F\u7528 <code>*.png</code> \u5220\u9664\u6240\u6709 <code>.png</code> \u6587\u4EF6\u6216\u4F7F\u7528 <code>/images/*</code> \u5220\u9664\u6240\u6709\u4EE5 <code>/images</code>/ \u5F00\u5934\u7684\u8DEF\u5F84\u3002\u5F53\u5916\u90E8\u8DEF\u5F84\u4E2D\u5B58\u5728 <code>*</code> \u901A\u914D\u7B26\u65F6\uFF0C\u8BE5\u6A21\u5F0F\u5C06\u5E94\u7528\u4E8E\u6E90\u4EE3\u7801\u4E2D\u7684\u539F\u59CB\u8DEF\u5F84\uFF0C\u800C\u4E0D\u662F\u89E3\u6790\u4E3A\u5B9E\u9645\u6587\u4EF6\u7CFB\u7EDF\u8DEF\u5F84\u540E\u7684\u8DEF\u5F84\u3002\u8FD9\u4F7F\u60A8\u53EF\u4EE5\u5339\u914D\u4E0D\u662F\u771F\u5B9E\u6587\u4EF6\u7CFB\u7EDF\u8DEF\u5F84\u7684\u8DEF\u5F84\u3002</p><h3 id="format" tabindex="-1"><a class="header-anchor" href="#format" aria-hidden="true">#</a> Format</h3><p>\u652F\u6301: Transform | Build</p><p>\u8FD9\u5C06\u8BBE\u7F6E\u751F\u6210\u7684 JavaScript \u6587\u4EF6\u7684\u8F93\u51FA\u683C\u5F0F\u3002\u76EE\u524D\u6709\u4E09\u4E2A\u53EF\u80FD\u7684\u503C\uFF1A<code>iife</code>\u3001<code>cjs</code> \u548C <code>esm</code>\u3002</p><h4 id="iife" tabindex="-1"><a class="header-anchor" href="#iife" aria-hidden="true">#</a> IIFE</h4><p><code>iife</code> \u683C\u5F0F\u4EE3\u8868\u201C\u7ACB\u5373\u8C03\u7528\u7684\u51FD\u6570\u8868\u8FBE\u5F0F\u201D\uFF0C\u65E8\u5728\u5728\u6D4F\u89C8\u5668\u4E2D\u8FD0\u884C\u3002\u5C06\u4EE3\u7801\u5305\u88C5\u5728\u51FD\u6570\u8868\u8FBE\u5F0F\u4E2D\u53EF\u786E\u4FDD\u4EE3\u7801\u4E2D\u7684\u4EFB\u4F55\u53D8\u91CF\u4E0D\u4F1A\u610F\u5916\u5730\u4E0E\u5168\u5C40\u8303\u56F4\u5185\u7684\u53D8\u91CF\u53D1\u751F\u51B2\u7A81\u3002\u5982\u679C\u60A8\u7684\u5165\u53E3\u70B9\u5177\u6709\u8981\u5728\u6D4F\u89C8\u5668\u4E2D\u516C\u5F00\u4E3A\u5168\u5C40\u7684\u5BFC\u51FA\uFF0C\u60A8\u53EF\u4EE5\u4F7F\u7528\u5168\u5C40\u540D\u79F0\u8BBE\u7F6E\u6765\u914D\u7F6E\u8BE5\u5168\u5C40\u7684\u540D\u79F0\u3002 <code>iife</code> \u683C\u5F0F\u662F\u9ED8\u8BA4\u683C\u5F0F\uFF0C\u9664\u975E\u60A8\u5C06\u5E73\u53F0\u8BBE\u7F6E\u4E3Anode\u3002\u4F7F\u7528\u5B83\u770B\u8D77\u6765\u50CF\u8FD9\u6837\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;alert(&quot;test&quot;)&#39;</span> <span class="token operator">|</span> esbuild --format<span class="token operator">=</span>iife
<span class="token punctuation">((</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  alert<span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">let</span> js <span class="token operator">=</span> <span class="token string">&#39;alert(&quot;test&quot;)&#39;</span>
<span class="token keyword">let</span> out <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;iife&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
process<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>out<span class="token punctuation">.</span>code<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  js <span class="token operator">:=</span> <span class="token string">&quot;alert(\\&quot;test\\&quot;)&quot;</span>

  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Format<span class="token punctuation">:</span> api<span class="token punctuation">.</span>FormatIIFE<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h4 id="commonjs" tabindex="-1"><a class="header-anchor" href="#commonjs" aria-hidden="true">#</a> CommonJS</h4>`,47),Kn=p("<code>cjs</code> \u683C\u5F0F\u4EE3\u8868\u201CCommonJS\u201D\uFF0C\u65E8\u5728\u5728 <code>node.js</code> \u4E2D\u8FD0\u884C\u3002\u5B83\u5047\u8BBE\u73AF\u5883\u5305\u542B<code>exports</code>, <code>require</code>, \u548C <code>module</code>\u3002\u4F7F\u7528 <code>ECMAScript</code> \u6A21\u5757\u8BED\u6CD5\u5BFC\u51FA\u7684\u5165\u53E3\u70B9\u5C06\u88AB\u8F6C\u6362\u4E3A\u4E00\u4E2A\u6A21\u5757\uFF0C\u6BCF\u4E2A\u5BFC\u51FA\u540D\u79F0\u7684\u5BFC\u51FA\u90FD\u6709\u4E00\u4E2A <code>getter</code>\u3002\u5F53\u60A8\u5C06 ",14),$n=s("platform"),Yn=s("\u8BBE\u7F6E\u4E3A"),Qn=n("code",null,"node",-1),Zn=s("\u65F6\uFF0C"),ns=n("code",null,"cjs",-1),ss=s(" \u683C\u5F0F\u662F\u9ED8\u8BA4\u683C\u5F0F\u3002\u4F7F\u7528\u5B83\u770B\u8D77\u6765\u50CF\u8FD9\u6837\uFF1A"),as=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;export default &quot;test&quot;&#39;</span> <span class="token operator">|</span> esbuild --format<span class="token operator">=</span>cjs
<span class="token punctuation">..</span>.
__export<span class="token punctuation">(</span>exports, <span class="token punctuation">{</span>
  default: <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> stdin_default
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
var stdin_default <span class="token operator">=</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">let</span> js <span class="token operator">=</span> <span class="token string">&#39;export default &quot;test&quot;&#39;</span>
<span class="token keyword">let</span> out <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;cjs&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
process<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>out<span class="token punctuation">.</span>code<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  js <span class="token operator">:=</span> <span class="token string">&quot;export default &#39;test&#39;&quot;</span>

  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Format<span class="token punctuation">:</span> api<span class="token punctuation">.</span>FormatCommonJS<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h4 id="esm" tabindex="-1"><a class="header-anchor" href="#esm" aria-hidden="true">#</a> ESM</h4><p><code>esm</code> \u683C\u5F0F\u4EE3\u8868\u201CECMAScript \u6A21\u5757\u201D\u3002\u5B83\u5047\u5B9A\u73AF\u5883\u652F\u6301<code>import</code>\u548C<code>export</code>\u8BED\u6CD5\u3002 <code>CommonJS</code> \u6A21\u5757\u8BED\u6CD5\u4E2D\u5E26\u6709\u5BFC\u51FA\u7684\u5165\u53E3\u70B9\u5C06\u88AB\u8F6C\u6362\u4E3A <code>module.exports</code> \u503C\u7684\u5355\u4E2A\u9ED8\u8BA4\u5BFC\u51FA\u3002\u4F7F\u7528\u5B83\u770B\u8D77\u6765\u50CF\u8FD9\u6837\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;module.exports = &quot;test&quot;&#39;</span> <span class="token operator">|</span> esbuild --format<span class="token operator">=</span>esm
<span class="token punctuation">..</span>.
var require_stdin <span class="token operator">=</span> __commonJS<span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string">&quot;&lt;stdin&gt;&quot;</span><span class="token punctuation">(</span>exports, module<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    module.exports <span class="token operator">=</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin class-name">export</span> default require_stdin<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">let</span> js <span class="token operator">=</span> <span class="token string">&#39;module.exports = &quot;test&quot;&#39;</span>
<span class="token keyword">let</span> out <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;esm&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
process<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>out<span class="token punctuation">.</span>code<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  js <span class="token operator">:=</span> <span class="token string">&quot;module.exports = &#39;test&#39;&quot;</span>

  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Format<span class="token punctuation">:</span> api<span class="token punctuation">.</span>FormatESModule<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p><code>esm</code> \u683C\u5F0F\u65E2\u53EF\u4EE5\u5728\u6D4F\u89C8\u5668\u4E2D\u4F7F\u7528\uFF0C\u4E5F\u53EF\u4EE5\u5728node\u4E2D\u4F7F\u7528\uFF0C\u4F46\u662F\u60A8\u5FC5\u987B\u5C06\u5176\u4F5C\u4E3A\u6A21\u5757\u663E\u5F0F\u52A0\u8F7D\u3002\u5982\u679C\u60A8\u4ECE\u53E6\u4E00\u4E2A\u6A21\u5757<code>import</code>\u5B83\uFF0C\u8FD9\u4F1A\u81EA\u52A8\u53D1\u751F\u3002\u5426\u5219\uFF1A</p>`,5),ts=n("li",null,[n("p",null,[s("\u5728\u6D4F\u89C8\u5668\u4E2D\uFF0C\u60A8\u53EF\u4EE5\u4F7F\u7528 "),n("code",null,'<script src="file.js" type="module"><\/script>'),s(" \u52A0\u8F7D\u6A21\u5757\u3002")])],-1),es=p("\u5728 <code>node</code> \u4E2D\uFF0C\u60A8\u53EF\u4EE5\u4F7F\u7528 <code>node --experimental-modules file.mjs</code> \u52A0\u8F7D\u6A21\u5757\u3002\u8BF7\u6CE8\u610F\uFF0Cnode\u9700\u8981 <code>.mjs</code> \u6269\u5C55\u540D\uFF0C\u9664\u975E\u60A8\u5728 package.json \u6587\u4EF6\u4E2D\u914D\u7F6E\u4E86 <code>&quot;type&quot;: &quot;module&quot;</code>\u3002\u60A8\u53EF\u4EE5\u4F7F\u7528 <code>esbuild</code> \u4E2D\u7684 <code>out</code> \u6269\u5C55\u8BBE\u7F6E\u6765\u81EA\u5B9A\u4E49 <code>esbuild</code> \u751F\u6210\u7684\u6587\u4EF6\u7684\u8F93\u51FA\u6269\u5C55\u3002\u60A8\u53EF\u4EE5\u5728\u6B64\u5904\u9605\u8BFB\u6709\u5173\u5728node\u4E2D\u4F7F\u7528 ",15),ps={href:"https://nodejs.org/api/esm.html",target:"_blank",rel:"noopener noreferrer"},os=s("ECMAScript \u6A21\u5757"),is=s("\u7684\u66F4\u591A\u4FE1\u606F\u3002"),cs=p(`<h3 id="inject" tabindex="-1"><a class="header-anchor" href="#inject" aria-hidden="true">#</a> Inject</h3><p>\u652F\u6301\uFF1ABuild</p><p>\u6B64\u9009\u9879\u5141\u8BB8\u60A8\u4F7F\u7528\u6765\u81EA\u53E6\u4E00\u4E2A\u6587\u4EF6\u7684\u5BFC\u5165\u81EA\u52A8\u66FF\u6362\u5168\u5C40\u53D8\u91CF\u3002\u8FD9\u53EF\u80FD\u662F\u4E00\u4E2A\u6709\u7528\u7684\u5DE5\u5177\uFF0C\u53EF\u4EE5\u5C06\u60A8\u65E0\u6CD5\u63A7\u5236\u7684\u4EE3\u7801\u9002\u5E94\u65B0\u73AF\u5883\u3002\u4F8B\u5982\uFF0C\u5047\u8BBE\u60A8\u6709\u4E00\u4E2A\u540D\u4E3A <code>process-shim.js</code> \u7684\u6587\u4EF6\uFF0C\u5B83\u5BFC\u51FA\u540D\u4E3A <code>process</code> \u7684\u53D8\u91CF\uFF1A</p><div><div title="process-shim.js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// process-shim.js</span>
<span class="token keyword">export</span> <span class="token keyword">let</span> process <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">cwd</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&#39;&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="entry.js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// entry.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u8FD9\u65E8\u5728\u66FF\u6362 <code>node</code> \u7684 <code>process.cwd()</code> \u51FD\u6570\u7684\u4F7F\u7528\uFF0C\u4EE5\u9632\u6B62\u8C03\u7528\u5B83\u7684\u5305\u5728\u6D4F\u89C8\u5668\u4E2D\u8FD0\u884C\u65F6\u5D29\u6E83\u3002\u60A8\u53EF\u4EE5\u4F7F\u7528\u6CE8\u5165\u529F\u80FD\u5C06\u5168\u5C40\u6807\u8BC6\u7B26\u8FC7\u7A0B\u7684\u6240\u6709\u4F7F\u7528\u66FF\u6362\u4E3A\u5BF9\u8BE5\u6587\u4EF6\u7684\u5BFC\u5165\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild entry.js --bundle --inject:./process-shim.js --outfile<span class="token operator">=</span>out.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;entry.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;./process-shim.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;entry.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Inject<span class="token punctuation">:</span>      <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;./process-shim.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Outfile<span class="token punctuation">:</span>     <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>       <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u7ED3\u679C\u662F\u8FD9\u6837\u7684\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// out.js</span>
<span class="token keyword">let</span> process <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token function-variable function">cwd</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8),ls=s("\u4F7F\u7528\u5E26\u5B9A\u4E49\u7684"),us=s("\u6CE8\u5165"),rs=s("\u60A8\u8FD8\u53EF\u4EE5\u5C06\u5176\u4E0E\u5B9A\u4E49"),ds=s("\u529F\u80FD"),ks=s("\u7ED3\u5408\u8D77\u6765\uFF0C\u4EE5\u4FBF\u5BF9\u60A8\u5BFC\u5165\u7684\u5185\u5BB9\u66F4\u5177\u9009\u62E9\u6027\u3002\u4F8B\u5982\uFF1A"),vs=p(`<div><div title="process-shim.js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// process-shim.js</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">dummy_process_cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&#39;&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="entry.js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// entry.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u60A8\u53EF\u4EE5\u4F7F\u7528\u5B9A\u4E49\u529F\u80FD\u5C06 <code>process.cwd</code> \u6620\u5C04\u5230 <code>dummy_process_cwd</code>\uFF0C\u7136\u540E\u4F7F\u7528\u6CE8\u5165\u529F\u80FD\u4ECE <code>process-shim.js</code> \u6CE8\u5165 <code>dummy_process_cwd</code>\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild entry.js --bundle --define:process.cwd<span class="token operator">=</span>dummy_process_cwd --inject:./process-shim.js --outfile<span class="token operator">=</span>out.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;entry.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">define</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;process.cwd&#39;</span><span class="token operator">:</span> <span class="token string">&#39;dummy_process_cwd&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;./process-shim.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;entry.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Define<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>
      <span class="token string">&quot;process.cwd&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;dummy_process_cwd&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Inject<span class="token punctuation">:</span>  <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;./process-shim.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Outfile<span class="token punctuation">:</span> <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>   <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u8FD9\u5BFC\u81F4\u4EE5\u4E0B\u8F93\u51FA\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// out.js</span>
<span class="token keyword">function</span> <span class="token function">dummy_process_cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">dummy_process_cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5),ms={href:"https://esbuild.github.io/content-types/#jsx",target:"_blank",rel:"noopener noreferrer"},bs=s("JSX"),gs=s(" \u7684\u81EA\u52A8\u5BFC\u5165"),hs=s("\u60A8\u53EF\u4EE5\u4F7F\u7528\u6CE8\u5165\u529F\u80FD\u81EA\u52A8\u63D0\u4F9B "),fs=n("code",null,"JSX",-1),_s=s(" \u8868\u8FBE\u5F0F\u7684\u5B9E\u73B0\u3002\u6BD4\u5982\u4F60\u53EF\u4EE5\u81EA\u52A8\u5BFC\u5165"),ys=n("code",null,"react",-1),qs=s("\u5305\u6765\u63D0\u4F9B"),js=n("code",null,"React.createElement",-1),ws=s("\u7B49\u529F\u80FD\u3002\u6709\u5173\u8BE6\u7EC6\u4FE1\u606F\uFF0C"),xs={href:"https://esbuild.github.io/content-types/#auto-import-for-jsx",target:"_blank",rel:"noopener noreferrer"},Ss=s("\u8BF7\u53C2\u9605 JSX \u6587\u6863"),Es=s("\u3002"),Ps=n("ul",null,[n("li",null,[n("strong",null,"\u5728\u6CA1\u6709\u5BFC\u5165\u7684\u60C5\u51B5\u4E0B\u6CE8\u5165\u6587\u4EF6")])],-1),Bs=n("p",null,[s("\u60A8\u8FD8\u53EF\u4EE5\u5C06\u6B64\u529F\u80FD\u7528\u4E8E\u6CA1\u6709\u5BFC\u51FA\u7684\u6587\u4EF6\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u6CE8\u5165\u7684\u6587\u4EF6\u53EA\u662F\u5728\u8F93\u51FA\u7684\u5176\u4F59\u90E8\u5206\u4E4B\u524D\u51FA\u73B0\uFF0C\u5C31\u597D\u50CF\u6BCF\u4E2A\u8F93\u5165\u6587\u4EF6\u90FD\u5305\u542B\u5BFC\u5165"),n("code",null,"\u201C./file.js\u201D"),s("\u3002\u7531\u4E8E ECMAScript \u6A21\u5757\u7684\u5DE5\u4F5C\u65B9\u5F0F\uFF0C\u8FD9\u79CD\u6CE8\u5165\u4ECD\u7136\u662F\u201Chygienic\u201D\uFF0C\u56E0\u4E3A\u4E0D\u540C\u6587\u4EF6\u4E2D\u5177\u6709\u76F8\u540C\u540D\u79F0\u7684\u7B26\u53F7\u88AB\u91CD\u547D\u540D\uFF0C\u56E0\u6B64\u5B83\u4EEC\u4E0D\u4F1A\u76F8\u4E92\u51B2\u7A81\u3002")],-1),Os=n("ul",null,[n("li",null,[n("strong",null,"\u6709\u6761\u4EF6\u5730\u6CE8\u5165\u6587\u4EF6")])],-1),Ts=s("\u5982\u679C\u60A8\u53EA\u60F3\u5728\u5B9E\u9645\u4F7F\u7528\u5BFC\u51FA\u65F6\u6709\u6761\u4EF6\u5730\u5BFC\u5165\u6587\u4EF6\uFF0C\u60A8\u5E94\u8BE5\u5C06\u6CE8\u5165\u7684\u6587\u4EF6\u6807\u8BB0\u4E3A\u6CA1\u6709\u526F\u4F5C\u7528\uFF0C\u5C06\u5176\u653E\u5165\u5305\u4E2D\u5E76\u5728\u8BE5\u5305\u7684 "),Cs=n("code",null,"package.json",-1),Is=s(" \u6587\u4EF6\u4E2D\u6DFB\u52A0 "),As=n("code",null,'"sideEffects": false',-1),Js=s(" \u3002\u6B64\u8BBE\u7F6E\u662F"),Ls={href:"https://webpack.js.org/guides/tree-shaking/#mark-the-file-as-side-effect-free",target:"_blank",rel:"noopener noreferrer"},Ms=s("\u6765\u81EA Webpack \u7684\u7EA6\u5B9A"),Ws=s("\uFF0Cesbuild \u5C0A\u91CD\u4EFB\u4F55\u5BFC\u5165\u7684\u6587\u4EF6\uFF0C\u800C\u4E0D\u4EC5\u4EC5\u662F\u7528\u4E8E\u6CE8\u5165\u7684\u6587\u4EF6\u3002"),Fs=n("h3",{id:"loader",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#loader","aria-hidden":"true"},"#"),s(" Loader")],-1),Rs=n("p",null,"\u652F\u6301\uFF1ATransform | Build",-1),Ds=s("\u6B64\u9009\u9879\u66F4\u6539\u7ED9\u5B9A\u8F93\u5165\u6587\u4EF6\u7684\u89E3\u91CA\u65B9\u5F0F\u3002\u4F8B\u5982\uFF0C"),Us=n("code",null,"js",-1),Ns=s(" \u52A0\u8F7D\u5668\u5C06\u6587\u4EF6\u89E3\u91CA\u4E3A JavaScript\uFF0C\u800C "),Gs=n("code",null,"css",-1),Xs=s(" \u52A0\u8F7D\u5668\u5C06\u6587\u4EF6\u89E3\u91CA\u4E3A CSS\u3002\u6709\u5173\u6240\u6709\u5185\u7F6E\u52A0\u8F7D\u5668\u7684\u5B8C\u6574\u5217\u8868\uFF0C"),Hs={href:"https://esbuild.github.io/content-types/",target:"_blank",rel:"noopener noreferrer"},zs=s("\u8BF7\u53C2\u9605\u5185\u5BB9\u7C7B\u578B\u9875\u9762"),Vs=s("\u3002"),Ks=s("\u4E3A\u7ED9\u5B9A\u7684\u6587\u4EF6\u7C7B\u578B\u914D\u7F6E\u52A0\u8F7D\u5668\u5141\u8BB8\u60A8\u4F7F\u7528"),$s=n("code",null,"import",-1),Ys=s(" \u8BED\u53E5\u6216 "),Qs=n("code",null,"require",-1),Zs=s(" \u8C03\u7528\u52A0\u8F7D\u8BE5\u6587\u4EF6\u7C7B\u578B\u3002\u4F8B\u5982\uFF0C\u5C06 "),na=n("code",null,".png",-1),sa=s(" \u6587\u4EF6\u6269\u5C55\u540D\u914D\u7F6E\u4E3A\u4F7F\u7528"),aa={href:"https://esbuild.github.io/content-types/#data-url",target:"_blank",rel:"noopener noreferrer"},ta=s("\u6570\u636E URL"),ea=s(" \u52A0\u8F7D\u5668\u610F\u5473\u7740\u5BFC\u5165 "),pa=n("code",null,".png",-1),oa=s(" \u6587\u4EF6\u4F1A\u4E3A\u60A8\u63D0\u4F9B\u4E00\u4E2A\u5305\u542B\u8BE5\u56FE\u50CF\u5185\u5BB9\u7684\u6570\u636E URL\uFF1A"),ia=p(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> url <span class="token keyword">from</span> <span class="token string">&#39;./example.png&#39;</span>
<span class="token keyword">let</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span>
image<span class="token punctuation">.</span>src <span class="token operator">=</span> url
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span>

<span class="token keyword">import</span> svg <span class="token keyword">from</span> <span class="token string">&#39;./example.svg&#39;</span>
<span class="token keyword">let</span> doc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DOMParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parseFromString</span><span class="token punctuation">(</span>svg<span class="token punctuation">,</span> <span class="token string">&#39;application/xml&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> node <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">importNode</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span>documentElement<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),ca=s("\u4E0A\u9762\u7684\u4EE3\u7801\u53EF\u4EE5\u4F7F\u7528\u6784\u5EFA API \u8C03\u7528\u8FDB\u884C"),la=s("\u6346\u7ED1"),ua=s("\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A"),ra=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --bundle --loader:.png<span class="token operator">=</span>dataurl --loader:.svg<span class="token operator">=</span>text
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&#39;.png&#39;</span><span class="token operator">:</span> <span class="token string">&#39;dataurl&#39;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;.svg&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Loader<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>api<span class="token punctuation">.</span>Loader<span class="token punctuation">{</span>
      <span class="token string">&quot;.png&quot;</span><span class="token punctuation">:</span> api<span class="token punctuation">.</span>LoaderDataURL<span class="token punctuation">,</span>
      <span class="token string">&quot;.svg&quot;</span><span class="token punctuation">:</span> api<span class="token punctuation">.</span>LoaderText<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div>`,1),da=s("\u5982\u679C\u60A8\u5C06\u6784\u5EFA API \u4E0E\u6765\u81EA stdin \u7684\u8F93\u5165\u4E00\u8D77\u4F7F\u7528\uFF0C\u5219\u6B64\u9009\u9879\u7684\u6307\u5B9A\u65B9\u5F0F\u4E0D\u540C\uFF0C\u56E0\u4E3A "),ka=s("stdin"),va=s(" \u6CA1\u6709\u6587\u4EF6\u6269\u5C55\u540D\u3002\u4F7F\u7528\u6784\u5EFA API \u4E3A stdin \u914D\u7F6E\u52A0\u8F7D\u5668\u5982\u4E0B\u6240\u793A\uFF1A"),ma=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;let x: number = 1&#39;</span> <span class="token operator">|</span> esbuild --loader<span class="token operator">=</span>ts
<span class="token builtin class-name">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">stdin</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">contents</span><span class="token operator">:</span> <span class="token string">&#39;import pkg = require(&quot;./pkg&quot;)&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;ts&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">resolveDir</span><span class="token operator">:</span> __dirname<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Loader<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>api<span class="token punctuation">.</span>Loader<span class="token punctuation">{</span>
      <span class="token string">&quot;.png&quot;</span><span class="token punctuation">:</span> api<span class="token punctuation">.</span>LoaderDataURL<span class="token punctuation">,</span>
      <span class="token string">&quot;.svg&quot;</span><span class="token punctuation">:</span> api<span class="token punctuation">.</span>LoaderText<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div>`,1),ba=s("\u5982\u679C\u60A8\u5C06\u6784\u5EFA API \u4E0E\u6765\u81EA "),ga=s("stdin"),ha=s(" \u7684\u8F93\u5165\u4E00\u8D77\u4F7F\u7528\uFF0C\u5219\u6B64\u9009\u9879\u7684\u6307\u5B9A\u65B9\u5F0F\u4E0D\u540C\uFF0C\u56E0\u4E3A stdin \u6CA1\u6709\u6587\u4EF6\u6269\u5C55\u540D\u3002\u4F7F\u7528\u6784\u5EFA API \u4E3A stdin \u914D\u7F6E\u52A0\u8F7D\u5668\u5982\u4E0B\u6240\u793A\uFF1A"),fa=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;import pkg = require(&quot;./pkg&quot;)&#39;</span> <span class="token operator">|</span> esbuild --loader<span class="token operator">=</span>ts --bundle
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">stdin</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">contents</span><span class="token operator">:</span> <span class="token string">&#39;import pkg = require(&quot;./pkg&quot;)&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;ts&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">resolveDir</span><span class="token operator">:</span> __dirname<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Loader<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>api<span class="token punctuation">.</span>Loader<span class="token punctuation">{</span>
      <span class="token string">&quot;.png&quot;</span><span class="token punctuation">:</span> api<span class="token punctuation">.</span>LoaderDataURL<span class="token punctuation">,</span>
      <span class="token string">&quot;.svg&quot;</span><span class="token punctuation">:</span> api<span class="token punctuation">.</span>LoaderText<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div>`,1),_a=s("\u8F6C\u6362 API"),ya=s(" \u8C03\u7528\u53EA\u9700\u8981\u4E00\u4E2A\u52A0\u8F7D\u5668\uFF0C\u56E0\u4E3A\u5B83\u4E0D\u6D89\u53CA\u4E0E\u6587\u4EF6\u7CFB\u7EDF\u7684\u4EA4\u4E92\uFF0C\u56E0\u6B64\u4E0D\u5904\u7406\u6587\u4EF6\u6269\u5C55\u540D\u3002\u4E3A\u8F6C\u6362 API \u914D\u7F6E\u52A0\u8F7D\u5668\uFF08\u5728\u672C\u4F8B\u4E2D\u4E3A "),qa=n("code",null,"ts",-1),ja=s(" \u52A0\u8F7D\u5668\uFF09\u5982\u4E0B\u6240\u793A\uFF1A"),wa=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;let x: number = 1&#39;</span> <span class="token operator">|</span> esbuild --loader<span class="token operator">=</span>ts
<span class="token builtin class-name">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">let</span> ts <span class="token operator">=</span> <span class="token string">&#39;let x: number = 1&#39;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>ts<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;ts&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;let x = 1;\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  ts <span class="token operator">:=</span> <span class="token string">&quot;let x: number = 1&quot;</span>

  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>ts<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Loader<span class="token punctuation">:</span> api<span class="token punctuation">.</span>LoaderTS<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h3 id="minify" tabindex="-1"><a class="header-anchor" href="#minify" aria-hidden="true">#</a> Minify</h3><p>\u652F\u6301\uFF1ATransform | Build</p><p>\u542F\u7528\u540E\uFF0C\u751F\u6210\u7684\u4EE3\u7801\u5C06\u88AB\u538B\u7F29\u800C\u4E0D\u662F\u6F02\u4EAE\u7684\u6253\u5370\u3002\u538B\u7F29\u4EE3\u7801\u901A\u5E38\u7B49\u540C\u4E8E\u975E\u538B\u7F29\u4EE3\u7801\uFF0C\u4F46\u66F4\u5C0F\uFF0C\u8FD9\u610F\u5473\u7740\u5B83\u4E0B\u8F7D\u901F\u5EA6\u66F4\u5FEB\u4F46\u66F4\u96BE\u8C03\u8BD5\u3002\u901A\u5E38\u4F60\u4F1A\u5728\u751F\u4EA7\u4E2D\u800C\u4E0D\u662F\u5728\u5F00\u53D1\u4E2D\u538B\u7F29\u4EE3\u7801\u3002</p><p>\u5728 esbuild \u4E2D\u542F\u7528\u538B\u7F29\u5982\u4E0B\u6240\u793A\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;fn = obj =&gt; { return obj.x }&#39;</span> <span class="token operator">|</span> esbuild --minify
<span class="token assign-left variable">fn</span><span class="token operator">=</span>n<span class="token operator">=</span><span class="token operator">&gt;</span>n.x<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">var</span> js <span class="token operator">=</span> <span class="token string">&#39;fn = obj =&gt; { return obj.x }&#39;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span><span class="token parameter">js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">minify</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;fn=n=&gt;n.x;\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  js <span class="token operator">:=</span> <span class="token string">&quot;fn = obj =&gt; { return obj.x }&quot;</span>

  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    MinifyWhitespace<span class="token punctuation">:</span>  <span class="token boolean">true</span><span class="token punctuation">,</span>
    MinifyIdentifiers<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    MinifySyntax<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u6B64\u9009\u9879\u7EC4\u5408\u6267\u884C\u4E09\u4E2A\u72EC\u7ACB\u7684\u64CD\u4F5C\uFF1A\u5220\u9664\u7A7A\u683C\uFF0C\u5C06\u8BED\u6CD5\u91CD\u5199\u4E3A\u66F4\u7D27\u51D1\uFF0C\u5E76\u5C06\u5C40\u90E8\u53D8\u91CF\u91CD\u547D\u540D\u4E3A\u66F4\u77ED\u3002\u901A\u5E38\u4F60\u60F3\u8981\u505A\u6240\u6709\u8FD9\u4E9B\u4E8B\u60C5\uFF0C\u4F46\u5982\u679C\u9700\u8981\uFF0C\u4E5F\u53EF\u4EE5\u5355\u72EC\u542F\u7528\u8FD9\u4E9B\u9009\u9879\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;fn = obj =&gt; { return obj.x }&#39;</span> <span class="token operator">|</span> esbuild --minify-whitespace
<span class="token assign-left variable">fn</span><span class="token operator">=</span>obj<span class="token operator">=</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>return obj.x<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;fn = obj =&gt; { return obj.x }&#39;</span> <span class="token operator">|</span> esbuild --minify-identifiers
fn <span class="token operator">=</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">return</span> n.x<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;fn = obj =&gt; { return obj.x }&#39;</span> <span class="token operator">|</span> esbuild --minify-syntax
fn <span class="token operator">=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> obj.x<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// js</span>

<span class="token keyword">var</span> js <span class="token operator">=</span> <span class="token string">&#39;fn = obj =&gt; { return obj.x }&#39;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span><span class="token parameter">js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">minifyWhitespace</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;fn=obj=&gt;{return obj.x};\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span><span class="token parameter">js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">minifyIdentifiers</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;fn = (n) =&gt; {\\n  return n.x;\\n};\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span><span class="token parameter">js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">minifySyntax</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;fn = (obj) =&gt; obj.x;\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// go</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  css <span class="token operator">:=</span> <span class="token string">&quot;div { color: yellow }&quot;</span>

  result1 <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>css<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Loader<span class="token punctuation">:</span>           api<span class="token punctuation">.</span>LoaderCSS<span class="token punctuation">,</span>
    MinifyWhitespace<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result1<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result1<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  result2 <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>css<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Loader<span class="token punctuation">:</span>            api<span class="token punctuation">.</span>LoaderCSS<span class="token punctuation">,</span>
    MinifyIdentifiers<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result2<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result2<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  result3 <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>css<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Loader<span class="token punctuation">:</span>       api<span class="token punctuation">.</span>LoaderCSS<span class="token punctuation">,</span>
    MinifySyntax<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result3<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result3<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u8FD9\u4E9B\u76F8\u540C\u7684\u6982\u5FF5\u4E5F\u9002\u7528\u4E8E CSS\uFF0C\u800C\u4E0D\u4EC5\u4EC5\u662F JavaScript\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;div { color: yellow }&#39;</span> <span class="token operator">|</span> esbuild --loader<span class="token operator">=</span>css --minify
div<span class="token punctuation">{</span>color:<span class="token comment">#ff0}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">var</span> css <span class="token operator">=</span> <span class="token string">&#39;div { color: yellow }&#39;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>css<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;css&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">minify</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;div{color:#ff0}\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  css <span class="token operator">:=</span> <span class="token string">&quot;div { color: yellow }&quot;</span>

  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>css<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Loader<span class="token punctuation">:</span>            api<span class="token punctuation">.</span>LoaderCSS<span class="token punctuation">,</span>
    MinifyWhitespace<span class="token punctuation">:</span>  <span class="token boolean">true</span><span class="token punctuation">,</span>
    MinifyIdentifiers<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    MinifySyntax<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div>`,10),xa=s("esbuild \u4E2D\u7684 JavaScript \u538B\u7F29\u7B97\u6CD5\u901A\u5E38\u751F\u6210\u7684\u8F93\u51FA\u975E\u5E38\u63A5\u8FD1\u884C\u4E1A\u6807\u51C6 JavaScript \u538B\u7F29\u5DE5\u5177\u7684\u538B\u7F29\u8F93\u51FA\u5927\u5C0F\u3002\u8BE5"),Sa={href:"https://github.com/privatenumber/minification-benchmarks/tree/cd3e5acb8d38da5f86426d44ac95974812559683#readme",target:"_blank",rel:"noopener noreferrer"},Ea=s("\u57FA\u51C6"),Pa=s("\u6D4B\u8BD5\u5BF9\u4E0D\u540C\u538B\u7F29\u5668\u4E4B\u95F4\u7684\u8F93\u51FA\u5927\u5C0F\u8FDB\u884C\u4E86\u793A\u4F8B\u6BD4\u8F83\u3002\u867D\u7136 esbuild \u4E0D\u662F\u6240\u6709\u60C5\u51B5\u4E0B\u7684\u6700\u4F73 JavaScript \u538B\u7F29\u5668\uFF08\u5E76\u4E14\u4E0D\u4F1A\u5C1D\u8BD5\u6210\u4E3A\uFF09\uFF0C\u4F46\u5B83\u52AA\u529B\u5728\u5927\u591A\u6570\u4EE3\u7801\u7684\u4E13\u7528\u538B\u7F29\u5DE5\u5177\u5927\u5C0F\u7684\u767E\u5206\u4E4B\u51E0\u5185\u751F\u6210\u538B\u7F29\u7684\u8F93\u51FA\uFF0C\u5E76\u4E14\u5F53\u7136\u505A\u5F97\u66F4\u5FEB\u6BD4\u5176\u4ED6\u5DE5\u5177\u3002"),Ba=n("h4",{id:"\u601D\u8003",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u601D\u8003","aria-hidden":"true"},"#"),s(" \u601D\u8003")],-1),Oa=n("p",null,"\u4EE5\u4E0B\u662F\u4F7F\u7528 esbuild \u4F5C\u4E3A\u538B\u7F29\u5668\u65F6\u8981\u8BB0\u4F4F\u7684\u4E00\u4E9B\u4E8B\u9879\uFF1A",-1),Ta=s("\u60A8\u53EF\u80FD\u8FD8\u5E94\u8BE5\u5728\u542F\u7528\u538B\u7F29\u65F6\u8BBE\u7F6E\u76EE\u6807"),Ca=s("\u9009\u9879"),Ia=s("\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Cesbuild \u5229\u7528\u73B0\u4EE3 JavaScript \u529F\u80FD\u6765\u4F7F\u60A8\u7684\u4EE3\u7801\u66F4\u5C0F\u3002\u4F8B\u5982\uFF0C"),Aa=n("code",null,"a === undefined ||\u4E00\u4E2A === \u7A7A\uFF1F 1 : a",-1),Ja=s(" \u53EF\u4EE5\u538B\u7F29\u4E3A "),La=n("code",null,"a ?? 1",-1),Ma=s(". \u5982\u679C\u60A8\u4E0D\u5E0C\u671B esbuild \u5728\u538B\u7F29\u65F6\u5229\u7528\u73B0\u4EE3 JavaScript \u529F\u80FD\uFF0C\u60A8\u5E94\u8BE5\u4F7F\u7528\u8F83\u65E7\u7684\u8BED\u8A00\u76EE\u6807\uFF0C\u4F8B\u5982 "),Wa=n("code",null,"--target=es6",-1),Fa=s("\u3002"),Ra=s("\u538B\u7F29\u5BF9\u4E8E 100% \u7684 JavaScript \u4EE3\u7801\u90FD\u662F\u4E0D\u5B89\u5168\u7684\u3002\u8FD9\u5BF9\u4E8E esbuild \u4EE5\u53CA\u5176\u4ED6\u6D41\u884C\u7684 JavaScript \u538B\u7F29\u5668\uFF08\u5982 terser\uFF09\u90FD\u662F\u5982\u6B64\u3002\u7279\u522B\u662F\uFF0Cesbuild \u5E76\u975E\u65E8\u5728\u4FDD\u7559\u5BF9\u51FD\u6570\u8C03\u7528 "),Da=n("code",null,".toString()",-1),Ua=s(" \u7684\u503C\u3002\u8FD9\u6837\u505A\u7684\u539F\u56E0\u662F\u56E0\u4E3A\u5982\u679C\u6240\u6709\u51FD\u6570\u4E2D\u7684\u6240\u6709\u4EE3\u7801\u90FD\u5FC5\u987B\u9010\u5B57\u4FDD\u5B58\uFF0C\u90A3\u4E48\u538B\u7F29\u51E0\u4E4E\u4E0D\u4F1A\u505A\u4EFB\u4F55\u4E8B\u60C5\u5E76\u4E14\u51E0\u4E4E\u6BEB\u65E0\u7528\u5904\u3002\u7136\u800C\uFF0C\u8FD9\u610F\u5473\u7740\u4F9D\u8D56 "),Na=n("code",null,".toString()",-1),Ga=s(" \u8FD4\u56DE\u503C\u7684 JavaScript \u4EE3\u7801\u5728\u538B\u7F29\u65F6\u53EF\u80FD\u4F1A\u4E2D\u65AD\u3002\u4F8B\u5982\uFF0C\u5F53\u4EE3\u7801\u88AB\u538B\u7F29\u65F6\uFF0CAngularJS \u6846\u67B6\u4E2D\u7684\u4E00\u4E9B\u6A21\u5F0F\u4F1A\u4E2D\u65AD\uFF0C\u56E0\u4E3A AngularJS \u4F7F\u7528 "),Xa=n("code",null,".toString()",-1),Ha=s(" \u6765\u8BFB\u53D6\u51FD\u6570\u7684\u53C2\u6570\u540D\u79F0\u3002\u89E3\u51B3\u65B9\u6CD5\u662F"),za={href:"https://docs.angularjs.org/api/auto/service/$injector#injection-function-annotation",target:"_blank",rel:"noopener noreferrer"},Va=s("\u6539\u7528\u663E\u5F0F\u6CE8\u91CA"),Ka=s("\u3002"),$a=s("\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Cesbuild \u4E0D\u4F1A\u5728\u51FD\u6570\u548C\u7C7B\u5BF9\u8C61\u4E0A\u4FDD\u7559 "),Ya=n("code",null,".name",-1),Qa=s(" \u7684\u503C\u3002\u8FD9\u662F\u56E0\u4E3A\u5927\u591A\u6570\u4EE3\u7801\u4E0D\u4F9D\u8D56\u4E8E\u8FD9\u4E2A\u5C5E\u6027\uFF0C\u4F7F\u7528\u8F83\u77ED\u7684\u540D\u79F0\u662F\u4E00\u4E2A\u91CD\u8981\u7684\u5927\u5C0F\u4F18\u5316\u3002\u4F46\u662F\uFF0C\u67D0\u4E9B\u4EE3\u7801\u786E\u5B9E\u4F9D\u8D56 "),Za=n("code",null,".name",-1),nt=s(" \u5C5E\u6027\u8FDB\u884C\u6CE8\u518C\u548C\u7ED1\u5B9A\u3002\u5982\u679C\u60A8\u9700\u8981\u4F9D\u8D56\u5B83\uFF0C\u60A8\u5E94\u8BE5\u542F\u7528"),st=s("\u4FDD\u7559\u540D\u79F0"),at=s("\u9009\u9879\u3002"),tt=n("li",null,[n("p",null,[s("\u4F7F\u7528\u67D0\u4E9B JavaScript \u529F\u80FD\u53EF\u4EE5\u7981\u7528\u8BB8\u591A esbuild \u7684\u4F18\u5316\uFF0C\u5305\u62EC\u538B\u7F29\u3002\u5177\u4F53\u6765\u8BF4\uFF0C\u4F7F\u7528\u76F4\u63A5 "),n("code",null,"eval"),s(" \u548C/\u6216 "),n("code",null,"with"),s(" \u8BED\u53E5\u53EF\u4EE5\u9632\u6B62 esbuild \u5C06\u6807\u8BC6\u7B26\u91CD\u547D\u540D\u4E3A\u8F83\u5C0F\u7684\u540D\u79F0\uFF0C\u56E0\u4E3A\u8FD9\u4E9B\u529F\u80FD\u4F1A\u5BFC\u81F4\u6807\u8BC6\u7B26\u7ED1\u5B9A\u53D1\u751F\u5728\u8FD0\u884C\u65F6\u800C\u4E0D\u662F\u7F16\u8BD1\u65F6\u3002\u8FD9\u51E0\u4E4E\u603B\u662F\u65E0\u610F\u7684\uFF0C\u5E76\u4E14\u53EA\u662F\u56E0\u4E3A\u4EBA\u4EEC\u4E0D\u77E5\u9053\u76F4\u63A5 "),n("code",null,"eval"),s(" \u662F\u4EC0\u4E48\u4EE5\u53CA\u5B83\u4E3A\u4EC0\u4E48\u4E0D\u597D\u3002")])],-1),et=p(`<blockquote><p>\u5982\u679C\u60A8\u6B63\u5728\u8003\u8651\u7F16\u5199\u4E00\u4E9B\u8FD9\u6837\u7684\u4EE3\u7801\uFF1A</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Direct eval (will disable minification for the whole file)</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span>something<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u60A8\u53EF\u80FD\u5E94\u8BE5\u50CF\u8FD9\u6837\u7F16\u5199\u4EE3\u7801\uFF0C\u4EE5\u4FBF\u53EF\u4EE5\u538B\u7F29\u4EE3\u7801\uFF1A</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Indirect eval (has no effect on the surrounding code)</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> eval<span class="token punctuation">)</span><span class="token punctuation">(</span>something<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u6709\u5173\u4E8E\u76F4\u63A5<code>eval</code>\u7684\u540E\u679C\u548C\u53EF\u7528\u66FF\u4EE3\u65B9\u6848\u7684\u66F4\u591A\u4FE1\u606F\u3002</p><ul><li><p>esbuild \u4E2D\u7684\u538B\u7F29\u7B97\u6CD5\u5C1A\u672A\u8FDB\u884C\u9AD8\u7EA7\u4EE3\u7801\u4F18\u5316\u3002\u7279\u522B\u662F\uFF0C\u4EE5\u4E0B\u4EE3\u7801\u4F18\u5316\u5BF9\u4E8E JavaScript \u4EE3\u7801\u662F\u53EF\u80FD\u7684\uFF0C\u4F46\u4E0D\u662F\u7531 esbuild \u5B8C\u6210\u7684\uFF08\u4E0D\u662F\u8BE6\u5C3D\u7684\u5217\u8868\uFF09\uFF1A</p><ul><li><p>\u51FD\u6570\u4F53\u5185\u7684\u6B7B\u4EE3\u7801\u6D88\u9664</p></li><li><p>\u51FD\u6570\u5185\u8054</p></li><li><p>\u8DE8\u8BED\u53E5\u5E38\u91CF\u4F20\u64AD</p></li><li><p>\u5BF9\u8C61\u5F62\u72B6\u5EFA\u6A21</p></li><li><p>\u5206\u914D\u4E0B\u6C89</p></li><li><p>\u65B9\u6CD5\u53BB\u865A\u62DF\u5316</p></li><li><p>\u7B26\u53F7\u6267\u884C</p></li><li><p>JSX \u8868\u8FBE\u5F0F\u63D0\u5347</p></li><li><p>TypeScript \u679A\u4E3E\u68C0\u6D4B\u548C\u5185\u8054</p></li></ul></li></ul>`,6),pt=s("\u5982\u679C\u60A8\u7684\u4EE3\u7801\u4F7F\u7528\u7684\u6A21\u5F0F\u8981\u6C42\u5176\u4E2D\u4E00\u4E9B\u4EE3\u7801\u4F18\u5316\u5F62\u5F0F\u7D27\u51D1\uFF0C\u6216\u8005\u60A8\u6B63\u5728\u4E3A\u60A8\u7684\u7528\u4F8B\u641C\u7D22\u6700\u4F73 JavaScript \u538B\u7F29\u7B97\u6CD5\uFF0C\u60A8\u5E94\u8BE5\u8003\u8651\u4F7F\u7528\u5176\u4ED6\u5DE5\u5177\u3002\u5B9E\u73B0\u5176\u4E2D\u4E00\u4E9B\u9AD8\u7EA7\u4EE3\u7801\u4F18\u5316\u7684\u5DE5\u5177\u7684\u4E00\u4E9B\u793A\u4F8B\u5305\u62EC "),ot={href:"https://github.com/terser/terser#readme",target:"_blank",rel:"noopener noreferrer"},it=s("Terser"),ct=s(" \u548C "),lt={href:"https://github.com/google/closure-compiler#readme",target:"_blank",rel:"noopener noreferrer"},ut=s("Google Closure Compiler"),rt=s("\u3002"),dt=p(`<h3 id="outdir" tabindex="-1"><a class="header-anchor" href="#outdir" aria-hidden="true">#</a> Outdir</h3><p>\u652F\u6301\uFF1ABuild</p><p>\u6B64\u9009\u9879\u8BBE\u7F6E\u6784\u5EFA\u64CD\u4F5C\u7684\u8F93\u51FA\u76EE\u5F55\u3002\u4F8B\u5982\uFF0C\u6B64\u547D\u4EE4\u5C06\u751F\u6210\u4E00\u4E2A\u540D\u4E3A\u7684\u76EE\u5F55</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --bundle --outdir<span class="token operator">=</span>out
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outdir</span><span class="token operator">:</span> <span class="token string">&#39;out&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Outdir<span class="token punctuation">:</span>      <span class="token string">&quot;out&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u5982\u679C\u8F93\u51FA\u76EE\u5F55\u5C1A\u4E0D\u5B58\u5728\uFF0C\u5219\u4F1A\u751F\u6210\u8F93\u51FA\u76EE\u5F55\uFF0C\u4F46\u5982\u679C\u5DF2\u5305\u542B\u67D0\u4E9B\u6587\u4EF6\uFF0C\u5219\u4E0D\u4F1A\u6E05\u9664\u5B83\u3002\u4EFB\u4F55\u751F\u6210\u7684\u6587\u4EF6\u90FD\u4F1A\u4EE5\u9759\u9ED8\u65B9\u5F0F\u8986\u76D6\u540C\u540D\u7684\u73B0\u6709\u6587\u4EF6\u3002\u5982\u679C\u60A8\u5E0C\u671B\u8F93\u51FA\u76EE\u5F55\u4EC5\u5305\u542B\u6765\u81EA\u5F53\u524D esbuild \u8FD0\u884C\u7684\u6587\u4EF6\uFF0C\u60A8\u5E94\u8BE5\u5728\u8FD0\u884C esbuild \u4E4B\u524D\u81EA\u5DF1\u6E05\u9664\u8F93\u51FA\u76EE\u5F55\u3002</p>`,5),kt=s("\u5982\u679C\u60A8\u7684\u6784\u5EFA\u5728\u4E0D\u540C\u7684\u76EE\u5F55\u4E2D\u5305\u542B\u591A\u4E2A\u5165\u53E3\u70B9\uFF0C\u5219\u76EE\u5F55\u7ED3\u6784\u5C06\u4ECE\u6240\u6709\u8F93\u5165\u5165\u53E3\u70B9\u8DEF\u5F84\u4E2D\u6700\u4F4E\u7684"),vt={href:"https://en.wikipedia.org/wiki/Lowest_common_ancestor",target:"_blank",rel:"noopener noreferrer"},mt=s("\u516C\u5171\u7956\u5148\u76EE\u5F55"),bt=s("\u5F00\u59CB\u590D\u5236\u5230\u8F93\u51FA\u76EE\u5F55\u4E2D\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u6709\u4E24\u4E2A\u5165\u53E3\u70B9 "),gt=n("code",null,"src/home/index.ts",-1),ht=s(" \u548C "),ft=n("code",null,"src/about/index.ts",-1),_t=s("\uFF0C\u5219\u8F93\u51FA\u76EE\u5F55\u5C06\u5305\u542B "),yt=n("code",null,"home/index.js",-1),qt=s(" \u548C "),jt=n("code",null,"about/index.js",-1),wt=s("\u3002\u5982\u679C\u8981\u81EA\u5B9A\u4E49\u6B64\u884C\u4E3A\uFF0C\u5219\u5E94\u66F4\u6539 "),xt=s("outbase \u76EE\u5F55"),St=s("\u3002"),Et=n("h3",{id:"outfile",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#outfile","aria-hidden":"true"},"#"),s(" Outfile")],-1),Pt=n("p",null,"\u652F\u6301: Build",-1),Bt=s("\u6B64\u9009\u9879\u8BBE\u7F6E\u6784\u5EFA\u64CD\u4F5C\u7684\u8F93\u51FA\u6587\u4EF6\u540D\u3002\u8FD9\u4EC5\u9002\u7528\u4E8E\u6709\u5355\u4E2A\u5165\u53E3\u70B9\u7684\u60C5\u51B5\u3002\u5982\u679C\u6709\u591A\u4E2A\u5165\u53E3\u70B9\uFF0C\u5219\u5FC5\u987B\u6539\u7528 "),Ot=s("outdir"),Tt=s(" \u9009\u9879\u6765\u6307\u5B9A\u8F93\u51FA\u76EE\u5F55\u3002\u4F7F\u7528 outfile \u770B\u8D77\u6765\u50CF\u8FD9\u6837\uFF1A"),Ct=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --bundle --outfile<span class="token operator">=</span>out.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Outdir<span class="token punctuation">:</span>      <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h3 id="platform" tabindex="-1"><a class="header-anchor" href="#platform" aria-hidden="true">#</a> Platform</h3><p>\u652F\u6301\uFF1ABuild</p><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Cesbuild \u7684 bundler \u88AB\u914D\u7F6E\u4E3A\u751F\u6210\u7528\u4E8E\u6D4F\u89C8\u5668\u7684\u4EE3\u7801\u3002\u5982\u679C\u60A8\u7684\u6346\u7ED1\u4EE3\u7801\u6253\u7B97\u5728 node \u4E2D\u8FD0\u884C\uFF0C\u60A8\u5E94\u8BE5\u5C06\u5E73\u53F0\u8BBE\u7F6E\u4E3A <code>node</code>\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --bundle --platform<span class="token operator">=</span>node
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">platform</span><span class="token operator">:</span> <span class="token string">&#39;node&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Platform<span class="token punctuation">:</span>    api<span class="token punctuation">.</span>PlatformNode<span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>       <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u5F53\u5E73\u53F0\u8BBE\u7F6E\u4E3A<code>\u6D4F\u89C8\u5668(browser)</code>\u65F6\uFF08\u9ED8\u8BA4\u503C\uFF09\uFF1A</p>`,6),It=s("\u9ED8\u8BA4\u8F93\u51FA"),At=s("\u683C\u5F0F"),Jt=s("\u8BBE\u7F6E\u4E3A "),Lt=n("code",null,"iife",-1),Mt=s("\uFF0C\u5B83\u5C06\u751F\u6210\u7684 JavaScript \u4EE3\u7801\u5305\u88C5\u5728\u7ACB\u5373\u8C03\u7528\u7684\u51FD\u6570\u8868\u8FBE\u5F0F\u4E2D\uFF0C\u4EE5\u9632\u6B62\u53D8\u91CF\u6CC4\u6F0F\u5230\u5168\u5C40\u8303\u56F4\u5185\u3002"),Wt=n("li",null,[n("p",null,[s("\u5982\u679C\u5305\u5728\u5176 "),n("code",null,"package.json"),s(" \u6587\u4EF6\u4E2D\u4E3A"),n("code",null,"\u6D4F\u89C8\u5668"),s("\u5B57\u6BB5\u6307\u5B9A\u4E86\u6620\u5C04\uFF0Cesbuild \u5C06\u4F7F\u7528\u8BE5\u6620\u5C04\u5C06\u7279\u5B9A\u6587\u4EF6\u6216\u6A21\u5757\u66FF\u6362\u4E3A\u5176\u6D4F\u89C8\u5668\u53CB\u597D\u7248\u672C\u3002\u4F8B\u5982\uFF0C\u4E00\u4E2A\u5305\u53EF\u80FD\u5305\u542B\u7528 "),n("code",null,"path-browserify"),s(" \u66FF\u6362"),n("code",null,"\u8DEF\u5F84"),s("\u3002")])],-1),Ft=s("\u4E3B\u8981\u5B57\u6BB5"),Rt=p("\u8BBE\u7F6E\u8BBE\u7F6E\u4E3A <code>browser,module,main</code> \u4F46\u6709\u4E00\u4E9B\u989D\u5916\u7684\u7279\u6B8A\u884C\u4E3A\u3002\u5982\u679C\u5305\u652F\u6301 <code>module</code> \u548C <code>main</code> \u4F46\u4E0D\u652F\u6301<code>\u6D4F\u89C8\u5668</code>\uFF0C\u90A3\u4E48\u5982\u679C\u4F7F\u7528 <code>require()</code> \u5BFC\u5165\u8BE5<code>\u5305</code>\uFF0C\u5219\u4F7F\u7528 <code>main</code> \u800C\u4E0D\u662F <code>module</code>\u3002\u6B64\u884C\u4E3A\u901A\u8FC7\u5C06\u51FD\u6570\u5206\u914D\u7ED9 <code>module.exports</code> \u6765\u63D0\u9AD8\u4E0E\u5BFC\u51FA\u51FD\u6570\u7684 CommonJS \u6A21\u5757\u7684\u517C\u5BB9\u6027\u3002",19),Dt=s("\u6761\u4EF6"),Ut=s("\u8BBE\u7F6E\u81EA\u52A8\u5305\u542B"),Nt=n("code",null,"\u6D4F\u89C8\u5668",-1),Gt=s("\u6761\u4EF6\u3002\u8FD9\u6539\u53D8\u4E86 "),Xt=n("code",null,"package.json",-1),Ht=s(" \u6587\u4EF6\u4E2D\u7684"),zt=n("code",null,"\u5BFC\u51FA",-1),Vt=s("\u5B57\u6BB5\u88AB\u89E3\u91CA\u4E3A\u66F4\u559C\u6B22\u6D4F\u89C8\u5668\u7279\u5B9A\u4EE3\u7801\u7684\u65B9\u5F0F\u3002"),Kt=s("\u5982\u679C\u542F\u7528\u4E86\u6240\u6709"),$t=s("\u538B\u7F29\u9009\u9879"),Yt=s("\uFF0C\u5219\u6240\u6709 "),Qt=n("code",null,[s("p"),n("wbr"),s("rocess.env.NODE_ENV")],-1),Zt=s(" \u8868\u8FBE\u5F0F\u90FD\u4F1A"),ne=s("\u81EA\u52A8\u5B9A\u4E49"),se=p("\u4E3A<code>\u201Cproduction\u201D</code>\uFF0C\u5426\u5219\u4E3A<code>\u201Cdevelopment\u201D</code>\u3002\u4EC5\u5F53 <code>process</code>\u3001<code>p<wbr>rocess.env</code> \u548C <code>p<wbr>rocess.env.NODE_ENV</code> \u5C1A\u672A\u5B9A\u4E49\u65F6\u624D\u4F1A\u53D1\u751F\u8FD9\u79CD\u60C5\u51B5\u3002\u8FD9\u79CD\u66FF\u6362\u5BF9\u4E8E\u907F\u514D\u57FA\u4E8E React \u7684\u4EE3\u7801\u7ACB\u5373\u5D29\u6E83\u662F\u5FC5\u8981\u7684\uFF08\u56E0\u4E3A<code>\u8FDB\u7A0B</code>\u662Fnode API\uFF0C\u800C\u4E0D\u662F Web API\uFF09\u3002",13),ae=n("p",null,"\u5F53\u5E73\u53F0\u8BBE\u7F6E\u4E3Anode\u65F6\uFF1A",-1),te=s("\u9ED8\u8BA4\u8F93\u51FA"),ee=s("\u683C\u5F0F"),pe=s("\u8BBE\u7F6E\u4E3A"),oe=n("code",null,"cjs",-1),ie=s("\uFF0C\u4EE3\u8868CommonJS\uFF08node\u4F7F\u7528\u7684\u6A21\u5757\u683C\u5F0F\uFF09\u3002\u4F7F\u7528 "),ce=n("code",null,"export",-1),le=s(" \u8BED\u53E5\u7684 ES6 \u6837\u5F0F\u5BFC\u51FA\u5C06\u8F6C\u6362\u4E3A CommonJS "),ue=n("code",null,"\u5BFC\u51FA",-1),re=s("\u5BF9\u8C61\u4E0A\u7684 getter\u3002"),de=s("\u6240\u6709"),ke={href:"https://nodejs.org/docs/latest/api/",target:"_blank",rel:"noopener noreferrer"},ve=s("\u5185\u7F6Enode\u6A21\u5757"),me=s("\uFF08\u4F8B\u5982 "),be=n("code",null,"fs",-1),ge=s("\uFF09\u90FD\u4F1A\u81EA\u52A8\u6807\u8BB0\u4E3A"),he=s("\u5916\u90E8"),fe=s("\u6A21\u5757\uFF0C\u56E0\u6B64\u5F53\u6346\u7ED1\u5668\u5C1D\u8BD5\u6346\u7ED1\u5B83\u4EEC\u65F6\uFF0C\u5B83\u4EEC\u4E0D\u4F1A\u5BFC\u81F4\u9519\u8BEF\u3002"),_e=s("\u4E3B\u8981\u5B57\u6BB5"),ye=s("\u8BBE\u7F6E\u8BBE\u7F6E\u4E3A "),qe=n("code",null,"main,module",-1),je=s("\u3002\u8FD9\u610F\u5473\u7740\u540C\u65F6\u63D0\u4F9B "),we=n("code",null,"module",-1),xe=s(" \u548C "),Se=n("code",null,"main",-1),Ee=s(" \u7684\u5305\u53EF\u80FD\u4E0D\u4F1A\u53D1\u751F\u6447\u6811\uFF0C\u56E0\u4E3A\u6447\u6811\u9002\u7528\u4E8E ECMAScript \u6A21\u5757\uFF0C\u4F46\u4E0D\u9002\u7528\u4E8E CommonJS \u6A21\u5757\u3002"),Pe=s("\u4E0D\u5E78\u7684\u662F\uFF0C\u4E00\u4E9B\u5305\u9519\u8BEF\u5730\u5C06\u6A21\u5757\u89C6\u4E3A\u201C\u6D4F\u89C8\u5668\u4EE3\u7801\u201D\u800C\u4E0D\u662F\u201CECMAScript "),Be=n("code",null,"\u6A21\u5757",-1),Oe=s("\u4EE3\u7801\u201D\uFF0C\u56E0\u6B64\u4E3A\u4E86\u517C\u5BB9\u6027\u9700\u8981\u8FD9\u79CD\u9ED8\u8BA4\u884C\u4E3A\u3002\u5982\u679C\u60A8\u60F3\u542F\u7528\u6447\u6811\u5E76\u4E14\u77E5\u9053\u8FD9\u6837\u505A\u662F\u5B89\u5168\u7684\uFF0C\u60A8\u53EF\u4EE5\u624B\u52A8\u5C06"),Te=s("\u4E3B\u8981\u5B57\u6BB5"),Ce=s("\u8BBE\u7F6E\u914D\u7F6E\u4E3A "),Ie=n("code",null,"module,main",-1),Ae=s("\u3002"),Je=s("\u6761\u4EF6"),Le=s("\u8BBE\u7F6E\u81EA\u52A8\u5305\u542B"),Me=n("code",null,"node",-1),We=s("\u6761\u4EF6\u3002\u8FD9\u6539\u53D8\u4E86 "),Fe=n("code",null,"package.json",-1),Re=s(" \u6587\u4EF6\u4E2D\u7684"),De=n("code",null,"\u5BFC\u51FA",-1),Ue=s("\u5B57\u6BB5\u88AB\u89E3\u91CA\u4E3A\u66F4\u559C\u6B22\u7279\u5B9A\u4E8Enode\u7684\u4EE3\u7801\u7684\u65B9\u5F0F\u3002"),Ne=n("p",null,"\u5F53\u5E73\u53F0\u8BBE\u7F6E\u4E3Aneutral\u65F6\uFF1A",-1),Ge=s("\u9ED8\u8BA4\u8F93\u51FA"),Xe=s("\u683C\u5F0F"),He=s("\u8BBE\u7F6E\u4E3A "),ze=n("code",null,"esm",-1),Ve=s("\uFF0C\u5B83\u4F7F\u7528 ECMAScript 2015\uFF08\u5373 ES6\uFF09\u5F15\u5165\u7684"),Ke=n("code",null,"\u5BFC\u51FA",-1),$e=s("\u8BED\u6CD5\u3002\u5982\u679C\u6B64\u9ED8\u8BA4\u503C\u4E0D\u5408\u9002\uFF0C\u60A8\u53EF\u4EE5\u66F4\u6539\u8F93\u51FA\u683C\u5F0F\u3002"),Ye=s("\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C"),Qe=s("\u4E3B\u8981\u5B57\u6BB5"),Ze=s("\u8BBE\u7F6E\u4E3A\u7A7A\u3002\u5982\u679C\u60A8\u60F3\u4F7F\u7528 npm \u6837\u5F0F\u7684\u5305\uFF0C\u60A8\u53EF\u80FD\u5FC5\u987B\u5C06\u5176\u914D\u7F6E\u4E3A\u5176\u4ED6\u5185\u5BB9\uFF0C\u4F8B\u5982 node \u4F7F\u7528\u7684\u6807\u51C6 "),np=n("code",null,"main",-1),sp=s(" \u5B57\u6BB5\u7684 main \u3002"),ap=s("\u6761\u4EF6"),tp=s("\u8BBE\u7F6E\u4E0D\u4F1A\u81EA\u52A8\u5305\u542B\u4EFB\u4F55\u7279\u5B9A\u4E8E\u5E73\u53F0\u7684\u503C\u3002"),ep=s("\u53E6\u8BF7\u53C2\u9605"),pp={href:"https://esbuild.github.io/getting-started/#bundling-for-the-browser",target:"_blank",rel:"noopener noreferrer"},op=s("\u6D4F\u89C8\u5668\u7684\u6346\u7ED1"),ip=s("\u548C"),cp={href:"https://esbuild.github.io/getting-started/#bundling-for-node",target:"_blank",rel:"noopener noreferrer"},lp=s("node\u7684\u6346\u7ED1"),up=s("\u3002"),rp=n("h3",{id:"serve",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#serve","aria-hidden":"true"},"#"),s(" Serve")],-1),dp=n("p",null,"\u652F\u6301: Build",-1),kp=n("p",null,"\u5728\u5F00\u53D1\u8FC7\u7A0B\u4E2D\uFF0C\u8FDB\u884C\u66F4\u6539\u65F6\u901A\u5E38\u4F1A\u5728\u6587\u672C\u7F16\u8F91\u5668\u548C\u6D4F\u89C8\u5668\u4E4B\u95F4\u6765\u56DE\u5207\u6362\u3002\u5728\u6D4F\u89C8\u5668\u4E2D\u91CD\u65B0\u52A0\u8F7D\u4EE3\u7801\u4E4B\u524D\u624B\u52A8\u91CD\u65B0\u8FD0\u884C esbuild \u5F88\u4E0D\u65B9\u4FBF\u3002\u6709\u51E0\u79CD\u65B9\u6CD5\u53EF\u4EE5\u81EA\u52A8\u6267\u884C\u6B64\u64CD\u4F5C\uFF1A",-1),vp=s("\u4F7F\u7528"),mp=s("\u76D1\u89C6\u6A21\u5F0F"),bp=s("\u5728\u6587\u4EF6\u66F4\u6539\u65F6\u91CD\u65B0\u8FD0\u884C esbuild"),gp=n("li",null,[n("p",null,"\u914D\u7F6E\u60A8\u7684\u6587\u672C\u7F16\u8F91\u5668\u4EE5\u5728\u6BCF\u6B21\u4FDD\u5B58\u65F6\u8FD0\u884C esbuild")],-1),hp=n("li",null,[n("p",null,"\u4F7F\u7528\u6839\u636E\u6BCF\u4E2A\u8BF7\u6C42\u91CD\u5EFA\u7684 Web \u670D\u52A1\u5668\u4E3A\u60A8\u7684\u4EE3\u7801\u63D0\u4F9B\u670D\u52A1")],-1),fp=s("\u8FD9\u4E2A API \u8C03\u7528\u5B9E\u73B0\u4E86\u6700\u540E\u4E00\u4E2A\u65B9\u6CD5\u3002\u670D\u52A1 API \u7C7B\u4F3C\u4E8E"),_p=s("\u6784\u5EFA API"),yp=s(" \u8C03\u7528\uFF0C\u4F46\u5B83\u4E0D\u662F\u5C06\u751F\u6210\u7684\u6587\u4EF6\u5199\u5165\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u800C\u662F\u542F\u52A8\u4E00\u4E2A\u957F\u671F\u5B58\u5728\u7684\u672C\u5730 HTTP Web \u670D\u52A1\u5668\uFF0C\u4E3A\u6700\u65B0\u6784\u5EFA\u7684\u751F\u6210\u6587\u4EF6\u63D0\u4F9B\u670D\u52A1\u3002\u6BCF\u4E00\u6279\u65B0\u8BF7\u6C42\u90FD\u4F1A\u5BFC\u81F4 esbuild \u5728\u54CD\u5E94\u8BF7\u6C42\u4E4B\u524D\u91CD\u65B0\u8FD0\u884C\u6784\u5EFA\u547D\u4EE4\uFF0C\u4EE5\u4FBF\u60A8\u7684\u6587\u4EF6\u59CB\u7EC8\u662F\u6700\u65B0\u7684\u3002"),qp=p(`<p>\u4E0E\u5176\u4ED6\u65B9\u6CD5\u76F8\u6BD4\uFF0C\u8FD9\u79CD\u65B9\u6CD5\u7684\u4F18\u52BF\u5728\u4E8E Web \u670D\u52A1\u5668\u53EF\u4EE5\u5EF6\u8FDF\u6D4F\u89C8\u5668\u7684\u8BF7\u6C42\uFF0C\u76F4\u5230\u6784\u5EFA\u5B8C\u6210\u3002\u8FD9\u6837\uFF0C\u5728\u6700\u65B0\u6784\u5EFA\u5B8C\u6210\u4E4B\u524D\u5728\u6D4F\u89C8\u5668\u4E2D\u91CD\u65B0\u52A0\u8F7D\u4EE3\u7801\u5C06\u6C38\u8FDC\u4E0D\u4F1A\u8FD0\u884C\u5148\u524D\u6784\u5EFA\u4E2D\u7684\u4EE3\u7801\u3002\u8FD9\u4E9B\u6587\u4EF6\u662F\u4ECE\u5185\u5B58\u4E2D\u63D0\u4F9B\u7684\uFF0C\u4E0D\u4F1A\u5199\u5165\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u4EE5\u786E\u4FDD\u65E0\u6CD5\u89C2\u5BDF\u5230\u8FC7\u65F6\u7684\u6587\u4EF6\u3002</p><p>\u8BF7\u6CE8\u610F\uFF0C\u8FD9\u4EC5\u7528\u4E8E\u5F00\u53D1\u3002\u4E0D\u8981\u5728\u751F\u4EA7\u4E2D\u4F7F\u7528\u5B83\u3002\u5728\u751F\u4EA7\u4E2D\uFF0C\u60A8\u5E94\u8BE5\u5728\u4E0D\u4F7F\u7528 esbuild \u4F5C\u4E3A Web \u670D\u52A1\u5668\u7684\u60C5\u51B5\u4E0B\u63D0\u4F9B\u9759\u6001\u6587\u4EF6\u3002</p><p>\u4F7F\u7528\u670D\u52A1 API \u6709\u4E24\u79CD\u4E0D\u540C\u7684\u65B9\u6CD5\uFF1A</p><h4 id="\u65B9\u6CD5\u4E00-\u7528-esbuild-\u670D\u52A1\u4E00\u5207" tabindex="-1"><a class="header-anchor" href="#\u65B9\u6CD5\u4E00-\u7528-esbuild-\u670D\u52A1\u4E00\u5207" aria-hidden="true">#</a> \u65B9\u6CD5\u4E00\uFF1A\u7528 esbuild \u670D\u52A1\u4E00\u5207</h4><p>\u4F7F\u7528\u8FD9\u79CD\u65B9\u6CD5\uFF0C\u9664\u4E86 esbuild \u751F\u6210\u7684\u6587\u4EF6\u4E4B\u5916\uFF0C\u60A8\u8FD8\u4E3A esbuild \u63D0\u4F9B\u4E86\u4E00\u4E2A\u540D\u4E3A <code>serveir \u7684\u76EE\u5F55</code>\uFF0C\u5176\u4E2D\u5305\u542B\u8981\u63D0\u4F9B\u7684\u989D\u5916\u5185\u5BB9\u3002\u8FD9\u9002\u7528\u4E8E\u521B\u5EFA\u4E00\u4E9B\u9759\u6001 HTML \u9875\u9762\u5E76\u5E0C\u671B\u4F7F\u7528 esbuild \u6346\u7ED1 JavaScript \u548C/\u6216 CSS \u7684\u7B80\u5355\u60C5\u51B5\u3002\u60A8\u53EF\u4EE5\u5C06\u60A8\u7684 HTML \u6587\u4EF6\u653E\u5728 <code>servedir</code> \u4E2D\uFF0C\u5E76\u5C06\u60A8\u7684\u5176\u4ED6\u6E90\u4EE3\u7801\u653E\u5728 <code>servedir</code> \u4E4B\u5916\uFF0C\u7136\u540E\u5C06 <code>outdir</code> \u8BBE\u7F6E\u5728 <code>servedir</code> \u5185\u7684\u67D0\u4E2A\u4F4D\u7F6E\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild src/app.js --servedir<span class="token operator">=</span>www --outdir<span class="token operator">=</span>www/js --bundle
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">servedir</span><span class="token operator">:</span> <span class="token string">&#39;www&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;src/app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outdir</span><span class="token operator">:</span> <span class="token string">&#39;www/js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">server</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Call &quot;stop&quot; on the web server when you&#39;re done</span>
  server<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
server<span class="token punctuation">,</span> err <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Serve</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>ServeOptions<span class="token punctuation">{</span>
  Servedir<span class="token punctuation">:</span> <span class="token string">&quot;www&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
  EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;src/app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  Outdir<span class="token punctuation">:</span>      <span class="token string">&quot;www/js&quot;</span><span class="token punctuation">,</span>
  Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Call &quot;stop&quot; on the web server when you&#39;re done</span>
server<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u5728\u4E0A\u9762\u7684\u4F8B\u5B50\u4E2D\uFF0C\u4F60\u7684 <code>www/index.html</code> \u9875\u9762\u53EF\u4EE5\u50CF\u8FD9\u6837\u5F15\u7528 <code>src/app.js</code> \u4E2D\u7684\u7F16\u8BD1\u4EE3\u7801\uFF1A</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>js/app.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5F53\u60A8\u8FD9\u6837\u505A\u65F6\uFF0C\u6BCF\u4E2A HTTP \u8BF7\u6C42\u90FD\u4F1A\u5BFC\u81F4 esbuild \u91CD\u5EFA\u60A8\u7684\u4EE3\u7801\u5E76\u4E3A\u60A8\u63D0\u4F9B\u6700\u65B0\u7248\u672C\u3002\u56E0\u6B64\uFF0C\u6BCF\u6B21\u60A8\u91CD\u65B0\u52A0\u8F7D\u9875\u9762\u65F6\uFF0C<code>js/app.js</code> \u5C06\u59CB\u7EC8\u662F\u6700\u65B0\u7684\u3002\u8BF7\u6CE8\u610F\uFF0C\u867D\u7136\u751F\u6210\u7684\u4EE3\u7801\u4F3C\u4E4E\u5728 <code>outdir</code> \u76EE\u5F55\u4E2D\uFF0C\u4F46\u5B83\u5B9E\u9645\u4E0A\u4ECE\u672A\u4F7F\u7528 serve API \u5199\u5165\u6587\u4EF6\u7CFB\u7EDF\u3002\u76F8\u53CD\uFF0C\u751F\u6210\u7684\u4EE3\u7801\u9634\u5F71\u7684\u8DEF\u5F84\uFF08\u5373\u4F18\u5148\u4E8E\uFF09<code>servedir</code> \u548C\u751F\u6210\u7684\u6587\u4EF6\u4E2D\u7684\u5176\u4ED6\u8DEF\u5F84\u76F4\u63A5\u4ECE\u5185\u5B58\u4E2D\u63D0\u4F9B\u3002</p><p>\u8FD9\u6837\u505A\u7684\u597D\u5904\u662F\u60A8\u53EF\u4EE5\u5728\u5F00\u53D1\u548C\u751F\u4EA7\u4E2D\u4F7F\u7528\u5B8C\u5168\u76F8\u540C\u7684 HTML \u9875\u9762\u3002\u5728\u5F00\u53D1\u4E2D\uFF0C\u60A8\u53EF\u4EE5\u4F7F\u7528 <code>--servedir=</code> \u8FD0\u884C esbuild\uFF0Cesbuild \u5C06\u76F4\u63A5\u63D0\u4F9B\u751F\u6210\u7684\u8F93\u51FA\u6587\u4EF6\u3002\u5BF9\u4E8E\u751F\u4EA7\uFF0C\u60A8\u53EF\u4EE5\u7701\u7565\u8BE5\u6807\u5FD7\uFF0Cesbuild \u4F1A\u5C06\u751F\u6210\u7684\u6587\u4EF6\u5199\u5165\u6587\u4EF6\u7CFB\u7EDF\u3002\u5728\u8FD9\u4E24\u79CD\u60C5\u51B5\u4E0B\uFF0C\u60A8\u5E94\u8BE5\u5728\u5F00\u53D1\u548C\u751F\u4EA7\u4E2D\u4F7F\u7528\u5B8C\u5168\u76F8\u540C\u7684\u4EE3\u7801\u5728\u6D4F\u89C8\u5668\u4E2D\u83B7\u5F97\u5B8C\u5168\u76F8\u540C\u7684\u7ED3\u679C\u3002</p><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u7AEF\u53E3\u4F1A\u81EA\u52A8\u9009\u62E9\u4E3A\u7B2C\u4E00\u4E2A\u7B49\u4E8E\u6216\u5927\u4E8E 8000 \u7684\u5F00\u653E\u7AEF\u53E3\u3002\u7AEF\u53E3\u53F7\u4ECE API \u8C03\u7528\u8FD4\u56DE\uFF08\u6216\u6253\u5370\u5230 CLI \u7684\u7EC8\u7AEF\uFF09\uFF0C\u56E0\u6B64\u60A8\u53EF\u4EE5\u77E5\u9053\u8981\u8BBF\u95EE\u54EA\u4E2A URL\u3002\u5982\u6709\u5FC5\u8981\uFF0C\u53EF\u4EE5\u5C06\u7AEF\u53E3\u8BBE\u7F6E\u4E3A\u7279\u5B9A\u7684\u5185\u5BB9\uFF08\u5728\u4E0B\u9762\u8FDB\u4E00\u6B65\u63CF\u8FF0\uFF09\u3002</p><h4 id="\u65B9\u6CD5-2-\u4EC5\u4F7F\u7528-esbuild-\u63D0\u4F9B\u751F\u6210\u7684\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u65B9\u6CD5-2-\u4EC5\u4F7F\u7528-esbuild-\u63D0\u4F9B\u751F\u6210\u7684\u6587\u4EF6" aria-hidden="true">#</a> \u65B9\u6CD5 2\uFF1A\u4EC5\u4F7F\u7528 esbuild \u63D0\u4F9B\u751F\u6210\u7684\u6587\u4EF6</h4>`,12),jp=s("\u4F7F\u7528\u8FD9\u79CD\u65B9\u6CD5\uFF0C\u60A8\u53EA\u9700\u544A\u8BC9 esbuild \u63D0\u4F9B "),wp=s("outdir"),xp=s(" \u7684\u5185\u5BB9\uFF0C\u800C\u65E0\u9700\u4E3A\u5176\u63D0\u4F9B\u4EFB\u4F55\u989D\u5916\u7684\u5185\u5BB9\u3002\u8FD9\u9002\u7528\u4E8E\u66F4\u590D\u6742\u7684\u5F00\u53D1\u8BBE\u7F6E\u3002\u4F8B\u5982\uFF0C\u60A8\u53EF\u80FD\u5E0C\u671B\u4F7F\u7528 NGINX \u4F5C\u4E3A\u53CD\u5411\u4EE3\u7406\uFF0C\u5728\u5F00\u53D1\u8FC7\u7A0B\u4E2D\u5C06\u4E0D\u540C\u8DEF\u5F84\u8DEF\u7531\u5230\u5355\u72EC\u7684\u540E\u7AEF\u670D\u52A1\uFF08\u4F8B\u5982 "),Sp=n("code",null,"/static/",-1),Ep=s(" \u5230 NGINX\u3001"),Pp=n("code",null,"/api/",-1),Bp=s(" \u5230 node\u3001"),Op=n("code",null,"/js/",-1),Tp=s(" \u5230 esbuild \u7B49\uFF09\u3002\u901A\u8FC7\u8FD9\u79CD\u65B9\u6CD5\u4F7F\u7528 esbuild \u770B\u8D77\u6765\u50CF\u8FD9\u6837\uFF1A"),Cp=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild src/app.js --outfile<span class="token operator">=</span>out.js --bundle --serve<span class="token operator">=</span><span class="token number">8000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8000</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;src/app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">server</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Call &quot;stop&quot; on the web server when you&#39;re done</span>
  server<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// go</span>

server<span class="token punctuation">,</span> err <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Serve</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>ServeOptions<span class="token punctuation">{</span>
  Port<span class="token punctuation">:</span> <span class="token number">8000</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
  EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;src/app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
  Outfile<span class="token punctuation">:</span>     <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Call &quot;stop&quot; on the web server when you&#39;re done</span>
server<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div>`,1),Ip=s("\u4E0A\u9762\u793A\u4F8B\u4E2D\u7684 API \u8C03\u7528\u5C06\u5728 "),Ap={href:"http://localhost:8000/out.js",target:"_blank",rel:"noopener noreferrer"},Jp=s("http://localhost:8000/out.js"),Lp=s(" \u5904\u63D0\u4F9B src/app.js \u7684\u7F16\u8BD1\u5185\u5BB9\u3002\u5C31\u50CF\u7B2C\u4E00\u79CD\u65B9\u6CD5\u4E00\u6837\uFF0C\u6BCF\u4E2A HTTP \u8BF7\u6C42\u90FD\u4F1A\u5BFC\u81F4 esbuild \u91CD\u5EFA\u60A8\u7684\u4EE3\u7801\u5E76\u4E3A\u60A8\u63D0\u4F9B\u6700\u65B0\u7248\u672C\uFF0C\u56E0\u6B64 "),Mp=n("code",null,"out.js",-1),Wp=s(" \u5C06\u59CB\u7EC8\u662F\u6700\u65B0\u7684\u3002\u7136\u540E\uFF0C\u60A8\u7684 HTML \u6587\u4EF6\uFF08\u7531\u53E6\u4E00\u4E2A\u7AEF\u53E3\u4E0A\u7684\u53E6\u4E00\u4E2A Web \u670D\u52A1\u5668\u63D0\u4F9B\u670D\u52A1\uFF09\u53EF\u4EE5\u50CF\u8FD9\u6837\u4ECE\u60A8\u7684 HTML \u5F15\u7528\u7F16\u8BD1\u540E\u7684\u6587\u4EF6\uFF1A"),Fp=p(`<div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://localhost:8000/out.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,1),Rp=s("\u5728\u672A\u542F\u7528 Web \u670D\u52A1\u5668\u7684\u60C5\u51B5\u4E0B\u4F7F\u7528\u666E\u901A\u6784\u5EFA\u547D\u4EE4\u65F6\uFF0CWeb \u670D\u52A1\u5668\u7684 URL \u7ED3\u6784\u5B8C\u5168\u53CD\u6620"),Dp=s("\u8F93\u51FA\u76EE\u5F55"),Up=s("\u7684 URL \u7ED3\u6784\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u8F93\u51FA\u76EE\u5F55\u901A\u5E38\u5305\u542B\u4E00\u4E2A\u540D\u4E3A "),Np=n("code",null,"./pages/about.js",-1),Gp=s(" \u7684\u6587\u4EF6\uFF0C\u5219 Web \u670D\u52A1\u5668\u5C06\u5177\u6709\u76F8\u5E94\u7684 "),Xp=n("code",null,"/pages/about.js",-1),Hp=s(" \u8DEF\u5F84\u3002"),zp=s("\u5982\u679C\u60A8\u60F3\u6D4F\u89C8 Web \u670D\u52A1\u5668\u4EE5\u67E5\u770B\u54EA\u4E9B URL \u53EF\u7528\uFF0C\u60A8\u53EF\u4EE5\u901A\u8FC7\u8BBF\u95EE\u76EE\u5F55\u540D\u800C\u4E0D\u662F\u6587\u4EF6\u540D\u6765\u4F7F\u7528\u5185\u7F6E\u76EE\u5F55\u5217\u8868\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u60A8\u5728\u7AEF\u53E3 8000 \u4E0A\u8FD0\u884C esbuild \u7684 Web \u670D\u52A1\u5668\uFF0C\u5219\u53EF\u4EE5\u5728\u6D4F\u89C8\u5668\u4E2D\u8BBF\u95EE "),Vp={href:"http://localhost:8000/",target:"_blank",rel:"noopener noreferrer"},Kp=s("http://localhost:8000/"),$p=s(" \u4EE5\u67E5\u770B Web \u670D\u52A1\u5668\u7684\u6839\u76EE\u5F55\u3002\u4ECE\u90A3\u91CC\u60A8\u53EF\u4EE5\u5355\u51FB\u94FE\u63A5\u4EE5\u6D4F\u89C8 Web \u670D\u52A1\u5668\u4E0A\u7684\u4E0D\u540C\u6587\u4EF6\u548C\u76EE\u5F55\u3002"),Yp=n("h4",{id:"arguments",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#arguments","aria-hidden":"true"},"#"),s(" Arguments")],-1),Qp=s("\u8BF7\u6CE8\u610F\uFF0C\u670D\u52A1 API \u662F\u4E0E"),Zp=s("\u6784\u5EFA API"),no=s(" \u4E0D\u540C\u7684 API \u8C03\u7528\u3002\u8FD9\u662F\u56E0\u4E3A\u542F\u52A8\u4E00\u4E2A\u957F\u65F6\u95F4\u8FD0\u884C\u7684 Web \u670D\u52A1\u5668\u662F\u4E0D\u540C\u7684\uFF0C\u8DB3\u4EE5\u4FDD\u8BC1\u4E0D\u540C\u7684\u53C2\u6570\u548C\u8FD4\u56DE\u503C\u3002\u670D\u52A1 API \u8C03\u7528\u7684\u7B2C\u4E00\u4E2A\u53C2\u6570\u662F\u5E26\u6709\u670D\u52A1\u7279\u5B9A\u9009\u9879\u7684\u9009\u9879\u5BF9\u8C61\uFF1A"),so=p(`<div><div title="ts"><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ServeOptions</span> <span class="token punctuation">{</span>
  port<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  host<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  servedir<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  onRequest<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>args<span class="token operator">:</span> ServeOnRequestArgs<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">ServeOnRequestArgs</span> <span class="token punctuation">{</span>
  remoteAddress<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  method<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  status<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  timeInMS<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> ServeOptions <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  Port      <span class="token builtin">uint16</span>
  Host      <span class="token builtin">string</span>
  Servedir  <span class="token builtin">string</span>
  OnRequest <span class="token keyword">func</span><span class="token punctuation">(</span>ServeOnRequestArgs<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> ServeOnRequestArgs <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  RemoteAddress <span class="token builtin">string</span>
  Method        <span class="token builtin">string</span>
  Path          <span class="token builtin">string</span>
  Status        <span class="token builtin">int</span>
  TimeInMS      <span class="token builtin">int</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><ul><li>port</li></ul><p>\u53EF\u4EE5\u9009\u62E9\u5728\u6B64\u5904\u914D\u7F6E HTTP \u7AEF\u53E3\u3002\u5982\u679C\u7701\u7565\uFF0C\u5219\u9ED8\u8BA4\u4E3A\u5F00\u653E\u7AEF\u53E3\uFF0C\u4F18\u5148\u9009\u62E9\u7AEF\u53E3 8000\u3002\u60A8\u53EF\u4EE5\u5728\u547D\u4EE4\u884C\u4E0A\u4F7F\u7528 <code>--serve=8000</code> \u800C\u4E0D\u662F <code>--serve</code> \u8BBE\u7F6E\u7AEF\u53E3\u3002</p><ul><li>host</li></ul><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Cesbuild \u4F7F Web \u670D\u52A1\u5668\u53EF\u7528\u4E8E\u6240\u6709 IPv4 \u7F51\u7EDC\u63A5\u53E3\u3002\u8FD9\u5BF9\u5E94\u4E8E <code>0.0.0.0</code> \u7684\u4E3B\u673A\u5730\u5740\u3002\u5982\u679C\u60A8\u60F3\u914D\u7F6E\u4E0D\u540C\u7684\u4E3B\u673A\uFF08\u4F8B\u5982\uFF0C\u4EC5\u5728 <code>127.0.0.1</code> \u73AF\u56DE\u63A5\u53E3\u4E0A\u63D0\u4F9B\u670D\u52A1\u800C\u4E0D\u5411\u7F51\u7EDC\u516C\u5F00\u4EFB\u4F55\u5185\u5BB9\uFF09\uFF0C\u60A8\u53EF\u4EE5\u4F7F\u7528\u6B64\u53C2\u6570\u6307\u5B9A\u4E3B\u673A\u3002\u60A8\u53EF\u4EE5\u4F7F\u7528 <code>--serve=127.0.0.1:8000</code> \u800C\u4E0D\u662F <code>--serve</code> \u5728\u547D\u4EE4\u884C\u4E0A\u8BBE\u7F6E\u4E3B\u673A\u3002</p><p>\u5982\u679C\u60A8\u9700\u8981\u4F7F\u7528 IPv6 \u800C\u4E0D\u662F IPv4\uFF0C\u60A8\u53EA\u9700\u8981\u6307\u5B9A\u4E00\u4E2A IPv6 \u4E3B\u673A\u5730\u5740\u3002\u7B49\u6548\u4E8E IPv6 \u4E2D\u7684 <code>127.0.0.1</code> \u73AF\u56DE\u63A5\u53E3\u662F <code>::1</code>\uFF0C\u7B49\u6548\u4E8E IPv6 \u4E2D\u7684 <code>0.0.0.0</code> \u901A\u7528\u63A5\u53E3\u662F <code>::</code>\u3002\u5982\u679C\u5728\u547D\u4EE4\u884C\u4E2D\u5C06\u4E3B\u673A\u8BBE\u7F6E\u4E3A IPv6 \u5730\u5740\uFF0C\u5219\u9700\u8981\u7528\u65B9\u62EC\u53F7\u5C06 IPv6 \u5730\u5740\u62EC\u8D77\u6765\uFF0C\u4EE5\u533A\u5206\u5730\u5740\u4E2D\u7684\u5192\u53F7\u548C\u5206\u9694\u4E3B\u673A\u548C\u7AEF\u53E3\u7684\u5192\u53F7\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A<code>--serve=[:: ]\uFF1A8000</code>\u3002</p><ul><li>servedir</li></ul><p>\u5F53\u4F20\u5165\u8BF7\u6C42\u4E0E\u4EFB\u4F55\u751F\u6210\u7684\u8F93\u51FA\u6587\u4EF6\u8DEF\u5F84\u4E0D\u5339\u914D\u65F6\uFF0C\u8FD9\u662F esbuild \u7684 HTTP \u670D\u52A1\u5668\u63D0\u4F9B\u7684\u989D\u5916\u5185\u5BB9\u76EE\u5F55\uFF0C\u800C\u4E0D\u662F 404\u3002\u8FD9\u4F7F\u60A8\u53EF\u4EE5\u5C06 esbuild \u7528\u4F5C\u901A\u7528\u7684\u672C\u5730 Web \u670D\u52A1\u5668\u3002\u4F8B\u5982\uFF0C\u4F7F\u7528 <code>esbuild --servedir=</code>\u3002\u4E3A<code>\u672C\u5730</code>\u4E3B\u673A\u4E0A\u7684<code>\u5F53\u524D\u76EE\u5F55</code>\u63D0\u4F9B\u670D\u52A1\u3002\u5728\u524D\u9762\u5173\u4E8E\u4E0D\u540C\u65B9\u6CD5\u7684\u90E8\u5206\u4E2D\u66F4\u8BE6\u7EC6\u5730\u63CF\u8FF0\u4E86\u4F7F\u7528 serveir\u3002</p><ul><li>onRequest</li></ul><p>\u6BCF\u4E2A\u4F20\u5165\u8BF7\u6C42\u90FD\u4F1A\u8C03\u7528\u4E00\u6B21\uFF0C\u5E76\u63D0\u4F9B\u6709\u5173\u8BF7\u6C42\u7684\u4E00\u4E9B\u4FE1\u606F\u3002 CLI \u4F7F\u7528\u6B64\u56DE\u8C03\u4E3A\u6BCF\u4E2A\u8BF7\u6C42\u6253\u5370\u65E5\u5FD7\u6D88\u606F\u3002\u65F6\u95F4\u5B57\u6BB5\u662F\u4E3A\u8BF7\u6C42\u751F\u6210\u6570\u636E\u7684\u65F6\u95F4\uFF0C\u4F46\u4E0D\u5305\u62EC\u5C06\u8BF7\u6C42\u6D41\u5F0F\u4F20\u8F93\u5230\u5BA2\u6237\u7AEF\u7684\u65F6\u95F4\u3002</p>`,10),ao=s("\u8BF7\u6CE8\u610F\uFF0C\u8FD9\u662F\u5728\u8BF7\u6C42\u5B8C\u6210\u540E\u8C03\u7528\u7684\u3002\u65E0\u6CD5\u4F7F\u7528\u6B64\u56DE\u8C03\u4EE5\u4EFB\u4F55\u65B9\u5F0F\u4FEE\u6539\u8BF7\u6C42\u3002\u5982\u679C\u4F60\u60F3\u8FD9\u6837\u505A\uFF0C\u4F60\u5E94\u8BE5"),to=s("\u5728 esbuild \u524D\u9762\u653E\u7F6E\u4E00\u4E2A\u4EE3\u7406"),eo=s("\u3002"),po=s("\u670D\u52A1 API \u8C03\u7528\u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F\u5728\u6BCF\u4E2A\u8BF7\u6C42\u4E0A\u8C03\u7528\u7684\u5E95\u5C42\u6784\u5EFA API \u7684\u6B63\u5E38\u9009\u9879\u96C6\u3002\u6709\u5173\u8FD9\u4E9B\u9009\u9879\u7684\u66F4\u591A\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605"),oo=s("\u6784\u5EFA API"),io=s(" \u7684\u6587\u6863\u3002"),co=p(`<h4 id="return-values" tabindex="-1"><a class="header-anchor" href="#return-values" aria-hidden="true">#</a> Return values</h4><div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">interface</span> <span class="token class-name">ServeResult</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">port</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
  <span class="token literal-property property">host</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">wait</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token function-variable function">stop</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// go</span>

<span class="token keyword">type</span> ServeResult <span class="token keyword">struct</span> <span class="token punctuation">{</span>
  Port <span class="token builtin">uint16</span>
  Host <span class="token builtin">string</span>
  Wait <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span>
  Stop <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><ul><li>port</li></ul><p>\u8FD9\u662F Web \u670D\u52A1\u5668\u6700\u7EC8\u4F7F\u7528\u7684\u7AEF\u53E3\u3002\u5982\u679C\u60A8\u6CA1\u6709\u6307\u5B9A\u7AEF\u53E3\uFF0C\u60A8\u5C06\u9700\u8981\u4F7F\u7528\u5B83\uFF0C\u56E0\u4E3A esbuild \u6700\u7EC8\u4F1A\u9009\u62E9\u4E00\u4E2A\u4EFB\u610F\u7684\u5F00\u653E\u7AEF\u53E3\uFF0C\u5E76\u4E14\u60A8\u9700\u8981\u77E5\u9053\u5B83\u9009\u62E9\u4E86\u54EA\u4E2A\u7AEF\u53E3\u624D\u80FD\u8FDE\u63A5\u5230\u5B83\u3002\u5982\u679C\u60A8\u4F7F\u7528\u7684\u662F CLI\uFF0C\u5219\u6B64\u7AEF\u53E3\u53F7\u5C06\u6253\u5370\u5230\u7EC8\u7AEF\u4E2D\u7684 stderr\u3002</p><ul><li>host</li></ul><p>\u8FD9\u662F\u6700\u7EC8\u88AB Web \u670D\u52A1\u5668\u4F7F\u7528\u7684\u4E3B\u673A\u3002\u9664\u975E\u914D\u7F6E\u4E86\u81EA\u5B9A\u4E49\u4E3B\u673A\uFF0C\u5426\u5219\u5B83\u5C06\u662F <code>0.0.0.0</code>\uFF08\u5373\u5728\u6240\u6709\u53EF\u7528\u7684\u7F51\u7EDC\u63A5\u53E3\u4E0A\u63D0\u4F9B\u670D\u52A1\uFF09\u3002</p><ul><li>wait</li></ul><p>\u53EA\u8981\u53EF\u4EE5\u6253\u5F00\u5957\u63A5\u5B57\uFF0C\u670D\u52A1 API \u8C03\u7528\u5C31\u4F1A\u7ACB\u5373\u8FD4\u56DE\u3002<code>await</code>\u8FD4\u56DE\u503C\u63D0\u4F9B\u4E86\u4E00\u79CD\u5728 Web \u670D\u52A1\u5668\u7EC8\u6B62\u65F6\u901A\u77E5\u7684\u65B9\u6CD5\uFF0C\u65E0\u8BBA\u662F\u7531\u4E8E\u7F51\u7EDC\u9519\u8BEF\u8FD8\u662F\u7531\u4E8E\u5728\u5C06\u6765\u7684\u67D0\u4E2A\u65F6\u95F4\u70B9<code>stop</code>\u8C03\u7528\u3002</p><ul><li>stop</li></ul><p>\u8C03\u7528\u8FD9\u4E2A\u56DE\u8C03\u6765\u505C\u6B62 web \u670D\u52A1\u5668\uFF0C\u5F53\u4F60\u4E0D\u518D\u9700\u8981\u5B83\u6765\u6E05\u7406\u8D44\u6E90\u65F6\u4F60\u5E94\u8BE5\u8FD9\u6837\u505A\u3002\u8FD9\u5C06\u7ACB\u5373\u7EC8\u6B62\u6240\u6709\u6253\u5F00\u7684\u8FDE\u63A5\u5E76\u5524\u9192\u4EFB\u4F55<code>\u7B49\u5F85</code>\u7B49\u5F85\u8FD4\u56DE\u503C\u7684\u4EE3\u7801\u3002</p><h4 id="customizing-server-behavior" tabindex="-1"><a class="header-anchor" href="#customizing-server-behavior" aria-hidden="true">#</a> Customizing server behavior</h4><p>\u65E0\u6CD5\u8FDE\u63A5\u5230 esbuild \u7684\u672C\u5730\u670D\u52A1\u5668\u6765\u81EA\u5B9A\u4E49\u670D\u52A1\u5668\u672C\u8EAB\u7684\u884C\u4E3A\u3002\u76F8\u53CD\uFF0C\u5E94\u8BE5\u901A\u8FC7\u5728 esbuild \u524D\u9762\u653E\u7F6E\u4E00\u4E2A\u4EE3\u7406\u6765\u81EA\u5B9A\u4E49\u884C\u4E3A\u3002</p><p>\u8FD9\u662F\u4E00\u4E2A\u7B80\u5355\u7684\u4EE3\u7406\u670D\u52A1\u5668\u793A\u4F8B\uFF0C\u53EF\u5E2E\u52A9\u60A8\u5165\u95E8\u3002\u5B83\u6DFB\u52A0\u4E86\u4E00\u4E2A\u81EA\u5B9A\u4E49\u7684 404 \u9875\u9762\uFF0C\u800C\u4E0D\u662F esbuild \u7684\u9ED8\u8BA4 404 \u9875\u9762\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// js</span>

<span class="token keyword">const</span> esbuild <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Start esbuild&#39;s server on a random local port</span>
esbuild<span class="token punctuation">.</span><span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">servedir</span><span class="token operator">:</span> __dirname<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... your build options go here ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// The result tells us where esbuild&#39;s local server is</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>host<span class="token punctuation">,</span> port<span class="token punctuation">}</span> <span class="token operator">=</span> result

  <span class="token comment">// Then start a proxy server on port 3000</span>
  http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">hostname</span><span class="token operator">:</span> host<span class="token punctuation">,</span>
      <span class="token literal-property property">port</span><span class="token operator">:</span> port<span class="token punctuation">,</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> req<span class="token punctuation">.</span>url<span class="token punctuation">,</span>
      <span class="token literal-property property">method</span><span class="token operator">:</span> req<span class="token punctuation">.</span>method<span class="token punctuation">,</span>
      <span class="token literal-property property">headers</span><span class="token operator">:</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Forward each incoming request to esbuild</span>
    <span class="token keyword">const</span> proxyReq <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token parameter">proxyRes</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// If esbuild returns &quot;not found&quot;, send a custom 404 page</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>proxyRes<span class="token punctuation">.</span>statusCode <span class="token operator">===</span> <span class="token number">404</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text/html&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;h1&gt;A custom 404 page&lt;/h1&gt;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// Otherwise, forward the response from esbuild to the client</span>
      res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span>proxyRes<span class="token punctuation">.</span>statusCode<span class="token punctuation">,</span> proxyRes<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">;</span>
      proxyRes<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">end</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Forward the body of the request to esbuild</span>
    req<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>proxyReq<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">end</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,14),lo=s("\u6B64\u4EE3\u7801\u5728\u968F\u673A\u672C\u5730\u7AEF\u53E3\u4E0A\u542F\u52A8 esbuild \u7684\u670D\u52A1\u5668\uFF0C\u7136\u540E\u5728\u7AEF\u53E3 3000 \u4E0A\u542F\u52A8\u4EE3\u7406\u670D\u52A1\u5668\u3002\u5728\u5F00\u53D1\u8FC7\u7A0B\u4E2D\uFF0C\u60A8\u5C06\u5728\u6D4F\u89C8\u5668\u4E2D\u52A0\u8F7D "),uo={href:"http://localhost:3000",target:"_blank",rel:"noopener noreferrer"},ro=s("http://localhost:3000"),ko=s("\uFF0C\u5B83\u4E0E\u4EE3\u7406\u901A\u4FE1\u3002\u6B64\u793A\u4F8B\u6F14\u793A\u5728 esbuild \u5904\u7406\u8BF7\u6C42\u540E\u4FEE\u6539\u54CD\u5E94\uFF0C\u4F46\u60A8\u4E5F\u53EF\u4EE5\u5728 esbuild \u5904\u7406\u8BF7\u6C42\u4E4B\u524D\u4FEE\u6539\u6216\u66FF\u6362\u8BF7\u6C42\u3002"),vo=n("p",null,"\u4F60\u53EF\u4EE5\u7528\u8FD9\u6837\u7684\u4EE3\u7406\u505A\u5F88\u591A\u4E8B\u60C5\uFF0C\u5305\u62EC\uFF1A",-1),mo=n("ul",null,[n("li",null,[n("p",null,"\u6CE8\u5165\u4F60\u81EA\u5DF1\u7684 404 \u9875\u9762\uFF08\u4E0A\u9762\u7684\u4F8B\u5B50\uFF09")]),n("li",null,[n("p",null,"\u81EA\u5B9A\u4E49\u8DEF\u7531\u5230\u6587\u4EF6\u7CFB\u7EDF\u4E0A\u6587\u4EF6\u7684\u6620\u5C04")]),n("li",null,[n("p",null,"\u5C06\u4E00\u4E9B\u8DEF\u7531\u91CD\u5B9A\u5411\u5230 API \u670D\u52A1\u5668\u800C\u4E0D\u662F esbuild")]),n("li",null,[n("p",null,"\u4F7F\u7528\u60A8\u81EA\u5DF1\u7684\u81EA\u7B7E\u540D\u8BC1\u4E66\u6DFB\u52A0\u5BF9 HTTPS \u7684\u652F\u6301")])],-1),bo=s("\u5982\u679C\u60A8\u6709\u66F4\u9AD8\u7EA7\u7684\u9700\u6C42\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528\u771F\u6B63\u7684\u4EE3\u7406\uFF0C\u4F8B\u5982 "),go={href:"https://nginx.org/en/docs/beginners_guide.html#proxy",target:"_blank",rel:"noopener noreferrer"},ho=s("NGINX"),fo=s("\u3002"),_o=n("h3",{id:"sourcemap",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#sourcemap","aria-hidden":"true"},"#"),s(" Sourcemap")],-1),yo=n("p",null,"\u652F\u6301\uFF1ATransform | Build",-1),qo=s("\u6E90\u6620\u5C04\u53EF\u4EE5\u4F7F\u8C03\u8BD5\u4EE3\u7801\u66F4\u5BB9\u6613\u3002\u5B83\u4EEC\u5BF9\u5C06\u751F\u6210\u7684\u8F93\u51FA\u6587\u4EF6\u4E2D\u7684\u884C/\u5217\u504F\u79FB\u8F6C\u6362\u56DE\u76F8\u5E94\u539F\u59CB\u8F93\u5165\u6587\u4EF6\u4E2D\u7684\u884C/\u5217\u504F\u79FB\u6240\u9700\u7684\u4FE1\u606F\u8FDB\u884C\u7F16\u7801\u3002\u5982\u679C\u60A8\u751F\u6210\u7684\u4EE3\u7801\u4E0E\u539F\u59CB\u4EE3\u7801\u6709\u5F88\u5927\u4E0D\u540C\uFF08\u4F8B\u5982\uFF0C\u60A8\u7684\u539F\u59CB\u4EE3\u7801\u662F TypeScript \u6216\u60A8\u542F\u7528\u4E86"),jo=s("\u538B\u7F29"),wo=s("\uFF09\uFF0C\u8FD9\u5C06\u975E\u5E38\u6709\u7528\u3002\u5982\u679C\u60A8\u66F4\u559C\u6B22\u5728\u6D4F\u89C8\u5668\u7684\u5F00\u53D1\u4EBA\u5458\u5DE5\u5177\u4E2D\u67E5\u770B\u5355\u4E2A\u6587\u4EF6\u800C\u4E0D\u662F\u4E00\u4E2A\u5927\u7684\u6346\u7ED1\u6587\u4EF6\uFF0C\u8FD9\u4E5F\u5F88\u6709\u7528\u3002"),xo=p(`<p>\u8BF7\u6CE8\u610F\uFF0CJavaScript \u548C CSS \u90FD\u652F\u6301\u6E90\u5730\u56FE\u8F93\u51FA\uFF0C\u5E76\u4E14\u76F8\u540C\u7684\u9009\u9879\u9002\u7528\u4E8E\u4E24\u8005\u3002\u4E0B\u9762\u8BA8\u8BBA <code>.js</code> \u6587\u4EF6\u7684\u6240\u6709\u5185\u5BB9\u4E5F\u540C\u6837\u9002\u7528\u4E8E <code>.css</code> \u6587\u4EF6\u3002</p><p>\u542F\u7528\u6E90\u6620\u5C04\u751F\u6210\u5C06\u5728\u4EFB\u4F55\u751F\u6210\u7684 .js \u6587\u4EF6\u65C1\u8FB9\u751F\u6210\u4E00\u4E2A <code>.js.map</code> \u6587\u4EF6\uFF0C\u5E76\u5728\u6307\u5411 <code>.js.map</code> \u6587\u4EF6\u7684 <code>.js</code> \u6587\u4EF6\u5E95\u90E8\u6DFB\u52A0\u4E00\u4E2A\u7279\u6B8A\u7684 <code>//# sourceMappingURL=</code> \u6CE8\u91CA\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.ts --sourcemap --outfile<span class="token operator">=</span>out.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.ts&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">sourcemap</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.ts&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Sourcemap<span class="token punctuation">:</span>   api<span class="token punctuation">.</span>SourceMapLinked<span class="token punctuation">,</span>
    Outfile<span class="token punctuation">:</span>     <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>       <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u5982\u679C\u8F93\u5165\u6587\u4EF6\u672C\u8EAB\u5305\u542B\u4E00\u4E2A\u7279\u6B8A\u7684 <code>//# sourceMappingURL=</code> \u6CE8\u91CA\uFF0Cesbuild \u5C06\u81EA\u52A8\u5C1D\u8BD5\u89E3\u6790\u94FE\u63A5\u7684\u6E90\u6620\u5C04\u3002\u5982\u679C\u6210\u529F\uFF0C\u751F\u6210\u7684\u6E90\u6620\u5C04\u4E2D\u7684\u6620\u5C04\u5C06\u4E00\u76F4\u6620\u5C04\u56DE\u8F93\u5165\u6E90\u6620\u5C04\u4E2D\u5F15\u7528\u7684\u539F\u59CB\u6E90\u4EE3\u7801\u3002</p><p>\u5982\u679C\u4F60\u60F3\u4ECE\u751F\u6210\u7684 <code>.js</code> \u6587\u4EF6\u4E2D\u7701\u7565\u7279\u6B8A\u7684 <code>//# sourceMappingURL=</code> \u6CE8\u91CA\uFF0C\u4F46\u4F60\u4ECD\u7136\u60F3\u751F\u6210 <code>.js.map</code> \u6587\u4EF6\uFF0C\u4F60\u5E94\u8BE5\u5C06\u6E90\u6620\u5C04\u6A21\u5F0F\u8BBE\u7F6E\u4E3A<code>\u5916\u90E8</code>\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.ts --sourcemap<span class="token operator">=</span>external --outfile<span class="token operator">=</span>out.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.ts&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">sourcemap</span><span class="token operator">:</span> <span class="token string">&#39;external&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// go</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.ts&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Sourcemap<span class="token punctuation">:</span>   api<span class="token punctuation">.</span>SourceMapExternal<span class="token punctuation">,</span>
    Outfile<span class="token punctuation">:</span>     <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>       <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u5982\u679C\u8981\u5C06\u6574\u4E2A\u6E90\u6620\u5C04\u63D2\u5165 <code>.js</code> \u6587\u4EF6\u800C\u4E0D\u662F\u751F\u6210\u5355\u72EC\u7684 <code>.js.map</code> \u6587\u4EF6\uFF0C\u5219\u5E94\u5C06\u6E90\u6620\u5C04\u6A21\u5F0F\u8BBE\u7F6E\u4E3A<code>\u5185\u8054</code>\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.ts --sourcemap<span class="token operator">=</span>inline --outfile<span class="token operator">=</span>out.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.ts&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">sourcemap</span><span class="token operator">:</span> <span class="token string">&#39;inline&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.ts&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Sourcemap<span class="token punctuation">:</span>   api<span class="token punctuation">.</span>SourceMapInline<span class="token punctuation">,</span>
    Outfile<span class="token punctuation">:</span>     <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>       <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div>`,8),So=s("\u8BF7\u8BB0\u4F4F\uFF0C\u6E90\u6620\u5C04\u901A\u5E38\u975E\u5E38\u5927\uFF0C\u56E0\u4E3A\u5B83\u4EEC\u5305\u542B\u60A8\u6240\u6709\u7684\u539F\u59CB\u6E90\u4EE3\u7801\uFF0C\u56E0\u6B64\u60A8\u901A\u5E38\u4E0D\u5E0C\u671B\u53D1\u5E03\u5305\u542B"),Eo=n("code",null,"\u5185\u8054",-1),Po=s("\u6E90\u6620\u5C04\u7684\u4EE3\u7801\u3002\u8981\u4ECE\u6E90\u6620\u5C04\u4E2D\u5220\u9664\u6E90\u4EE3\u7801\uFF08\u4EC5\u4FDD\u7559\u6587\u4EF6\u540D\u548C\u884C/\u5217\u6620\u5C04\uFF09\uFF0C\u8BF7\u4F7F\u7528"),Bo=s("\u6E90\u5185\u5BB9"),Oo=s("\u9009\u9879\u3002"),To=p(`<p>\u5982\u679C\u4F60\u60F3\u540C\u65F6\u62E5\u6709<code>inline</code>\u548C<code>external</code>\u7684\u6548\u679C\uFF0C\u4F60\u5E94\u8BE5\u5C06source map mode\u8BBE\u7F6E\u4E3A<code>both</code>\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.ts --sourcemap<span class="token operator">=</span>both --outfile<span class="token operator">=</span>out.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.ts&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">sourcemap</span><span class="token operator">:</span> <span class="token string">&#39;both&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.ts&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Sourcemap<span class="token punctuation">:</span>   api<span class="token punctuation">.</span>SourceMapInlineAndExternal<span class="token punctuation">,</span>
    Outfile<span class="token punctuation">:</span>     <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>       <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h4 id="using-source-maps" tabindex="-1"><a class="header-anchor" href="#using-source-maps" aria-hidden="true">#</a> Using source maps</h4><p>\u5728\u6D4F\u89C8\u5668\u4E2D\uFF0C\u53EA\u8981\u542F\u7528\u4E86\u6E90\u6620\u5C04\u8BBE\u7F6E\uFF0C\u6D4F\u89C8\u5668\u7684\u5F00\u53D1\u4EBA\u5458\u5DE5\u5177\u5C31\u4F1A\u81EA\u52A8\u83B7\u53D6\u6E90\u6620\u5C04\u3002\u8BF7\u6CE8\u610F\uFF0C\u6D4F\u89C8\u5668\u4EC5\u4F7F\u7528\u6E90\u6620\u5C04\u5728\u8BB0\u5F55\u5230\u63A7\u5236\u53F0\u65F6\u66F4\u6539\u5806\u6808\u8DDF\u8E2A\u7684\u663E\u793A\u3002\u5806\u6808\u8DDF\u8E2A\u672C\u8EAB\u4E0D\u4F1A\u88AB\u4FEE\u6539\uFF0C\u56E0\u6B64\u5728\u60A8\u7684\u4EE3\u7801\u4E2D\u68C0\u67E5 <code>error.stack</code> \u4ECD\u7136\u4F1A\u63D0\u4F9B\u5305\u542B\u5DF2\u7F16\u8BD1\u4EE3\u7801\u7684\u672A\u6620\u5C04\u5806\u6808\u8DDF\u8E2A\u3002\u4EE5\u4E0B\u662F\u5728\u6D4F\u89C8\u5668\u7684\u5F00\u53D1\u4EBA\u5458\u5DE5\u5177\u4E2D\u542F\u7528\u6B64\u8BBE\u7F6E\u7684\u65B9\u6CD5\uFF1A</p><ul><li><p>Chrome\uFF1A\u2699 \u2192 \u542F\u7528 JavaScript \u6E90\u6620\u5C04</p></li><li><p>Safari: \u2699 \u2192 Sources \u2192 Enable source maps</p></li><li><p>Firefox\uFF1A\xB7\xB7\xB7\u2192 \u542F\u7528\u6E90\u5730\u56FE</p></li></ul>`,5),Co=s("\u5728 node \u4E2D\uFF0C\u4ECE "),Io={href:"https://nodejs.org/en/blog/release/v12.12.0/",target:"_blank",rel:"noopener noreferrer"},Ao=s("v12.12.0"),Jo=s(" \u7248\u672C\u5F00\u59CB\u539F\u751F\u652F\u6301\u6E90\u6620\u5C04\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u7981\u7528\u6B64\u529F\u80FD\uFF0C\u4F46\u53EF\u4EE5\u4F7F\u7528\u6807\u5FD7\u542F\u7528\u3002\u4E0E\u6D4F\u89C8\u5668\u4E0D\u540C\uFF0C\u5B9E\u9645\u7684\u5806\u6808\u8DDF\u8E2A\u4E5F\u5728 node \u4E2D\u4FEE\u6539\uFF0C\u56E0\u6B64\u68C0\u67E5\u4EE3\u7801\u4E2D\u7684 "),Lo=n("code",null,"error.stack",-1),Mo=s(" \u5C06\u63D0\u4F9B\u5305\u542B\u539F\u59CB\u6E90\u4EE3\u7801\u7684\u6620\u5C04\u5806\u6808\u8DDF\u8E2A\u3002\u4EE5\u4E0B\u662F\u5982\u4F55\u5728node\u4E2D\u542F\u7528\u6B64\u8BBE\u7F6E\uFF08"),Wo=n("code",null,"--enable-source-maps",-1),Fo=s(" \u6807\u5FD7\u5FC5\u987B\u4F4D\u4E8E\u811A\u672C\u6587\u4EF6\u540D\u4E4B\u524D\uFF09\uFF1A"),Ro=p(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token function">node</span> --enable-source-maps app.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="splitting" tabindex="-1"><a class="header-anchor" href="#splitting" aria-hidden="true">#</a> Splitting</h3><p>\u652F\u6301: Build</p>`,3),Do=s("\u4EE3\u7801\u62C6\u5206\u4ECD\u7136\u662F\u6B63\u5728\u8FDB\u884C\u7684\u5DE5\u4F5C\u3002\u5B83\u76EE\u524D\u4EC5\u9002\u7528\u4E8E"),Uo=n("code",null,"ESM",-1),No=s("\u8F93\u51FA"),Go=s("\u683C\u5F0F"),Xo=s("\u3002\u8FD8\u6709\u4E00\u4E2A "),Ho={href:"https://github.com/evanw/esbuild/issues/399",target:"_blank",rel:"noopener noreferrer"},zo=s("ordering issue"),Vo=s(" \u95EE\u9898\uFF0C\u6A2A\u8DE8\u4EE3\u7801\u62C6\u5206\u5757\u5177\u6709"),Ko=n("code",null,"\u5BFC\u5165",-1),$o=s("\u8BED\u53E5\u3002\u60A8\u53EF\u4EE5\u9075\u5FAA\u5173\u4E8E\u6B64\u529F\u80FD\u7684"),Yo={href:"https://github.com/evanw/esbuild/issues/16",target:"_blank",rel:"noopener noreferrer"},Qo=s("the tracking issue"),Zo=s("\u95EE\u9898\u3002"),ni=n("p",null,"\u8FD9\u4F7F\u5F97\u201C\u4EE3\u7801\u62C6\u5206\u201D\u80FD\u591F\u7528\u4E8E\u4E24\u4E2A\u76EE\u7684\uFF1A",-1),si=n("ul",null,[n("li",null,[n("p",null,"\u5728\u591A\u4E2A\u5165\u53E3\u70B9\u4E4B\u95F4\u5171\u4EAB\u7684\u4EE3\u7801\u88AB\u62C6\u5206\u4E3A\u5165\u53E3\u70B9\u5BFC\u5165\u7684\u5355\u72EC\u7684\u5171\u4EAB\u6587\u4EF6\u3002\u8FD9\u6837\uFF0C\u5982\u679C\u7528\u6237\u9996\u5148\u6D4F\u89C8\u4E00\u4E2A\u9875\u9762\u7136\u540E\u5230\u53E6\u4E00\u4E2A\u9875\u9762\uFF0C\u5982\u679C\u5171\u4EAB\u90E8\u5206\u5DF2\u88AB\u4E0B\u8F7D\u5E76\u88AB\u5176\u6D4F\u89C8\u5668\u7F13\u5B58\uFF0C\u5219\u5B83\u4EEC\u4E0D\u5FC5\u4ECE\u5934\u4E0B\u8F7D\u7B2C\u4E8C\u9875\u7684\u6240\u6709JavaScript\u3002")]),n("li",null,[n("p",null,[s("\u901A\u8FC7\u5F02\u6B65"),n("code",null,"import()"),s("\u8868\u8FBE\u5F0F\u5F15\u7528\u7684\u4EE3\u7801\u5C06\u88AB\u62C6\u5206\u4E3A\u5355\u72EC\u7684\u6587\u4EF6\uFF0C\u5E76\u4E14\u4EC5\u5728\u8BC4\u4F30\u8BE5\u8868\u8FBE\u5F0F\u65F6\u52A0\u8F7D\u3002\u8FD9\u5141\u8BB8\u60A8\u901A\u8FC7\u4EC5\u4E0B\u8F7D\u60A8\u9700\u8981\u7684\u4EE3\u7801\u6765\u6539\u8FDB\u5E94\u7528\u7684\u521D\u59CB\u4E0B\u8F7D\u65F6\u95F4\uFF0C\u7136\u540E\u5728\u7A0D\u540E\u9700\u8981\u61D2\u60F0\u4E0B\u8F7D\u5176\u4ED6\u4EE3\u7801\u3002")])]),n("li",null,[n("p",null,[s("\u6CA1\u6709\u4EE3\u7801\u62C6\u5206\u542F\u7528\uFF0C"),n("code",null,"import()"),s(" \u8868\u8FBE\u5F0F\u53D8\u4E3APromise.resolve().then(() => require())\u3002\u8FD9\u4ECD\u7136\u4FDD\u7559\u4E86\u8868\u8FBE\u5F0F\u7684\u5F02\u6B65\u8BED\u4E49\uFF0C\u4F46\u8FD9\u610F\u5473\u7740\u5BFC\u5165\u7684\u4EE3\u7801\u5305\u542B\u5728\u540C\u4E00\u6346\u7ED1\u5305\u4E2D\uFF0C\u800C\u4E0D\u662F\u5C06\u5176\u62C6\u5206\u4E3A\u5355\u72EC\u7684\u6587\u4EF6\u3002")])])],-1),ai=s("\u542F\u7528\u4EE3\u7801\u62C6\u5206\u65F6\uFF0C\u8FD8\u5FC5\u987B\u4F7F\u7528"),ti=s("outir"),ei=s("\u7684\u8BBE\u7F6E\u914D\u7F6E\u8F93\u51FA\u76EE\u5F55\uFF1A"),pi=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>esbuild home.ts about.ts --bundle --splitting --outdir<span class="token operator">=</span>out --format<span class="token operator">=</span>esm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;home.ts&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;about.ts&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">splitting</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outdir</span><span class="token operator">:</span> <span class="token string">&#39;out&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;esm&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;home.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;about.ts&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Splitting<span class="token punctuation">:</span>   <span class="token boolean">true</span><span class="token punctuation">,</span>
    Outdir<span class="token punctuation">:</span>      <span class="token string">&quot;out&quot;</span><span class="token punctuation">,</span>
    Format<span class="token punctuation">:</span>      api<span class="token punctuation">.</span>FormatESModule<span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>       <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h3 id="target" tabindex="-1"><a class="header-anchor" href="#target" aria-hidden="true">#</a> Target</h3><p>\u652F\u6301\uFF1ATransform | Build</p><p>\u8FD9\u4E3A\u751F\u6210\u7684JavaScript\u4EE3\u7801\u8BBE\u7F6E\u4E86\u76EE\u6807\u73AF\u5883\u3002\u4F8B\u5982\uFF0C\u60A8\u53EF\u4EE5\u5C06eSbuild\u914D\u7F6E\u4E3A\u4E0D\u751F\u6210node\u7248\u672C10\u65E0\u6CD5\u5904\u7406\u7684\u4EFB\u4F55\u8F83\u65B0\u7684JavaScript\u3002\u76EE\u6807\u53EF\u4EE5\u8BBE\u7F6E\u4E3A\u8BF8\u5982<code>ES2020</code>\u7684JavaScript\u8BED\u8A00\u7248\u672C\uFF0C\u4E5F\u53EF\u4EE5\u662F\u5355\u4E2A\u5F15\u64CE\u7684\u7248\u672C\u5217\u8868\uFF08\u76EE\u524D\u662F<code>Chrome</code>\uFF0C<code>Firefox</code>\uFF0C<code>Safari</code>\uFF0C<code>Edge</code>\u6216<code>node</code>\uFF09\u3002\u9ED8\u8BA4\u76EE\u6807\u662F<code>esnext</code>\uFF0C\u8FD9\u610F\u5473\u7740\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CeSbuild\u5C06\u5047\u8BBE\u652F\u6301\u6240\u6709\u6700\u65B0\u7684JavaScript\u529F\u80FD\u3002</p><p>\u4EE5\u4E0B\u662F\u4E00\u4E2A\u4F7F\u7528esbuild\u4E2D\u7684\u6240\u6709\u53EF\u7528\u76EE\u6807\u73AF\u5883\u540D\u79F0\u7684\u793A\u4F8B\u3002\u8BF7\u6CE8\u610F\uFF0C\u60A8\u4E0D\u9700\u8981\u6307\u5B9A\u6240\u6709\u8FD9\u4E9B;\u60A8\u53EA\u9700\u6307\u5B9A\u9879\u76EE\u6240\u5173\u5FC3\u7684\u76EE\u6807\u73AF\u5883\u7684\u5B50\u96C6\u3002\u5982\u679C\u60A8\u60F3\u8981\u7684\uFF08\u4F8B\u5982<code>Node12.19.0</code>\u800C\u4E0D\u662F<code>Node12</code>\uFF09\uFF0C\u60A8\u4E5F\u53EF\u4EE5\u66F4\u7CBE\u786E\u5730\u4E86\u89E3\u7248\u672C\u53F7</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --target<span class="token operator">=</span>es2020,chrome58,firefox57,safari11,edge16,node12
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&#39;es2020&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;chrome58&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;firefox57&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;safari11&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;edge16&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;node12&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Target<span class="token punctuation">:</span>      api<span class="token punctuation">.</span>ES2020<span class="token punctuation">,</span>
    Engines<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>api<span class="token punctuation">.</span>Engine<span class="token punctuation">{</span>
      <span class="token punctuation">{</span>Name<span class="token punctuation">:</span> api<span class="token punctuation">.</span>EngineChrome<span class="token punctuation">,</span> Version<span class="token punctuation">:</span> <span class="token string">&quot;58&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>Name<span class="token punctuation">:</span> api<span class="token punctuation">.</span>EngineFirefox<span class="token punctuation">,</span> Version<span class="token punctuation">:</span> <span class="token string">&quot;57&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>Name<span class="token punctuation">:</span> api<span class="token punctuation">.</span>EngineSafari<span class="token punctuation">,</span> Version<span class="token punctuation">:</span> <span class="token string">&quot;11&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>Name<span class="token punctuation">:</span> api<span class="token punctuation">.</span>EngineEdge<span class="token punctuation">,</span> Version<span class="token punctuation">:</span> <span class="token string">&quot;16&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>Name<span class="token punctuation">:</span> api<span class="token punctuation">.</span>EngineNode<span class="token punctuation">,</span> Version<span class="token punctuation">:</span> <span class="token string">&quot;12&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div>`,6),oi=s("\u60A8\u53EF\u4EE5\u53C2\u8003"),ii={href:"https://esbuild.github.io/content-types/#javascript",target:"_blank",rel:"noopener noreferrer"},ci=s("JavaScript Loader"),li=s("\uFF0C\u4E86\u89E3\u6709\u5173\u54EA\u4E9B\u8BED\u6CD5\u529F\u80FD\u7684\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u5176\u4E2D\u5305\u542B\u8BED\u8A00\u7248\u672C\u3002\u8BF7\u8BB0\u4F4F\uFF0C\u867D\u7136"),ui=n("code",null,"ES2020",-1),ri=s("\u7B49JavaScript\u8BED\u8A00\u7248\u672C\u5728\u5E74\u4EFD\u4E2D\u786E\u5B9A\uFF0C\u4F46\u8FD9\u662F\u89C4\u8303\u6279\u51C6\u7684\u4E00\u5E74\u3002\u5B83\u4E0E\u5E74\u4EFD\u65E0\u5173\uFF0C\u6240\u6709\u4E3B\u8981\u6D4F\u89C8\u5668\u90FD\u5B9E\u65BD\u8BE5\u89C4\u8303\uFF0C\u8FD9\u4E9B\u89C4\u8303\u901A\u5E38\u4F1A\u53D1\u751F\u5728\u65E9\u5E74\u6216\u66F4\u665A\u4E8E\u8BE5\u5E74\u3002"),di=p(`<p>\u8BF7\u6CE8\u610F\uFF0C\u5982\u679C\u4F7F\u7528eSbuild\u5C1A\u672A\u652F\u6301\u8F6C\u6362\u4E3A\u5F53\u524D\u8BED\u8A00\u76EE\u6807\u7684\u8BED\u6CD5\u529F\u80FD\uFF0C\u5219Esbuild\u5C06\u751F\u6210\u4E0D\u652F\u6301\u7684\u8BED\u6CD5\u7684\u9519\u8BEF\u3002\u4F8B\u5982\uFF0C\u8FD9\u901A\u5E38\u662F\u9488\u5BF9<code>ES5</code>\u8BED\u8A00\u7248\u672C\u7684\u60C5\u51B5\uFF0C\u56E0\u4E3AeSbuild\u4EC5\u652F\u6301\u5C06\u5927\u591A\u6570\u8F83\u65B0\u7684JavaScript\u8BED\u6CD5\u529F\u80FD\u8F6C\u6362\u4E3A<code>ES6</code>\u3002</p><h3 id="watch" tabindex="-1"><a class="header-anchor" href="#watch" aria-hidden="true">#</a> Watch</h3><p>\u652F\u6301\uFF1ABuild</p><p>\u5728\u6784\u5EFAAPI\u4E0A\u542F\u7528\u76D1\u89C6\u6A21\u5F0F\u544A\u8BC9eSBuild\u4FA6\u542C\u6587\u4EF6\u7CFB\u7EDF\u7684\u66F4\u6539\uFF0C\u5E76\u5728\u53EF\u4EE5\u4F7F\u6784\u5EFA\u65E0\u6548\u7684\u6587\u4EF6\u66F4\u6539\u65F6\u91CD\u5EFA\u3002\u4F7F\u7528\u5B83\u770B\u8D77\u6765\u50CF\u8FD9\u6837\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --outfile<span class="token operator">=</span>out.js --bundle --watch
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Call &quot;stop&quot; on the result when you&#39;re done</span>
  result<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// go</span>

result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
  EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  Outfile<span class="token punctuation">:</span>     <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
  Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
  Watch<span class="token punctuation">:</span>       <span class="token operator">&amp;</span>api<span class="token punctuation">.</span>WatchMode<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Call &quot;stop&quot; on the result when you&#39;re done</span>
result<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u5982\u679C\u60A8\u4F7F\u7528\u7684\u662FJavaScript\u6216Go API\uFF0C\u5219\u53EF\u4EE5\u9009\u62E9\u5728\u589E\u91CF\u6784\u5EFA\u5B8C\u6210\u65F6\u63D0\u4F9B\u8C03\u7528\u7684\u56DE\u8C03\u3002\u4E00\u65E6\u6784\u5EFA\u5B8C\u6210\uFF0C\u8FD9\u53EF\u4EE5\u7528\u6765\u505A\u67D0\u4E8B\uFF08\u4F8B\u5982\uFF0C\u5728\u6D4F\u89C8\u5668\u4E2D\u91CD\u65B0\u52A0\u8F7D\u60A8\u7684\u5E94\u7528\u7A0B\u5E8F\uFF09\uFF1A</p><div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// js</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">onRebuild</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;watch build failed:&#39;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span>
      <span class="token keyword">else</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;watch build succeeded:&#39;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Call &quot;stop&quot; on the result when you&#39;re done</span>
  result<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// go</span>

result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
  EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  Outfile<span class="token punctuation">:</span>     <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
  Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
  Watch<span class="token punctuation">:</span> <span class="token operator">&amp;</span>api<span class="token punctuation">.</span>WatchMode<span class="token punctuation">{</span>
    OnRebuild<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span>result api<span class="token punctuation">.</span>BuildResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;watch build failed: %d errors\\n&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;watch build succeeded: %d warnings\\n&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Warnings<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Call &quot;stop&quot; on the result when you&#39;re done</span>
result<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u4F7F\u7528\u8F6E\u8BE2\u800C\u4E0D\u662FOS\u7279\u5B9A\u6587\u4EF6\u7CFB\u7EDFAPI\u5B9E\u73B0eSBuild\u4E2D\u7684\u76D1\u89C6\u6A21\u5F0F\u4EE5\u8FDB\u884C\u53EF\u79FB\u690D\u6027\u3002\u6295\u7968\u7CFB\u7EDF\u65E8\u5728\u4F7F\u7528\u76F8\u5BF9\u8F83\u5C11\u7684CPU\u4E0E\u4E00\u4E2A\u4F20\u7EDF\u7684\u6295\u7968\u7CFB\u7EDF\u4E00\u6B21\u626B\u63CF\u6574\u4E2A\u76EE\u5F55\u6811\u3002\u6587\u4EF6\u7CFB\u7EDF\u4ECD\u7136\u662F\u5B9A\u671F\u626B\u63CF\u7684\uFF0C\u4F46\u6BCF\u4E2A\u626B\u63CF\u53EA\u68C0\u67E5\u6587\u4EF6\u7684\u968F\u673A\u5B50\u96C6\uFF0C\u8FD9\u610F\u5473\u7740\u5728\u66F4\u6539\u4E4B\u540E\u5C06\u5728\u66F4\u6539\u4E4B\u540E\u4E0D\u4E45\u4F1A\u62FE\u53D6\u6587\u4EF6\u7684\u66F4\u6539\uFF0C\u4F46\u4E0D\u4E00\u5B9A\u7ACB\u5373\u624D\u80FD\u62FE\u53D6\u6587\u4EF6\u3002</p><p>\u51ED\u501F\u76EE\u524D\u7684\u542F\u53D1\u5F0F\uFF0C\u5E94\u5728\u6BCF2\u79D2\u5185\u5B8C\u5168\u626B\u63CF\u5927\u578B\u9879\u76EE\uFF0C\u6240\u4EE5\u5728\u6700\u574F\u7684\u60C5\u51B5\u4E0B\uFF0C\u6700\u591A\u53EF\u80FD\u9700\u89812\u79D2\u949F\u8FDB\u884C\u6CE8\u610F\u3002\u4F46\u662F\uFF0C\u5728\u53D1\u751F\u4E86\u53D8\u5316\u4E4B\u540E\uFF0C\u66F4\u6539\u7684\u8DEF\u5F84\u5728\u6700\u8FD1\u66F4\u6539\u7684\u8DEF\u5F84\u7684\u77ED\u671F\u5217\u8868\u4E2D\uFF0C\u5728\u6BCF\u6B21\u626B\u63CF\u4E2D\u68C0\u67E5\uFF0C\u56E0\u6B64\u5E94\u51E0\u4E4E\u7ACB\u5373\u6CE8\u610F\u5230\u6700\u8FD1\u66F4\u6539\u7684\u6587\u4EF6\u7684\u8FDB\u4E00\u6B65\u66F4\u6539\u3002</p>`,9),ki=s("\u8BF7\u6CE8\u610F\uFF0C\u5982\u679C\u60A8\u4E0D\u60F3\u4F7F\u7528\u57FA\u4E8E\u8F6E\u8BE2\u7684\u65B9\u6CD5\uFF0C\u4ECD\u7136\u53EF\u4EE5\u4F7F\u7528esbuild\u7684"),vi=s("\u589E\u91CF\u6784\u5EFAAPI"),mi=s("\u548C\u6587\u4EF6\u89C2\u5BDF\u8005\u5E93\u6765\u5B9E\u73B0\u624B\u8868\u6A21\u5F0F\u3002"),bi=p(`<h3 id="write" tabindex="-1"><a class="header-anchor" href="#write" aria-hidden="true">#</a> Write</h3><p>\u652F\u6301\uFF1ABuild</p><p>\u6784\u5EFAAPI\u8C03\u7528\u53EF\u4EE5\u76F4\u63A5\u5199\u5165\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u4E5F\u53EF\u4EE5\u8FD4\u56DE\u5C06\u4F5C\u4E3A\u5185\u5B58\u7F13\u51B2\u533A\u4E2D\u5199\u5165\u7684\u6587\u4EF6\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CCLI\u548CJavaScript API\u5199\u5165\u6587\u4EF6\u7CFB\u7EDF\u548CGO API\u3002\u8981\u4F7F\u7528\u5185\u5B58\u7F13\u51B2\u533A\uFF1A</p><div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">sourcemap</span><span class="token operator">:</span> <span class="token string">&#39;external&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">write</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outdir</span><span class="token operator">:</span> <span class="token string">&#39;out&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> out <span class="token keyword">of</span> result<span class="token punctuation">.</span>outputFiles<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>out<span class="token punctuation">.</span>path<span class="token punctuation">,</span> out<span class="token punctuation">.</span>contents<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Sourcemap<span class="token punctuation">:</span>   api<span class="token punctuation">.</span>SourceMapExternal<span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>       <span class="token boolean">false</span><span class="token punctuation">,</span>
    Outdir<span class="token punctuation">:</span>      <span class="token string">&quot;out&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> out <span class="token operator">:=</span> <span class="token keyword">range</span> result<span class="token punctuation">.</span>OutputFiles <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%v %v\\n&quot;</span><span class="token punctuation">,</span> out<span class="token punctuation">.</span>Path<span class="token punctuation">,</span> out<span class="token punctuation">.</span>Contents<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h2 id="\u9AD8\u7EA7\u9009\u9879" tabindex="-1"><a class="header-anchor" href="#\u9AD8\u7EA7\u9009\u9879" aria-hidden="true">#</a> \u9AD8\u7EA7\u9009\u9879</h2><h3 id="allow-overwrite" tabindex="-1"><a class="header-anchor" href="#allow-overwrite" aria-hidden="true">#</a> Allow overwrite</h3><p>\u652F\u6301\uFF1ABuild</p><p>\u542F\u7528\u6B64\u8BBE\u7F6E\u5141\u8BB8\u8F93\u51FA\u6587\u4EF6\u8986\u76D6\u8F93\u5165\u6587\u4EF6\u3002\u5B83\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u672A\u542F\u7528\uFF0C\u56E0\u4E3A\u8FD9\u6837\u505A\u610F\u5473\u7740\u8986\u76D6\u6E90\u4EE3\u7801\uFF0C\u5982\u679C\u672A\u9009\u4E2D\u60A8\u7684\u4EE3\u7801\uFF0C\u5219\u4F1A\u5BFC\u81F4\u6570\u636E\u4E22\u5931\u3002\u4F46\u662F\uFF0C\u901A\u8FC7\u907F\u514D\u5BF9\u4E34\u65F6\u76EE\u5F55\u7684\u9700\u6C42\u6765\u8BF4\uFF0C\u652F\u6301\u8FD9\u4F7F\u5F97\u67D0\u4E9B\u5DE5\u4F5C\u6D41\u7A0B\u66F4\u5BB9\u6613\u3002\u56E0\u6B64\uFF0C\u60A8\u53EF\u4EE5\u5728\u8981\u6545\u610F\u8986\u76D6\u6E90\u4EE3\u7801\u65F6\u542F\u7528\u6B64\u9879\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --outdir<span class="token operator">=</span>. --allow-overwrite
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outdir</span><span class="token operator">:</span> <span class="token string">&#39;.&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">allowOverwrite</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span>    <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Outdir<span class="token punctuation">:</span>         <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
    AllowOverwrite<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h3 id="asset-names" tabindex="-1"><a class="header-anchor" href="#asset-names" aria-hidden="true">#</a> Asset names</h3><p>\u652F\u6301\uFF1ABuild</p>`,11),gi=s("\u6B64\u9009\u9879\u63A7\u5236"),hi=s("\u52A0\u8F7D\u5668"),fi=s("\u8BBE\u7F6E\u4E3A"),_i={href:"https://esbuild.github.io/content-types/#external-file",target:"_blank",rel:"noopener noreferrer"},yi=s("\u6587\u4EF6"),qi=s("\u65F6\u751F\u6210\u7684\u9644\u52A0\u8F93\u51FA\u6587\u4EF6\u7684\u6587\u4EF6\u540D\u3002\u5B83\u4F7F\u7528\u5E26\u6709\u5360\u4F4D\u7B26\u7684\u6A21\u677F\u914D\u7F6E\u8F93\u51FA\u8DEF\u5F84\uFF0C\u8BE5\u5360\u4F4D\u7B26\u5C06\u88AB\u66FF\u6362\u4E3A\u5728\u751F\u6210\u8F93\u51FA\u8DEF\u5F84\u65F6\u7531\u7279\u5B9A\u4E8E\u6587\u4EF6\u7684\u503C\u66FF\u6362\u3002\u4F8B\u5982\uFF0C\u6307\u5B9A\u8D44\u4EA7\u7684"),ji=n("code",null,"assets/ [name] - [hash]",-1),wi=s("\u5C06\u6240\u6709\u8D44\u4EA7\u653E\u5165\u8F93\u51FA\u76EE\u5F55\u4E2D\u7684\u540D\u4E3A"),xi=n("code",null,"assets",-1),Si=s("\u7684\u5B50\u76EE\u5F55\u4E2D\uFF0C\u5E76\u5305\u62EC\u6587\u4EF6\u540D\u4E2D\u8D44\u4EA7\u7684\u5185\u5BB9\u6563\u5217\u3002\u8FD9\u6837\u770B\u8D77\u6765\u5982\u6B64\uFF1A"),Ei=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --asset-names<span class="token operator">=</span>assets/<span class="token punctuation">[</span>name<span class="token punctuation">]</span>-<span class="token punctuation">[</span>hash<span class="token punctuation">]</span> --loader:.png<span class="token operator">=</span>file --bundle --outdir<span class="token operator">=</span>out
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">assetNames</span><span class="token operator">:</span> <span class="token string">&#39;assets/[name]-[hash]&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;.png&#39;</span><span class="token operator">:</span> <span class="token string">&#39;file&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outdir</span><span class="token operator">:</span> <span class="token string">&#39;out&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    AssetNames<span class="token punctuation">:</span>  <span class="token string">&quot;assets/[name]-[hash]&quot;</span><span class="token punctuation">,</span>
    Loader<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>api<span class="token punctuation">.</span>Loader<span class="token punctuation">{</span>
      <span class="token string">&quot;.png&quot;</span><span class="token punctuation">:</span> api<span class="token punctuation">.</span>LoaderFile<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    Outdir<span class="token punctuation">:</span> <span class="token string">&quot;out&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u6709\u4E09\u4E2A\u5360\u4F4D\u7B26\u53EF\u4EE5\u5728assets\u8DEF\u5F84\u6A21\u677F\u4E2D\u4F7F\u7528\uFF1A</p><ul><li><code>[dir]</code></li></ul>`,3),Pi=s("\u8FD9\u662F\u4ECE\u5305\u542B\u8D44\u4EA7\u6587\u4EF6\u5230outbase\u76EE\u5F55\u7684\u76EE\u5F55\u7684\u76F8\u5BF9\u8DEF\u5F84\u3002\u5176\u76EE\u7684\u662F\u901A\u8FC7\u955C\u50CF"),Bi=s("\u8F93\u51FA\u76EE\u5F55"),Oi=s("\u5185\u7684\u8F93\u5165\u76EE\u5F55\u7ED3\u6784\u6765\u5E2E\u52A9\u8D44\u4EA7\u8F93\u51FA\u8DEF\u5F84\u770B\u8D77\u6765\u66F4\u7F8E\u89C2\u4EE4\u4EBA\u6109\u60A6\u3002"),Ti=p("<ul><li><code>[name]</code></li></ul><p>\u8FD9\u662F\u6CA1\u6709\u6269\u5C55\u7684\u8D44\u4EA7\u7684\u539F\u59CB\u6587\u4EF6\u540D\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u8D44\u4EA7\u6700\u521D\u662F\u540D\u4E3A<code>Image.png</code>\uFF0C\u5219<code>[name]</code>\u5C06\u88AB\u6A21\u677F\u4E2D\u7684<code>\u56FE\u50CF</code>\u66FF\u6362\u3002\u6CA1\u6709\u5FC5\u8981\u4F7F\u7528\u8FD9\u4E2A\u5360\u4F4D\u7B26;\u5B83\u53EA\u5B58\u5728\u63D0\u4F9B\u4EBA\u7C7B\u53CB\u597D\u7684\u8D44\u4EA7\u540D\u79F0\u6765\u4F7F\u8C03\u8BD5\u66F4\u5BB9\u6613\u3002</p><ul><li><code>[hash]</code></li></ul><p>\u8FD9\u662Fassets\u7684\u5185\u5BB9\u54C8\u5E0C\u503C\uFF0C\u8FD9\u5BF9\u4E8E\u907F\u514D\u540D\u79F0\u78B0\u649E\u662F\u6709\u7528\u7684\u3002\u4F8B\u5982\uFF0C\u60A8\u7684\u4EE3\u7801\u53EF\u80FD\u5BFC\u5165<code>components/button/icon.png</code>\u548C<code>components/select/icon.png</code>\uFF0C\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u60A8\u9700\u8981\u6563\u5217\u6765\u533A\u5206\u4E24\u4E2A\u540D\u4E3A\u56FE\u6807\u7684\u4E24\u4E2A<code>icon</code>\u3002</p><p>assets\u8DEF\u5F84\u6A21\u677F\u4E0D\u9700\u8981\u5305\u542B\u6587\u4EF6\u6269\u5C55\u540D\u3002\u5728\u6A21\u677F\u66FF\u6362\u540E\uFF0C\u8D44\u4EA7\u7684\u539F\u59CB\u6587\u4EF6\u6269\u5C55\u5C06\u81EA\u52A8\u6DFB\u52A0\u5230\u8F93\u51FA\u8DEF\u5F84\u7684\u672B\u5C3E\u3002</p>",5),Ci=s("\u6B64\u9009\u9879\u7C7B\u4F3C\u4E8E"),Ii=s("\u5757\u540D\u79F0"),Ai=s("\u548C"),Ji=s("\u6761\u76EE\u540D\u79F0"),Li=s("\u9009\u9879\u3002"),Mi=p(`<h3 id="banner" tabindex="-1"><a class="header-anchor" href="#banner" aria-hidden="true">#</a> Banner</h3><p>\u652F\u6301\uFF1ATransform | Build</p><p>\u4F7F\u7528\u6B64\u529F\u80FD\u53EF\u5728\u751F\u6210\u7684JavaScript\u548CCSS\u6587\u4EF6\u7684\u5F00\u5934\u63D2\u5165\u4EFB\u610F\u5B57\u7B26\u4E32\u3002\u8FD9\u901A\u5E38\u7528\u4E8E\u63D2\u5165\u8BC4\u8BBA\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --banner:js<span class="token operator">=</span>//comment --banner:css<span class="token operator">=</span>/*comment*/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">banner</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">js</span><span class="token operator">:</span> <span class="token string">&#39;//comment&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token string">&#39;/*comment*/&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Banner<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>
      <span class="token string">&quot;js&quot;</span><span class="token punctuation">:</span>  <span class="token string">&quot;//comment&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;css&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;/*comment*/&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div>`,4),Wi=s("\u8FD9\u7C7B\u4F3C\u4E8E\u5728"),Fi=s("\u6700\u540E"),Ri=s("\u63D2\u5165\u7684\u9875\u811A\u800C\u4E0D\u662F\u5F00\u59CB\u3002"),Di=n("p",null,[s("\u8BF7\u6CE8\u610F\uFF0C\u5982\u679C\u8981\u5C06\u975E\u6CE8\u91CA\u4EE3\u7801\u63D2\u5165CSS\u6587\u4EF6\uFF0C\u8BF7\u6CE8\u610F\uFF0CCSS\u5FFD\u7565\u975E"),n("code",null,"@import"),s("\u89C4\u5219\uFF08\u9664"),n("code",null,"@CharSet"),s("\u89C4\u5219\u4E4B\u5916\uFF09\u4E4B\u540E\u7684non-"),n("code",null,"@import"),s("\u89C4\u5219\uFF0C\u56E0\u6B64\u4F7F\u7528\u6A2A\u5E45\u6CE8\u5165CSS\u89C4\u5219\u53EF\u80FD\u4F1A\u610F\u5916\u7981\u7528\u5916\u90E8\u6837\u5F0F\u8868\u7684\u8FDB\u53E3\u3002")],-1),Ui=n("h3",{id:"charset",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#charset","aria-hidden":"true"},"#"),s(" Charset")],-1),Ni=n("p",null,"\u652F\u6301\uFF1ATransform | Build",-1),Gi=s("\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CeSbuild\u7684\u8F93\u51FA\u4EC5\u4E3AASCII\u3002\u4F7F\u7528\u53CD\u659C\u6760\u8F6C\u4E49\u5E8F\u5217\u9003\u79BB\u4EFB\u4F55\u975EASCII\u5B57\u7B26\u3002\u4E00\u4E2A\u539F\u56E0\u662F\u56E0\u4E3A\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6D4F\u89C8\u5668\u8BEF\u89E3\u4E86\u975EASCII\u5B57\u7B26\uFF0C\u5BFC\u81F4\u6DF7\u6DC6\u3002\u60A8\u5FC5\u987B\u5C06"),Xi=n("code",null,"<meta charset =\u201Cutf-8\u201D>",-1),Hi=s("\u663E\u5F0F\u6DFB\u52A0\u5230\u60A8\u7684HTML\u6216\u7528\u6B63\u786E\u7684"),zi=n("code",null,"Content-Type",-1),Vi=s("\u6807\u9898\u4E3A\u6D4F\u89C8\u5668\u63D0\u4F9B\u670D\u52A1\uFF0C\u4EE5\u4E0D\u6572\u6253\u4EE3\u7801\u3002\u53E6\u4E00\u4E2A\u539F\u56E0\u662F\u975EASCII\u5B57\u7B26\u53EF\u4EE5"),Ki={href:"https://v8.dev/blog/scanner",target:"_blank",rel:"noopener noreferrer"},$i=s("\u663E\u7740\u6162\u4E0B\u6D4F\u89C8\u5668\u7684\u89E3\u6790\u5668"),Yi=s("\u3002\u4F46\u662F\uFF0C\u4F7F\u7528\u8F6C\u4E49\u5E8F\u5217\u4F7F\u751F\u6210\u7684\u8F93\u51FA\u7565\u5927\uFF0C\u5E76\u4E14\u8FD8\u66F4\u96BE\u8BFB\u53D6\u3002"),Qi=p(`<p>\u5982\u679C\u60A8\u5E0C\u671B\u5728\u4E0D\u4F7F\u7528\u8F6C\u4E49\u5E8F\u5217\u7684\u60C5\u51B5\u4E0B\u6253\u5370\u539F\u59CB\u5B57\u7B26\uFF0C\u5E76\u4E14\u786E\u4FDD\u6D4F\u89C8\u5668\u5C06\u4EE3\u7801\u89E3\u91CA\u4E3AUTF-8\uFF0C\u5219\u53EF\u4EE5\u901A\u8FC7\u8BBE\u7F6ECharset\u6765\u7981\u7528\u5B57\u7B26\u9003\u907F\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;let \u03C0 = Math.PI&#39;</span> <span class="token operator">|</span> esbuild
<span class="token builtin class-name">let</span> <span class="token punctuation">\\</span>u03C0 <span class="token operator">=</span> Math.PI<span class="token punctuation">;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;let \u03C0 = Math.PI&#39;</span> <span class="token operator">|</span> esbuild --charset<span class="token operator">=</span>utf8
<span class="token builtin class-name">let</span> \u03C0 <span class="token operator">=</span> Math.PI<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">let</span> js <span class="token operator">=</span> <span class="token string">&#39;let \u03C0 = Math.PI&#39;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span><span class="token parameter">js</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;let \\\\u03C0 = Math.PI;\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">charset</span><span class="token operator">:</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;let \u03C0 = Math.PI;\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// go</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  js <span class="token operator">:=</span> <span class="token string">&quot;let \u03C0 = Math.PI&quot;</span>

  result1 <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result1<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result1<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  result2 <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Charset<span class="token punctuation">:</span> api<span class="token punctuation">.</span>CharsetUTF8<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result2<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result2<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u4E00\u4E9B\u8B66\u544A\uFF1A</p><ul><li><p>\u8FD9\u5C1A\u672A\u9003\u907F\u5D4C\u5165\u6B63\u5219\u8868\u8FBE\u5F0F\u4E2D\u7684\u975EASCII\u5B57\u7B26\u3002\u8FD9\u662F\u56E0\u4E3AeSbuild\u76EE\u524D\u6839\u672C\u6CA1\u6709\u89E3\u6790\u6B63\u5219\u8868\u8FBE\u5F0F\u7684\u5185\u5BB9\u3002\u5C3D\u7BA1\u6709\u6B64\u9650\u5236\uFF0C\u56E0\u6B64\u6DFB\u52A0\u4E86\u8BE5\u6807\u5FD7\uFF0C\u56E0\u4E3A\u5B83\u5BF9\u4E0D\u5305\u542B\u8FD9\u6837\u7684\u6848\u4F8B\u7684\u4EE3\u7801\u4ECD\u7136\u6709\u7528\u3002</p></li><li><p>\u6B64\u6807\u5FD7\u4E0D\u9002\u7528\u4E8E\u8BC4\u8BBA\u3002\u6211\u76F8\u4FE1\u5728\u6CE8\u91CA\u4E2D\u4FDD\u7559\u975EASCII\u6570\u636E\u5E94\u8BE5\u662F\u6B63\u5E38\u7684\uFF0C\u56E0\u4E3A\u5373\u4F7F\u7F16\u7801\u662F\u9519\u8BEF\u7684\uFF0C\u8FD0\u884C\u65F6\u73AF\u5883\u4E5F\u5E94\u8BE5\u5B8C\u5168\u5FFD\u7565\u6240\u6709\u8BC4\u8BBA\u7684\u5185\u5BB9\u3002\u4F8B\u5982\uFF0CV8\u535A\u5BA2\u53D1\u5E03\u63D0\u5230\u4E86\u4E00\u79CD\u4F18\u5316\uFF0C\u907F\u514D\u5B8C\u5168\u89E3\u7801\u8BC4\u8BBA\u5185\u5BB9\u3002\u65E0\u8BBA\u5982\u4F55\u90FD\u662F\u7531\u4F0A\u65AF\u90A6\u5C14\u5265\u79BB\u4E86\u8BB8\u53EF\u8BC1\u76F8\u5173\u8BC4\u8BBA\u4E4B\u5916\u7684\u6240\u6709\u8BC4\u8BBA\u3002</p></li><li><p>\u6B64\u9009\u9879\u540C\u65F6\u9002\u7528\u4E8E\u6240\u6709\u8F93\u51FA\u6587\u4EF6\u7C7B\u578B\uFF08JavaScript\uFF0CCSS\u548CJSON\uFF09\u3002\u56E0\u6B64\uFF0C\u5982\u679C\u5C06Web\u670D\u52A1\u5668\u914D\u7F6E\u4E3A\u53D1\u9001\u6B63\u786E\u7684<code>Content-Type</code>\u6807\u9898\u5E76\u5E0C\u671B\u4F7F\u7528UTF-8 Charset\uFF0C\u8BF7\u786E\u4FDD\u5C06Web\u670D\u52A1\u5668\u914D\u7F6E\u4E3A\u5C06<code>.js</code>\u548C<code>.css</code>\u6587\u4EF6\u89C6\u4E3AUTF-8\u3002</p></li></ul><h3 id="chunk-names" tabindex="-1"><a class="header-anchor" href="#chunk-names" aria-hidden="true">#</a> Chunk names</h3><p>\u652F\u6301\uFF1ABuild</p>`,6),Zi=s("\u6B64\u9009\u9879\u63A7\u5236\u542F\u7528"),nc=s("\u4EE3\u7801\u62C6\u5206"),sc=s("\u65F6\u81EA\u52A8\u751F\u6210\u7684\u5171\u4EAB\u4EE3\u7801\u5757\u7684\u6587\u4EF6\u540D\u3002\u5B83\u4F7F\u7528\u5E26\u6709\u5360\u4F4D\u7B26\u7684\u6A21\u677F\u914D\u7F6E\u8F93\u51FA\u8DEF\u5F84\uFF0C\u5F53\u751F\u6210\u8F93\u51FA\u8DEF\u5F84\u65F6\uFF0C\u8FD9\u4E9B\u5360\u4F4D\u7B26\u5C06\u66FF\u6362\u4E3A\u7279\u5B9A\u4E8E\u5757\u7684\u503C\u3002\u4F8B\u5982\uFF0C\u6307\u5B9A "),ac=n("code",null,"chunks/[name]-[hash]",-1),tc=s(" \u7684\u5757\u540D\u79F0\u6A21\u677F\u4F1A\u5C06\u6240\u6709\u751F\u6210\u7684\u5757\u653E\u5165\u8F93\u51FA\u76EE\u5F55\u4E2D\u540D\u4E3A chunks \u7684\u5B50\u76EE\u5F55\u4E2D\uFF0C\u5E76\u5728\u6587\u4EF6\u540D\u4E2D\u5305\u542B\u5757\u7684\u5185\u5BB9\u54C8\u5E0C\u3002\u8FD9\u6837\u505A\u770B\u8D77\u6765\u50CF\u8FD9\u6837\uFF1A"),ec=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --chunk-names<span class="token operator">=</span>chunks/<span class="token punctuation">[</span>name<span class="token punctuation">]</span>-<span class="token punctuation">[</span>hash<span class="token punctuation">]</span> --bundle --outdir<span class="token operator">=</span>out --splitting --format<span class="token operator">=</span>esm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">chunkNames</span><span class="token operator">:</span> <span class="token string">&#39;chunks/[name]-[hash]&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outdir</span><span class="token operator">:</span> <span class="token string">&#39;out&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">splitting</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;esm&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    ChunkNames<span class="token punctuation">:</span>  <span class="token string">&quot;chunks/[name]-[hash]&quot;</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Outdir<span class="token punctuation">:</span>      <span class="token string">&quot;out&quot;</span><span class="token punctuation">,</span>
    Splitting<span class="token punctuation">:</span>   <span class="token boolean">true</span><span class="token punctuation">,</span>
    Format<span class="token punctuation">:</span>      api<span class="token punctuation">.</span>FormatESModule<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u6709\u4E24\u4E2A\u5360\u4F4D\u7B26\u53EF\u7528\u4E8E\u5757\u8DEF\u5F84\u6A21\u677F\uFF1A</p><ul><li><code>[name]</code></li></ul><p>\u76EE\u524D\u8FD9\u5C06\u59CB\u7EC8\u662F<code>\u6587\u672C\u5757</code>\uFF0C\u5C3D\u7BA1\u6B64\u5360\u4F4D\u7B26\u53EF\u80FD\u4F1A\u5728\u672A\u6765\u7248\u672C\u4E2D\u91C7\u7528\u5176\u4ED6\u503C\u3002</p><ul><li><code>[hash]</code></li></ul><p>\u8FD9\u662F\u5757\u7684\u5185\u5BB9\u54C8\u5E0C\u3002\u5728\u751F\u6210\u591A\u4E2A\u5171\u4EAB\u4EE3\u7801\u5757\u7684\u60C5\u51B5\u4E0B\uFF0C\u4E3A\u4E86\u5C06\u4E0D\u540C\u7684\u5757\u5F7C\u6B64\u533A\u5206\u5F00\u6765\uFF0C\u5FC5\u987B\u5305\u62EC\u8FD9\u4E00\u70B9\u3002</p>`,6),pc=s("\u5757\u8DEF\u5F84\u6A21\u677F\u4E0D\u9700\u8981\u5305\u542B\u6587\u4EF6\u6269\u5C55\u540D\u3002\u6A21\u677F\u66FF\u6362\u540E\uFF0C\u4E3A\u9002\u5F53\u7684\u5185\u5BB9\u7C7B\u578B\u914D\u7F6E\u7684"),oc=s("\u8F93\u51FA\u6269\u5C55"),ic=s("\u540D\u5C06\u81EA\u52A8\u6DFB\u52A0\u5230\u8F93\u51FA\u8DEF\u5F84\u7684\u672B\u5C3E\u3002"),cc=s("\u8BF7\u6CE8\u610F\uFF0C\u6B64\u9009\u9879\u4EC5\u63A7\u5236\u81EA\u52A8\u751F\u6210\u7684\u5171\u4EAB\u4EE3\u7801\u5757\u7684\u540D\u79F0\u3002\u5B83\u4E0D\u63A7\u5236\u4E0E\u5165\u53E3\u70B9\u76F8\u5173\u7684\u8F93\u51FA\u6587\u4EF6\u7684\u540D\u79F0\u3002\u8FD9\u4E9B\u540D\u79F0\u5F53\u524D\u662F\u6839\u636E\u539F\u59CB\u5165\u53E3\u70B9\u6587\u4EF6\u76F8\u5BF9\u4E8E "),lc=s("outbase"),uc=s(" \u76EE\u5F55\u7684\u8DEF\u5F84\u786E\u5B9A\u7684\uFF0C\u5E76\u4E14\u65E0\u6CD5\u66F4\u6539\u6B64\u884C\u4E3A\u3002\u5C06\u6765\u4F1A\u6DFB\u52A0\u4E00\u4E2A\u989D\u5916\u7684 API \u9009\u9879\uFF0C\u8BA9\u60A8\u53EF\u4EE5\u66F4\u6539\u5165\u53E3\u70B9\u8F93\u51FA\u6587\u4EF6\u7684\u6587\u4EF6\u540D\u3002"),rc=s("\u6B64\u9009\u9879\u7C7B\u4F3C\u4E8E"),dc=s("\u8D44\u4EA7\u540D\u79F0"),kc=s("\u548C"),vc=s("\u6761\u76EE\u540D\u79F0"),mc=s("\u9009\u9879\u3002"),bc=n("h3",{id:"color",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#color","aria-hidden":"true"},"#"),s(" Color")],-1),gc=n("p",null,"\u652F\u6301\uFF1ATransform | Build",-1),hc=n("p",null,"\u6B64\u9009\u9879\u542F\u7528\u6216\u7981\u7528 esbuild \u5199\u5165\u7EC8\u7AEF\u4E2D stderr \u6587\u4EF6\u63CF\u8FF0\u7B26\u7684\u9519\u8BEF\u548C\u8B66\u544A\u6D88\u606F\u4E2D\u7684\u989C\u8272\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5982\u679C stderr \u662F TTY \u4F1A\u8BDD\uFF0C\u5219\u81EA\u52A8\u542F\u7528\u989C\u8272\uFF0C\u5426\u5219\u81EA\u52A8\u7981\u7528\u3002 esbuild \u4E2D\u7684\u5F69\u8272\u8F93\u51FA\u5982\u4E0B\u6240\u793A\uFF1A",-1),fc=["src"],_c=p(`<p>\u53EF\u4EE5\u901A\u8FC7\u5C06 color \u8BBE\u7F6E\u4E3A <code>true</code> \u6765\u5F3A\u5236\u542F\u7528\u5F69\u8272\u8F93\u51FA\u3002\u5982\u679C\u60A8\u81EA\u5DF1\u5C06 esbuild \u7684 stderr \u8F93\u51FA\u901A\u8FC7\u7BA1\u9053\u4F20\u8F93\u5230 TTY\uFF0C\u8FD9\u5C06\u975E\u5E38\u6709\u7528\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;typeof x == &quot;null&quot;&#39;</span> <span class="token operator">|</span> esbuild --color<span class="token operator">=</span>true <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> stderr.txt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">let</span> js <span class="token operator">=</span> <span class="token string">&#39;typeof x == &quot;null&quot;&#39;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  js <span class="token operator">:=</span> <span class="token string">&quot;typeof x == &#39;null&#39;&quot;</span>

  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Color<span class="token punctuation">:</span> api<span class="token punctuation">.</span>ColorAlways<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u4E5F\u53EF\u4EE5\u5C06\u5F69\u8272\u8F93\u51FA\u8BBE\u7F6E\u4E3A <code>false</code> \u4EE5\u7981\u7528\u989C\u8272\u3002</p><h3 id="conditions" tabindex="-1"><a class="header-anchor" href="#conditions" aria-hidden="true">#</a> Conditions</h3><p>\u652F\u6301\uFF1ABuild</p><p>\u6B64\u529F\u80FD\u63A7\u5236\u5982\u4F55\u89E3\u91CA <code>package.json</code> \u4E2D\u7684<code>\u5BFC\u51FA\u5B57\u6BB5</code>\u3002\u53EF\u4EE5\u4F7F\u7528\u6761\u4EF6\u8BBE\u7F6E\u6DFB\u52A0\u81EA\u5B9A\u4E49\u6761\u4EF6\u3002\u60A8\u53EF\u4EE5\u6839\u636E\u9700\u8981\u6307\u5B9A\u4EFB\u610F\u6570\u91CF\u7684\u8FD9\u4E9B\uFF0C\u8FD9\u4E9B\u7684\u542B\u4E49\u5B8C\u5168\u53D6\u51B3\u4E8E\u5305\u4F5C\u8005\u3002 Node \u76EE\u524D\u53EA\u8BA4\u53EF\u63A8\u8350\u4F7F\u7528\u7684<code>\u5F00\u53D1</code>\u548C<code>\u751F\u4EA7</code>\u81EA\u5B9A\u4E49\u6761\u4EF6\u3002\u4EE5\u4E0B\u662F\u6DFB\u52A0\u81EA\u5B9A\u4E49\u6761\u4EF6 <code>custom1</code> \u548C <code>custom2</code> \u7684\u793A\u4F8B\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild src/app.js --bundle --conditions<span class="token operator">=</span>custom1,custom2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;src/app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">conditions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;custom1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;custom2&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;src/app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Conditions<span class="token punctuation">:</span>  <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;custom1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;custom2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h4 id="how-conditions-work" tabindex="-1"><a class="header-anchor" href="#how-conditions-work" aria-hidden="true">#</a> How conditions work</h4><p>\u6761\u4EF6\u5141\u8BB8\u60A8\u5728\u4E0D\u540C\u60C5\u51B5\u4E0B\u5C06\u76F8\u540C\u7684\u5BFC\u5165\u8DEF\u5F84\u91CD\u5B9A\u5411\u5230\u4E0D\u540C\u7684\u6587\u4EF6\u4F4D\u7F6E\u3002\u5305\u542B\u6761\u4EF6\u548C\u8DEF\u5F84\u7684\u91CD\u5B9A\u5411\u6620\u5C04\u5B58\u50A8\u5728\u5305\u7684 <code>package.json</code> \u6587\u4EF6\u7684<code>\u5BFC\u51FA\u5B57\u6BB5</code>\u4E2D\u3002\u4F8B\u5982\uFF0C\u8FD9\u4F1A\u5C06 <code>require(&#39;pkg/foo&#39;)</code> \u91CD\u65B0\u6620\u5C04\u5230 <code>pkg/required.cjs</code> \u5E76\u4F7F\u7528 <code>import</code> \u548C <code>require</code> \u6761\u4EF6\u5C06 <code>&#39;pkg/foo&#39;</code> \u5BFC\u5165\u5230 <code>pkg/imported.mjs</code>\uFF1A</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pkg&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;./foo&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./imported.mjs&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./required.cjs&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./fallback.js&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6761\u4EF6\u6309\u7167\u5B83\u4EEC\u5728 JSON \u6587\u4EF6\u4E2D\u51FA\u73B0\u7684\u987A\u5E8F\u8FDB\u884C\u68C0\u67E5\u3002\u6240\u4EE5\u4E0A\u9762\u7684\u4F8B\u5B50\u8868\u73B0\u5F97\u6709\u70B9\u50CF\u8FD9\u6837\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>importPath <span class="token operator">===</span> <span class="token string">&#39;./foo&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>conditions<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">&#39;import&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&#39;./imported.mjs&#39;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>conditions<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">&#39;require&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">&#39;./required.cjs&#39;</span>
  <span class="token keyword">return</span> <span class="token string">&#39;./fallback.js&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Cesbuild \u5185\u7F6E\u4E86\u4E94\u4E2A\u5177\u6709\u7279\u6B8A\u884C\u4E3A\u7684\u6761\u4EF6\uFF0C\u5E76\u4E14\u65E0\u6CD5\u7981\u7528\uFF1A</p><ul><li><code>default</code></li></ul><p>\u6B64\u6761\u4EF6\u59CB\u7EC8\u5904\u4E8E\u6D3B\u52A8\u72B6\u6001\u3002\u5B83\u65E8\u5728\u6700\u540E\u51FA\u73B0\uFF0C\u5E76\u8BA9\u60A8\u5728\u6CA1\u6709\u5176\u4ED6\u6761\u4EF6\u9002\u7528\u65F6\u63D0\u4F9B\u540E\u5907\u3002</p><ul><li><code>import</code></li></ul><p>\u6B64\u6761\u4EF6\u4EC5\u5728\u5BFC\u5165\u8DEF\u5F84\u6765\u81EA ESM <code>\u5BFC\u5165\u8BED\u53E5</code>\u6216 <code>import()</code> \u8868\u8FBE\u5F0F\u65F6\u624D\u6709\u6548\u3002\u5B83\u53EF\u7528\u4E8E\u63D0\u4F9B\u7279\u5B9A\u4E8E ESM \u7684\u4EE3\u7801\u3002</p><ul><li><code>require</code></li></ul><p>\u6B64\u6761\u4EF6\u4EC5\u5728\u5BFC\u5165\u8DEF\u5F84\u6765\u81EA CommonJS <code>require()</code> \u8C03\u7528\u65F6\u624D\u6709\u6548\u3002\u5B83\u53EF\u7528\u4E8E\u63D0\u4F9B CommonJS \u7279\u5B9A\u7684\u4EE3\u7801\u3002</p><ul><li><code>browser</code></li></ul>`,20),yc=s("\u5F53esbuild\u7684"),qc=s("\u5E73\u53F0\u8BBE\u7F6E"),jc=s("\u8BBE\u7F6E\u4E3A"),wc=n("code",null,"\u6D4F\u89C8\u5668",-1),xc=s("\u65F6\uFF0C\u6B64\u6761\u4EF6\u4EC5\u6FC0\u6D3B\u3002\u5B83\u53EF\u7528\u4E8E\u63D0\u4F9B\u7279\u5B9A\u4E8E\u6D4F\u89C8\u5668\u7684\u4EE3\u7801\u3002"),Sc=n("ul",null,[n("li",null,[n("code",null,"node")])],-1),Ec=s("\u5F53eSbuild\u7684"),Pc=s("\u5E73\u53F0\u8BBE\u7F6E\u8BBE"),Bc=s("\u7F6E\u4E3A"),Oc=n("code",null,"node",-1),Tc=s("\u65F6\uFF0C\u6B64\u6761\u4EF6\u4EC5\u6FC0\u6D3B\u3002\u5B83\u53EF\u7528\u4E8E\u63D0\u4F9B\u7279\u5B9A\u4E8Enode\u7684\u4EE3\u7801\u3002"),Cc=s("\u8BF7\u6CE8\u610F\uFF0C\u5F53\u60A8\u4F7F\u7528"),Ic=n("code",null,"require",-1),Ac=s("\u548C"),Jc=n("code",null,"import",-1),Lc=s("\u6761\u4EF6\u65F6\uFF0C\u60A8\u7684\u5305\u88F9\u53EF\u80FD\u4F1A\u591A\u6B21\u6346\u7ED1\u5728\u6346\u7ED1\u5305\u4E2D\uFF01\u8FD9\u662F\u4E00\u4E2A\u5FAE\u5999\u7684\u95EE\u9898\uFF0C\u9664\u4E86\u56F4\u7ED5\u751F\u6210\u7684\u6346\u7ED1\u5305\u4E4B\u5916\uFF0C\u7531\u4E8E\u4EE3\u7801\u72B6\u6001\u7684\u91CD\u590D\u526F\u672C\uFF0C\u53EF\u80FD\u4F1A\u5BFC\u81F4\u9519\u8BEF\u3002\u8FD9\u901A\u5E38\u88AB\u79F0\u4E3A"),Mc={href:"https://nodejs.org/docs/latest/api/packages.html#packages_dual_package_hazard",target:"_blank",rel:"noopener noreferrer"},Wc=s("\u53CC\u5305\u5371\u9669"),Fc=s("\u3002\u907F\u514D\u6B64\u65B9\u6CD5\u7684\u4E3B\u8981\u65B9\u5F0F\u662F\u5C06\u6240\u6709\u4EE3\u7801\u653E\u5728"),Rc=n("code",null,"require",-1),Dc=s("\u6761\u4EF6\u4E0B\uFF0C\u5E76\u5177\u6709"),Uc=n("code",null,"import",-1),Nc=s("\u6761\u4EF6\u53EA\u662F\u4E00\u4E2A\u975E\u53D7\u63A7\u5757"),Gc=n("code",null,"require",-1),Xc=s("\uFF0C\u53EF\u5728\u60A8\u7684\u5305\u88C5\u4E0A\u8C03\u7528\uFF0C\u5E76\u4F7F\u7528ESM\u8BED\u6CD5\u91CD\u65B0\u5BFC\u51FA\u5305\u88F9\u3002"),Hc=p(`<h3 id="entry-names" tabindex="-1"><a class="header-anchor" href="#entry-names" aria-hidden="true">#</a> Entry names</h3><p>\u652F\u6301\uFF1ABuild</p><p>\u6B64\u9009\u9879\u63A7\u5236\u5BF9\u5E94\u4E8E\u6BCF\u4E2A\u8F93\u5165\u6761\u76EE\u70B9\u6587\u4EF6\u7684\u8F93\u51FA\u6587\u4EF6\u7684\u6587\u4EF6\u540D\u3002\u5B83\u4F7F\u7528\u5E26\u6709\u5360\u4F4D\u7B26\u7684\u6A21\u677F\u914D\u7F6E\u8F93\u51FA\u8DEF\u5F84\uFF0C\u8BE5\u5360\u4F4D\u7B26\u5C06\u88AB\u66FF\u6362\u4E3A\u5728\u751F\u6210\u8F93\u51FA\u8DEF\u5F84\u65F6\u7531\u7279\u5B9A\u4E8E\u6587\u4EF6\u7684\u503C\u66FF\u6362\u3002\u4F8B\u5982\uFF0C\u6307\u5B9A<code>[dir]/[name]-[hash]</code>\u7684\u6761\u76EE\u540D\u79F0\u6A21\u677F\u5305\u62EC\u6587\u4EF6\u540D\u4E2D\u7684\u8F93\u51FA\u6587\u4EF6\u7684\u54C8\u5E0C\uFF0C\u5E76\u5C06\u6587\u4EF6\u653E\u5165\u8F93\u51FA\u76EE\u5F55\u4E2D\uFF0C\u53EF\u80FD\u4F1A\u5728\u5B50\u76EE\u5F55\u4E0B\uFF08\u8BF7\u53C2\u9605\u6709\u5173[<code>[ Dir]</code>\u4E0B\u9762\uFF09\u3002\u8FD9\u6837\u770B\u8D77\u6765\u5982\u6B64\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild src/main-app/app.js --entry-names<span class="token operator">=</span><span class="token punctuation">[</span>dir<span class="token punctuation">]</span>/<span class="token punctuation">[</span>name<span class="token punctuation">]</span>-<span class="token punctuation">[</span>hash<span class="token punctuation">]</span> --outbase<span class="token operator">=</span>src --bundle --outdir<span class="token operator">=</span>out
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;src/main-app/app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">entryNames</span><span class="token operator">:</span> <span class="token string">&#39;[dir]/[name]-[hash]&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outbase</span><span class="token operator">:</span> <span class="token string">&#39;src&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outdir</span><span class="token operator">:</span> <span class="token string">&#39;out&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// go</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;src/main-app/app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    EntryNames<span class="token punctuation">:</span>  <span class="token string">&quot;[dir]/[name]-[hash]&quot;</span><span class="token punctuation">,</span>
    Outbase<span class="token punctuation">:</span>     <span class="token string">&quot;src&quot;</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Outdir<span class="token punctuation">:</span>      <span class="token string">&quot;out&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u6709\u4E09\u4E2A\u5360\u4F4D\u7B26\u53EF\u4EE5\u5728\u8FDB\u5165\u8DEF\u5F84\u6A21\u677F\u4E2D\u4F7F\u7528\uFF1A</p><ul><li><code>[dir]</code></li></ul>`,6),zc=s("\u8FD9\u662F\u4ECE\u5305\u542B\u8F93\u5165\u6761\u76EE\u70B9\u6587\u4EF6\u5230"),Vc=s("outbase"),Kc=s("\u76EE\u5F55\u7684\u76EE\u5F55\u7684\u76F8\u5BF9\u8DEF\u5F84\u3002\u5176\u76EE\u7684\u662F\u5E2E\u52A9\u60A8\u907F\u514D\u4E0D\u540C\u5B50\u76EE\u5F55\u4E2D\u76F8\u540C\u540D\u4E3A\u7684\u5165\u53E3\u70B9\u4E4B\u95F4\u7684\u78B0\u649E\u3002"),$c=p("<p>\u4F8B\u5982\uFF0C\u5982\u679C\u6709\u4E24\u4E2A\u6761\u76EE\u70B9<code>src/pages/home/index.ts</code>\u548C<code>src/pages/about/index.ts</code>\uFF0C\u5219<code>outbase</code>\u76EE\u5F55\u662F<code>src</code>\uFF0C\u6761\u76EE\u540D\u79F0\u6A21\u677F\u662F<code>[dir]/[name]</code>\uFF0C\u8F93\u51FA\u76EE\u5F55\u5C06\u5305\u542B<code>pages/home/index.js</code>\u548C<code>pages/about/index.js</code>\u3002\u5982\u679C\u8F93\u5165\u540D\u79F0\u6A21\u677F\u53EA\u662F<code>[name]</code>\u800C\u8A00\uFF0C\u6346\u7ED1\u5C06\u5931\u8D25\uFF0C\u56E0\u4E3A\u8F93\u51FA\u76EE\u5F55\u4E2D\u5B58\u5728\u4E24\u4E2A\u5177\u6709\u76F8\u540C\u8F93\u51FA\u8DEF\u5F84\u7D22\u200B\u200B\u5F15\u7684\u8F93\u51FA\u6587\u4EF6\u3002</p><ul><li><code>[name]</code></li></ul><p>\u8FD9\u662F\u6CA1\u6709\u6269\u5C55\u540D\u7684\u5165\u53E3\u70B9\u7684\u539F\u59CB\u6587\u4EF6\u540D\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u8F93\u5165\u6761\u76EE\u70B9\u6587\u4EF6\u540D\u4E3A<code>App.js</code>\uFF0C\u5219<code>[Name]</code>\u5C06\u5728\u6A21\u677F\u4E2D\u7684<code>\u5E94\u7528\u7A0B\u5E8F</code>\u66FF\u6362\u3002</p><ul><li><code>[hash]</code></li></ul>",4),Yc=s("\u8FD9\u662F\u8F93\u51FA\u6587\u4EF6\u7684\u5185\u5BB9\u6563\u5217\uFF0C\u53EF\u7528\u4E8E\u91C7\u53D6\u6D4F\u89C8\u5668\u7F13\u5B58\u7684\u6700\u4F73\u4F18\u52BF\u3002\u5C06"),Qc=n("code",null,"[hash]",-1),Zc=s("\u6DFB\u52A0\u5230\u60A8\u7684\u5165\u53E3\u70B9\u540D\u79F0\u610F\u5473\u7740eSbuild\u5C06\u8BA1\u7B97\u4E0E\u76F8\u5E94\u7684\u8F93\u51FA\u6587\u4EF6\u4E2D\u7684\u6240\u6709\u5185\u5BB9\u76F8\u5173\u7684\u6563\u5217\uFF08\u4EE5\u53CA\u5982\u679C"),nl=s("\u4EE3\u7801\u62C6\u5206"),sl=s("\u662F\u6D3B\u52A8\u7684\u4EFB\u4F55\u8F93\u51FA\u6587\u4EF6\uFF0C\u5219\u5B83\u5BFC\u5165\u7684\u4EFB\u4F55\u8F93\u51FA\u6587\u4EF6\uFF09\u3002\u6563\u5217\u65E8\u5728\u4E14\u4EC5\u5728\u66F4\u6539\u4E0E\u8BE5\u8F93\u51FA\u6587\u4EF6\u76F8\u5173\u7684\u4EFB\u4F55\u8F93\u5165\u6587\u4EF6\u65F6\u624D\u66F4\u6539\u3002"),al=s("\u4E4B\u540E\uFF0C\u60A8\u53EF\u4EE5\u8BA9\u60A8\u7684Web\u670D\u52A1\u5668\u544A\u8BC9\u6D4F\u89C8\u5668\uFF0C\u4EE5\u4FBF\u5C06\u6D4F\u89C8\u5668\u6C38\u8FDC\u7F13\u5B58\u8FD9\u4E9B\u6587\u4EF6\uFF08\u5728\u7EC3\u4E60\u4E2D\uFF0C\u60A8\u53EF\u4EE5\u8BF4\u4ED6\u4EEC\u4ECE\u73B0\u5728\u5C31\u50CF\u5728\u4E00\u5E74\u4E2D\u90A3\u6837\u957F\u65F6\u95F4\u5230\u671F\uFF09\u3002\u7136\u540E\uFF0C\u60A8\u53EF\u4EE5\u4F7F\u7528"),tl=s("\u5143\u6587\u4EF6"),el=s("\u4E2D\u7684\u4FE1\u606F\u6765\u786E\u5B9A\u54EA\u4E2A\u8F93\u51FA\u6587\u4EF6\u8DEF\u5F84\u5BF9\u5E94\u4E8E\u54EA\u4E2A\u8F93\u5165\u6761\u76EE\u70B9\uFF0C\u4EE5\u4FBF\u60A8\u77E5\u9053"),pl=n("code",null,"<script>",-1),ol=s("\u6807\u8BB0\u4E2D\u5305\u542B\u7684\u8DEF\u5F84\u5305\u542B\u5728\u54EA\u6761\u8DEF\u5F84\u4E2D\u3002"),il=s("\u6761\u76EE\u8DEF\u5F84\u6A21\u677F\u4E0D\u9700\u8981\u5305\u542B\u6587\u4EF6\u6269\u5C55\u540D\u3002\u57FA\u4E8E\u6587\u4EF6\u7C7B\u578B\u7684\u9002\u5F53"),cl=s("\u7A81\u51FA"),ll=s("\u6269\u5C55\u5C06\u5728\u6A21\u677F\u66FF\u6362\u540E\u81EA\u52A8\u6DFB\u52A0\u5230\u8F93\u51FA\u8DEF\u5F84\u7684\u672B\u5C3E\u3002"),ul=s("\u6B64\u9009\u9879\u7C7B\u4F3C\u4E8E"),rl=s("\u8D44\u4EA7\u540D\u79F0"),dl=s("\u548C"),kl=s("\u5757\u540D\u79F0"),vl=s("\u9009\u9879\u3002"),ml=p(`<h3 id="footer" tabindex="-1"><a class="header-anchor" href="#footer" aria-hidden="true">#</a> Footer</h3><p>\u652F\u6301\uFF1ATransform | Build</p><p>\u4F7F\u7528\u6B64\u9009\u9879\u53EF\u5728\u751F\u6210\u7684JavaScript\u548CCSS\u6587\u4EF6\u7684\u672B\u5C3E\u63D2\u5165\u4EFB\u610F\u5B57\u7B26\u4E32\u3002\u8FD9\u901A\u5E38\u7528\u4E8E\u63D2\u5165\u8BC4\u8BBA\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --footer:js<span class="token operator">=</span>//comment --footer:css<span class="token operator">=</span>/*comment*/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">footer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">js</span><span class="token operator">:</span> <span class="token string">&#39;//comment&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token string">&#39;/*comment*/&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Footer<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>
      <span class="token string">&quot;js&quot;</span><span class="token punctuation">:</span>  <span class="token string">&quot;//comment&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;css&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;/*comment*/&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div>`,4),bl=s("\u8FD9\u7C7B\u4F3C\u4E8E"),gl=s("\u6A2A\u5E45"),hl=s("\uFF0C\u8BE5\u6A2A\u5E45\u5728\u5F00\u59CB\u800C\u4E0D\u662F\u7ED3\u675F\u65F6\u63D2\u5165\u3002"),fl=n("h3",{id:"global-name",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#global-name","aria-hidden":"true"},"#"),s(" Global name")],-1),_l=n("p",null,"\u652F\u6301\uFF1ATransform | Build",-1),yl=s("\u6B64\u9009\u9879\u4EC5\u5728"),ql=s("\u683C\u5F0F"),jl=s("\u8BBE\u7F6E\u4E3A"),wl=n("code",null,"IIFE",-1),xl=s("\u65F6\u4E8B\u9879\uFF08\u4EE3\u8868\u7ACB\u5373\u8C03\u7528\u7684\u51FD\u6570\u8868\u8FBE\u5F0F\uFF09\u3002\u5B83\u8BBE\u7F6E\u5168\u5C40\u53D8\u91CF\u7684\u540D\u79F0\uFF0C\u7528\u4E8E\u4ECE\u5165\u53E3\u70B9\u5B58\u50A8\u5BFC\u51FA\uFF1A"),Sl=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;module.exports = &quot;test&quot;&#39;</span> <span class="token operator">|</span> esbuild --format<span class="token operator">=</span>iife --global-name<span class="token operator">=</span>xyz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">let</span> js <span class="token operator">=</span> <span class="token string">&#39;module.exports = &quot;test&quot;&#39;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;iife&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">globalName</span><span class="token operator">:</span> <span class="token string">&#39;xyz&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  js <span class="token operator">:=</span> <span class="token string">&quot;module.exports = &#39;test&#39;&quot;</span>

  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Format<span class="token punctuation">:</span>     api<span class="token punctuation">.</span>FormatIIFE<span class="token punctuation">,</span>
    GlobalName<span class="token punctuation">:</span> <span class="token string">&quot;xyz&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u4F7F\u7528<code>iife</code>\u683C\u5F0F\u6307\u5B9A\u5168\u5C40\u540D\u79F0\u5C06\u751F\u6210\u67E5\u770B\u7C7B\u4F3C\u7684\u4EE3\u7801\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> xyz <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token keyword">var</span> require_stdin <span class="token operator">=</span> <span class="token function">__commonJS</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">exports<span class="token punctuation">,</span> module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">require_stdin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5168\u5C40\u540D\u79F0\u4E5F\u53EF\u4EE5\u662F\u590D\u5408\u5C5E\u6027\u8868\u8FBE\u5F0F\uFF0C\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0CeSbuild\u5C06\u751F\u6210\u5177\u6709\u8BE5\u5C5E\u6027\u7684\u5168\u5C40\u53D8\u91CF\u3002\u4E0D\u8986\u76D6\u51B2\u7A81\u7684\u73B0\u6709\u5168\u5C40\u53D8\u91CF\u3002\u8FD9\u53EF\u4EE5\u7528\u4E8E\u5B9E\u73B0\u201C\u547D\u540D\u65B9\u5F0F\u201D\uFF0C\u5176\u4E2D\u591A\u4E2A\u72EC\u7ACB\u811A\u672C\u5C06\u5BFC\u51FA\u6DFB\u52A0\u5230\u540C\u4E00\u5168\u5C40\u5BF9\u8C61\u4E0A\u3002\u4F8B\u5982\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;module.exports = &quot;test&quot;&#39;</span> <span class="token operator">|</span> esbuild --format<span class="token operator">=</span>iife --global-name<span class="token operator">=</span><span class="token string">&#39;example.versions[&quot;1.0&quot;]&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">let</span> js <span class="token operator">=</span> <span class="token string">&#39;module.exports = &quot;test&quot;&#39;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;iife&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">globalName</span><span class="token operator">:</span> <span class="token string">&#39;example.versions[&quot;1.0&quot;]&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  js <span class="token operator">:=</span> <span class="token string">&quot;module.exports = &#39;test&#39;&quot;</span>

  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Format<span class="token punctuation">:</span>     api<span class="token punctuation">.</span>FormatIIFE<span class="token punctuation">,</span>
    GlobalName<span class="token punctuation">:</span> <span class="token string">\`example.versions[&quot;1.0&quot;]\`</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u4E0A\u9762\u4F7F\u7528\u7684\u590D\u5408\u5168\u5C40\u540D\u79F0\u751F\u6210\u5982\u4E0B\u6240\u793A\u7684\u4EE3\u7801\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> example <span class="token operator">=</span> example <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
example<span class="token punctuation">.</span>versions <span class="token operator">=</span> example<span class="token punctuation">.</span>versions <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
example<span class="token punctuation">.</span>versions<span class="token punctuation">[</span><span class="token string">&quot;1.0&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token keyword">var</span> require_stdin <span class="token operator">=</span> <span class="token function">__commonJS</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">exports<span class="token punctuation">,</span> module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">require_stdin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="incremental" tabindex="-1"><a class="header-anchor" href="#incremental" aria-hidden="true">#</a> Incremental</h3><p>\u652F\u6301\uFF1ABuild</p>`,9),El=s("\u5982\u679C\u60A8\u7684\u7528\u4F8B\u6D89\u53CA\u4F7F\u7528\u76F8\u540C\u7684\u9009\u9879\u81F4\u7535\u547C\u53EBeSbuild\u7684"),Pl=s("\u6784\u5EFAAPI"),Bl=s("\uFF0C\u5219\u53EF\u80FD\u5E0C\u671B\u4F7F\u7528\u6B64API\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u60A8\u6B63\u5728\u5B9E\u73B0\u6587\u4EF6\u89C2\u5BDF\u8005\u670D\u52A1\uFF0C\u8FD9\u5C06\u662F\u6709\u7528\u7684\u3002\u589E\u91CF\u6784\u5EFA\u6BD4\u5E38\u89C4\u6784\u5EFA\u66F4\u6709\u6548\uFF0C\u56E0\u4E3A\u6709\u4E9B\u6570\u636E\u88AB\u7F13\u5B58\uFF0C\u5E76\u4E14\u5982\u679C\u81EA\u4E0A\u6B21\u6784\u5EFA\u4EE5\u6765\u539F\u59CB\u6587\u4EF6\u6CA1\u6709\u66F4\u6539\uFF0C\u5219\u53EF\u4EE5\u91CD\u7528\u3002\u76EE\u524D\uFF0C\u589E\u91CF\u6784\u5EFAAPI\u4F7F\u7528\u4E24\u79CD\u5F62\u5F0F\u7684\u7F13\u5B58\uFF1A"),Ol=s("\u6587\u4EF6\u5B58\u50A8\u5728\u5185\u5B58\u4E2D\uFF0C\u5982\u679C\u6587\u4EF6\u5143\u6570\u636E\u81EA\u4E0A\u6B21\u6784\u5EFA\u4EE5\u6765\u672A\u66F4\u6539\uFF0C\u5219\u4E0D\u4F1A\u4ECE\u6587\u4EF6\u7CFB\u7EDF\u91CD\u65B0\u8BFB\u53D6\u3002\u6B64\u4F18\u5316\u4EC5\u9002\u7528\u4E8E\u6587\u4EF6\u7CFB\u7EDF\u8DEF\u5F84\u3002\u5B83\u4E0D\u9002\u7528\u4E8E\u7531"),Tl={href:"https://esbuild.github.io/plugins/",target:"_blank",rel:"noopener noreferrer"},Cl=s("\u63D2\u4EF6"),Il=s("\u521B\u5EFA\u7684\u865A\u62DF\u6A21\u5757\u3002"),Al=s("\u89E3\u6790"),Jl={href:"https://en.wikipedia.org/wiki/Abstract_syntax_tree",target:"_blank",rel:"noopener noreferrer"},Ll=s("AST"),Ml=s("\u5B58\u50A8\u5728\u5185\u5B58\u4E2D\uFF0C\u5982\u679C\u6587\u4EF6\u5185\u5BB9\u81EA\u4E0A\u6B21\u6784\u5EFA\u4EE5\u6765\u6CA1\u6709\u66F4\u6539\uFF0C\u5219\u907F\u514D\u91CD\u65B0\u89E3\u6790AST\u3002\u9664\u4E86\u6587\u4EF6\u7CFB\u7EDF\u6A21\u5757\u4E4B\u5916\uFF0C\u6B64\u4F18\u5316\u8FD8\u9002\u7528\u4E8E\u7531Plugins\u521B\u5EFA\u7684\u865A\u62DF\u6A21\u5757\uFF0C\u53EA\u8981\u865A\u62DF\u6A21\u5757\u8DEF\u5F84\u4FDD\u6301\u4E0D\u53D8\u3002"),Wl=p(`<p>\u4EE5\u4E0B\u662F\u5982\u4F55\u8FDB\u884C\u589E\u91CF\u6784\u5EFA\uFF1A</p><div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">incremental</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// Call &quot;rebuild&quot; as many times as you want</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result2 <span class="token operator">=</span> <span class="token keyword">await</span> result<span class="token punctuation">.</span><span class="token function">rebuild</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Call &quot;dispose&quot; when you&#39;re done to free up resources.</span>
  result<span class="token punctuation">.</span>rebuild<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Outfile<span class="token punctuation">:</span>     <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
    Incremental<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Call &quot;Rebuild&quot; as many times as you want</span>
  <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
    result2 <span class="token operator">:=</span> result<span class="token punctuation">.</span><span class="token function">Rebuild</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result2<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
      os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h3 id="jsx" tabindex="-1"><a class="header-anchor" href="#jsx" aria-hidden="true">#</a> JSX</h3><p>\u652F\u6301\uFF1ATransform | Build</p><p>\u6B64\u9009\u9879\u544A\u8BC9eSBuild\u5982\u4F55\u5904\u7406JSX\u8BED\u6CD5\u3002\u60A8\u53EF\u4EE5\u5C06eSBuild\u8F6C\u6362\u4E3AJS\uFF08\u9ED8\u8BA4\u503C\uFF09\u6216\u4FDD\u7559\u8F93\u51FA\u4E2D\u7684JSX\u8BED\u6CD5\u3002\u4FDD\u7559JSX\u8BED\u6CD5\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;&lt;div/&gt;&#39;</span> <span class="token operator">|</span> esbuild --jsx<span class="token operator">=</span>preserve --loader<span class="token operator">=</span>jsx
<span class="token operator">&lt;</span>div /<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;div/&gt;&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">jsx</span><span class="token operator">:</span> <span class="token string">&#39;preserve&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;jsx&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;&lt;div /&gt;;\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;div/&gt;&quot;</span><span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    JSXMode<span class="token punctuation">:</span> api<span class="token punctuation">.</span>JSXModePreserve<span class="token punctuation">,</span>
    Loader<span class="token punctuation">:</span>  api<span class="token punctuation">.</span>LoaderJSX<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u8BF7\u6CE8\u610F\uFF0C\u5982\u679C\u4FDD\u7559JSX\u8BED\u6CD5\uFF0C\u5219\u8F93\u51FA\u6587\u4EF6\u4E0D\u518D\u6709\u6548JavaScript\u4EE3\u7801\u3002\u5F53\u60A8\u5E0C\u671B\u5728\u6346\u7ED1\u540E\u901A\u8FC7\u53E6\u4E00\u4E2A\u5DE5\u5177\u5728eSBuild\u7684\u8F93\u51FA\u6587\u4EF6\u4E2D\u5C06JSX\u8BED\u6CD5\u8F6C\u6362\u4E3AeSbuild\u7684\u8F93\u51FA\u6587\u4EF6\u4E2D\u7684JSX\u8BED\u6CD5\uFF0C\u901A\u5E38\u662F\u4E0E\u4E00\u4E2AeSBuild\u5B9E\u73B0\u4E0D\u540C\u7684JSX-to-JS\u8F6C\u6362\u3002</p><h3 id="jsx-factory" tabindex="-1"><a class="header-anchor" href="#jsx-factory" aria-hidden="true">#</a> JSX factory</h3><p>\u652F\u6301\uFF1ATransform | Build</p><p>\u8FD9\u8BBE\u7F6E\u4E86\u5BF9\u6BCF\u4E2AJSX\u5143\u7D20\u8C03\u7528\u7684\u51FD\u6570\u3002\u901A\u5E38\u662F\u8BF8\u5982\u6B64\u7C7B\u7684JSX\u8868\u8FBE\u5F0F\uFF1A</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Example text</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u88AB\u7F16\u8BD1\u6210\u51FD\u6570\u8C03\u7528<code>React.createElement</code>\u3002\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;Example text&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,13),Fl=s("\u60A8\u53EF\u4EE5\u901A\u8FC7\u66F4\u6539JSX\u5DE5\u5382\u6765\u8C03\u7528\u9664"),Rl=n("code",null,"React.createLement",-1),Dl=s("\u4E4B\u5916\u7684\u5185\u5BB9\u3002\u4F8B\u5982\uFF0C\u8981\u8C03\u7528\u51FD\u6570"),Ul=n("code",null,"h",-1),Nl=s("\uFF08\u800C\u4E0D\u662F\u7531\u5176\u4ED6\u5E93\u4F7F\u7528\uFF0C\u4F8B\u5982 "),Gl={href:"https://preactjs.com/",target:"_blank",rel:"noopener noreferrer"},Xl=s("Preact"),Hl=s("\uFF09\uFF1A"),zl=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;&lt;div/&gt;&#39;</span> <span class="token operator">|</span> esbuild --jsx-factory<span class="token operator">=</span>h --loader<span class="token operator">=</span>jsx
/* @__PURE__ */ h<span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span>, null<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// js</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;div/&gt;&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">jsxFactory</span><span class="token operator">:</span> <span class="token string">&#39;h&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;jsx&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;/* @__PURE__ */ h(&quot;div&quot;, null);\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// go</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;div/&gt;&quot;</span><span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    JSXFactory<span class="token punctuation">:</span> <span class="token string">&quot;h&quot;</span><span class="token punctuation">,</span>
    Loader<span class="token punctuation">:</span>     api<span class="token punctuation">.</span>LoaderJSX<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u6216\u8005\uFF0C\u5982\u679C\u60A8\u4F7F\u7528\u7684\u662F\u7C7B\u578B\u7B7E\u5B57\uFF0C\u53EA\u9700\u901A\u8FC7\u5C06\u6B64\u6DFB\u52A0\u5230<code>TSConfig.JSON</code>\u6587\u4EF6\u548CeSbuild\u5373\u53EF\u81EA\u52A8\u5C06\u5176\u62FE\u53D6\u800C\u65E0\u6CD5\u914D\u7F6E\uFF1A</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;jsxFactory&quot;</span><span class="token operator">:</span> <span class="token string">&quot;h&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="jsx-fragment" tabindex="-1"><a class="header-anchor" href="#jsx-fragment" aria-hidden="true">#</a> JSX fragment</h3><p>\u652F\u6301\uFF1ATransform | Build</p><p>\u8FD9\u8BBE\u7F6E\u4E86\u5BF9\u6BCF\u4E2AJSX\u7247\u6BB5\u8C03\u7528\u7684\u51FD\u6570\u3002\u901A\u5E38\u662F\u4E00\u4E2AJSX\u7247\u6BB5\u8868\u8FBE\u5F0F\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Stuff</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u88AB\u7F16\u8BD1\u4E3A\u4F7F\u7528<code>React.Fragment</code>\u7EC4\u4EF6\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>React<span class="token punctuation">.</span>Fragment<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;Stuff&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,9),Vl=s("\u60A8\u53EF\u4EE5\u901A\u8FC7\u66F4\u6539JSX\u7247\u6BB5\uFF0C\u4F7F\u7528\u9664"),Kl=n("code",null,"React.fragment",-1),$l=s("\u4E4B\u5916\u7684\u7EC4\u4EF6\u3002\u4F8B\u5982\uFF0C\u8981\u4F7F\u7528\u7EC4\u4EF6"),Yl=n("code",null,"Fragment",-1),Ql=s("\uFF08\u7531\u5176\u4ED6\u5E93\u4F7F\u7528\uFF0C\u4F8B\u5982"),Zl={href:"https://preactjs.com/",target:"_blank",rel:"noopener noreferrer"},nu=s(" Preact"),su=s("\uFF09\uFF1A"),au=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;&lt;&gt;x&lt;/&gt;&#39;</span> <span class="token operator">|</span> esbuild --jsx-fragment<span class="token operator">=</span>Fragment --loader<span class="token operator">=</span>jsx
/* @__PURE__ */ React.createElement<span class="token punctuation">(</span>Fragment, null, <span class="token string">&quot;x&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;&gt;x&lt;/&gt;&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">jsxFragment</span><span class="token operator">:</span> <span class="token string">&#39;Fragment&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;jsx&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;/* @__PURE__ */ React.createElement(Fragment, null, &quot;x&quot;);\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// go</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;&gt;x&lt;/&gt;&quot;</span><span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    JSXFragment<span class="token punctuation">:</span> <span class="token string">&quot;Fragment&quot;</span><span class="token punctuation">,</span>
    Loader<span class="token punctuation">:</span>      api<span class="token punctuation">.</span>LoaderJSX<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u6216\u8005\uFF0C\u5982\u679C\u60A8\u4F7F\u7528\u7684\u662F\u7C7B\u578B\u7B7E\u5B57\uFF0C\u53EA\u9700\u901A\u8FC7\u5C06\u6B64\u6DFB\u52A0\u5230<code>tsconfig.json</code>\u6587\u4EF6\u548CeSbuild\u5373\u53EF\u81EA\u52A8\u5C06\u5176\u62FE\u53D6\u800C\u65E0\u6CD5\u914D\u7F6E\uFF1A</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;jsxFragmentFactory&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Fragment&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="keep-names" tabindex="-1"><a class="header-anchor" href="#keep-names" aria-hidden="true">#</a> Keep names</h3><p>\u652F\u6301\uFF1ATransform | Build</p><p>\u5728JavaScript\u4E2D\uFF0C\u51FD\u6570\u7684<code>\u540D\u79F0</code>\u5C5E\u6027\u548C\u7C7B\u9ED8\u8BA4\u4E3A\u6E90\u4EE3\u7801\u4E2D\u7684\u9644\u8FD1\u6807\u8BC6\u7B26\u3002\u8FD9\u4E9B\u8BED\u6CD5\u8868\u5355\u90FD\u5C06\u51FD\u6570\u7684<code>\u540D\u79F0</code>\u5C5E\u6027\u8BBE\u7F6E\u4E3A<code>\u201Cfn\u201D</code>\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span><span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span><span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7),tu=s("\u4F46\u662F\uFF0C"),eu=s("\u538B\u7F29"),pu=s("\u91CD\u547D\u540D\u7B26\u53F7\u4EE5\u964D\u4F4E\u4EE3\u7801\u5927\u5C0F\u548C\u6346\u7ED1\u6709\u65F6\u9700\u8981\u91CD\u547D\u540D\u7B26\u53F7\u4EE5\u907F\u514D\u51B2\u7A81\u3002\u8FD9\u5BF9\u8FD9\u4E9B\u6848\u4F8B\u4E2D\u7684\u8BB8\u591A\u60C5\u51B5\u8FDB\u884C\u4E86"),ou=n("code",null,"\u540D\u79F0",-1),iu=s("\u5C5E\u6027\u7684\u503C\u3002\u8FD9\u901A\u5E38\u5F88\u597D\uFF0C\u56E0\u4E3A"),cu=n("code",null,"\u540D\u79F0",-1),lu=s("\u5C5E\u6027\u901A\u5E38\u4EC5\u7528\u4E8E\u8C03\u8BD5\u3002\u4F46\u662F\uFF0C\u67D0\u4E9B\u6846\u67B6\u4F9D\u8D56\u4E8E"),uu=n("code",null,"\u540D\u79F0",-1),ru=s("\u5C5E\u6027\u8FDB\u884C\u6CE8\u518C\u548C\u7ED1\u5B9A\u76EE\u7684\u3002\u5982\u679C\u662F\u8FD9\u79CD\u60C5\u51B5\uFF0C\u60A8\u53EF\u4EE5\u542F\u7528\u6B64\u9009\u9879\u5373\u4F7F\u5728\u538B\u7F29\u4EE3\u7801\u4E2D\u4E5F\u53EF\u4EE5\u4FDD\u7559\u539F\u59CB"),du=n("code",null,"\u540D\u79F0",-1),ku=s("\u503C\uFF1A"),vu=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --minify --keep-names
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">minify</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">keepNames</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span>       <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    MinifyWhitespace<span class="token punctuation">:</span>  <span class="token boolean">true</span><span class="token punctuation">,</span>
    MinifyIdentifiers<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    MinifySyntax<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    KeepNames<span class="token punctuation">:</span>         <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h3 id="legal-comments" tabindex="-1"><a class="header-anchor" href="#legal-comments" aria-hidden="true">#</a> Legal comments</h3><p>\u652F\u6301\uFF1ATransform | Build</p><p>\u201C\u6CD5\u5F8B\u8BC4\u8BBA\u201D\u88AB\u8BA4\u4E3A\u662F\u5305\u542B<code>@License</code>\u6216<code>@PreServe</code>\u6216\u4EE5//\u5F00\u59CB\u7684\u4EFB\u4F55\u58F0\u660E\u7EA7\u522B\u8BC4\u8BBA<code>//!</code>\u6216<code>/*!</code>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u8FD9\u4E9B\u6CE8\u91CA\u4FDD\u7559\u5728\u8F93\u51FA\u6587\u4EF6\u4E2D\uFF0C\u56E0\u4E3A\u5B83\u9075\u5FAA\u4EE3\u7801\u7684\u539F\u59CB\u4F5C\u8005\u7684\u610F\u56FE\u3002\u4F46\u662F\uFF0C\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u9009\u9879\u4E4B\u4E00\u6765\u914D\u7F6E\u6B64\u884C\u4E3A\uFF1A</p><ul><li><code>none</code></li></ul><p>\u4E0D\u8981\u4FDD\u7559\u4EFB\u4F55\u6CD5\u5F8B\u8BC4\u8BBA\u3002</p><ul><li><code>inline</code></li></ul><p>\u4FDD\u7559\u6240\u6709\u6CD5\u5F8B\u8BC4\u8BBA\u3002</p><ul><li><code>eof</code></li></ul><p>\u5C06\u6240\u6709\u6CD5\u5F8B\u8BC4\u8BBA\u79FB\u52A8\u5230\u6587\u4EF6\u7684\u672B\u5C3E\u3002</p><ul><li><code>linked</code></li></ul><p>\u5C06\u6240\u6709\u6CD5\u5F8B\u8BC4\u8BBA\u79FB\u52A8\u5230<code>.legal.txt</code>\u6587\u4EF6\u5E76\u7528\u8BC4\u8BBA\u94FE\u63A5\u5230\u5B83\u4EEC\u3002</p><ul><li><code>external</code></li></ul><p>\u5C06\u6240\u6709\u6CD5\u5F8B\u8BC4\u8BBA\u79FB\u52A8\u5230<code>.legal.txt</code>\u6587\u4EF6\uFF0C\u4F46\u4E0D\u94FE\u63A5\u5230\u5B83\u4EEC\u3002</p>`,14),mu=s("\u9ED8\u8BA4\u884C\u4E3A\u662F"),bu=n("code",null,"EOF",-1),gu=s("\u5F53"),hu=s("\u6346\u7ED1"),fu=s("\u5305\u542F\u7528\u5E76\u5426\u5219"),_u=n("code",null,"\u5185\u8054",-1),yu=s("\u3002\u8BBE\u7F6E\u6CD5\u5F8B\u8BC4\u8BBA\u6A21\u5F0F\u5982\u4E0B\u6240\u793A\uFF1A"),qu=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --legal-comments<span class="token operator">=</span>eof
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">legalComments</span><span class="token operator">:</span> <span class="token string">&#39;eof&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span>   <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    LegalComments<span class="token punctuation">:</span> api<span class="token punctuation">.</span>LegalCommentsEndOfFile<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u8BF7\u6CE8\u610F\uFF0C\u201C\u8BED\u53E5\u7EA7\u522B\u201D\u8868\u793A\u6CE8\u91CA\u5FC5\u987B\u5728\u5141\u8BB8\u591A\u4E2A\u8BED\u53E5\u7684\u4E0A\u4E0B\u6587\u4E2D\u51FA\u73B0\uFF0C\u4F8B\u5982\u5728\u9876\u7EA7\u8303\u56F4\u6216\u8BED\u53E5\u5757\u4E2D\u3002\u56E0\u6B64\u8868\u8FBE\u4E2D\u7684\u8BC4\u8BBA\u4E0D\u88AB\u89C6\u4E3A\u8BB8\u53EF\u8BC4\u8BBA\u3002</p><h3 id="log-level" tabindex="-1"><a class="header-anchor" href="#log-level" aria-hidden="true">#</a> Log level</h3><p>\u652F\u6301\uFF1ATransform | Build</p><p>\u53EF\u4EE5\u66F4\u6539\u65E5\u5FD7\u7EA7\u522B\u4EE5\u9632\u6B62eSbuild\u6253\u5370\u8B66\u544A\u548C/\u6216\u9519\u8BEF\u6D88\u606F\u5230\u7EC8\u7AEF\u3002\u516D\u4E2A\u65E5\u5FD7\u7EA7\u522B\u4E3A\uFF1A</p><ul><li><code>silent</code></li></ul><p>\u8BF7\u52FF\u663E\u793A\u4EFB\u4F55\u65E5\u5FD7\u8F93\u51FA\u3002</p><ul><li><code>error</code></li></ul><p>\u53EA\u663E\u793A\u9519\u8BEF\u3002</p><ul><li><code>warning</code></li></ul><p>\u53EA\u663E\u793A\u8B66\u544A\u548C\u9519\u8BEF\u3002</p><ul><li><code>info</code></li></ul><p>\u663E\u793A\u8B66\u544A\uFF0C\u9519\u8BEF\u548C\u8F93\u51FA\u6587\u4EF6\u6458\u8981\u3002\u8FD9\u662F\u9ED8\u8BA4\u7684\u65E5\u5FD7\u7EA7\u522B\u3002</p><ul><li><code>debug</code></li></ul><p>\u4ECE<code>\u4FE1\u606F</code>\u548C\u4E00\u4E9B\u53EF\u4EE5\u5E2E\u52A9\u60A8\u8C03\u8BD5\u635F\u574F\u6346\u7ED1\u5305\u7684\u5176\u4ED6\u90AE\u4EF6\u8BB0\u5F55\u6240\u6709\u5185\u5BB9\u3002\u6B64\u65E5\u5FD7\u7EA7\u522B\u5177\u6709\u6027\u80FD\u5F71\u54CD\uFF0C\u5176\u4E2D\u4E00\u4E9B\u6D88\u606F\u53EF\u80FD\u662F\u8BEF\u62A5\uFF0C\u56E0\u6B64\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u672A\u663E\u793A\u6B64\u4FE1\u606F\u3002</p><ul><li><code>verbose</code></li></ul><p>\u8FD9\u4F1A\u751F\u6210\u4E00\u4E2A\u65E5\u5FD7\u6D88\u606F\u7684\u6D2A\u6D41\uFF0C\u5E76\u6DFB\u52A0\u5230\u5E26\u6709\u6587\u4EF6\u7CFB\u7EDF\u9A71\u52A8\u7A0B\u5E8F\u7684\u8C03\u8BD5\u95EE\u9898\u3002\u5B83\u4E0D\u9002\u7528\u4E8E\u4E00\u822C\u4F7F\u7528\u3002</p><p>\u53EF\u4EE5\u8BBE\u7F6E\u65E5\u5FD7\u7EA7\u522B\uFF1A</p><div><div title="cli"><div class="language-cli ext-cli line-numbers-mode"><pre class="language-cli"><code>// cli

echo &#39;typeof x == &quot;null&quot;&#39; | esbuild --log-level=error
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">let</span> js <span class="token operator">=</span> <span class="token string">&#39;typeof x == &quot;null&quot;&#39;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">logLevel</span><span class="token operator">:</span> <span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  js <span class="token operator">:=</span> <span class="token string">&quot;typeof x == &#39;null&#39;&quot;</span>

  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    LogLevel<span class="token punctuation">:</span> api<span class="token punctuation">.</span>LogLevelError<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h3 id="log-limit" tabindex="-1"><a class="header-anchor" href="#log-limit" aria-hidden="true">#</a> Log limit</h3><p>\u652F\u6301\uFF1ATransform | Build</p><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CeSBuild\u5728\u62A5\u544A10\u6761\u6D88\u606F\u540E\u505C\u6B62\u62A5\u544A\u65E5\u5FD7\u6D88\u606F\u3002\u8FD9\u907F\u514D\u4E86\u610F\u5916\u751F\u6210\u538B\u5012\u6027\u6570\u91CF\u7684\u65E5\u5FD7\u6D88\u606F\uFF0C\u8FD9\u53EF\u4EE5\u8F7B\u677E\u9501\u5B9A\u8F83\u6162\u7684\u7EC8\u7AEF\u4EFF\u771F\u5668\uFF0C\u4F8B\u5982Windows\u547D\u4EE4\u63D0\u793A\u7B26\u3002\u5B83\u8FD8\u907F\u514D\u4F7F\u7528\u5177\u6709\u6709\u9650\u6EDA\u52A8\u7F13\u51B2\u5668\u7684\u7EC8\u7AEF\u4EFF\u771F\u5668\u7684\u6574\u4E2A\u6EDA\u52A8\u7F13\u51B2\u533A\u3002</p><p>\u65E5\u5FD7\u9650\u5236\u53EF\u4EE5\u66F4\u6539\u4E3A\u53E6\u4E00\u4E2A\u503C\uFF0C\u4E5F\u53EF\u4EE5\u901A\u8FC7\u5C06\u5176\u8BBE\u7F6E\u4E3A\u96F6\u5B8C\u5168\u7981\u7528\u3002\u8FD9\u5C06\u663E\u793A\u6240\u6709\u65E5\u5FD7\u6D88\u606F\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --log-limit<span class="token operator">=</span><span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">logLimit</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    LogLimit<span class="token punctuation">:</span>    <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h3 id="main-fields" tabindex="-1"><a class="header-anchor" href="#main-fields" aria-hidden="true">#</a> Main fields</h3><p>\u652F\u6301\uFF1ABuild</p>`,26),ju=s("\u5F53\u60A8\u5728node\u4E2D\u5BFC\u5165\u5305\u65F6\uFF0C\u8BE5\u8F6F\u4EF6\u5305\u5305\u4E2D\u7684"),wu=n("code",null,"mane",-1),xu=s(),Su=n("code",null,"package.json",-1),Eu=s("\u6587\u4EF6\u786E\u5B9A\u5BFC\u5165\u54EA\u4E2A\u6587\u4EF6\uFF08\u4EE5\u53CA"),Pu={href:"https://nodejs.org/api/modules.html#modules_all_together",target:"_blank",rel:"noopener noreferrer"},Bu=s("\u8BB8\u591A\u5176\u4ED6\u89C4\u5219"),Ou=s("\uFF09\u3002\u5305\u62ECeSBuild\u7684\u4E3B\u8981JavaScript Bundlers\uFF0C\u5141\u8BB8\u60A8\u6307\u5B9A\u5176\u4ED6\u5305\u3002json\u5B57\u6BB5\u4EE5\u5728\u89E3\u6790\u5305\u65F6\u5C1D\u8BD5\u3002\u901A\u5E38\u6709\u4E09\u4E2A\u8FD9\u4E9B\u9886\u57DF\uFF1A"),Tu=n("ul",null,[n("li",null,[n("code",null,"main")])],-1),Cu=s("\u8FD9\u662F"),Iu={href:"https://docs.npmjs.com/files/package.json#main",target:"_blank",rel:"noopener noreferrer"},Au=s("\u6807\u51C6\u5B57\u6BB5"),Ju=s("\uFF0C\u7528\u4E8E\u4E0Enode\u4E00\u8D77\u4F7F\u7528\u7684\u6240\u6709\u5305\u3002\u540D\u79F0"),Lu=n("code",null,"Main",-1),Mu=s("\u4E2D\u786C\u7F16\u7801\u4E3ANode\u7684\u6A21\u5757\u5206\u8FA8\u7387\u903B\u8F91\u672C\u8EAB\u3002\u56E0\u4E3A\u5B83\u65E8\u5728\u4E0Enode\u4E00\u8D77\u4F7F\u7528\uFF0C\u6240\u4EE5\u53EF\u4EE5\u5408\u7406\u5730\u671F\u671B\u6B64\u5B57\u6BB5\u4E2D\u7684\u6587\u4EF6\u8DEF\u5F84\u662FCommonJS\u6837\u5F0F\u6A21\u5757\u3002"),Wu=n("ul",null,[n("li",null,[n("code",null,"module")])],-1),Fu=s("\u8BE5\u9886\u57DF\u6765\u81EA\u5982\u4F55\u5C06EcMasscript\u6A21\u5757\u96C6\u6210\u5230node\u4E2D\u7684"),Ru={href:"https://github.com/dherman/defense-of-dot-js/blob/f31319be735b21739756b87d551f6711bd7aa283/proposal.md",target:"_blank",rel:"noopener noreferrer"},Du=s("\u63D0\u6848"),Uu=s("\u3002\u56E0\u6B64\uFF0C\u9884\u8BA1\u6B64\u5B57\u6BB5\u4E2D\u7684\u6587\u4EF6\u8DEF\u5F84\u662FECMAScript\u98CE\u683C\u6A21\u5757\u662F\u5408\u7406\u7684\u3002node\u672A\u91C7\u7528\u6B64\u63D0\u8BAE\uFF08Node\u4F7F\u7528"),Nu=n("code",null,"\u201Ctype\u201D",-1),Gu=s("\uFF1A"),Xu=n("code",null,"\u201Cmodule\u201D",-1),Hu=s("\u800C\u4E0D\u662F\uFF09\uFF0C\u4F46\u4E3B\u8981\u662F\u4E3B\u8981\u7684\u6346\u7ED1\u7A0B\u5E8F\u91C7\u7528\uFF0C\u56E0\u4E3AECMAScript\u98CE\u683C\u6A21\u5757\u5BFC\u81F4\u66F4\u597D\u7684"),zu=s("\u6811\u6296\u52A8"),Vu=s("\uFF0C\u6216\u62C6\u9664\u6B7B\u4EA1\u4EE3\u7801\u3002"),Ku=p("<p>\u5BF9\u4E8E\u5305\u4F5C\u8005\uFF1A\u67D0\u4E9B\u8F6F\u4EF6\u5305\u9519\u8BEF\u5730\u4F7F\u7528\u7279\u5B9A\u4E8E\u6D4F\u89C8\u5668\u4EE3\u7801\u7684<code>\u6A21\u5757</code>\u5B57\u6BB5\uFF0C\u4E3A<code>main</code>\u7559\u4E0B\u7279\u5B9A\u4E8Enode\u7684\u4EE3\u7801\u3002\u8FD9\u53EF\u80FD\u662F\u56E0\u4E3Anode\u5FFD\u7565\u4E86<code>\u6A21\u5757</code>\u5B57\u6BB5\uFF0C\u4EBA\u4EEC\u901A\u5E38\u53EA\u4F7F\u7528Bundlers\u7279\u5B9A\u4E8E\u6D4F\u89C8\u5668\u4EE3\u7801\u3002\u7136\u800C\uFF0C\u6346\u7ED1\u7684node\u7279\u5B9A\u4EE3\u7801\u4E5F\u6709\u4EF7\u503C\uFF08\u4F8B\u5982\uFF0C\u5B83\u51CF\u5C11\u4E86\u4E0B\u8F7D\u548C\u542F\u52A8\u65F6\u95F4\uFF09\uFF0C\u5E76\u5C06\u7279\u5B9A\u4E8E<code>\u6A21\u5757</code>\u4E2D\u7684\u6D4F\u89C8\u5668\u4EE3\u7801\u7684\u8F6F\u4EF6\u5305\u963B\u6B62\u6346\u7ED1\u7A0B\u5E8F\u80FD\u591F\u6709\u6548\u5730\u8FDB\u884C\u6811\u6447\u52A8\u3002\u5982\u679C\u60A8\u5C1D\u8BD5\u5728\u5305\u4E2D\u53D1\u5E03\u7279\u5B9A\u4E8E\u6D4F\u89C8\u5668\u7684\u4EE3\u7801\uFF0C\u8BF7\u4F7F\u7528<code>\u6D4F\u89C8\u5668</code>\u5B57\u6BB5\u3002</p><ul><li><code>browser</code></li></ul>",2),$u=s("\u6B64\u5B57\u6BB5\u6765\u81EA\u4E00\u4E2A"),Yu={href:"https://gist.github.com/defunctzombie/4339901/49493836fb873ddaa4b8a7aa0ef2352119f69211",target:"_blank",rel:"noopener noreferrer"},Qu=s("\u63D0\u8BAE"),Zu=s("\uFF0C\u5141\u8BB8\u6346\u7ED1\u7A0B\u5E8F\u7528\u6D4F\u89C8\u5668\u53CB\u597D\u7248\u672C\u66FF\u6362\u7279\u5B9A\u4E8Enode\u7684\u6587\u4EF6\u6216\u6A21\u5757\u3002\u5B83\u5141\u8BB8\u60A8\u6307\u5B9A\u5907\u7528\u6D4F\u89C8\u5668\u7279\u5B9A\u7684\u5165\u53E3\u70B9\u3002\u8BF7\u6CE8\u610F\uFF0C\u7A0B\u5E8F\u5305\u53EF\u4EE5\u4E00\u8D77\u4F7F\u7528"),nr=n("code",null,"\u6D4F\u89C8\u5668",-1),sr=s("\u548C"),ar=n("code",null,"\u6A21\u5757",-1),tr=s("\u5B57\u6BB5\uFF08\u8BF7\u53C2\u9605\u4E0B\u9762\u7684\u6CE8\u91CA\uFF09\u3002"),er=s("\u9ED8\u8BA4\u4E3B\u5B57\u6BB5\u53D6\u51B3\u4E8E\u5F53\u524D\u5E73\u53F0"),pr=s("\u8BBE\u7F6E"),or=s("\uFF0C\u5E76\u4E14\u57FA\u672C\u4E0A\u662F"),ir=n("code",null,"\u6D4F\u89C8\u5668",-1),cr=s("\uFF0C"),lr=n("code",null,"\u6A21\u5757",-1),ur=s("\uFF0C"),rr=n("code",null,"main",-1),dr=s("\u548C\u4E3B\u8981\u7684"),kr=n("code",null,"main",-1),vr=s("\uFF0Cnode "),mr=n("code",null,"module",-1),br=s("\u3002\u8FD9\u4E9B\u9ED8\u8BA4\u503C\u5E94\u8BE5\u662F\u4E0E\u73B0\u6709\u5305\u751F\u6001\u7CFB\u7EDF\u6700\u5E7F\u6CDB\u517C\u5BB9\u3002\u4F46\u5982\u679C\u60A8\u613F\u610F\uFF0C\u60A8\u53EF\u4EE5\u6839\u636E\u8FD9\u6837\u81EA\u5B9A\u4E49\u5B83\u4EEC\uFF1A"),gr=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --bundle --main-fields<span class="token operator">=</span>module,main
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mainFields</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;module&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;main&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    MainFields<span class="token punctuation">:</span>  <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;main&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>       <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u5BF9\u4E8E\u5305\u4F5C\u8005\uFF1A\u5982\u679C\u8981\u521B\u5EFA\u4F7F\u7528<code>\u6D4F\u89C8\u5668</code>\u5B57\u6BB5\u7684\u5305\u4E0E<code>\u6A21\u5757</code>\u5B57\u6BB5\u7ED3\u5408\u4F7F\u7528\u6D4F\u89C8\u5668\u5B57\u6BB5\u4EE5\u586B\u5199\u5B8C\u6574CommonJS-VS-ESM\u548C\u6D4F\u89C8\u5668-VS-Node\u517C\u5BB9\u6027\u77E9\u9635\u4E2D\u7684\u6240\u6709\u56DB\u4E2A\u6761\u76EE\uFF0C\u5219\u8981\u4F7F\u7528\u5C55\u5F00\u7684<code>\u6D4F\u89C8\u5668</code>\u5B57\u6BB5\u7684\u5F62\u5F0F\uFF0C\u5373\u5730\u56FE\u800C\u4E0D\u662F\u4EC5\u9650\u5B57\u7B26\u4E32\uFF1A</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./node-cjs.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./node-esm.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;browser&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;./node-cjs.js&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./browser-cjs.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;./node-esm.js&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./browser-esm.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="metafile" tabindex="-1"><a class="header-anchor" href="#metafile" aria-hidden="true">#</a> Metafile</h3><p>\u652F\u6301\uFF1ABuild</p><p>\u6B64\u9009\u9879\u544A\u8BC9ESBuild\u4EE5JSON\u683C\u5F0F\u751F\u6210\u6709\u5173\u6784\u5EFA\u7684\u4E00\u4E9B\u5143\u6570\u636E\u3002\u4EE5\u4E0B\u793A\u4F8B\u5C06\u5143\u6570\u636E\u653E\u5728\u540D\u4E3A<code>meta.json</code>\u7684\u6587\u4EF6\u4E2D\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --bundle --metafile<span class="token operator">=</span>meta.json --outfile<span class="token operator">=</span>out.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">metafile</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">&#39;meta.json&#39;</span><span class="token punctuation">,</span>
  <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>metafile<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;io/ioutil&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Metafile<span class="token punctuation">:</span>    <span class="token boolean">true</span><span class="token punctuation">,</span>
    Outfile<span class="token punctuation">:</span>     <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>       <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  ioutil<span class="token punctuation">.</span><span class="token function">WriteFile</span><span class="token punctuation">(</span><span class="token string">&quot;meta.json&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Metafile<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0644</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div>`,7),hr=s("\u7136\u540E\u53EF\u4EE5\u901A\u8FC7\u5176\u4ED6\u5DE5\u5177\u5206\u6790\u6B64\u6570\u636E\u3002\u4F8B\u5982\uFF0C"),fr={href:"https://www.bundle-buddy.com/esbuild",target:"_blank",rel:"noopener noreferrer"},_r=s("Bundle Buddy"),yr=s("\u53EF\u4EE5\u6D88\u8017eSBuild\u7684\u5143\u6570\u636E\u683C\u5F0F\uFF0C\u5E76\u5728\u6346\u7ED1\u5305\u4E2D\u751F\u6210\u6A21\u5757\u7684Treemap\u53EF\u89C6\u5316\u4EE5\u53CA\u6BCF\u4E2A\u4EBA\u5360\u7528\u591A\u5C11\u7A7A\u95F4\u3002"),qr=p(`<p>\u5143\u6570\u636EJSON\u683C\u5F0F\u5982\u56FE\u6240\u793A\uFF08\u4F7F\u7528typescript\u754C\u9762\u63CF\u8FF0\uFF09\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Metadata</span> <span class="token punctuation">{</span>
  inputs<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      bytes<span class="token operator">:</span> <span class="token builtin">number</span>
      imports<span class="token operator">:</span> <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token builtin">string</span>
        kind<span class="token operator">:</span> <span class="token builtin">string</span>
      <span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  outputs<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      bytes<span class="token operator">:</span> <span class="token builtin">number</span>
      inputs<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          bytesInOutput<span class="token operator">:</span> <span class="token builtin">number</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      imports<span class="token operator">:</span> <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token builtin">string</span>
        kind<span class="token operator">:</span> <span class="token builtin">string</span>
      <span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
      exports<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
      entryPoint<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="node-paths" tabindex="-1"><a class="header-anchor" href="#node-paths" aria-hidden="true">#</a> Node paths</h3><p>\u652F\u6301\uFF1ABuild</p>`,4),jr=s("node\u7684\u6A21\u5757\u5206\u8FA8\u7387\u7B97\u6CD5\u652F\u6301\u4E00\u4E2A\u540D\u4E3A"),wr={href:"https://nodejs.org/api/modules.html#modules_loading_from_the_global_folders",target:"_blank",rel:"noopener noreferrer"},xr=s("node_path"),Sr=s("\u7684\u73AF\u5883\u53D8\u91CF\uFF0C\u5176\u4E2D\u5305\u542B\u5728\u89E3\u6790\u5BFC\u5165\u8DEF\u5F84\u65F6\u4F7F\u7528\u7684\u5168\u5C40\u76EE\u5F55\u5217\u8868\u3002\u9664\u4E86\u6240\u6709\u7236\u76EE\u5F55\u4E2D\u7684"),Er=n("code",null,"node_modules",-1),Pr=s("\u76EE\u5F55\u4E4B\u5916\uFF0C\u8FD8\u641C\u7D22\u8FD9\u4E9B\u8DEF\u5F84\u3002\u60A8\u53EF\u4EE5\u4F7F\u7528\u5E26\u6709CLI\u7684\u73AF\u5883\u53D8\u91CF\u5E76\u4F7F\u7528JS\u548CGO API\u7684\u9635\u5217\u5C06\u6B64\u76EE\u5F55\u5217\u8868\u4F20\u9012\u7ED9eSBuild\u5217\u8868\uFF1A"),Br=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token assign-left variable">NODE_PATH</span><span class="token operator">=</span>someDir esbuild app.js --bundle --outfile<span class="token operator">=</span>out.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">nodePaths</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;someDir&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    NodePaths<span class="token punctuation">:</span>   <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;someDir&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Outfile<span class="token punctuation">:</span>     <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>       <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u5982\u679C\u60A8\u4F7F\u7528\u7684\u662FCLI\u5E76\u5E0C\u671B\u4F7F\u7528<code>Node_Path</code>\u4F20\u9012\u591A\u4E2A\u76EE\u5F55\uFF0C\u5219\u5FC5\u987B\u5C06\u5B83\u4EEC\u5206\u5F00<code>:</code>UNIX\u548C<code>;</code>\u5728Windows\u4E0A\u3002\u8FD9\u662Fnode\u672C\u8EAB\u4F7F\u7528\u7684\u683C\u5F0F\u76F8\u540C\u7684\u683C\u5F0F\u3002</p><h3 id="out-extension" tabindex="-1"><a class="header-anchor" href="#out-extension" aria-hidden="true">#</a> Out extension</h3><p>\u652F\u6301\uFF1ABuild</p>`,4),Or=s("\u6B64\u9009\u9879\u5141\u8BB8\u60A8\u81EA\u5B9A\u4E49 esbuild \u751F\u6210\u7684\u6587\u4EF6\u7684\u6587\u4EF6\u6269\u5C55\u540D\uFF0C\u800C\u4E0D\u662F "),Tr=n("code",null,".js",-1),Cr=s(" \u6216 "),Ir=n("code",null,".css",-1),Ar=s("\u3002\u7279\u522B\u662F"),Jr=n("code",null,".mjs",-1),Lr=s(" \u548C"),Mr=n("code",null,".cjs",-1),Wr=s(" \u6587\u4EF6\u6269\u5C55\u540D\u5728node \u4E2D\u6709\u7279\u6B8A\u542B\u4E49\uFF08\u5B83\u4EEC\u5206\u522B\u8868\u793AESM \u548CCommonJS \u683C\u5F0F\u7684\u6587\u4EF6\uFF09\u3002\u5982\u679C\u60A8\u4F7F\u7528 esbuild \u751F\u6210\u591A\u4E2A\u6587\u4EF6\u5E76\u4E14\u5FC5\u987B\u4F7F\u7528 "),Fr=s("outdir"),Rr=s(" \u9009\u9879\u800C\u4E0D\u662F "),Dr=s("outfile"),Ur=s(" \u9009\u9879\uFF0C\u5219\u6B64\u9009\u9879\u5F88\u6709\u7528\u3002\u4F60\u53EF\u4EE5\u8FD9\u6837\u4F7F\u7528\u5B83\uFF1A"),Nr=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --bundle --outdir<span class="token operator">=</span>dist --out-extension:.js<span class="token operator">=</span>.mjs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outdir</span><span class="token operator">:</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outExtension</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;.js&#39;</span><span class="token operator">:</span> <span class="token string">&#39;.mjs&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// go</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Outdir<span class="token punctuation">:</span>      <span class="token string">&quot;dist&quot;</span><span class="token punctuation">,</span>
    OutExtensions<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>
      <span class="token string">&quot;.js&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;.mjs&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h3 id="outbase" tabindex="-1"><a class="header-anchor" href="#outbase" aria-hidden="true">#</a> Outbase</h3><p>\u652F\u6301\uFF1ABuild</p>`,3),Gr=s("\u5982\u679C\u60A8\u7684\u6784\u5EFA\u5728\u5355\u72EC\u7684\u76EE\u5F55\u4E2D\u5305\u542B\u591A\u4E2A\u5165\u53E3\u70B9\uFF0C\u5219\u76EE\u5F55\u7ED3\u6784\u5C06\u590D\u5236\u5230\u76F8\u5BF9\u4E8E outbase \u76EE\u5F55\u7684"),Xr=s("\u8F93\u51FA\u76EE\u5F55"),Hr=s("\u4E2D\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u6709\u4E24\u4E2A\u5165\u53E3\u70B9 "),zr=n("code",null,"src/pages/home/index.ts",-1),Vr=s(" \u548C "),Kr=n("code",null,"src/pages/about/index.ts",-1),$r=s(" \u5E76\u4E14 outbase \u76EE\u5F55\u662F "),Yr=n("code",null,"src",-1),Qr=s("\uFF0C\u5219\u8F93\u51FA\u76EE\u5F55\u5C06\u5305\u542B "),Zr=n("code",null,"pages/home/index.js",-1),nd=s(" \u548C "),sd=n("code",null,"pages/about/index.js",-1),ad=s("\u3002\u4EE5\u4E0B\u662F\u5982\u4F55\u4F7F\u7528\u5B83\uFF1A"),td=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild src/pages/home/index.ts src/pages/about/index.ts --bundle --outdir<span class="token operator">=</span>out --outbase<span class="token operator">=</span>src
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&#39;src/pages/home/index.ts&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;src/pages/about/index.ts&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outdir</span><span class="token operator">:</span> <span class="token string">&#39;out&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outbase</span><span class="token operator">:</span> <span class="token string">&#39;src&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// go</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>
      <span class="token string">&quot;src/pages/home/index.ts&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;src/pages/about/index.ts&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>  <span class="token boolean">true</span><span class="token punctuation">,</span>
    Outdir<span class="token punctuation">:</span>  <span class="token string">&quot;out&quot;</span><span class="token punctuation">,</span>
    Outbase<span class="token punctuation">:</span> <span class="token string">&quot;src&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div>`,1),ed=s("\u5982\u679C\u672A\u6307\u5B9A outbase \u76EE\u5F55\uFF0C\u5219\u9ED8\u8BA4\u4E3A\u6240\u6709\u8F93\u5165\u5165\u53E3\u70B9\u8DEF\u5F84\u4E2D"),pd={href:"https://en.wikipedia.org/wiki/Lowest_common_ancestor",target:"_blank",rel:"noopener noreferrer"},od=s("\u6700\u4F4E\u7684\u516C\u5171\u7956\u5148"),id=s("\u76EE\u5F55\u3002\u8FD9\u662F\u4E0A\u9762\u793A\u4F8B\u4E2D\u7684 "),cd=n("code",null,"src/pages",-1),ld=s("\uFF0C\u8FD9\u610F\u5473\u7740\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u8F93\u51FA\u76EE\u5F55\u5C06\u5305\u542B "),ud=n("code",null,"home/index.js",-1),rd=s(" \u548C "),dd=n("code",null,"about/index.js",-1),kd=s("\u3002"),vd=n("h3",{id:"preserve-symlinks",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#preserve-symlinks","aria-hidden":"true"},"#"),s(" Preserve symlinks")],-1),md=n("p",null,"\u652F\u6301\uFF1ABuild",-1),bd=s("\u6B64\u8BBE\u7F6E\u53CD\u6620\u4E86\u8282\u70B9\u4E2D\u7684 "),gd={href:"https://nodejs.org/api/cli.html#cli_preserve_symlinks",target:"_blank",rel:"noopener noreferrer"},hd=s("--preserve-symlinks"),fd=s(" \u8BBE\u7F6E\u3002\u5982\u679C\u60A8\u4F7F\u7528\u8BE5\u8BBE\u7F6E\uFF08\u6216 Webpack \u4E2D\u7C7B\u4F3C\u7684 "),_d={href:"https://webpack.js.org/configuration/resolve/#resolvesymlinks",target:"_blank",rel:"noopener noreferrer"},yd=s("resolve.symlinks"),qd=s(" \u8BBE\u7F6E\uFF09\uFF0C\u60A8\u53EF\u80FD\u4E5F\u9700\u8981\u5728 esbuild \u4E2D\u542F\u7528\u6B64\u8BBE\u7F6E\u3002\u5B83\u53EF\u4EE5\u50CF\u8FD9\u6837\u542F\u7528\uFF1A"),jd=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --bundle --preserve-symlinks --outfile<span class="token operator">=</span>out.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">preserveSymlinks</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span>      <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>           <span class="token boolean">true</span><span class="token punctuation">,</span>
    PreserveSymlinks<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    Outfile<span class="token punctuation">:</span>          <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u542F\u7528\u6B64\u8BBE\u7F6E\u4F1A\u5BFC\u81F4 esbuild \u901A\u8FC7\u539F\u59CB\u6587\u4EF6\u8DEF\u5F84\uFF08\u5373\u6CA1\u6709\u8DDF\u968F\u7B26\u53F7\u94FE\u63A5\u7684\u8DEF\u5F84\uFF09\u800C\u4E0D\u662F\u771F\u5B9E\u6587\u4EF6\u8DEF\u5F84\uFF08\u5373\u8DDF\u968F\u7B26\u53F7\u94FE\u63A5\u4E4B\u540E\u7684\u8DEF\u5F84\uFF09\u6765\u786E\u5B9A\u6587\u4EF6\u6807\u8BC6\u3002\u8FD9\u5BF9\u4E8E\u67D0\u4E9B\u76EE\u5F55\u7ED3\u6784\u662F\u6709\u76CA\u7684\u3002\u8BF7\u8BB0\u4F4F\uFF0C\u8FD9\u610F\u5473\u7740\u5982\u679C\u6709\u591A\u4E2A\u7B26\u53F7\u94FE\u63A5\u6307\u5411\u4E00\u4E2A\u6587\u4EF6\uFF0C\u5B83\u53EF\u80FD\u4F1A\u88AB\u8D4B\u4E88\u591A\u4E2A\u8EAB\u4EFD\uFF0C\u8FD9\u53EF\u80FD\u5BFC\u81F4\u5B83\u5728\u751F\u6210\u7684\u8F93\u51FA\u6587\u4EF6\u4E2D\u591A\u6B21\u51FA\u73B0\u3002</p>`,2),wd=s("\u6CE8\u610F\uFF1A\u672F\u8BED\u201C\u7B26\u53F7\u94FE\u63A5\u201D\u8868\u793A"),xd={href:"https://en.wikipedia.org/wiki/Symbolic_link",target:"_blank",rel:"noopener noreferrer"},Sd=s("\u7B26\u53F7\u94FE\u63A5"),Ed=s("\uFF0C\u6307\u7684\u662F\u4E00\u79CD\u6587\u4EF6\u7CFB\u7EDF\u529F\u80FD\uFF0C\u5176\u4E2D\u4E00\u4E2A\u8DEF\u5F84\u53EF\u4EE5\u91CD\u5B9A\u5411\u5230\u53E6\u4E00\u4E2A\u8DEF\u5F84\u3002"),Pd=p(`<h3 id="public-path" tabindex="-1"><a class="header-anchor" href="#public-path" aria-hidden="true">#</a> Public path</h3><p>\u652F\u6301\uFF1ABuild</p><p>\u8FD9\u4E0E\u5916\u90E8\u6587\u4EF6\u52A0\u8F7D\u5668\u7ED3\u5408\u4F7F\u7528\u5F88\u6709\u7528\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u52A0\u8F7D\u5668\u4F7F\u7528<code>\u9ED8\u8BA4</code>\u5BFC\u51FA\u5C06\u5BFC\u5165\u6587\u4EF6\u7684\u540D\u79F0\u5BFC\u51FA\u4E3A\u5B57\u7B26\u4E32\u3002\u516C\u5171\u8DEF\u5F84\u9009\u9879\u5141\u8BB8\u60A8\u5728\u6B64\u52A0\u8F7D\u7A0B\u5E8F\u52A0\u8F7D\u7684\u6BCF\u4E2A\u6587\u4EF6\u7684\u5BFC\u51FA\u5B57\u7B26\u4E32\u4E4B\u524D\u6DFB\u52A0\u57FA\u672C\u8DEF\u5F84\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --bundle --loader:.png<span class="token operator">=</span>file --public-path<span class="token operator">=</span>https://www.example.com/v1 --outdir<span class="token operator">=</span>out
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;.png&#39;</span><span class="token operator">:</span> <span class="token string">&#39;file&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">&#39;https://www.example.com/v1&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outdir</span><span class="token operator">:</span> <span class="token string">&#39;out&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Loader<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>api<span class="token punctuation">.</span>Loader<span class="token punctuation">{</span>
      <span class="token string">&quot;.png&quot;</span><span class="token punctuation">:</span> api<span class="token punctuation">.</span>LoaderFile<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Outdir<span class="token punctuation">:</span>     <span class="token string">&quot;out&quot;</span><span class="token punctuation">,</span>
    PublicPath<span class="token punctuation">:</span> <span class="token string">&quot;https://www.example.com/v1&quot;</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h3 id="pure" tabindex="-1"><a class="header-anchor" href="#pure" aria-hidden="true">#</a> Pure</h3><p>\u652F\u6301\uFF1ATransform | Build</p><p>\u5404\u79CD JavaScript \u5DE5\u5177\u90FD\u4F7F\u7528\u4E00\u4E2A\u7EA6\u5B9A\uFF0C\u5176\u4E2D\u5728 new \u6216 call \u8868\u8FBE\u5F0F\u4E4B\u524D\u5305\u542B <code>/* @__PURE__ */</code> \u6216 <code>/* #__PURE__ */</code> \u7684\u7279\u6B8A\u6CE8\u91CA\u610F\u5473\u7740\u5982\u679C\u7ED3\u679C\u503C\u672A\u4F7F\u7528\uFF0C\u5219\u53EF\u4EE5\u5220\u9664\u8BE5\u8868\u8FBE\u5F0F\u3002\u5B83\u770B\u8D77\u6765\u50CF\u8FD9\u6837\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> button <span class="token operator">=</span> <span class="token comment">/* @__PURE__ */</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>Button<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5728\u6253\u5305\u7A0B\u5E8F\u65E0\u6CD5\u81EA\u884C\u8BC1\u660E\u5220\u9664\u662F\u5B89\u5168\u7684\u60C5\u51B5\u4E0B\uFF0C\u6253\u5305\u7A0B\u5E8F\uFF08\u4F8B\u5982 esbuild \u5728\u6447\u6811\uFF08\u53C8\u540D\u6B7B\u4EE3\u7801\u5220\u9664\uFF09\u671F\u95F4\u4F7F\u7528\u6B64\u4FE1\u606F\u6765\u6267\u884C\u8DE8\u6A21\u5757\u8FB9\u754C\u7684\u672A\u4F7F\u7528\u5BFC\u5165\u7684\u7EC6\u7C92\u5EA6\u5220\u9664\uFF09 JavaScript \u4EE3\u7801\u7684\u52A8\u6001\u7279\u6027\u3002</p><p>\u8BF7\u6CE8\u610F\uFF0C\u867D\u7136\u6CE8\u91CA\u8BF4\u201Cpure\u201D\uFF0C\u4F46\u4EE4\u4EBA\u56F0\u60D1\u7684\u662F\uFF0C\u5B83\u5E76\u4E0D\u8868\u793A\u88AB\u8C03\u7528\u7684\u51FD\u6570\u662F\u7EAF\u51FD\u6570\u3002\u4F8B\u5982\uFF0C\u5B83\u5E76\u4E0D\u8868\u793A\u53EF\u4EE5\u7F13\u5B58\u5BF9\u8BE5\u51FD\u6570\u7684\u91CD\u590D\u8C03\u7528\u3002\u8BE5\u540D\u79F0\u672C\u8D28\u4E0A\u53EA\u662F\u201C\u5982\u679C\u672A\u4F7F\u7528\u5219\u53EF\u4EE5\u5220\u9664\u201D\u7684\u62BD\u8C61\u7B80\u5199\u3002</p><p>\u4E00\u4E9B\u8868\u8FBE\u5F0F\u5982 JSX \u548C\u67D0\u4E9B\u5185\u7F6E\u5168\u5C40\u53D8\u91CF\u5728 esbuild \u4E2D\u81EA\u52A8\u6CE8\u91CA\u4E3A <code>/* @__PURE__ */</code>\u3002\u60A8\u8FD8\u53EF\u4EE5\u914D\u7F6E\u5176\u4ED6\u5168\u5C40\u53D8\u91CF\u4EE5\u6807\u8BB0\u4E3A <code>/* @__PURE__ */</code>\u3002\u4F8B\u5982\uFF0C\u60A8\u53EF\u4EE5\u5C06\u5168\u5C40 <code>console.log</code> \u51FD\u6570\u6807\u8BB0\u4E3A\u8FD9\u6837\uFF0C\u4EE5\u4FBF\u5728\u5305\u7F29\u5C0F\u65F6\u81EA\u52A8\u5C06\u5176\u4ECE\u5305\u4E2D\u5220\u9664\uFF0C\u53EA\u8981\u7ED3\u679C\u672A\u88AB\u4F7F\u7528\u3002</p><p>\u503C\u5F97\u4E00\u63D0\u7684\u662F\uFF0C\u6CE8\u89E3\u7684\u4F5C\u7528\u53EA\u6269\u5C55\u5230\u8C03\u7528\u672C\u8EAB\uFF0C\u800C\u4E0D\u6269\u5C55\u5230\u53C2\u6570\u3002\u4ECD\u7136\u4FDD\u7559\u6709\u526F\u4F5C\u7528\u7684\u53C2\u6570\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;console.log(&quot;foo:&quot;, foo())&#39;</span> <span class="token operator">|</span> esbuild --pure:console.log
/* @__PURE__ */ console.log<span class="token punctuation">(</span><span class="token string">&quot;foo:&quot;</span>, foo<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>

<span class="token builtin class-name">echo</span> <span class="token string">&#39;console.log(&quot;foo:&quot;, foo())&#39;</span> <span class="token operator">|</span> esbuild --pure:console.log --minify
foo<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">let</span> js <span class="token operator">=</span> <span class="token string">&#39;console.log(&quot;foo:&quot;, foo())&#39;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">pure</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;console.log&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;/* @__PURE__ */ console.log(&quot;foo:&quot;, foo());\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">pure</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;console.log&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">minify</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&#39;foo();\\n&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  js <span class="token operator">:=</span> <span class="token string">&quot;console.log(&#39;foo:&#39;, foo())&quot;</span>

  result1 <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Pure<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;console.log&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result1<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result1<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  result2 <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Pure<span class="token punctuation">:</span>         <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;console.log&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    MinifySyntax<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result2<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result2<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h3 id="resolve-extensions" tabindex="-1"><a class="header-anchor" href="#resolve-extensions" aria-hidden="true">#</a> Resolve extensions</h3><p>\u652F\u6301\uFF1ABuild</p>`,15),Bd={href:"https://nodejs.org/api/modules.html#modules_file_modules",target:"_blank",rel:"noopener noreferrer"},Od=s("node \u4F7F\u7528\u7684\u89E3\u6790\u7B97\u6CD5"),Td=p("\u652F\u6301\u9690\u5F0F\u6587\u4EF6\u6269\u5C55\u540D\u3002\u60A8\u53EF\u4EE5 <code>require(&#39;./file&#39;)</code> \uFF0C\u5B83\u4F1A\u6309\u987A\u5E8F\u68C0\u67E5 <code>./file</code>\u3001.<code>/file.js</code>\u3001<code>./file.json</code> \u548C <code>./file.node</code>\u3002\u5305\u62EC esbuild \u5728\u5185\u7684\u73B0\u4EE3\u6253\u5305\u5668\u4E5F\u5C06\u6B64\u6982\u5FF5\u6269\u5C55\u5230\u5176\u4ED6\u6587\u4EF6\u7C7B\u578B\u3002\u53EF\u4EE5\u4F7F\u7528\u89E3\u6790\u6269\u5C55\u540D\u8BBE\u7F6E\u81EA\u5B9A\u4E49 esbuild \u4E2D\u9690\u5F0F\u6587\u4EF6\u6269\u5C55\u540D\u7684\u5B8C\u6574\u987A\u5E8F\uFF0C\u9ED8\u8BA4\u4E3A <code>.tsx</code>,<code>.ts</code>,<code>.jsx</code>,<code>.js</code>,<code>.css</code>,<code>.json</code>\uFF1A",23),Cd=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --bundle --resolve-extensions<span class="token operator">=</span>.ts,.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">resolveExtensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;.ts&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span>       <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>            <span class="token boolean">true</span><span class="token punctuation">,</span>
    ResolveExtensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>             <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h3 id="source-root" tabindex="-1"><a class="header-anchor" href="#source-root" aria-hidden="true">#</a> Source Root</h3><p>\u652F\u6301\uFF1ATransform | Build</p>`,3),Id=s("\u6B64\u529F\u80FD\u4EC5\u5728\u542F\u7528\u6E90\u6620\u5C04\u65F6\u76F8\u5173\u3002\u5B83\u5141\u8BB8\u60A8\u8BBE\u7F6E"),Ad=s("\u6E90\u6620\u5C04"),Jd=s("\u4E2D\u7684 "),Ld=n("code",null,"sourceRoot",-1),Md=s(" \u5B57\u6BB5\u7684\u503C\uFF0C\u8BE5\u503C\u6307\u5B9A\u6E90\u6620\u5C04\u4E2D\u6240\u6709\u5176\u4ED6\u8DEF\u5F84\u76F8\u5BF9\u4E8E\u7684\u8DEF\u5F84\u3002\u5982\u679C\u6B64\u5B57\u6BB5\u4E0D\u5B58\u5728\uFF0C\u5219\u6E90\u6620\u5C04\u4E2D\u7684\u6240\u6709\u8DEF\u5F84\u90FD\u88AB\u89E3\u91CA\u4E3A\u76F8\u5BF9\u4E8E\u5305\u542B\u6E90\u6620\u5C04\u7684\u76EE\u5F55\u3002"),Wd=p(`<p>\u60A8\u53EF\u4EE5\u50CF\u8FD9\u6837\u914D\u7F6E <code>sourceRoot</code>\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --sourcemap --source-root<span class="token operator">=</span>https://raw.githubusercontent.com/some/repo/v1.2.3/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">sourcemap</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">sourceRoot</span><span class="token operator">:</span> <span class="token string">&#39;https://raw.githubusercontent.com/some/repo/v1.2.3/&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Sourcemap<span class="token punctuation">:</span>   api<span class="token punctuation">.</span>SourceMapInline<span class="token punctuation">,</span>
    SourceRoot<span class="token punctuation">:</span>  <span class="token string">&quot;https://raw.githubusercontent.com/some/repo/v1.2.3/&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h3 id="sourcefile" tabindex="-1"><a class="header-anchor" href="#sourcefile" aria-hidden="true">#</a> Sourcefile</h3><p>\u652F\u6301\uFF1ATransform | Build</p><p>\u5F53\u4F7F\u7528\u6CA1\u6709\u6587\u4EF6\u540D\u7684\u8F93\u5165\u65F6\uFF0C\u6B64\u9009\u9879\u8BBE\u7F6E\u6587\u4EF6\u540D\u3002\u4F7F\u7528\u8F6C\u6362 API \u548C\u4F7F\u7528\u5E26\u6709\u6807\u51C6\u8F93\u5165\u7684\u6784\u5EFA API \u65F6\u4F1A\u53D1\u751F\u8FD9\u79CD\u60C5\u51B5\u3002\u914D\u7F6E\u7684\u6587\u4EF6\u540D\u53CD\u6620\u5728\u9519\u8BEF\u6D88\u606F\u548C\u6E90\u6620\u5C04\u4E2D\u3002\u5982\u679C\u672A\u914D\u7F6E\uFF0C\u5219\u6587\u4EF6\u540D\u9ED8\u8BA4\u4E3A <code>&lt;stdin&gt;</code>\u3002\u5B83\u53EF\u4EE5\u8FD9\u6837\u914D\u7F6E\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token function">cat</span> app.js <span class="token operator">|</span> esbuild --sourcefile<span class="token operator">=</span>example.js --sourcemap
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">let</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> js <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">)</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>js<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">sourcefile</span><span class="token operator">:</span> <span class="token string">&#39;example.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">sourcemap</span><span class="token operator">:</span> <span class="token string">&#39;inline&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;io/ioutil&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  js<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadFile</span><span class="token punctuation">(</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>js<span class="token punctuation">)</span><span class="token punctuation">,</span>
    api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
      Sourcefile<span class="token punctuation">:</span> <span class="token string">&quot;example.js&quot;</span><span class="token punctuation">,</span>
      Sourcemap<span class="token punctuation">:</span>  api<span class="token punctuation">.</span>SourceMapInline<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h3 id="sources-content" tabindex="-1"><a class="header-anchor" href="#sources-content" aria-hidden="true">#</a> Sources Content</h3><p>\u652F\u6301\uFF1ATransform | Build</p>`,8),Fd=s("\u6E90\u6620\u5C04"),Rd=s("\u662F\u4F7F\u7528\u6E90\u6620\u5C04\u683C\u5F0F\u7684"),Dd={href:"https://sourcemaps.info/spec.html",target:"_blank",rel:"noopener noreferrer"},Ud=s("\u7B2C 3 \u7248"),Nd=s("\u751F\u6210\u7684\uFF0C\u8FD9\u662F\u8FC4\u4ECA\u4E3A\u6B62\u6700\u5E7F\u6CDB\u652F\u6301\u7684\u53D8\u4F53\u3002\u6BCF\u4E2A\u6E90\u6620\u5C04\u770B\u8D77\u6765\u50CF\u8FD9\u6837\uFF1A"),Gd=p(`<div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sources&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;bar.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;foo.js&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sourcesContent&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;bar()&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;foo()\\nimport &#39;./bar&#39;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token string">&quot;;AAAA;;;ACAA;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;names&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>sourcesContent</code> \u5B57\u6BB5\u662F\u4E00\u4E2A\u53EF\u9009\u5B57\u6BB5\uFF0C\u5305\u542B\u6240\u6709\u539F\u59CB\u6E90\u4EE3\u7801\u3002\u8FD9\u5BF9\u8C03\u8BD5\u5F88\u6709\u5E2E\u52A9\uFF0C\u56E0\u4E3A\u8FD9\u610F\u5473\u7740\u539F\u59CB\u6E90\u4EE3\u7801\u5C06\u5728\u8C03\u8BD5\u5668\u4E2D\u53EF\u7528\u3002</p><p>\u4F46\u662F\uFF0C\u5728\u67D0\u4E9B\u60C5\u51B5\u4E0B\u4E0D\u9700\u8981\u5B83\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u60A8\u53EA\u662F\u5728\u751F\u4EA7\u4E2D\u4F7F\u7528\u6E90\u6620\u5C04\u6765\u751F\u6210\u5305\u542B\u539F\u59CB\u6587\u4EF6\u540D\u7684\u5806\u6808\u8DDF\u8E2A\uFF0C\u5219\u4E0D\u9700\u8981\u539F\u59CB\u6E90\u4EE3\u7801\uFF0C\u56E0\u4E3A\u4E0D\u6D89\u53CA\u8C03\u8BD5\u5668\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u53EF\u80FD\u9700\u8981\u7701\u7565 <code>sourcesContent</code> \u5B57\u6BB5\u4EE5\u4F7F\u6E90\u6620\u5C04\u66F4\u5C0F\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild --bundle app.js --sourcemap --sources-content<span class="token operator">=</span>false
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">sourcemap</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">sourcesContent</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    Bundle<span class="token punctuation">:</span>         <span class="token boolean">true</span><span class="token punctuation">,</span>
    EntryPoints<span class="token punctuation">:</span>    <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Sourcemap<span class="token punctuation">:</span>      api<span class="token punctuation">.</span>SourceMapInline<span class="token punctuation">,</span>
    SourcesContent<span class="token punctuation">:</span> api<span class="token punctuation">.</span>SourcesContentExclude<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h3 id="stdin" tabindex="-1"><a class="header-anchor" href="#stdin" aria-hidden="true">#</a> Stdin</h3><p>\u652F\u6301\uFF1ABuild</p><p>\u901A\u5E38\uFF0C\u6784\u5EFA API \u8C03\u7528\u5C06\u4E00\u4E2A\u6216\u591A\u4E2A\u6587\u4EF6\u540D\u4F5C\u4E3A\u8F93\u5165\u3002\u4F46\u662F\uFF0C\u6B64\u9009\u9879\u53EF\u7528\u4E8E\u5728\u6587\u4EF6\u7CFB\u7EDF\u4E0A\u6839\u672C\u4E0D\u5B58\u5728\u6A21\u5757\u7684\u60C5\u51B5\u4E0B\u8FD0\u884C\u6784\u5EFA\u3002\u5B83\u88AB\u79F0\u4E3A\u201C\u6807\u51C6\u8F93\u5165\u201D\uFF0C\u56E0\u4E3A\u5B83\u5BF9\u5E94\u4E8E\u5728\u547D\u4EE4\u884C\u4E0A\u5C06\u6587\u4EF6\u901A\u8FC7\u7BA1\u9053\u4F20\u8F93\u5230\u6807\u51C6\u8F93\u5165\u3002</p>`,7),Xd=s("\u9664\u4E86\u6307\u5B9A stdin \u6587\u4EF6\u7684\u5185\u5BB9\u4E4B\u5916\uFF0C\u60A8\u8FD8\u53EF\u4EE5\u9009\u62E9\u6307\u5B9A\u89E3\u6790\u76EE\u5F55\uFF08\u7528\u4E8E\u786E\u5B9A\u76F8\u5BF9\u5BFC\u5165\u7684\u4F4D\u7F6E\uFF09\u3001"),Hd=s("\u6E90\u6587\u4EF6"),zd=s("\uFF08\u5728\u9519\u8BEF\u6D88\u606F\u548C\u6E90\u6620\u5C04\u4E2D\u4F7F\u7528\u7684\u6587\u4EF6\u540D\uFF09\u548C"),Vd=s("\u52A0\u8F7D\u7A0B\u5E8F"),Kd=s("\uFF08\u8FD9\u51B3\u5B9A\u4E86\u6587\u4EF6\u5185\u5BB9\u7684\u89E3\u91CA\u65B9\u5F0F\uFF09\u3002 CLI \u65E0\u6CD5\u6307\u5B9A\u89E3\u6790\u76EE\u5F55\u3002\u76F8\u53CD\uFF0C\u5B83\u4F1A\u81EA\u52A8\u8BBE\u7F6E\u4E3A\u5F53\u524D\u5DE5\u4F5C\u76EE\u5F55\u3002"),$d=p(`<p>\u4EE5\u4E0B\u662F\u5982\u4F55\u4F7F\u7528\u6B64\u529F\u80FD\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;export * from &quot;./another-file&quot;&#39;</span> <span class="token operator">|</span> esbuild --bundle --sourcefile<span class="token operator">=</span>imaginary-file.js --loader<span class="token operator">=</span>ts --format<span class="token operator">=</span>cjs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">stdin</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">contents</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">export * from &quot;./another-file&quot;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>

    <span class="token comment">// These are all optional:</span>
    <span class="token literal-property property">resolveDir</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;src&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sourcefile</span><span class="token operator">:</span> <span class="token string">&#39;imaginary-file.js&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;ts&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;cjs&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">write</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    Stdin<span class="token punctuation">:</span> <span class="token operator">&amp;</span>api<span class="token punctuation">.</span>StdinOptions<span class="token punctuation">{</span>
      Contents<span class="token punctuation">:</span> <span class="token string">&quot;export * from &#39;./another-file&#39;&quot;</span><span class="token punctuation">,</span>

      <span class="token comment">// These are all optional:</span>
      ResolveDir<span class="token punctuation">:</span> <span class="token string">&quot;./src&quot;</span><span class="token punctuation">,</span>
      Sourcefile<span class="token punctuation">:</span> <span class="token string">&quot;imaginary-file.js&quot;</span><span class="token punctuation">,</span>
      Loader<span class="token punctuation">:</span>     api<span class="token punctuation">.</span>LoaderTS<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Format<span class="token punctuation">:</span> api<span class="token punctuation">.</span>FormatCommonJS<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h3 id="tree-shaking" tabindex="-1"><a class="header-anchor" href="#tree-shaking" aria-hidden="true">#</a> Tree shaking</h3><p>\u652F\u6301\uFF1ATransform | Build</p><p>\u6447\u6811\u662F JavaScript \u793E\u533A\u7528\u4E8E\u6D88\u9664\u6B7B\u4EE3\u7801\u7684\u672F\u8BED\uFF0C\u8FD9\u662F\u4E00\u79CD\u5E38\u89C1\u7684\u7F16\u8BD1\u5668\u4F18\u5316\uFF0C\u53EF\u81EA\u52A8\u5220\u9664\u65E0\u6CD5\u8BBF\u95EE\u7684\u4EE3\u7801\u3002\u8BF7\u6CE8\u610F\uFF0Cesbuild \u4E2D\u7684\u6811\u6296\u52A8\u5728\u6346\u7ED1\u671F\u95F4\u59CB\u7EC8\u5904\u4E8E\u542F\u7528\u72B6\u6001\uFF0C\u5E76\u4E14\u65E0\u6CD5\u5173\u95ED\uFF0C\u56E0\u4E3A\u4FEE\u526A\u672A\u4F7F\u7528\u7684\u4EE3\u7801\u4F1A\u4F7F\u751F\u6210\u7684\u6587\u4EF6\u66F4\u5C0F\uFF0C\u800C\u4E0D\u4F1A\u6539\u53D8\u53EF\u89C2\u5BDF\u7684\u884C\u4E3A\u3002</p><p>\u7528\u4E00\u4E2A\u4F8B\u5B50\u6765\u89E3\u91CA\u6447\u6811\u662F\u6700\u5BB9\u6613\u7684\u3002\u8003\u8651\u4EE5\u4E0B\u6587\u4EF6\u3002\u6709\u4E00\u4E2A\u4F7F\u7528\u7684\u51FD\u6570\u548C\u4E00\u4E2A\u672A\u4F7F\u7528\u7684\u51FD\u6570\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// input.js</span>
<span class="token keyword">function</span> <span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;one&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">two</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;two&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u60A8\u5C06\u6B64\u6587\u4EF6\u4E0E <code>esbuild --bundle input.js --outfile=output.js</code> \u6346\u7ED1\u5728\u4E00\u8D77\uFF0C\u5219\u672A\u4F7F\u7528\u7684\u51FD\u6570\u5C06\u81EA\u52A8\u88AB\u4E22\u5F03\uFF0C\u7559\u4E0B\u4EE5\u4E0B\u8F93\u51FA\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// input.js</span>
<span class="token keyword">function</span> <span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u6211\u4EEC\u5C06\u51FD\u6570\u62C6\u5206\u6210\u4E00\u4E2A\u5355\u72EC\u7684\u5E93\u6587\u4EF6\u5E76\u4F7F\u7528 <code>import</code> \u8BED\u53E5\u5BFC\u5165\u5B83\u4EEC\uFF0C\u8FD9\u751A\u81F3\u53EF\u4EE5\u5DE5\u4F5C\uFF1A</p><div><div title="lib.js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// lib.js</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;one&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">two</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;two&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="input.js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// input.js</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> lib <span class="token keyword">from</span> <span class="token string">&#39;./lib.js&#39;</span>
lib<span class="token punctuation">.</span><span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u5982\u679C\u60A8\u5C06\u6B64\u6587\u4EF6\u4E0E <code>esbuild --bundle input.js --outfile=output.js</code> \u6346\u7ED1\u5728\u4E00\u8D77\uFF0C\u672A\u4F7F\u7528\u7684\u51FD\u6570\u548C\u672A\u4F7F\u7528\u7684\u5BFC\u5165\u4ECD\u5C06\u88AB\u81EA\u52A8\u4E22\u5F03\uFF0C\u7559\u4E0B\u4EE5\u4E0B\u8F93\u51FA\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// lib.js</span>
<span class="token keyword">function</span> <span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// input.js</span>
<span class="token function">one</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,13),Yd=s("\u8FD9\u6837 esbuild \u53EA\u4F1A\u6346\u7ED1\u60A8\u5B9E\u9645\u4F7F\u7528\u7684\u5E93\u7684\u90E8\u5206\uFF0C\u8FD9\u6709\u65F6\u53EF\u4EE5\u8282\u7701\u5927\u91CF\u7684\u5927\u5C0F\u3002\u8BF7\u6CE8\u610F\uFF0Cesbuild \u7684\u6447\u6811\u5B9E\u73B0\u4F9D\u8D56\u4E8E ECMAScript \u6A21\u5757"),Qd=n("code",null,"\u5BFC\u5165",-1),Zd=s("\u548C"),nk=n("code",null,"\u5BFC\u51FA",-1),sk=s("\u8BED\u53E5\u7684\u4F7F\u7528\u3002\u5B83\u4E0D\u9002\u7528\u4E8E "),ak=n("code",null,"CommonJS",-1),tk=s(" \u6A21\u5757\u3002 npm \u4E0A\u7684\u8BB8\u591A\u5E93\u90FD\u5305\u542B\u8FD9\u4E24\u79CD\u683C\u5F0F\uFF0C\u800C esbuild \u5C1D\u8BD5\u9009\u62E9\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u9002\u7528\u4E8E\u6447\u6811\u7684\u683C\u5F0F\u3002\u60A8\u53EF\u4EE5\u4F7F\u7528"),ek=s("\u4E3B\u5B57\u6BB5\u9009"),pk=s("\u9879\u81EA\u5B9A\u4E49 esbuild \u9009\u62E9\u7684\u683C\u5F0F\u3002"),ok=n("h4",{id:"manual-tree-shaking-annotations-\u624B\u52A8\u6447\u6811\u6CE8\u91CA",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#manual-tree-shaking-annotations-\u624B\u52A8\u6447\u6811\u6CE8\u91CA","aria-hidden":"true"},"#"),s(" Manual tree shaking annotations(\u624B\u52A8\u6447\u6811\u6CE8\u91CA)")],-1),ik=n("p",null,"\u7531\u4E8E JavaScript \u662F\u4E00\u79CD\u52A8\u6001\u8BED\u8A00\uFF0C\u6709\u65F6\u5BF9\u4E8E\u7F16\u8BD1\u5668\u6765\u8BF4\u8BC6\u522B\u672A\u4F7F\u7528\u7684\u4EE3\u7801\u975E\u5E38\u56F0\u96BE\uFF0C\u56E0\u6B64\u793E\u533A\u5F00\u53D1\u4E86\u67D0\u4E9B\u6CE8\u91CA\u6765\u5E2E\u52A9\u544A\u8BC9\u7F16\u8BD1\u5668\u54EA\u4E9B\u4EE3\u7801\u5E94\u8BE5\u88AB\u89C6\u4E3A\u672A\u4F7F\u7528\u3002\u76EE\u524Desbuild\u652F\u6301\u4E24\u79CD\u5F62\u5F0F\u7684\u6447\u6811\u6CE8\u89E3\uFF1A",-1),ck=s("\u51FD\u6570\u8C03\u7528\u524D\u7684\u5185\u8054 "),lk=n("code",null,"/* @__PURE__ */",-1),uk=s(" \u6CE8\u91CA\u544A\u8BC9 esbuild \u5982\u679C\u4E0D\u4F7F\u7528\u7ED3\u679C\u503C\uFF0C\u53EF\u4EE5\u5220\u9664\u51FD\u6570\u8C03\u7528\u3002\u6709\u5173\u66F4\u591A\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605"),rk=s("pure API"),dk=s(" \u9009\u9879\u3002"),kk=n("code",null,"package.json",-1),vk=s(" \u4E2D\u7684 "),mk=n("code",null,"sideEffects",-1),bk=s(" \u5B57\u6BB5\u53EF\u7528\u4E8E\u544A\u8BC9 esbuild \u5982\u679C\u6765\u81EA\u8BE5\u6587\u4EF6\u7684\u6240\u6709\u5BFC\u5165\u6700\u7EC8\u90FD\u672A\u4F7F\u7528\uFF0C\u5219\u53EF\u4EE5\u5220\u9664\u5305\u4E2D\u7684\u54EA\u4E9B\u6587\u4EF6\u3002\u8FD9\u662F\u6765\u81EA Webpack \u7684\u7EA6\u5B9A\uFF0C\u8BB8\u591A\u53D1\u5E03\u5230 npm \u7684\u5E93\u5DF2\u7ECF\u5728\u5B83\u4EEC\u7684\u5305\u5B9A\u4E49\u4E2D\u5305\u542B\u4E86\u8FD9\u4E2A\u5B57\u6BB5\u3002\u60A8\u53EF\u4EE5\u5728\u8BE5\u5B57\u6BB5\u7684 "),gk={href:"https://webpack.js.org/guides/tree-shaking/",target:"_blank",rel:"noopener noreferrer"},hk=s("Webpack \u6587\u6863"),fk=s("\u4E2D\u4E86\u89E3\u6709\u5173\u8BE5\u5B57\u6BB5\u7684\u66F4\u591A\u4FE1\u606F\u3002"),_k=p(`<p>\u8FD9\u4E9B\u6CE8\u91CA\u53EF\u80FD\u6709\u95EE\u9898\uFF0C\u56E0\u4E3A\u7F16\u8BD1\u5668\u7684\u51C6\u786E\u6027\u5B8C\u5168\u4F9D\u8D56\u4E8E\u5F00\u53D1\u4EBA\u5458\uFF0C\u800C\u4E14\u5F00\u53D1\u4EBA\u5458\u5076\u5C14\u4F1A\u53D1\u5E03\u5E26\u6709\u4E0D\u6B63\u786E\u6CE8\u91CA\u7684\u5305\u3002 <code>sideEffects</code> \u5B57\u6BB5\u5BF9\u4E8E\u5F00\u53D1\u4EBA\u5458\u6765\u8BF4\u7279\u522B\u5BB9\u6613\u51FA\u9519\uFF0C\u56E0\u4E3A\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5982\u679C\u4E0D\u4F7F\u7528\u5BFC\u5165\uFF0C\u5B83\u4F1A\u5BFC\u81F4\u5305\u4E2D\u7684\u6240\u6709\u6587\u4EF6\u90FD\u88AB\u89C6\u4E3A\u6B7B\u4EE3\u7801\u3002\u5982\u679C\u60A8\u6DFB\u52A0\u4E00\u4E2A\u5305\u542B\u526F\u4F5C\u7528\u7684\u65B0\u6587\u4EF6\u5E76\u5FD8\u8BB0\u66F4\u65B0\u8BE5\u5B57\u6BB5\uFF0C\u90A3\u4E48\u5F53\u4EBA\u4EEC\u5C1D\u8BD5\u6346\u7ED1\u5B83\u65F6\uFF0C\u60A8\u7684\u5305\u53EF\u80FD\u4F1A\u635F\u574F\u3002</p><p>\u8FD9\u5C31\u662F\u4E3A\u4EC0\u4E48 esbuild \u5305\u542B\u4E00\u79CD\u5FFD\u7565\u6447\u6811\u6CE8\u91CA\u7684\u65B9\u6CD5\u3002\u53EA\u6709\u5728\u9047\u5230\u5305\u88AB\u7834\u574F\u7684\u95EE\u9898\u65F6\uFF0C\u624D\u5E94\u8BE5\u542F\u7528\u6B64\u529F\u80FD\uFF0C\u56E0\u4E3A\u5FC5\u9700\u7684\u4EE3\u7801\u610F\u5916\u5730\u4ECE\u5305\u4E2D\u5220\u9664\uFF1A</p><div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.js --bundle --tree-shaking<span class="token operator">=</span>ignore-annotations
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">treeShaking</span><span class="token operator">:</span> <span class="token string">&#39;ignore-annotations&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    TreeShaking<span class="token punctuation">:</span> api<span class="token punctuation">.</span>TreeShakingIgnoreAnnotations<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><p>\u542F\u7528\u8FD9\u610F\u5473\u7740 esbuild \u5C06\u4E0D\u518D\u5C0A\u91CD <code>/* @__PURE__ */</code> \u6CE8\u91CA\u6216 <code>sideEffects</code> \u5B57\u6BB5\u3002\u7136\u800C\uFF0C\u5B83\u4ECD\u7136\u4F1A\u5BF9\u672A\u4F7F\u7528\u7684\u5BFC\u5165\u8FDB\u884C\u81EA\u52A8\u6811\u6447\u52A8\uFF0C\u56E0\u4E3A\u8FD9\u4E0D\u4F9D\u8D56\u4E8E\u5F00\u53D1\u4EBA\u5458\u7684\u6CE8\u91CA\u3002\u7406\u60F3\u60C5\u51B5\u4E0B\uFF0C\u6B64\u6807\u5FD7\u53EA\u662F\u4E00\u79CD\u4E34\u65F6\u89E3\u51B3\u65B9\u6CD5\u3002\u60A8\u5E94\u8BE5\u5C06\u8FD9\u4E9B\u95EE\u9898\u62A5\u544A\u7ED9\u8F6F\u4EF6\u5305\u7684\u7EF4\u62A4\u8005\u4EE5\u4FEE\u590D\u5B83\u4EEC\uFF0C\u56E0\u4E3A\u5B83\u4EEC\u8868\u660E\u8F6F\u4EF6\u5305\u5B58\u5728\u95EE\u9898\uFF0C\u5E76\u4E14\u4E5F\u53EF\u80FD\u4F1A\u7ECA\u5012\u5176\u4ED6\u4EBA\u3002</p><h3 id="tsconfig" tabindex="-1"><a class="header-anchor" href="#tsconfig" aria-hidden="true">#</a> Tsconfig</h3><p>\u652F\u6301\uFF1ABuild</p>`,6),yk=s("\u901A\u5E38\uFF0C"),qk=s("\u6784\u5EFA API"),jk=s(" \u4F1A\u81EA\u52A8\u53D1\u73B0 "),wk=n("code",null,"tsconfig.json",-1),xk=s(" \u6587\u4EF6\u5E76\u5728\u6784\u5EFA\u8FC7\u7A0B\u4E2D\u8BFB\u53D6\u5B83\u4EEC\u7684\u5185\u5BB9\u3002\u4F46\u662F\uFF0C\u60A8\u4E5F\u53EF\u4EE5\u914D\u7F6E\u81EA\u5B9A\u4E49 "),Sk=n("code",null,"tsconfig.json",-1),Ek=s(" \u6587\u4EF6\u6765\u4EE3\u66FF\u4F7F\u7528\u3002\u5982\u679C\u60A8\u9700\u8981\u4F7F\u7528\u4E0D\u540C\u7684\u8BBE\u7F6E\u5BF9\u540C\u4E00\u4EE3\u7801\u8FDB\u884C\u591A\u6B21\u6784\u5EFA\uFF0C\u8FD9\u4F1A\u5F88\u6709\u7528\uFF1A"),Pk=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
esbuild app.ts --bundle --tsconfig<span class="token operator">=</span>custom-tsconfig.json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;app.ts&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">bundle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">tsconfig</span><span class="token operator">:</span> <span class="token string">&#39;custom-tsconfig.json&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;app.ts&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    Bundle<span class="token punctuation">:</span>      <span class="token boolean">true</span><span class="token punctuation">,</span>
    Tsconfig<span class="token punctuation">:</span>    <span class="token string">&quot;custom-tsconfig.json&quot;</span><span class="token punctuation">,</span>
    Write<span class="token punctuation">:</span>       <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h3 id="tsconfig-raw" tabindex="-1"><a class="header-anchor" href="#tsconfig-raw" aria-hidden="true">#</a> Tsconfig raw</h3><p>\u652F\u6301\uFF1ATransform</p>`,3),Bk=s("\u6B64\u9009\u9879\u53EF\u7528\u4E8E\u5C06\u60A8\u7684 "),Ok=n("code",null,"tsconfig.json",-1),Tk=s(" \u6587\u4EF6\u4F20\u9012\u200B\u200B\u7ED9\u4E0D\u8BBF\u95EE\u6587\u4EF6\u7CFB\u7EDF\u7684"),Ck=s("transform API"),Ik=s("\u3002\u4F7F\u7528\u5B83\u770B\u8D77\u6765\u50CF\u8FD9\u6837\uFF1A"),Ak=p(`<div><div title="cli"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;class Foo { foo }&#39;</span> <span class="token operator">|</span> esbuild --loader<span class="token operator">=</span>ts --tsconfig-raw<span class="token operator">=</span><span class="token string">&#39;{&quot;compilerOptions&quot;:{&quot;useDefineForClassFields&quot;:true}}&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token keyword">let</span> ts <span class="token operator">=</span> <span class="token string">&#39;class Foo { foo }&#39;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>ts<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&#39;ts&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">tsconfigRaw</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">{
    &quot;compilerOptions&quot;: {
      &quot;useDefineForClassFields&quot;: true,
    },
  }</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  ts <span class="token operator">:=</span> <span class="token string">&quot;class Foo { foo }&quot;</span>

  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Transform</span><span class="token punctuation">(</span>ts<span class="token punctuation">,</span> api<span class="token punctuation">.</span>TransformOptions<span class="token punctuation">{</span>
    Loader<span class="token punctuation">:</span> api<span class="token punctuation">.</span>LoaderTS<span class="token punctuation">,</span>
    TsconfigRaw<span class="token punctuation">:</span> <span class="token string">\`{
      &quot;compilerOptions&quot;: {
        &quot;useDefineForClassFields&quot;: true,
      },
    }\`</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h3 id="working-directory" tabindex="-1"><a class="header-anchor" href="#working-directory" aria-hidden="true">#</a> Working directory</h3><p>\u652F\u6301\uFF1ABuild</p>`,3),Jk=s("\u6B64 API \u9009\u9879\u5141\u8BB8\u60A8\u6307\u5B9A\u7528\u4E8E\u6784\u5EFA\u7684\u5DE5\u4F5C\u76EE\u5F55\u3002\u5B83\u901A\u5E38\u9ED8\u8BA4\u4E3A\u60A8\u7528\u6765\u8C03\u7528 esbuild \u7684 API \u7684\u8FDB\u7A0B\u7684"),Lk={href:"https://en.wikipedia.org/wiki/Working_directory",target:"_blank",rel:"noopener noreferrer"},Mk=s("\u5F53\u524D\u5DE5\u4F5C\u76EE\u5F55"),Wk=s("\u3002 esbuild \u5C06\u5DE5\u4F5C\u76EE\u5F55\u7528\u4E8E\u4E00\u4E9B\u4E0D\u540C\u7684\u4E8B\u60C5\uFF0C\u5305\u62EC\u5C06\u4F5C\u4E3A API \u9009\u9879\u7ED9\u51FA\u7684\u76F8\u5BF9\u8DEF\u5F84\u89E3\u6790\u4E3A\u7EDD\u5BF9\u8DEF\u5F84\uFF0C\u4EE5\u53CA\u5C06\u7EDD\u5BF9\u8DEF\u5F84\u6F02\u4EAE\u5730\u6253\u5370\u4E3A\u65E5\u5FD7\u6D88\u606F\u4E2D\u7684\u76F8\u5BF9\u8DEF\u5F84\u3002\u4EE5\u4E0B\u662F\u8986\u76D6\u5B83\u7684\u65B9\u6CD5\uFF1A"),Fk=p(`<div><div title="js"><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">entryPoints</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;file.js&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">absWorkingDir</span><span class="token operator">:</span> process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">outfile</span><span class="token operator">:</span> <span class="token string">&#39;out.js&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><div title="go"><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;github.com/evanw/esbuild/pkg/api&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;log&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;os&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  cwd<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Getwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  result <span class="token operator">:=</span> api<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>BuildOptions<span class="token punctuation">{</span>
    EntryPoints<span class="token punctuation">:</span>   <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;file.js&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    AbsWorkingDir<span class="token punctuation">:</span> cwd<span class="token punctuation">,</span>
    Outfile<span class="token punctuation">:</span>       <span class="token string">&quot;out.js&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Errors<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div><h2 id="js-specific-details" tabindex="-1"><a class="header-anchor" href="#js-specific-details" aria-hidden="true">#</a> JS-specific details</h2><p>\u56E0\u4E3A JavaScript \u662F\u5355\u7EBF\u7A0B\u7684\uFF0C\u6240\u4EE5\u6709\u51E0\u79CD\u4E0D\u540C\u7684\u65B9\u5F0F\u6765\u8C03\u7528 API\uFF0C\u5E76\u5177\u6709\u4E0D\u540C\u7684\u6027\u80FD\u548C\u4FBF\u5229\u6027\u6743\u8861\u3002\u91CD\u8981\u7684\u662F\u8981\u4E86\u89E3\u5DEE\u5F02\u4EE5\u6839\u636E\u60A8\u7684\u60C5\u51B5\u9009\u62E9\u6B63\u786E\u7684\u5DEE\u5F02\u3002</p><p>\u9996\u5148\u662F\u540C\u6B65 API\u3002\u8FD9\u662F\u6700\u65B9\u4FBF\u7684\u9009\u9879\uFF0C\u56E0\u4E3A\u5355\u7EBF\u7A0B JavaScript \u4EE3\u7801\u5177\u6709\u6700\u5E72\u51C0\u7684\u8BED\u6CD5\u3002\u5982\u679C\u60A8\u53EA\u9700\u8981\u8FD0\u884C esbuild \u7136\u540E\u9000\u51FA\uFF0C\u8FD9\u4E5F\u662F\u6700\u4F73\u6027\u80FD\u3002\u4F46\u662F\uFF0C\u5B83\u4F1A\u963B\u585E\u4E3B\u7EBF\u7A0B\uFF0C\u56E0\u6B64\u5982\u679C\u60A8\u5728\u6B64\u671F\u95F4\u8FD8\u6709\u5176\u4ED6\u5DE5\u4F5C\u8981\u6267\u884C\uFF0C\u60A8\u5C31\u4E0D\u60F3\u4F7F\u7528\u5B83\u3002\u8FD9\u4E5F\u662F\u552F\u4E00\u4E0D\u80FD\u4F7F\u7528\u63D2\u4EF6\u7684\u9009\u9879\uFF08\u56E0\u4E3A\u63D2\u4EF6\u662F\u5F02\u6B65\u7684\uFF09\u3002\u5B83\u770B\u8D77\u6765\u50CF\u8FD9\u6837\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> esbuild <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> result1 <span class="token operator">=</span> esbuild<span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
<span class="token keyword">let</span> result2 <span class="token operator">=</span> esbuild<span class="token punctuation">.</span><span class="token function">buildSync</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u662F\u5F02\u6B65 API\u3002\u6BCF\u6B21\u8C03\u7528\u90FD\u4F1A\u8FD4\u56DE\u4E00\u4E2A\u627F\u8BFA\u800C\u4E0D\u662F\u7ACB\u5373\u5B8C\u6210\u3002\u5728\u5E55\u540E\uFF0Cesbuild \u4E8C\u8FDB\u5236\u6587\u4EF6\u4F5C\u4E3A\u5355\u4E2A\u5B50\u8FDB\u7A0B\u751F\u6210\uFF0C\u5728\u4E3B\u673A\u8FDB\u7A0B\u4E2D\u7684\u6240\u6709\u8C03\u7528\u4E4B\u95F4\u5171\u4EAB\u3002\u4E3B\u673A\u4F7F\u7528\u81EA\u5B9A\u4E49\u4E8C\u8FDB\u5236\u534F\u8BAE\u901A\u8FC7 stdin\u3001stdout \u548C stderr \u7BA1\u9053\u4E0E\u5B50\u8FDB\u7A0B\u901A\u4FE1\u3002\u5982\u679C\u60A8\u53EA\u9700\u8981\u8FD0\u884C esbuild \u4E00\u6B21\u4F46\u9700\u8981\u5728\u540E\u53F0\u505A\u5176\u4ED6\u5DE5\u4F5C\uFF0C\u8FD9\u662F\u7406\u60F3\u7684\u9009\u62E9\u3002\u5B83\u8FD8\u5141\u8BB8\u60A8\u540C\u65F6\u8FD0\u884C\u8BB8\u591A\u540C\u65F6\u8FD0\u884C\u7684 esbuild API \u8C03\u7528\uFF0C\u7136\u540E\u5C06\u8FD9\u4E9B\u8C03\u7528\u5206\u5E03\u5728\u6240\u6709\u53EF\u7528\u5185\u6838\u4E2D\u4EE5\u83B7\u5F97\u6700\u5927\u6027\u80FD\u3002\u4F7F\u7528\u5B83\u770B\u8D77\u6765\u50CF\u8FD9\u6837\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> esbuild <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild&#39;</span><span class="token punctuation">)</span>
esbuild<span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
esbuild<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="running-in-the-browser" tabindex="-1"><a class="header-anchor" href="#running-in-the-browser" aria-hidden="true">#</a> Running in the browser</h3><p>esbuild API \u4E5F\u53EF\u4EE5\u5728 Web Worker \u4E2D\u4F7F\u7528 WebAssembly \u5728\u6D4F\u89C8\u5668\u4E2D\u8FD0\u884C\u3002\u8981\u5229\u7528\u8FD9\u4E00\u70B9\uFF0C\u60A8\u9700\u8981\u5B89\u88C5 <code>esbuild-wasm</code> \u5305\u800C\u4E0D\u662F <code>esbuild</code> \u5305\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// cli

npm install esbuild-wasm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6D4F\u89C8\u5668\u7684 API \u4E0E node \u7684 API \u7C7B\u4F3C\uFF0C\u53EA\u662F\u9700\u8981\u5148\u8C03\u7528 <code>initialize()</code>\uFF0C\u5E76\u4E14\u9700\u8981\u4F20\u9012 WebAssembly \u4E8C\u8FDB\u5236\u6587\u4EF6\u7684 URL\u3002 API \u7684\u540C\u6B65\u7248\u672C\u4E5F\u4E0D\u53EF\u7528\u3002\u5047\u8BBE\u60A8\u4F7F\u7528\u7684\u662F\u6253\u5305\u5668\uFF0C\u5B83\u770B\u8D77\u6765\u50CF\u8FD9\u6837\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> esbuild <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;esbuild-wasm&#39;</span><span class="token punctuation">)</span>

esbuild<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">wasmURL</span><span class="token operator">:</span> <span class="token string">&#39;./node_modules/esbuild-wasm/esbuild.wasm&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  esbuild<span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  esbuild<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u60A8\u5DF2\u7ECF\u4ECE\u4E00\u4E2A worker \u8FD0\u884C\u6B64\u4EE3\u7801\u5E76\u4E14\u4E0D\u60F3 <code>initialize</code> \u521B\u5EFA\u53E6\u4E00\u4E2A worker\uFF0C\u60A8\u53EF\u4EE5\u5C06 worker: <code>false</code> \u4F20\u9012\u7ED9\u5B83\u3002\u7136\u540E\u5B83\u5C06\u5728\u4E0E\u8C03\u7528 <code>initialize</code> \u7684\u7EBF\u7A0B\u76F8\u540C\u7684\u7EBF\u7A0B\u4E2D\u521B\u5EFA\u4E00\u4E2A WebAssembly \u6A21\u5757\u3002</p><p>\u60A8\u8FD8\u53EF\u4EE5\u901A\u8FC7\u6CE8\u5165 <code>lib/browser.min.js</code> \u6587\u4EF6\uFF0C\u5C06 esbuild \u7684 API \u7528\u4F5C HTML \u6587\u4EF6\u4E2D\u7684\u811A\u672C\u6807\u8BB0\uFF0C\u800C\u65E0\u9700\u4F7F\u7528\u6346\u7ED1\u7A0B\u5E8F\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0CAPI \u521B\u5EFA\u4E86\u4E00\u4E2A\u540D\u4E3A <code>esbuild</code> \u7684\u5168\u5C40\u5BF9\u8C61\uFF0C\u7528\u4E8E\u4FDD\u5B58 API \u5BF9\u8C61\uFF1A</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./node_modules/esbuild-wasm/lib/browser.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  esbuild<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">wasmURL</span><span class="token operator">:</span> <span class="token string">&#39;./node_modules/esbuild-wasm/esbuild.wasm&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u60A8\u9700\u8981\u5C06\u6B64 API \u4E0E ECMAScript \u6A21\u5757\u4E00\u8D77\u4F7F\u7528\uFF0C\u60A8\u5E94\u8BE5\u5BFC\u5165 <code>esm/browser.min.js</code> \u6587\u4EF6\uFF1A</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> esbuild <span class="token keyword">from</span> <span class="token string">&#39;./node_modules/esbuild-wasm/esm/browser.min.js&#39;</span>

  esbuild<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">wasmURL</span><span class="token operator">:</span> <span class="token string">&#39;./node_modules/esbuild-wasm/esbuild.wasm&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,17);function Rk(c,Dk){const t=i("RouterLink"),o=i("ExternalLinkIcon");return u(),r("div",null,[k,n("p",null,[a(t,{to:"/esbuild/api/transform.html#define"},{default:e(()=>[v]),_:1}),a(t,{to:"/esbuild/api/transform.html#format"},{default:e(()=>[m]),_:1}),a(t,{to:"/esbuild/api/transform.html#loader"},{default:e(()=>[b]),_:1}),a(t,{to:"/esbuild/api/transform.html#minify"},{default:e(()=>[g]),_:1}),a(t,{to:"/esbuild/api/transform.html#sourcemap"},{default:e(()=>[h]),_:1}),a(t,{to:"/esbuild/api/transform.html#target"},{default:e(()=>[f]),_:1})]),_,n("p",null,[a(t,{to:"/esbuild/api/transform.html#banner"},{default:e(()=>[y]),_:1}),a(t,{to:"/esbuild/api/transform.html#charset"},{default:e(()=>[q]),_:1}),a(t,{to:"/esbuild/api/transform.html#color"},{default:e(()=>[j]),_:1}),a(t,{to:"/esbuild/api/transform.html#footer"},{default:e(()=>[w]),_:1}),a(t,{to:"/esbuild/api/transform.html#global-name"},{default:e(()=>[x]),_:1}),a(t,{to:"/esbuild/api/transform.html#jsx"},{default:e(()=>[S]),_:1}),a(t,{to:"/esbuild/api/transform.html#jsx-factory"},{default:e(()=>[E]),_:1}),a(t,{to:"/esbuild/api/transform.html#jsx-fragment"},{default:e(()=>[P]),_:1}),a(t,{to:"/esbuild/api/transform.html#keep-names"},{default:e(()=>[B]),_:1}),a(t,{to:"/esbuild/api/transform.html#legal-comments"},{default:e(()=>[O]),_:1}),a(t,{to:"/esbuild/api/transform.html#log-level"},{default:e(()=>[T]),_:1}),a(t,{to:"/esbuild/api/transform.html#log-limit"},{default:e(()=>[C]),_:1}),a(t,{to:"/esbuild/api/transform.html#pure"},{default:e(()=>[I]),_:1}),a(t,{to:"/esbuild/api/transform.html#source-root"},{default:e(()=>[A]),_:1}),a(t,{to:"/esbuild/api/transform.html#sourcefile"},{default:e(()=>[J]),_:1}),a(t,{to:"/esbuild/api/transform.html#sources-content"},{default:e(()=>[L]),_:1}),a(t,{to:"/esbuild/api/transform.html#tree-shaking"},{default:e(()=>[M]),_:1}),a(t,{to:"/esbuild/api/transform.html#tsconfig-raw"},{default:e(()=>[W]),_:1})]),F,R,D,U,N,n("p",null,[a(t,{to:"/esbuild/api/transform.html#bundle"},{default:e(()=>[G]),_:1}),a(t,{to:"/esbuild/api/transform.html#define"},{default:e(()=>[X]),_:1}),a(t,{to:"/esbuild/api/transform.html#entry-points"},{default:e(()=>[H]),_:1}),a(t,{to:"/esbuild/api/transform.html#external"},{default:e(()=>[z]),_:1}),a(t,{to:"/esbuild/api/transform.html#format"},{default:e(()=>[V]),_:1}),a(t,{to:"/esbuild/api/transform.html#inject"},{default:e(()=>[K]),_:1}),a(t,{to:"/esbuild/api/transform.html#loader"},{default:e(()=>[$]),_:1}),a(t,{to:"/esbuild/api/transform.html#minify"},{default:e(()=>[Y]),_:1}),a(t,{to:"/esbuild/api/transform.html#outdir"},{default:e(()=>[Q]),_:1}),a(t,{to:"/esbuild/api/transform.html#outfile"},{default:e(()=>[Z]),_:1}),a(t,{to:"/esbuild/api/transform.html#platform"},{default:e(()=>[nn]),_:1}),a(t,{to:"/esbuild/api/transform.html#serve"},{default:e(()=>[sn]),_:1}),a(t,{to:"/esbuild/api/transform.html#sourcemap"},{default:e(()=>[an]),_:1}),a(t,{to:"/esbuild/api/transform.html#splitting"},{default:e(()=>[tn]),_:1}),a(t,{to:"/esbuild/api/transform.html#target"},{default:e(()=>[en]),_:1}),a(t,{to:"/esbuild/api/transform.html#watch"},{default:e(()=>[pn]),_:1}),a(t,{to:"/esbuild/api/transform.html#write"},{default:e(()=>[on]),_:1})]),cn,n("p",null,[a(t,{to:"/esbuild/api/transform.html#allow-overwrite"},{default:e(()=>[ln]),_:1}),a(t,{to:"/esbuild/api/transform.html#asset-names"},{default:e(()=>[un]),_:1}),a(t,{to:"/esbuild/api/transform.html#banner"},{default:e(()=>[rn]),_:1}),a(t,{to:"/esbuild/api/transform.html#charset"},{default:e(()=>[dn]),_:1}),a(t,{to:"/esbuild/api/transform.html#chunk-names"},{default:e(()=>[kn]),_:1}),a(t,{to:"/esbuild/api/transform.html#color"},{default:e(()=>[vn]),_:1}),a(t,{to:"/esbuild/api/transform.html#conditions"},{default:e(()=>[mn]),_:1}),a(t,{to:"/esbuild/api/transform.html#entry-names"},{default:e(()=>[bn]),_:1}),a(t,{to:"/esbuild/api/transform.html#footer"},{default:e(()=>[gn]),_:1}),a(t,{to:"/esbuild/api/transform.html#global-name"},{default:e(()=>[hn]),_:1}),a(t,{to:"/esbuild/api/transform.html#incremental"},{default:e(()=>[fn]),_:1}),a(t,{to:"/esbuild/api/transform.html#jsx"},{default:e(()=>[_n]),_:1}),a(t,{to:"/esbuild/api/transform.html#jsx-factory"},{default:e(()=>[yn]),_:1}),a(t,{to:"/esbuild/api/transform.html#jsx-fragment"},{default:e(()=>[qn]),_:1}),a(t,{to:"/esbuild/api/transform.html#keep-names"},{default:e(()=>[jn]),_:1}),a(t,{to:"/esbuild/api/transform.html#legal-comments"},{default:e(()=>[wn]),_:1}),a(t,{to:"/esbuild/api/transform.html#log-level"},{default:e(()=>[xn]),_:1}),a(t,{to:"/esbuild/api/transform.html#log-limit"},{default:e(()=>[Sn]),_:1}),a(t,{to:"/esbuild/api/transform.html#main-fields"},{default:e(()=>[En]),_:1}),a(t,{to:"/esbuild/api/transform.html#metafile"},{default:e(()=>[Pn]),_:1}),a(t,{to:"/esbuild/api/transform.html#node-paths"},{default:e(()=>[Bn]),_:1}),a(t,{to:"/esbuild/api/transform.html#out-extension"},{default:e(()=>[On]),_:1}),a(t,{to:"/esbuild/api/transform.html#outbase"},{default:e(()=>[Tn]),_:1}),a(t,{to:"/esbuild/api/transform.html#preserve-symlinks"},{default:e(()=>[Cn]),_:1}),a(t,{to:"/esbuild/api/transform.html#public-path"},{default:e(()=>[In]),_:1}),a(t,{to:"/esbuild/api/transform.html#pure"},{default:e(()=>[An]),_:1}),a(t,{to:"/esbuild/api/transform.html#resolve-extensions"},{default:e(()=>[Jn]),_:1}),a(t,{to:"/esbuild/api/transform.html#source-root"},{default:e(()=>[Ln]),_:1}),a(t,{to:"/esbuild/api/transform.html#sourcefile"},{default:e(()=>[Mn]),_:1}),a(t,{to:"/esbuild/api/transform.html#sources-content"},{default:e(()=>[Wn]),_:1}),a(t,{to:"/esbuild/api/transform.html#stdin"},{default:e(()=>[Fn]),_:1}),a(t,{to:"/esbuild/api/transform.html#tree-shaking"},{default:e(()=>[Rn]),_:1}),a(t,{to:"/esbuild/api/transform.html#tsconfig"},{default:e(()=>[Dn]),_:1}),a(t,{to:"/esbuild/api/transform.html#working-directory"},{default:e(()=>[Un]),_:1})]),Nn,Gn,Xn,Hn,zn,Vn,n("p",null,[Kn,a(t,{to:"/esbuild/api/transform/#platform"},{default:e(()=>[$n]),_:1}),Yn,Qn,Zn,ns,ss]),as,n("ul",null,[ts,n("li",null,[n("p",null,[es,n("a",ps,[os,a(o)]),is])])]),cs,n("ul",null,[n("li",null,[n("strong",null,[ls,a(t,{to:"/esbuild/api/transform/#define"},{default:e(()=>[us]),_:1})])])]),n("p",null,[rs,a(t,{to:"/esbuild/api/transform/#define"},{default:e(()=>[ds]),_:1}),ks]),vs,n("ul",null,[n("li",null,[n("strong",null,[n("a",ms,[bs,a(o)]),gs])])]),n("p",null,[hs,fs,_s,ys,qs,js,ws,n("a",xs,[Ss,a(o)]),Es]),Ps,Bs,Os,n("p",null,[Ts,Cs,Is,As,Js,n("a",Ls,[Ms,a(o)]),Ws]),Fs,Rs,n("p",null,[Ds,Us,Ns,Gs,Xs,n("a",Hs,[zs,a(o)]),Vs]),n("p",null,[Ks,$s,Ys,Qs,Zs,na,sa,n("a",aa,[ta,a(o)]),ea,pa,oa]),ia,n("p",null,[ca,a(t,{to:"/esbuild/api/transform/#build-api"},{default:e(()=>[la]),_:1}),ua]),ra,n("p",null,[da,a(t,{to:"/esbuild/api/transform/#stdin"},{default:e(()=>[ka]),_:1}),va]),ma,n("p",null,[ba,a(t,{to:"/esbuild/api/transform/#stdin"},{default:e(()=>[ga]),_:1}),ha]),fa,n("p",null,[a(t,{to:"/esbuild/api/transform/#transform-api"},{default:e(()=>[_a]),_:1}),ya,qa,ja]),wa,n("p",null,[xa,n("a",Sa,[Ea,a(o)]),Pa]),Ba,Oa,n("ul",null,[n("li",null,[n("p",null,[Ta,a(t,{to:"/esbuild/api/transform/#target"},{default:e(()=>[Ca]),_:1}),Ia,Aa,Ja,La,Ma,Wa,Fa])]),n("li",null,[n("p",null,[Ra,Da,Ua,Na,Ga,Xa,Ha,n("a",za,[Va,a(o)]),Ka])]),n("li",null,[n("p",null,[$a,Ya,Qa,Za,nt,a(t,{to:"/esbuild/api/transform/#keep-names"},{default:e(()=>[st]),_:1}),at])]),tt]),et,n("p",null,[pt,n("a",ot,[it,a(o)]),ct,n("a",lt,[ut,a(o)]),rt]),dt,n("p",null,[kt,n("a",vt,[mt,a(o)]),bt,gt,ht,ft,_t,yt,qt,jt,wt,a(t,{to:"/esbuild/api/transform/#outbase"},{default:e(()=>[xt]),_:1}),St]),Et,Pt,n("p",null,[Bt,a(t,{to:"/esbuild/api/transform/#outdir"},{default:e(()=>[Ot]),_:1}),Tt]),Ct,n("ul",null,[n("li",null,[n("p",null,[It,a(t,{to:"/esbuild/api/transform/#format"},{default:e(()=>[At]),_:1}),Jt,Lt,Mt])]),Wt,n("li",null,[n("p",null,[a(t,{to:"/esbuild/api/transform/#main-fields"},{default:e(()=>[Ft]),_:1}),Rt])]),n("li",null,[n("p",null,[a(t,{to:"/esbuild/api/transform/#conditions"},{default:e(()=>[Dt]),_:1}),Ut,Nt,Gt,Xt,Ht,zt,Vt])]),n("li",null,[n("p",null,[Kt,a(t,{to:"/esbuild/api/transform/#minify"},{default:e(()=>[$t]),_:1}),Yt,Qt,Zt,a(t,{to:"/esbuild/api/transform/#define"},{default:e(()=>[ne]),_:1}),se])])]),ae,n("ul",null,[n("li",null,[n("p",null,[te,a(t,{to:"/esbuild/api/transform/#format"},{default:e(()=>[ee]),_:1}),pe,oe,ie,ce,le,ue,re])]),n("li",null,[n("p",null,[de,n("a",ke,[ve,a(o)]),me,be,ge,a(t,{to:"/esbuild/api/transform/#external"},{default:e(()=>[he]),_:1}),fe]),n("ul",null,[n("li",null,[n("p",null,[a(t,{to:"/esbuild/api/transform/#main-fields"},{default:e(()=>[_e]),_:1}),ye,qe,je,we,xe,Se,Ee])]),n("li",null,[n("p",null,[Pe,Be,Oe,a(t,{to:"/esbuild/api/transform/#main-fields"},{default:e(()=>[Te]),_:1}),Ce,Ie,Ae])])])]),n("li",null,[n("p",null,[a(t,{to:"/esbuild/api/transform/#conditions"},{default:e(()=>[Je]),_:1}),Le,Me,We,Fe,Re,De,Ue])])]),Ne,n("ul",null,[n("li",null,[n("p",null,[Ge,a(t,{to:"/esbuild/api/transform/#format"},{default:e(()=>[Xe]),_:1}),He,ze,Ve,Ke,$e])]),n("li",null,[n("p",null,[Ye,a(t,{to:"/esbuild/api/transform/#main-fields"},{default:e(()=>[Qe]),_:1}),Ze,np,sp])]),n("li",null,[n("p",null,[a(t,{to:"/esbuild/api/transform/#conditions"},{default:e(()=>[ap]),_:1}),tp])])]),n("p",null,[ep,n("a",pp,[op,a(o)]),ip,n("a",cp,[lp,a(o)]),up]),rp,dp,kp,n("ul",null,[n("li",null,[n("p",null,[vp,a(t,{to:"/esbuild/api/transform/#watch"},{default:e(()=>[mp]),_:1}),bp])]),gp,hp]),n("p",null,[fp,a(t,{to:"/esbuild/api/transform/#build-api"},{default:e(()=>[_p]),_:1}),yp]),qp,n("p",null,[jp,a(t,{to:"/esbuild/api/transform/#outdir"},{default:e(()=>[wp]),_:1}),xp,Sp,Ep,Pp,Bp,Op,Tp]),Cp,n("p",null,[Ip,n("a",Ap,[Jp,a(o)]),Lp,Mp,Wp]),Fp,n("p",null,[Rp,a(t,{to:"/esbuild/api/transform/#outdir"},{default:e(()=>[Dp]),_:1}),Up,Np,Gp,Xp,Hp]),n("p",null,[zp,n("a",Vp,[Kp,a(o)]),$p]),Yp,n("p",null,[Qp,a(t,{to:"/esbuild/api/transform/#build-api"},{default:e(()=>[Zp]),_:1}),no]),so,n("p",null,[ao,a(t,{to:"/esbuild/api/transform/#customizing-server-behavior"},{default:e(()=>[to]),_:1}),eo]),n("p",null,[po,a(t,{to:"/esbuild/api/transform/#build-api"},{default:e(()=>[oo]),_:1}),io]),co,n("p",null,[lo,n("a",uo,[ro,a(o)]),ko]),vo,mo,n("p",null,[bo,n("a",go,[ho,a(o)]),fo]),_o,yo,n("p",null,[qo,a(t,{to:"/esbuild/api/transform/#minify"},{default:e(()=>[jo]),_:1}),wo]),xo,n("p",null,[So,Eo,Po,a(t,{to:"/esbuild/api/transform/#sources-content"},{default:e(()=>[Bo]),_:1}),Oo]),To,n("p",null,[Co,n("a",Io,[Ao,a(o)]),Jo,Lo,Mo,Wo,Fo]),Ro,n("blockquote",null,[n("p",null,[Do,Uo,No,a(t,{to:"/esbuild/api/transform/#format"},{default:e(()=>[Go]),_:1}),Xo,n("a",Ho,[zo,a(o)]),Vo,Ko,$o,n("a",Yo,[Qo,a(o)]),Zo])]),ni,si,n("p",null,[ai,a(t,{to:"/esbuild/api/transform/#outdir"},{default:e(()=>[ti]),_:1}),ei]),pi,n("p",null,[oi,n("a",ii,[ci,a(o)]),li,ui,ri]),di,n("p",null,[ki,a(t,{to:"/esbuild/api/transform/#incremental"},{default:e(()=>[vi]),_:1}),mi]),bi,n("p",null,[gi,a(t,{to:"/esbuild/api/transform/#loader"},{default:e(()=>[hi]),_:1}),fi,n("a",_i,[yi,a(o)]),qi,ji,wi,xi,Si]),Ei,n("p",null,[Pi,a(t,{to:"/esbuild/api/transform/#outbase"},{default:e(()=>[Bi]),_:1}),Oi]),Ti,n("p",null,[Ci,a(t,{to:"/esbuild/api/transform/#chunk-names"},{default:e(()=>[Ii]),_:1}),Ai,a(t,{to:"/esbuild/api/transform/#entry-names"},{default:e(()=>[Ji]),_:1}),Li]),Mi,n("p",null,[Wi,a(t,{to:"/esbuild/api/transform/#footer"},{default:e(()=>[Fi]),_:1}),Ri]),Di,Ui,Ni,n("p",null,[Gi,Xi,Hi,zi,Vi,n("a",Ki,[$i,a(o)]),Yi]),Qi,n("p",null,[Zi,a(t,{to:"/esbuild/api/transform/#splitting"},{default:e(()=>[nc]),_:1}),sc,ac,tc]),ec,n("p",null,[pc,a(t,{to:"/esbuild/api/transform/#out-extension"},{default:e(()=>[oc]),_:1}),ic]),n("p",null,[cc,a(t,{to:"/esbuild/api/transform/#outbase"},{default:e(()=>[lc]),_:1}),uc]),n("p",null,[rc,a(t,{to:"/esbuild/api/transform/#asset-names"},{default:e(()=>[dc]),_:1}),kc,a(t,{to:"/esbuild/api/transform/#entry-names"},{default:e(()=>[vc]),_:1}),mc]),bc,gc,hc,n("img",{src:c.$withBase("/assets/cli/1629696207477.jpg"),alt:"demo"},null,8,fc),_c,n("p",null,[yc,a(t,{to:"/esbuild/api/transform/#platform"},{default:e(()=>[qc]),_:1}),jc,wc,xc]),Sc,n("p",null,[Ec,a(t,{to:"/esbuild/api/transform/#platform"},{default:e(()=>[Pc]),_:1}),Bc,Oc,Tc]),n("p",null,[Cc,Ic,Ac,Jc,Lc,n("a",Mc,[Wc,a(o)]),Fc,Rc,Dc,Uc,Nc,Gc,Xc]),Hc,n("p",null,[zc,a(t,{to:"/esbuild/api/transform/#outbase"},{default:e(()=>[Vc]),_:1}),Kc]),$c,n("p",null,[Yc,Qc,Zc,a(t,{to:"/esbuild/api/transform/#splitting"},{default:e(()=>[nl]),_:1}),sl]),n("p",null,[al,a(t,{to:"/esbuild/api/transform/#metafile"},{default:e(()=>[tl]),_:1}),el,pl,ol]),n("p",null,[il,a(t,{to:"/esbuild/api/transform/#out-extension"},{default:e(()=>[cl]),_:1}),ll]),n("p",null,[ul,a(t,{to:"/esbuild/api/transform/#asset-names"},{default:e(()=>[rl]),_:1}),dl,a(t,{to:"/esbuild/api/transform/#chunk-names"},{default:e(()=>[kl]),_:1}),vl]),ml,n("p",null,[bl,a(t,{to:"/esbuild/api/transform/#banner"},{default:e(()=>[gl]),_:1}),hl]),fl,_l,n("p",null,[yl,a(t,{to:"/esbuild/api/transform/#format"},{default:e(()=>[ql]),_:1}),jl,wl,xl]),Sl,n("p",null,[El,a(t,{to:"/esbuild/api/transform/#build-api"},{default:e(()=>[Pl]),_:1}),Bl]),n("ul",null,[n("li",null,[n("p",null,[Ol,n("a",Tl,[Cl,a(o)]),Il])]),n("li",null,[n("p",null,[Al,n("a",Jl,[Ll,a(o)]),Ml])])]),Wl,n("p",null,[Fl,Rl,Dl,Ul,Nl,n("a",Gl,[Xl,a(o)]),Hl]),zl,n("p",null,[Vl,Kl,$l,Yl,Ql,n("a",Zl,[nu,a(o)]),su]),au,n("p",null,[tu,a(t,{to:"/esbuild/api/transform/#minify"},{default:e(()=>[eu]),_:1}),pu,ou,iu,cu,lu,uu,ru,du,ku]),vu,n("p",null,[mu,bu,gu,a(t,{to:"/esbuild/api/transform/#bundle"},{default:e(()=>[hu]),_:1}),fu,_u,yu]),qu,n("p",null,[ju,wu,xu,Su,Eu,n("a",Pu,[Bu,a(o)]),Ou]),Tu,n("p",null,[Cu,n("a",Iu,[Au,a(o)]),Ju,Lu,Mu]),Wu,n("p",null,[Fu,n("a",Ru,[Du,a(o)]),Uu,Nu,Gu,Xu,Hu,a(t,{to:"/esbuild/api/transform/#tree-shaking"},{default:e(()=>[zu]),_:1}),Vu]),Ku,n("p",null,[$u,n("a",Yu,[Qu,a(o)]),Zu,nr,sr,ar,tr]),n("p",null,[er,a(t,{to:"/esbuild/api/transform/#platform"},{default:e(()=>[pr]),_:1}),or,ir,cr,lr,ur,rr,dr,kr,vr,mr,br]),gr,n("p",null,[hr,n("a",fr,[_r,a(o)]),yr]),qr,n("p",null,[jr,n("a",wr,[xr,a(o)]),Sr,Er,Pr]),Br,n("p",null,[Or,Tr,Cr,Ir,Ar,Jr,Lr,Mr,Wr,a(t,{to:"/esbuild/api/transform/#outdir"},{default:e(()=>[Fr]),_:1}),Rr,a(t,{to:"/esbuild/api/transform/#outfile"},{default:e(()=>[Dr]),_:1}),Ur]),Nr,n("p",null,[Gr,a(t,{to:"/esbuild/api/transform/#outdir"},{default:e(()=>[Xr]),_:1}),Hr,zr,Vr,Kr,$r,Yr,Qr,Zr,nd,sd,ad]),td,n("p",null,[ed,n("a",pd,[od,a(o)]),id,cd,ld,ud,rd,dd,kd]),vd,md,n("p",null,[bd,n("a",gd,[hd,a(o)]),fd,n("a",_d,[yd,a(o)]),qd]),jd,n("p",null,[wd,n("a",xd,[Sd,a(o)]),Ed]),Pd,n("p",null,[n("a",Bd,[Od,a(o)]),Td]),Cd,n("p",null,[Id,a(t,{to:"/esbuild/api/transform/#sourcemap"},{default:e(()=>[Ad]),_:1}),Jd,Ld,Md]),Wd,n("p",null,[a(t,{to:"/esbuild/api/transform/#sourcemap"},{default:e(()=>[Fd]),_:1}),Rd,n("a",Dd,[Ud,a(o)]),Nd]),Gd,n("p",null,[Xd,a(t,{to:"/esbuild/api/transform/#sourcefile"},{default:e(()=>[Hd]),_:1}),zd,a(t,{to:"/esbuild/api/transform/#loader"},{default:e(()=>[Vd]),_:1}),Kd]),$d,n("p",null,[Yd,Qd,Zd,nk,sk,ak,tk,a(t,{to:"/esbuild/api/transform/#main-fields"},{default:e(()=>[ek]),_:1}),pk]),ok,ik,n("ul",null,[n("li",null,[n("p",null,[ck,lk,uk,a(t,{to:"/esbuild/api/transform/#pure"},{default:e(()=>[rk]),_:1}),dk])]),n("li",null,[n("p",null,[kk,vk,mk,bk,n("a",gk,[hk,a(o)]),fk])])]),_k,n("p",null,[yk,a(t,{to:"/esbuild/api/transform/#build-api"},{default:e(()=>[qk]),_:1}),jk,wk,xk,Sk,Ek]),Pk,n("p",null,[Bk,Ok,Tk,a(t,{to:"/esbuild/api/transform/#transform-api"},{default:e(()=>[Ck]),_:1}),Ik]),Ak,n("p",null,[Jk,n("a",Lk,[Mk,a(o)]),Wk]),Fk])}var Gk=l(d,[["render",Rk],["__file","transform.html.vue"]]);export{Gk as default};
