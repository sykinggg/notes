(window.webpackJsonp=window.webpackJsonp||[]).push([[309],{677:function(e,r,t){"use strict";t.r(r);var o=t(26),a=Object(o.a)({},(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"filereader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#filereader"}},[e._v("#")]),e._v(" FileReader")]),e._v(" "),t("h2",{attrs:{id:"概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[e._v("#")]),e._v(" 概念")]),e._v(" "),t("p",[t("code",[e._v("FileReader")]),e._v(" 对象允许Web应用程序异步读取存储在用户计算机上的文件（或原始数据缓冲区）的内容，使用 "),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/File",target:"_blank",rel:"noopener noreferrer"}},[e._v("File"),t("OutboundLink")],1),e._v(" 或 "),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob",target:"_blank",rel:"noopener noreferrer"}},[e._v("Blob"),t("OutboundLink")],1),e._v(" 对象指定要读取的文件或数据。")]),e._v(" "),t("p",[e._v("其中File对象可以是来自用户在一个"),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/Input",target:"_blank",rel:"noopener noreferrer"}},[t("input"),t("OutboundLink")],1),e._v("元素上选择文件后返回的"),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/FileList",target:"_blank",rel:"noopener noreferrer"}},[e._v("FileList"),t("OutboundLink")],1),e._v("对象,也可以来自拖放操作生成的 "),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/DataTransfer",target:"_blank",rel:"noopener noreferrer"}},[e._v("DataTransfer"),t("OutboundLink")],1),e._v("对象,还可以是来自在一个"),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLCanvasElement",target:"_blank",rel:"noopener noreferrer"}},[e._v("HTMLCanvasElement"),t("OutboundLink")],1),e._v("上执行mozGetAsFile()方法后返回结果。")]),e._v(" "),t("blockquote",[t("p",[e._v("重要提示： FileReader仅用于以安全的方式从用户（远程）系统读取文件内容 它不能用于从文件系统中按路径名简单地读取文件。 要在JavaScript中按路径名读取文件，应使用标准Ajax解决方案进行服务器端文件读取，如果读取跨域，则使用CORS权限。")])]),e._v(" "),t("blockquote",[t("p",[t("strong",[e._v("Note")]),e._v(": 此特性在 "),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Workers_API",target:"_blank",rel:"noopener noreferrer"}},[e._v("Web Worker"),t("OutboundLink")],1),e._v(" 中可用")])]),e._v(" "),t("h2",{attrs:{id:"构造函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构造函数"}},[e._v("#")]),e._v(" 构造函数")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/FileReader",target:"_blank",rel:"noopener noreferrer"}},[e._v("FileReader()"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("返回一个新构造的"),t("code",[e._v("FileReader")]),e._v("。")]),e._v(" "),t("h2",{attrs:{id:"属性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#属性"}},[e._v("#")]),e._v(" 属性")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/error",target:"_blank",rel:"noopener noreferrer"}},[e._v("FileReader.error"),t("OutboundLink")],1),e._v(" "),t("strong",[e._v("只读")])]),e._v(" "),t("p",[e._v("一个"),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/DOMException",target:"_blank",rel:"noopener noreferrer"}},[e._v("DOMException"),t("OutboundLink")],1),e._v("，表示在读取文件时发生的错误 。")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/readyState",target:"_blank",rel:"noopener noreferrer"}},[e._v("FileReader.readyState"),t("OutboundLink")],1),e._v(" "),t("strong",[e._v("只读")])]),e._v(" "),t("p",[e._v("表示"),t("code",[e._v("FileReader")]),e._v("状态的数字。取值如下：")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("常量名")]),e._v(" "),t("th",[e._v("值")]),e._v(" "),t("th",[e._v("描述")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("EMPTY")]),e._v(" "),t("td",[e._v("0")]),e._v(" "),t("td",[e._v("还没有加载任何数据.")])]),e._v(" "),t("tr",[t("td",[e._v("LOADING")]),e._v(" "),t("td",[e._v("1")]),e._v(" "),t("td",[e._v("数据正在被加载.")])]),e._v(" "),t("tr",[t("td",[e._v("DONE")]),e._v(" "),t("td",[e._v("2")]),e._v(" "),t("td",[e._v("已完成全部的读取请求.")])])])]),e._v(" "),t("p",[t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/result",target:"_blank",rel:"noopener noreferrer"}},[e._v("FileReader.result"),t("OutboundLink")],1),e._v(" "),t("strong",[e._v("只读")])]),e._v(" "),t("p",[e._v("文件的内容。该属性仅在读取操作完成后才有效，数据的格式取决于使用哪个方法来启动读取操作。")]),e._v(" "),t("h2",{attrs:{id:"事件处理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#事件处理"}},[e._v("#")]),e._v(" 事件处理")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/onabort",target:"_blank",rel:"noopener noreferrer"}},[e._v("FileReader.onabort"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("处理"),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/abort_event",target:"_blank",rel:"noopener noreferrer"}},[e._v("abort (en-US)"),t("OutboundLink")],1),e._v("事件。该事件在读取操作被中断时触发。")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/FileReader/onerror",target:"_blank",rel:"noopener noreferrer"}},[e._v("FileReader.onerror (en-US)"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("处理"),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Element/error_event",target:"_blank",rel:"noopener noreferrer"}},[e._v("error (en-US)"),t("OutboundLink")],1),e._v("事件。该事件在读取操作发生错误时触发。")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/onload",target:"_blank",rel:"noopener noreferrer"}},[e._v("FileReader.onload"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("处理"),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/load_event",target:"_blank",rel:"noopener noreferrer"}},[e._v("load (en-US)"),t("OutboundLink")],1),e._v("事件。该事件在读取操作完成时触发。")]),e._v(" "),t("p",[t("code",[e._v("FileReader.onloadstart")]),e._v("(暂无)")]),e._v(" "),t("p",[e._v("处理"),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/loadstart_event",target:"_blank",rel:"noopener noreferrer"}},[e._v("loadstart (en-US)"),t("OutboundLink")],1),e._v("事件。该事件在读取操作开始时触发。")]),e._v(" "),t("p",[t("code",[e._v("FileReader.onloadend")]),e._v("(暂无)")]),e._v(" "),t("p",[e._v("处理"),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/loadend_event",target:"_blank",rel:"noopener noreferrer"}},[e._v("loadend (en-US)"),t("OutboundLink")],1),e._v("事件。该事件在读取操作结束时（要么成功，要么失败）触发。")]),e._v(" "),t("p",[t("code",[e._v("FileReader.onprogress")]),e._v("(暂无)")]),e._v(" "),t("p",[e._v("处理"),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/loadend_event",target:"_blank",rel:"noopener noreferrer"}},[e._v("progress (en-US)"),t("OutboundLink")],1),e._v("事件。该事件在读取Blob时触发。")]),e._v(" "),t("blockquote",[t("p",[e._v("因为 "),t("code",[e._v("FileReader")]),e._v(" 继承自"),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget",target:"_blank",rel:"noopener noreferrer"}},[e._v("EventTarget"),t("OutboundLink")],1),e._v("，所以所有这些事件也可以通过"),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener",target:"_blank",rel:"noopener noreferrer"}},[e._v("addEventListener"),t("OutboundLink")],1),e._v("方法使用。")])]),e._v(" "),t("h2",{attrs:{id:"方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法"}},[e._v("#")]),e._v(" 方法")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/abort",target:"_blank",rel:"noopener noreferrer"}},[e._v("FileReader.abort()"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("中止读取操作。在返回时，"),t("code",[e._v("readyState")]),e._v("属性为"),t("code",[e._v("DONE")]),e._v("。")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/readAsArrayBuffer",target:"_blank",rel:"noopener noreferrer"}},[e._v("FileReader.readAsArrayBuffer()"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("开始读取指定的 "),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob",target:"_blank",rel:"noopener noreferrer"}},[e._v("Blob"),t("OutboundLink")],1),e._v("中的内容, 一旦完成, "),t("code",[e._v("result")]),e._v(" 属性中保存的将是被读取文件的 "),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer",target:"_blank",rel:"noopener noreferrer"}},[e._v("ArrayBuffer"),t("OutboundLink")],1),e._v(" 数据对象.")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/readAsBinaryString",target:"_blank",rel:"noopener noreferrer"}},[e._v("FileReader.readAsBinaryString() "),t("OutboundLink")],1),e._v("(不推荐)")]),e._v(" "),t("p",[e._v("开始读取指定的"),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob",target:"_blank",rel:"noopener noreferrer"}},[e._v("Blob"),t("OutboundLink")],1),e._v("中的内容。一旦完成，"),t("code",[e._v("result")]),e._v("属性中将包含所读取文件的原始二进制数据。")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/readAsDataURL",target:"_blank",rel:"noopener noreferrer"}},[e._v("FileReader.readAsDataURL()"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("开始读取指定的"),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob",target:"_blank",rel:"noopener noreferrer"}},[e._v("Blob"),t("OutboundLink")],1),e._v("中的内容。一旦完成，"),t("code",[e._v("result")]),e._v("属性中将包含一个"),t("code",[e._v("data")]),e._v(": "),t("code",[e._v("URL")]),e._v("格式的"),t("code",[e._v("Base64")]),e._v("字符串以表示所读取文件的内容。")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/readAsText",target:"_blank",rel:"noopener noreferrer"}},[e._v("FileReader.readAsText()"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("开始读取指定的"),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob",target:"_blank",rel:"noopener noreferrer"}},[e._v("Blob"),t("OutboundLink")],1),e._v("中的内容。一旦完成，"),t("code",[e._v("result")]),e._v("属性中将包含一个字符串以表示所读取的文件内容。")]),e._v(" "),t("h2",{attrs:{id:"浏览器兼容性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#浏览器兼容性"}},[e._v("#")]),e._v(" 浏览器兼容性")]),e._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"demo",href:"/notes/assets/mozillaJs/1625131709(1).jpg"}},[t("img",{attrs:{src:"/notes/assets/mozillaJs/1625131709(1).jpg",alt:"demo"}})])])])}),[],!1,null,null,null);r.default=a.exports}}]);