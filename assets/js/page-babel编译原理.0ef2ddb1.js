(window.webpackJsonp=window.webpackJsonp||[]).push([[254],{1041:function(e,t,a){"use strict";a.r(t);var r=a(1),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"babel-编译原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-编译原理"}},[e._v("#")]),e._v(" babel 编译原理")]),e._v(" "),a("h2",{attrs:{id:"基础原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基础原理"}},[e._v("#")]),e._v(" 基础原理")]),e._v(" "),a("blockquote",[a("p",[e._v("Babel 是一个源到源的转换编译器（Transpiler），它的主要作用是将 JavaScript 的高版本语法（例如 ES6）转换成低版本语法（例如 ES5），从而可以适配浏览器的兼容性。")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/notes/assets/jsInterview/c88916e811d348938f248080125a09b0_tplv-k3u1fbpfcp-watermark.awebp",alt:"demo"}})]),e._v(" "),a("p",[e._v("从上图可知，Babel 的编译过程主要可以分为三个阶段：")]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("解析（Parse）")]),e._v("：包括词法分析和语法分析。词法分析主要把字符流源代码（"),a("code",[e._v("Char Stream")]),e._v("）转换成令牌流（ "),a("code",[e._v("Token Stream")]),e._v("），语法分析主要是将令牌流转换成抽象语法树（"),a("code",[e._v("Abstract Syntax Tree，AST")]),e._v("）。")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("转换（Transform）")]),e._v("：通过 Babel 的插件能力，将高版本语法的 AST 转换成支持低版本语法的 AST。当然在此过程中也可以对 AST 的 Node 节点进行优化操作，比如添加、更新以及移除节点等。")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("生成（Generate）")]),e._v("：将 AST 转换成字符串形式的低版本代码，同时也能创建 "),a("code",[e._v("Source Map")]),e._v(" 映射。")])])]),e._v(" "),a("p",[e._v("具体的流程如下所示：")]),e._v(" "),a("p",[a("img",{attrs:{src:"/notes/assets/jsInterview/deploy.awebp",alt:"demo"}})]),e._v(" "),a("p",[e._v("举个栗子，如果要将 TypeScript 语法转换成 ES5 语法：")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// 源代码")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("let")]),e._v(" a"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" string "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// 目标代码")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("var")]),e._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),a("h3",{attrs:{id:"_6-1-解析-parser"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-解析-parser"}},[e._v("#")]),e._v(" 6.1 解析（Parser）")]),e._v(" "),a("p",[e._v("Babel 的解析过程（源码到 AST 的转换）可以使用 "),a("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fbabeljs.io%2Fdocs%2Fen%2Fbabel-parser",target:"_blank",rel:"noopener noreferrer"}},[e._v("@babel/parser"),a("OutboundLink")],1),e._v("，它的主要特点如下：")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("支持解析最新的 ES2020")])]),e._v(" "),a("li",[a("p",[e._v("支持解析 JSX、Flow & TypeScript")])]),e._v(" "),a("li",[a("p",[e._v("支持解析实验性的语法提案（支持任何 "),a("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Ftc39%2Fproposals%2Fblob%2Fmaster%2Fstage-0-proposals.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("Stage 0"),a("OutboundLink")],1),e._v(" 的 PRS）")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);