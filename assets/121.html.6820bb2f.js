import{_ as n}from"./plugin-vue_export-helper.21dcd24c.js";import{o as s,c as a,a as t}from"./app.285b12f0.js";const e={},p=t(`<h1 id="\u7B2C130\u9898-promise-all-\u548C-promise-allsettled" tabindex="-1"><a class="header-anchor" href="#\u7B2C130\u9898-promise-all-\u548C-promise-allsettled" aria-hidden="true">#</a> \u7B2C130\u9898\uFF1APromise.all \u548C Promise.allSettled</h1><h2 id="\u53C2\u8003" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003" aria-hidden="true">#</a> \u53C2\u8003</h2><p>\u4E00\u53E5\u8BDD\u6982\u62EC<code>Promise.allSettled</code>\u548C<code>Promise.all</code>\u7684\u6700\u5927\u4E0D\u540C\uFF1A<code>Promise.allSettled</code>\u6C38\u8FDC\u4E0D\u4F1A\u88AB<code>reject</code>\u3002</p><h2 id="promise-all\u7684\u75DB\u70B9" tabindex="-1"><a class="header-anchor" href="#promise-all\u7684\u75DB\u70B9" aria-hidden="true">#</a> Promise.all\u7684\u75DB\u70B9</h2><p>\u5F53\u9700\u8981\u5904\u7406\u591A\u4E2A<code>Promise</code>\u5E76\u884C\u65F6\uFF0C\u5927\u591A\u6570\u60C5\u51B5\u4E0B<code>Promise.all</code>\u7528\u8D77\u6765\u662F\u975E\u5E38\u987A\u624B\u7684\uFF0C\u6BD4\u5982\u4E0B\u9762\u8FD9\u6837</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">delay</span> <span class="token operator">=</span> <span class="token parameter">n</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> promises <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>

Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>promises<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">values</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// \u6700\u7EC8\u8F93\u51FA\uFF1A [1, 2]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u662F\uFF0C\u662F\u4E00\u65E6\u6709\u4E00\u4E2A<code>promise</code>\u51FA\u73B0\u4E86\u5F02\u5E38\uFF0C\u88AB<code>reject</code>\u4E86\uFF0C\u60C5\u51B5\u5C31\u4F1A\u53D8\u7684\u9EBB\u70E6\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> promises <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>

Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>promises<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">values</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// \u6700\u7EC8\u8F93\u51FA\uFF1A Uncaught (in promise) 3</span>

Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>promises<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">values</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// \u52A0\u5165catch\u8BED\u53E5\u540E\uFF0C\u6700\u7EC8\u8F93\u51FA\uFF1A3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5C3D\u7BA1\u80FD\u7528<code>catch</code>\u6355\u83B7\u5176\u4E2D\u7684\u5F02\u5E38\uFF0C\u4F46\u4F60\u4F1A\u53D1\u73B0\u5176\u4ED6\u6267\u884C\u6210\u529F\u7684<code>Promise</code>\u7684\u6D88\u606F\u90FD\u4E22\u5931\u4E86\uFF0C\u4EFF\u4F5B\u77F3\u6C89\u5927\u6D77\u4E00\u822C\u3002</p><p>\u8981\u4E48\u5168\u90E8\u6210\u529F\uFF0C\u8981\u4E48\u5168\u90E8\u91CD\u6765\uFF0C\u8FD9\u662F<code>Promise.all</code>\u672C\u8EAB\u7684\u5F3A\u786C\u903B\u8F91\uFF0C\u4E5F\u662F\u75DB\u70B9\u7684\u6765\u6E90\uFF0C\u4E0D\u80FD\u8BF4\u5B83\u9519\uFF0C\u4F46\u8FD9\u7684\u786E\u7ED9<code>Promise.allSettled</code>\u7559\u4E0B\u4E86\u7ACB\u8DB3\u7684\u7A7A\u95F4\u3002</p><h2 id="promise-allsettled" tabindex="-1"><a class="header-anchor" href="#promise-allsettled" aria-hidden="true">#</a> Promise.allSettled</h2><p>\u5047\u5982\u4F7F\u7528<code>Promise.allSettled</code>\u6765\u5904\u7406\u8FD9\u6BB5\u903B\u8F91\u4F1A\u600E\u6837\u5462?</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> promises <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>

Promise<span class="token punctuation">.</span><span class="token function">allSettled</span><span class="token punctuation">(</span>promises<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">values</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// \u6700\u7EC8\u8F93\u51FA\uFF1A </span>
<span class="token comment">//    [</span>
<span class="token comment">//      {status: &quot;fulfilled&quot;, value: 1},</span>
<span class="token comment">//      {status: &quot;fulfilled&quot;, value: 2},</span>
<span class="token comment">//      {status: &quot;rejected&quot;, value: 3},</span>
<span class="token comment">//    ]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u770B\u5230\u6240\u6709<code>promise</code>\u7684\u6570\u636E\u90FD\u88AB\u5305\u542B\u5728then\u8BED\u53E5\u4E2D\uFF0C\u4E14\u6BCF\u4E2A<code>promise</code>\u7684\u8FD4\u56DE\u503C\u591A\u4E86\u4E00\u4E2A<code>status</code>\u5B57\u6BB5\uFF0C\u8868\u793A\u5F53\u524D<code>promise</code>\u7684\u72B6\u6001\uFF0C\u6CA1\u6709\u4EFB\u4F55\u4E00\u4E2A<code>promise</code>\u7684\u4FE1\u606F\u88AB\u4E22\u5931\u3002</p><p>\u56E0\u6B64\uFF0C\u5F53\u7528<code>Promise.allSettled</code>\u65F6\uFF0C\u6211\u4EEC\u53EA\u9700\u4E13\u6CE8\u5728<code>then</code>\u8BED\u53E5\u91CC\uFF0C\u5F53\u6709<code>promise</code>\u88AB\u5F02\u5E38\u6253\u65AD\u65F6\uFF0C\u6211\u4EEC\u4F9D\u7136\u80FD\u59A5\u5584\u5904\u7406\u90A3\u4E9B\u5DF2\u7ECF\u6210\u529F\u4E86\u7684<code>promise</code>\uFF0C\u4E0D\u5FC5\u5168\u90E8\u91CD\u6765\u3002</p>`,15),o=[p];function c(l,i){return s(),a("div",null,o)}var k=n(e,[["render",c],["__file","121.html.vue"]]);export{k as default};
