<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.46">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title></title><meta name="description" content="君子藏器于身 待时而动 天下有道则见 无道则隐">
    <link rel="modulepreload" href="/notes/assets/app.11072343.js"><link rel="modulepreload" href="/notes/assets/hookPrinciple.html.ba36b176.js"><link rel="modulepreload" href="/notes/assets/hookPrinciple.html.f18e9ecd.js"><link rel="prefetch" href="/notes/assets/index.html.086b5eb9.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.8358b31e.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.9b1372a4.js"><link rel="prefetch" href="/notes/assets/base.html.e840e795.js"><link rel="prefetch" href="/notes/assets/customCli.html.466bccf0.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.30b867d1.js"><link rel="prefetch" href="/notes/assets/adapter.html.39e5351c.js"><link rel="prefetch" href="/notes/assets/amd.html.2bdf1b1c.js"><link rel="prefetch" href="/notes/assets/builder.html.2cdef7bb.js"><link rel="prefetch" href="/notes/assets/censorJquery.html.4e6c9373.js"><link rel="prefetch" href="/notes/assets/combination.html.1c7f0493.js"><link rel="prefetch" href="/notes/assets/command.html.ee84b16f.js"><link rel="prefetch" href="/notes/assets/commonJS.html.849c842a.js"><link rel="prefetch" href="/notes/assets/constructor.html.49e83a0c.js"><link rel="prefetch" href="/notes/assets/decoration.html.9030e500.js"><link rel="prefetch" href="/notes/assets/esHarmony.html.776559e3.js"><link rel="prefetch" href="/notes/assets/exposed.html.75dcb133.js"><link rel="prefetch" href="/notes/assets/exterior.html.84bb22a8.js"><link rel="prefetch" href="/notes/assets/factory.html.7c69c0e4.js"><link rel="prefetch" href="/notes/assets/flyweight.html.e640790a.js"><link rel="prefetch" href="/notes/assets/functionalProgramming.html.ddc1e717.js"><link rel="prefetch" href="/notes/assets/intermediary.html.4580f807.js"><link rel="prefetch" href="/notes/assets/iterator.html.1e6130bb.js"><link rel="prefetch" href="/notes/assets/lazyInitial.html.2f8b38df.js"><link rel="prefetch" href="/notes/assets/mixin.html.96e74b7d.js"><link rel="prefetch" href="/notes/assets/module.html.edeb42cc.js"><link rel="prefetch" href="/notes/assets/mvc.html.47152417.js"><link rel="prefetch" href="/notes/assets/mvp.html.a2176498.js"><link rel="prefetch" href="/notes/assets/mvvm.html.a6e4a2de.js"><link rel="prefetch" href="/notes/assets/observer.html.90836c49.js"><link rel="prefetch" href="/notes/assets/outward.html.91197e69.js"><link rel="prefetch" href="/notes/assets/overview.html.b629a486.js"><link rel="prefetch" href="/notes/assets/prototype.html.7ff7aebe.js"><link rel="prefetch" href="/notes/assets/proxy.html.f07aa5ab.js"><link rel="prefetch" href="/notes/assets/singleton.html.48fa6356.js"><link rel="prefetch" href="/notes/assets/axios.html.1998caac.js"><link rel="prefetch" href="/notes/assets/createUnderscore.html.d23c3272.js"><link rel="prefetch" href="/notes/assets/jquery.html.810e02b0.js"><link rel="prefetch" href="/notes/assets/lodash.html.f4f21289.js"><link rel="prefetch" href="/notes/assets/sentry.html.cc93ce92.js"><link rel="prefetch" href="/notes/assets/underscore.html.2d4ef06c.js"><link rel="prefetch" href="/notes/assets/vuex.html.e9464d00.js"><link rel="prefetch" href="/notes/assets/customCli.html.b132e835.js"><link rel="prefetch" href="/notes/assets/description.html.051a6863.js"><link rel="prefetch" href="/notes/assets/indx.html.3314226d.js"><link rel="prefetch" href="/notes/assets/rebase.html.57196d9e.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.9ba1546a.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.71607dcc.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.07ba48b4.js"><link rel="prefetch" href="/notes/assets/44Questions.html.c80e5163.js"><link rel="prefetch" href="/notes/assets/asyncAwait.html.a459f76f.js"><link rel="prefetch" href="/notes/assets/babelCompile.html.c4cf680a.js"><link rel="prefetch" href="/notes/assets/base.html.26c3259f.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.07f02872.js"><link rel="prefetch" href="/notes/assets/baseWebpack.html.6edd93ec.js"><link rel="prefetch" href="/notes/assets/codeSeparation.html.78a72ba5.js"><link rel="prefetch" href="/notes/assets/cycle.html.8fc26d5a.js"><link rel="prefetch" href="/notes/assets/cycleOtherWay.html.75fc3a85.js"><link rel="prefetch" href="/notes/assets/executionMechanism.html.b0b9db63.js"><link rel="prefetch" href="/notes/assets/hybrid.html.7d58f4cc.js"><link rel="prefetch" href="/notes/assets/jsHandwriting.html.c548855f.js"><link rel="prefetch" href="/notes/assets/jsonStringify.html.2cf905b1.js"><link rel="prefetch" href="/notes/assets/largeFileResumableUpload.html.0b568287.js"><link rel="prefetch" href="/notes/assets/performance.html.7bd11819.js"><link rel="prefetch" href="/notes/assets/promise.html.1bf5d5da.js"><link rel="prefetch" href="/notes/assets/promiseAll.html.5188503d.js"><link rel="prefetch" href="/notes/assets/spa.html.9bfaed35.js"><link rel="prefetch" href="/notes/assets/tsBaseInterview.html.18ad6888.js"><link rel="prefetch" href="/notes/assets/useEs6.html.60cd7abd.js"><link rel="prefetch" href="/notes/assets/webAnimations.html.60f45066.js"><link rel="prefetch" href="/notes/assets/webpackInterview.html.a33f1383.js"><link rel="prefetch" href="/notes/assets/webpackLoader.html.467d073e.js"><link rel="prefetch" href="/notes/assets/webpackPublic.html.a5be9345.js"><link rel="prefetch" href="/notes/assets/weird.html.d82c3ba9.js"><link rel="prefetch" href="/notes/assets/es10News.html.3089c24a.js"><link rel="prefetch" href="/notes/assets/es11News.html.73ee2efb.js"><link rel="prefetch" href="/notes/assets/es6Interview1.html.e69e5af9.js"><link rel="prefetch" href="/notes/assets/es6Interview2.html.32830652.js"><link rel="prefetch" href="/notes/assets/es6Interview3.html.859dfe12.js"><link rel="prefetch" href="/notes/assets/es6News.html.dd674ed4.js"><link rel="prefetch" href="/notes/assets/es7News.html.946323eb.js"><link rel="prefetch" href="/notes/assets/es8News.html.24261a38.js"><link rel="prefetch" href="/notes/assets/es9News.html.4e81c3d4.js"><link rel="prefetch" href="/notes/assets/base.html.fcdeca94.js"><link rel="prefetch" href="/notes/assets/nginxComprehensiveScene.html.c784edc2.js"><link rel="prefetch" href="/notes/assets/commonlyUsed.html.b9bcccae.js"><link rel="prefetch" href="/notes/assets/inelegantHook.html.68558008.js"><link rel="prefetch" href="/notes/assets/interview1.html.9a5bddcc.js"><link rel="prefetch" href="/notes/assets/interview2.html.55495120.js"><link rel="prefetch" href="/notes/assets/interview3.html.4285808f.js"><link rel="prefetch" href="/notes/assets/interview4.html.de7a5adc.js"><link rel="prefetch" href="/notes/assets/base.html.dee25fe0.js"><link rel="prefetch" href="/notes/assets/introduction.html.8fe0b22f.js"><link rel="prefetch" href="/notes/assets/base.html.582ac030.js"><link rel="prefetch" href="/notes/assets/summarize.html.e1b580d2.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.a0dcc08b.js"><link rel="prefetch" href="/notes/assets/index.html.e7a0b835.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.324f4161.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.f1319e27.js"><link rel="prefetch" href="/notes/assets/bigDataRender.html.89762dca.js"><link rel="prefetch" href="/notes/assets/progress.html.538d00c2.js"><link rel="prefetch" href="/notes/assets/quirksStandards.html.335a24a6.js"><link rel="prefetch" href="/notes/assets/redrawReflow.html.1c48fa48.js"><link rel="prefetch" href="/notes/assets/storageSpace.html.c58cccbb.js"><link rel="prefetch" href="/notes/assets/webComLink.html.f47b5e57.js"><link rel="prefetch" href="/notes/assets/webUrl.html.849e7317.js"><link rel="prefetch" href="/notes/assets/spanWidthHeight.html.4c7e7cfc.js"><link rel="prefetch" href="/notes/assets/baseCss.html.399d7457.js"><link rel="prefetch" href="/notes/assets/blockFormattingContext.html.a0cf2b05.js"><link rel="prefetch" href="/notes/assets/containingBlock.html.aaaa4b31.js"><link rel="prefetch" href="/notes/assets/cssBeforeAfter.html.63faedb4.js"><link rel="prefetch" href="/notes/assets/cssBoxModal.html.70b98100.js"><link rel="prefetch" href="/notes/assets/cssCollapsing.html.fab25f8c.js"><link rel="prefetch" href="/notes/assets/cssCompatible.html.639c22ed.js"><link rel="prefetch" href="/notes/assets/cssFlexDemo.html.7cd472eb.js"><link rel="prefetch" href="/notes/assets/cssFlexLayout.html.9b8fc568.js"><link rel="prefetch" href="/notes/assets/cssGridLayout.html.023f6ddb.js"><link rel="prefetch" href="/notes/assets/cssHack.html.47325564.js"><link rel="prefetch" href="/notes/assets/cssInlineBlock.html.e3ad358e.js"><link rel="prefetch" href="/notes/assets/cssPriority.html.f1fdc11c.js"><link rel="prefetch" href="/notes/assets/cssPseudo.html.94f33856.js"><link rel="prefetch" href="/notes/assets/cssPseudoClass.html.6fefdd32.js"><link rel="prefetch" href="/notes/assets/cssSelector.html.bcd11d02.js"><link rel="prefetch" href="/notes/assets/cssTutorial.html.5e499fc7.js"><link rel="prefetch" href="/notes/assets/fieldInvalid.html.27aaf436.js"><link rel="prefetch" href="/notes/assets/frame.html.abb12959.js"><link rel="prefetch" href="/notes/assets/knowledgePoints.html.33ce7794.js"><link rel="prefetch" href="/notes/assets/linkImport.html.adebddc0.js"><link rel="prefetch" href="/notes/assets/stackingContext.html.38615e31.js"><link rel="prefetch" href="/notes/assets/tools.html.66518a4f.js"><link rel="prefetch" href="/notes/assets/units.html.ef99311f.js"><link rel="prefetch" href="/notes/assets/transform.html.f146fd81.js"><link rel="prefetch" href="/notes/assets/content.html.6e45334a.js"><link rel="prefetch" href="/notes/assets/plugins.html.28a61209.js"><link rel="prefetch" href="/notes/assets/accesskey.html.c9799b2c.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.390ff55a.js"><link rel="prefetch" href="/notes/assets/canvasSvg.html.edcf8455.js"><link rel="prefetch" href="/notes/assets/deviceAPI.html.223562f3.js"><link rel="prefetch" href="/notes/assets/globalAttr.html.979c487e.js"><link rel="prefetch" href="/notes/assets/htmlDatalist.html.41bb315e.js"><link rel="prefetch" href="/notes/assets/htmlElement.html.d1bd1789.js"><link rel="prefetch" href="/notes/assets/interview10.html.52d5bd18.js"><link rel="prefetch" href="/notes/assets/interview11.html.ca997746.js"><link rel="prefetch" href="/notes/assets/interview12.html.857ddbb7.js"><link rel="prefetch" href="/notes/assets/interview13.html.f9db3df2.js"><link rel="prefetch" href="/notes/assets/interview14.html.dd7a22a4.js"><link rel="prefetch" href="/notes/assets/interview15.html.dd798266.js"><link rel="prefetch" href="/notes/assets/interview16.html.7e54472f.js"><link rel="prefetch" href="/notes/assets/interview17.html.56b51914.js"><link rel="prefetch" href="/notes/assets/interview18.html.dca9fd1f.js"><link rel="prefetch" href="/notes/assets/interview19.html.4767416e.js"><link rel="prefetch" href="/notes/assets/interview20.html.103ce6d3.js"><link rel="prefetch" href="/notes/assets/interview21.html.06545cf3.js"><link rel="prefetch" href="/notes/assets/interview22.html.1be9eb00.js"><link rel="prefetch" href="/notes/assets/interview23.html.ff467f51.js"><link rel="prefetch" href="/notes/assets/interview24.html.9ce0f35e.js"><link rel="prefetch" href="/notes/assets/interview25.html.4de2011e.js"><link rel="prefetch" href="/notes/assets/interview26.html.832eeb0a.js"><link rel="prefetch" href="/notes/assets/interview27.html.c0ca2408.js"><link rel="prefetch" href="/notes/assets/interview28.html.214ccfbc.js"><link rel="prefetch" href="/notes/assets/interview29.html.ae2bb08f.js"><link rel="prefetch" href="/notes/assets/interview30.html.028a0d9c.js"><link rel="prefetch" href="/notes/assets/interview31.html.ba41a281.js"><link rel="prefetch" href="/notes/assets/interview32.html.16bb84fd.js"><link rel="prefetch" href="/notes/assets/interview33.html.4ade5fec.js"><link rel="prefetch" href="/notes/assets/interview34.html.86236452.js"><link rel="prefetch" href="/notes/assets/interview35.html.669cd688.js"><link rel="prefetch" href="/notes/assets/interview36.html.250e83a9.js"><link rel="prefetch" href="/notes/assets/interview37.html.32fe09e0.js"><link rel="prefetch" href="/notes/assets/interview38.html.47196af5.js"><link rel="prefetch" href="/notes/assets/interview39.html.46f65409.js"><link rel="prefetch" href="/notes/assets/interview40.html.c6af2227.js"><link rel="prefetch" href="/notes/assets/interview41.html.3238e0fb.js"><link rel="prefetch" href="/notes/assets/interview42.html.0d34af13.js"><link rel="prefetch" href="/notes/assets/interview43.html.0b0cb1d7.js"><link rel="prefetch" href="/notes/assets/interview44.html.7685725a.js"><link rel="prefetch" href="/notes/assets/interview45.html.4d33bffc.js"><link rel="prefetch" href="/notes/assets/interview46.html.0ff1c5ef.js"><link rel="prefetch" href="/notes/assets/interview47.html.acfdb2cc.js"><link rel="prefetch" href="/notes/assets/interview48.html.f31de459.js"><link rel="prefetch" href="/notes/assets/interview49.html.001ade33.js"><link rel="prefetch" href="/notes/assets/interview5.html.896f3ae6.js"><link rel="prefetch" href="/notes/assets/interview50.html.e82b04cf.js"><link rel="prefetch" href="/notes/assets/interview51.html.994c1cd4.js"><link rel="prefetch" href="/notes/assets/interview52.html.a07afd56.js"><link rel="prefetch" href="/notes/assets/interview53.html.a9aaf311.js"><link rel="prefetch" href="/notes/assets/interview54.html.2270841e.js"><link rel="prefetch" href="/notes/assets/interview55.html.bb61b6bb.js"><link rel="prefetch" href="/notes/assets/interview56.html.5108b03b.js"><link rel="prefetch" href="/notes/assets/interview57.html.326b981c.js"><link rel="prefetch" href="/notes/assets/interview58.html.097a1955.js"><link rel="prefetch" href="/notes/assets/interview59.html.8428c4d7.js"><link rel="prefetch" href="/notes/assets/interview6.html.5c895acd.js"><link rel="prefetch" href="/notes/assets/interview7.html.2437b533.js"><link rel="prefetch" href="/notes/assets/interview8.html.3df070d5.js"><link rel="prefetch" href="/notes/assets/interview9.html.39870f21.js"><link rel="prefetch" href="/notes/assets/linkImport.html.be360535.js"><link rel="prefetch" href="/notes/assets/offlineStorage.html.de6ead02.js"><link rel="prefetch" href="/notes/assets/regular.html.74377e5c.js"><link rel="prefetch" href="/notes/assets/shake.html.85349956.js"><link rel="prefetch" href="/notes/assets/webWorker.html.226c7c24.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.ff1cdb8d.js"><link rel="prefetch" href="/notes/assets/cors.html.8ce924b8.js"><link rel="prefetch" href="/notes/assets/crossDomainCookie.html.97705269.js"><link rel="prefetch" href="/notes/assets/fetch.html.46aefb9e.js"><link rel="prefetch" href="/notes/assets/nestAxios.html.c1d84571.js"><link rel="prefetch" href="/notes/assets/debounce.html.365537c9.js"><link rel="prefetch" href="/notes/assets/lodashPrinciple.html.0e4a4e36.js"><link rel="prefetch" href="/notes/assets/lodashThrottleDebounce.html.011c3154.js"><link rel="prefetch" href="/notes/assets/throttle.html.dffc4781.js"><link rel="prefetch" href="/notes/assets/throttleDebounceReact.html.811fd566.js"><link rel="prefetch" href="/notes/assets/cloneIntroduction.html.ee1d5d56.js"><link rel="prefetch" href="/notes/assets/deepClone.html.c65e7e4b.js"><link rel="prefetch" href="/notes/assets/lodashDeepClone.html.4ad06cc8.js"><link rel="prefetch" href="/notes/assets/objectAssign.html.ca08e424.js"><link rel="prefetch" href="/notes/assets/arraySourceCode.html.ff16f1fc.js"><link rel="prefetch" href="/notes/assets/baseHigh.html.c91cc031.js"><link rel="prefetch" href="/notes/assets/currying.html.1a906a95.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.30d41187.js"><link rel="prefetch" href="/notes/assets/eventLoop.html.c40a9c13.js"><link rel="prefetch" href="/notes/assets/iife.html.56fc4a67.js"><link rel="prefetch" href="/notes/assets/interview1.html.a401f058.js"><link rel="prefetch" href="/notes/assets/jsCompatible.html.fac06d51.js"><link rel="prefetch" href="/notes/assets/baseProyotype.html.23552f91.js"><link rel="prefetch" href="/notes/assets/functionObjectResource.html.5ad3b2db.js"><link rel="prefetch" href="/notes/assets/prototypeInherit.html.792fdeff.js"><link rel="prefetch" href="/notes/assets/closureInterview.html.89031598.js"><link rel="prefetch" href="/notes/assets/scopeChain.html.d3252de3.js"><link rel="prefetch" href="/notes/assets/understandingClosures.html.06f5d76f.js"><link rel="prefetch" href="/notes/assets/executionStack.html.1eeb9686.js"><link rel="prefetch" href="/notes/assets/memoryLeak.html.2933a93c.js"><link rel="prefetch" href="/notes/assets/memoryMechanism.html.3b43b065.js"><link rel="prefetch" href="/notes/assets/memorySpace.html.9daf24d7.js"><link rel="prefetch" href="/notes/assets/precompiled.html.49d7f04a.js"><link rel="prefetch" href="/notes/assets/variableObject.html.47033a9c.js"><link rel="prefetch" href="/notes/assets/arrowFunctionThis.html.2637c13a.js"><link rel="prefetch" href="/notes/assets/bindSimulation.html.d2224d43.js"><link rel="prefetch" href="/notes/assets/callApply.html.c7ab377e.js"><link rel="prefetch" href="/notes/assets/newSimulation.html.54c84c3f.js"><link rel="prefetch" href="/notes/assets/thisBind.html.e9490212.js"><link rel="prefetch" href="/notes/assets/interview1.html.640f3a80.js"><link rel="prefetch" href="/notes/assets/interview10.html.a5ab68ef.js"><link rel="prefetch" href="/notes/assets/interview11.html.2c13e2d4.js"><link rel="prefetch" href="/notes/assets/interview12.html.781015b9.js"><link rel="prefetch" href="/notes/assets/interview13.html.e9604bd7.js"><link rel="prefetch" href="/notes/assets/interview14.html.94669dd1.js"><link rel="prefetch" href="/notes/assets/interview15.html.1fefc3ec.js"><link rel="prefetch" href="/notes/assets/interview16.html.9065a845.js"><link rel="prefetch" href="/notes/assets/interview17.html.4bbd771a.js"><link rel="prefetch" href="/notes/assets/interview18.html.25200024.js"><link rel="prefetch" href="/notes/assets/interview19.html.66494bf1.js"><link rel="prefetch" href="/notes/assets/interview2.html.241cb2f6.js"><link rel="prefetch" href="/notes/assets/interview20.html.6663cb30.js"><link rel="prefetch" href="/notes/assets/interview21.html.991c456f.js"><link rel="prefetch" href="/notes/assets/interview22.html.e024c518.js"><link rel="prefetch" href="/notes/assets/interview23.html.a845f8ed.js"><link rel="prefetch" href="/notes/assets/interview24.html.2a25ae43.js"><link rel="prefetch" href="/notes/assets/interview25.html.e53b5956.js"><link rel="prefetch" href="/notes/assets/interview26.html.5360fb43.js"><link rel="prefetch" href="/notes/assets/interview27.html.71e3ec67.js"><link rel="prefetch" href="/notes/assets/interview28.html.5e78bedf.js"><link rel="prefetch" href="/notes/assets/interview29.html.811c079b.js"><link rel="prefetch" href="/notes/assets/interview3.html.00edba5f.js"><link rel="prefetch" href="/notes/assets/interview30.html.9e148bbc.js"><link rel="prefetch" href="/notes/assets/interview4.html.6b84fb8e.js"><link rel="prefetch" href="/notes/assets/interview5.html.04ffaf0f.js"><link rel="prefetch" href="/notes/assets/interview6.html.253cdbc3.js"><link rel="prefetch" href="/notes/assets/interview7.html.8b5be94c.js"><link rel="prefetch" href="/notes/assets/interview8.html.22535864.js"><link rel="prefetch" href="/notes/assets/interview9.html.bd4f8a11.js"><link rel="prefetch" href="/notes/assets/adjacentSiblingCombinator.html.b7083561.js"><link rel="prefetch" href="/notes/assets/attributeSelectors.html.8f830b97.js"><link rel="prefetch" href="/notes/assets/charset.html.22f03f07.js"><link rel="prefetch" href="/notes/assets/childCombinator.html.7639a71c.js"><link rel="prefetch" href="/notes/assets/classSelectors.html.0d8dbb17.js"><link rel="prefetch" href="/notes/assets/descendantCombinator.html.42d6fbd0.js"><link rel="prefetch" href="/notes/assets/generalSiblingCombinator.html.69c0ac50.js"><link rel="prefetch" href="/notes/assets/iDSelectors.html.fb17be0b.js"><link rel="prefetch" href="/notes/assets/pseudoClasses.html.07117e1f.js"><link rel="prefetch" href="/notes/assets/pseudoElements.html.802c1127.js"><link rel="prefetch" href="/notes/assets/selectorList.html.8f3280a2.js"><link rel="prefetch" href="/notes/assets/typeSelectors.html.aecda9c5.js"><link rel="prefetch" href="/notes/assets/universalSelectors.html.d2552981.js"><link rel="prefetch" href="/notes/assets/IterationProtocols.html.8b54657e.js"><link rel="prefetch" href="/notes/assets/arrayFlat.html.b90d1e4f.js"><link rel="prefetch" href="/notes/assets/asyncHistory.html.eba0ff11.js"><link rel="prefetch" href="/notes/assets/eventLoop.html.f82639dc.js"><link rel="prefetch" href="/notes/assets/fileReader.html.9f1ea334.js"><link rel="prefetch" href="/notes/assets/formData.html.b1465376.js"><link rel="prefetch" href="/notes/assets/functionGenerator.html.f80f358a.js"><link rel="prefetch" href="/notes/assets/generator.html.4bc57ac0.js"><link rel="prefetch" href="/notes/assets/intersectionObserver.html.26fb2888.js"><link rel="prefetch" href="/notes/assets/map.html.01f24c1a.js"><link rel="prefetch" href="/notes/assets/promise.html.09f3dd81.js"><link rel="prefetch" href="/notes/assets/set.html.ea1118df.js"><link rel="prefetch" href="/notes/assets/string.html.5ffe3420.js"><link rel="prefetch" href="/notes/assets/symbol.html.47f7d9cd.js"><link rel="prefetch" href="/notes/assets/xMLHttpRequest.html.f10d866a.js"><link rel="prefetch" href="/notes/assets/spreadSyntax.html.a7c9587b.js"><link rel="prefetch" href="/notes/assets/strictMode.html.3d75f74a.js"><link rel="prefetch" href="/notes/assets/cache.html.00c35f90.js"><link rel="prefetch" href="/notes/assets/drag1.html.479cf3b8.js"><link rel="prefetch" href="/notes/assets/oneLineCode.html.881e4b7a.js"><link rel="prefetch" href="/notes/assets/oneLineCodeArray.html.aa23580b.js"><link rel="prefetch" href="/notes/assets/oneLineCodeDOM.html.4bce0f90.js"><link rel="prefetch" href="/notes/assets/oneLineCodeDateTime.html.4e98286c.js"><link rel="prefetch" href="/notes/assets/oneLineCodeFunction.html.43ba099c.js"><link rel="prefetch" href="/notes/assets/oneLineCodeMath.html.301408e2.js"><link rel="prefetch" href="/notes/assets/oneLineCodeMisc.html.1c91e6e8.js"><link rel="prefetch" href="/notes/assets/oneLineCodeNumber.html.982105de.js"><link rel="prefetch" href="/notes/assets/oneLineCodeObject.html.b05a88d0.js"><link rel="prefetch" href="/notes/assets/oneLineCodeRandom.html.5ed3f9ef.js"><link rel="prefetch" href="/notes/assets/oneLineCodeString.html.7ad1492a.js"><link rel="prefetch" href="/notes/assets/oneLineCodeValidator.html.d923e1a0.js"><link rel="prefetch" href="/notes/assets/typeScriptCache.html.12348e3e.js"><link rel="prefetch" href="/notes/assets/reactBase.html.e7b28fce.js"><link rel="prefetch" href="/notes/assets/reactTypescript.html.df99f362.js"><link rel="prefetch" href="/notes/assets/vue2Base.html.3ce9cce5.js"><link rel="prefetch" href="/notes/assets/vue2Table.html.96765483.js"><link rel="prefetch" href="/notes/assets/vue2offsetTop.html.396722eb.js"><link rel="prefetch" href="/notes/assets/componentWillXXX.html.f9613a50.js"><link rel="prefetch" href="/notes/assets/disrupt.html.f4d5276b.js"><link rel="prefetch" href="/notes/assets/lane.html.75ddafb7.js"><link rel="prefetch" href="/notes/assets/prepare.html.ab8a5f86.js"><link rel="prefetch" href="/notes/assets/redux.html.917b743b.js"><link rel="prefetch" href="/notes/assets/scheduler.html.f7c39bed.js"><link rel="prefetch" href="/notes/assets/multi.html.1a7568bc.js"><link rel="prefetch" href="/notes/assets/one.html.97475a11.js"><link rel="prefetch" href="/notes/assets/prepare.html.0d0f72b9.js"><link rel="prefetch" href="/notes/assets/create.html.97abd323.js"><link rel="prefetch" href="/notes/assets/prepare.html.50fe269a.js"><link rel="prefetch" href="/notes/assets/structure.html.0321716b.js"><link rel="prefetch" href="/notes/assets/useeffect.html.b064b4ec.js"><link rel="prefetch" href="/notes/assets/usememo.html.1e7a9cc7.js"><link rel="prefetch" href="/notes/assets/useref.html.52d92c51.js"><link rel="prefetch" href="/notes/assets/usestate.html.6655c781.js"><link rel="prefetch" href="/notes/assets/file.html.7bd9d736.js"><link rel="prefetch" href="/notes/assets/idea.html.6e94dfda.js"><link rel="prefetch" href="/notes/assets/jsx.html.93a04cfc.js"><link rel="prefetch" href="/notes/assets/newConstructure.html.cf15cfc5.js"><link rel="prefetch" href="/notes/assets/oldConstructure.html.efe79483.js"><link rel="prefetch" href="/notes/assets/source.html.65af8afe.js"><link rel="prefetch" href="/notes/assets/summary.html.b2c58ef4.js"><link rel="prefetch" href="/notes/assets/basePrinciple.html.e396b9a0.js"><link rel="prefetch" href="/notes/assets/componentApi.html.79719898.js"><link rel="prefetch" href="/notes/assets/domApi.html.c8d2a8a7.js"><link rel="prefetch" href="/notes/assets/hoc.html.3a72cbbb.js"><link rel="prefetch" href="/notes/assets/hookApi.html.2598077a.js"><link rel="prefetch" href="/notes/assets/hookCustom.html.33c92abe.js"><link rel="prefetch" href="/notes/assets/hookUse.html.1199d032.js"><link rel="prefetch" href="/notes/assets/reactKeeplive.html.043dc1c7.js"><link rel="prefetch" href="/notes/assets/reactRedux.html.b8346b0e.js"><link rel="prefetch" href="/notes/assets/reactRouter.html.79171784.js"><link rel="prefetch" href="/notes/assets/toolApi.html.11a9547c.js"><link rel="prefetch" href="/notes/assets/beginWork.html.e1d25a2d.js"><link rel="prefetch" href="/notes/assets/completeWork.html.3c738857.js"><link rel="prefetch" href="/notes/assets/doubleBuffer.html.10446dab.js"><link rel="prefetch" href="/notes/assets/fiber-mental.html.eb9b7b41.js"><link rel="prefetch" href="/notes/assets/fiber.html.10892e0c.js"><link rel="prefetch" href="/notes/assets/reconciler.html.e77da18c.js"><link rel="prefetch" href="/notes/assets/beforeMutation.html.93c83e04.js"><link rel="prefetch" href="/notes/assets/layout.html.52053b4f.js"><link rel="prefetch" href="/notes/assets/mutation.html.0c34296f.js"><link rel="prefetch" href="/notes/assets/prepare.html.0eb3a44f.js"><link rel="prefetch" href="/notes/assets/mental.html.f50497c9.js"><link rel="prefetch" href="/notes/assets/prepare.html.ddce4d2d.js"><link rel="prefetch" href="/notes/assets/priority.html.11567321.js"><link rel="prefetch" href="/notes/assets/reactdom.html.c8437fc7.js"><link rel="prefetch" href="/notes/assets/setstate.html.19a6f9ab.js"><link rel="prefetch" href="/notes/assets/update.html.a9a9aa27.js"><link rel="prefetch" href="/notes/assets/bitfiled.html.568dafda.js"><link rel="prefetch" href="/notes/assets/dfs.html.4fcf32ed.js"><link rel="prefetch" href="/notes/assets/diff.html.c8e4cedc.js"><link rel="prefetch" href="/notes/assets/heapsort.html.cdb3a013.js"><link rel="prefetch" href="/notes/assets/linkedlist.html.4bd5b2f6.js"><link rel="prefetch" href="/notes/assets/stack.html.a2416a3c.js"><link rel="prefetch" href="/notes/assets/bootstrap.html.8bba6370.js"><link rel="prefetch" href="/notes/assets/context.html.75602479.js"><link rel="prefetch" href="/notes/assets/fibertree-commit.html.eef5d7a9.js"><link rel="prefetch" href="/notes/assets/fibertree-create.html.f1ca2d5a.js"><link rel="prefetch" href="/notes/assets/fibertree-prepare.html.1255714c.js"><link rel="prefetch" href="/notes/assets/fibertree-update.html.812c7d81.js"><link rel="prefetch" href="/notes/assets/hook-effect.html.efc7c37a.js"><link rel="prefetch" href="/notes/assets/hook-state.html.5f0cc610.js"><link rel="prefetch" href="/notes/assets/hook-summary.html.dd1d1e78.js"><link rel="prefetch" href="/notes/assets/macro-structure.html.076d0d6d.js"><link rel="prefetch" href="/notes/assets/object-structure.html.2cbb9911.js"><link rel="prefetch" href="/notes/assets/priority.html.e16ff83e.js"><link rel="prefetch" href="/notes/assets/reconciler-workflow.html.84473efe.js"><link rel="prefetch" href="/notes/assets/scheduler.html.b9d3a166.js"><link rel="prefetch" href="/notes/assets/state-effects.html.65a6fb74.js"><link rel="prefetch" href="/notes/assets/synthetic-event.html.8a48ff2a.js"><link rel="prefetch" href="/notes/assets/workloop.html.ebbd229d.js"><link rel="prefetch" href="/notes/assets/ast.html.35437078.js"><link rel="prefetch" href="/notes/assets/binder.html.6f794102.js"><link rel="prefetch" href="/notes/assets/checker.html.10743550.js"><link rel="prefetch" href="/notes/assets/emitter.html.5630964a.js"><link rel="prefetch" href="/notes/assets/overview.html.b710a53e.js"><link rel="prefetch" href="/notes/assets/parser.html.5628ae42.js"><link rel="prefetch" href="/notes/assets/program.html.1f375f30.js"><link rel="prefetch" href="/notes/assets/scanner.html.2113ef5d.js"><link rel="prefetch" href="/notes/assets/common.html.44df6b9c.js"><link rel="prefetch" href="/notes/assets/interpreting.html.7d095877.js"><link rel="prefetch" href="/notes/assets/class.html.0256c3d9.js"><link rel="prefetch" href="/notes/assets/commandline-behavior.html.2e7a4b0c.js"><link rel="prefetch" href="/notes/assets/comments.html.9cbcb3fb.js"><link rel="prefetch" href="/notes/assets/common-bug-not-bugs.html.5969cea7.js"><link rel="prefetch" href="/notes/assets/common-feature-request.html.fc0e834d.js"><link rel="prefetch" href="/notes/assets/decorators.html.fa96ea91.js"><link rel="prefetch" href="/notes/assets/enums.html.60ab48f6.js"><link rel="prefetch" href="/notes/assets/function.html.d4fb895d.js"><link rel="prefetch" href="/notes/assets/generics.html.e7d39bb8.js"><link rel="prefetch" href="/notes/assets/glossary-and-terms.html.02c859e6.js"><link rel="prefetch" href="/notes/assets/jsx-and-react.html.f5262510.js"><link rel="prefetch" href="/notes/assets/modules.html.90f89e97.js"><link rel="prefetch" href="/notes/assets/thing-that-dont-work.html.04576715.js"><link rel="prefetch" href="/notes/assets/tsconfig-behavior.html.708ed617.js"><link rel="prefetch" href="/notes/assets/type-guards.html.8eea0d1a.js"><link rel="prefetch" href="/notes/assets/type-system-behavior.html.cd64c2c3.js"><link rel="prefetch" href="/notes/assets/nonReactJSX.html.1ea670d6.js"><link rel="prefetch" href="/notes/assets/reactJSX.html.41444245.js"><link rel="prefetch" href="/notes/assets/support.html.d25449f0.js"><link rel="prefetch" href="/notes/assets/typescript-3.7.html.916b8b25.js"><link rel="prefetch" href="/notes/assets/typescript-3.8.html.14bd7bb1.js"><link rel="prefetch" href="/notes/assets/typescript-3.9.html.9eb13d0d.js"><link rel="prefetch" href="/notes/assets/compilationContext.html.28369556.js"><link rel="prefetch" href="/notes/assets/declarationspaces.html.cc4ed298.js"><link rel="prefetch" href="/notes/assets/dynamicImportExpressions.html.f678ab5c.js"><link rel="prefetch" href="/notes/assets/inDepthTs.html.85dd2aca.js"><link rel="prefetch" href="/notes/assets/modules.html.7bd204ff.js"><link rel="prefetch" href="/notes/assets/namespaces.html.e6e0e80a.js"><link rel="prefetch" href="/notes/assets/unknownAny.html.06dbe294.js"><link rel="prefetch" href="/notes/assets/avoidExportDefault.html.9721d3f7.js"><link rel="prefetch" href="/notes/assets/barrel.html.bc93f922.js"><link rel="prefetch" href="/notes/assets/bind.html.539822b6.js"><link rel="prefetch" href="/notes/assets/buildToggles.html.a794ff5a.js"><link rel="prefetch" href="/notes/assets/classAreUseful.html.73a266a8.js"><link rel="prefetch" href="/notes/assets/covarianceAndContravariance.html.5cca4751.js"><link rel="prefetch" href="/notes/assets/createArrays.html.3be92fb4.js"><link rel="prefetch" href="/notes/assets/curry.html.a59c5e9c.js"><link rel="prefetch" href="/notes/assets/functionParameters.html.2674678f.js"><link rel="prefetch" href="/notes/assets/infer.html.9936741d.js"><link rel="prefetch" href="/notes/assets/lazyObjectLiteralInitialization.html.304d022b.js"><link rel="prefetch" href="/notes/assets/limitPropertySetters.html.68dfab03.js"><link rel="prefetch" href="/notes/assets/metadata.html.55fbd555.js"><link rel="prefetch" href="/notes/assets/nominalTyping.html.7a7f6241.js"><link rel="prefetch" href="/notes/assets/outFileCaution.html.0f9bc4b8.js"><link rel="prefetch" href="/notes/assets/singletonPatern.html.833cda7f.js"><link rel="prefetch" href="/notes/assets/statefulFunctions.html.69041a69.js"><link rel="prefetch" href="/notes/assets/staticConstructors.html.d9ede4c3.js"><link rel="prefetch" href="/notes/assets/stringBasedEmuns.html.4f28f5dc.js"><link rel="prefetch" href="/notes/assets/truthy.html.596b4510.js"><link rel="prefetch" href="/notes/assets/typeInstantiation.html.1ee467cf.js"><link rel="prefetch" href="/notes/assets/typesafeEventEmitter.html.bbea15b5.js"><link rel="prefetch" href="/notes/assets/ambient.html.79aa74fc.js"><link rel="prefetch" href="/notes/assets/callable.html.e6b77cc8.js"><link rel="prefetch" href="/notes/assets/discrominatedUnion.html.f2ddb266.js"><link rel="prefetch" href="/notes/assets/enums.html.ebae772c.js"><link rel="prefetch" href="/notes/assets/exceptionsHanding.html.55c7823b.js"><link rel="prefetch" href="/notes/assets/freshness.html.c34a1309.js"><link rel="prefetch" href="/notes/assets/functions.html.7be4966e.js"><link rel="prefetch" href="/notes/assets/generices.html.d4d9c01e.js"><link rel="prefetch" href="/notes/assets/indexSignatures.html.00a2ca0f.js"><link rel="prefetch" href="/notes/assets/interfaces.html.a0009195.js"><link rel="prefetch" href="/notes/assets/lib.html.39ab1085.js"><link rel="prefetch" href="/notes/assets/literals.html.3a3fde8e.js"><link rel="prefetch" href="/notes/assets/migrating.html.dd930944.js"><link rel="prefetch" href="/notes/assets/mixins.html.accca9e1.js"><link rel="prefetch" href="/notes/assets/movingTypes.html.077fbde3.js"><link rel="prefetch" href="/notes/assets/neverType.html.1365e9c1.js"><link rel="prefetch" href="/notes/assets/overview.html.aeecb349.js"><link rel="prefetch" href="/notes/assets/readonly.html.15f8d5ed.js"><link rel="prefetch" href="/notes/assets/thisType.html.eaedd735.js"><link rel="prefetch" href="/notes/assets/typeAssertion.html.cb56caca.js"><link rel="prefetch" href="/notes/assets/typeCompatibility.html.51e11c08.js"><link rel="prefetch" href="/notes/assets/typeGuard.html.4319a0ff.js"><link rel="prefetch" href="/notes/assets/typeInference.html.18a2f280.js"><link rel="prefetch" href="/notes/assets/types.html.0d4316f9.js"><link rel="prefetch" href="/notes/assets/pluginDva.html.c14e990c.js"><link rel="prefetch" href="/notes/assets/pluginQiankun.html.07a08203.js"><link rel="prefetch" href="/notes/assets/codegen.html.ffef0b50.js"><link rel="prefetch" href="/notes/assets/entrance.html.8b4ba14a.js"><link rel="prefetch" href="/notes/assets/optimize.html.9620ff19.js"><link rel="prefetch" href="/notes/assets/outline.html.bb56b621.js"><link rel="prefetch" href="/notes/assets/parse.html.4402850f.js"><link rel="prefetch" href="/notes/assets/async-component.html.1d9cbbf2.js"><link rel="prefetch" href="/notes/assets/component-register.html.c3713be4.js"><link rel="prefetch" href="/notes/assets/create-component.html.01ea24f5.js"><link rel="prefetch" href="/notes/assets/lifecycle.html.c13ca89f.js"><link rel="prefetch" href="/notes/assets/merge-option.html.efe15363.js"><link rel="prefetch" href="/notes/assets/outline.html.703bda1a.js"><link rel="prefetch" href="/notes/assets/patch.html.b1cbee3c.js"><link rel="prefetch" href="/notes/assets/_index.html.429de04c.js"><link rel="prefetch" href="/notes/assets/create-element.html.cd7a12fb.js"><link rel="prefetch" href="/notes/assets/mounted.html.e1a48771.js"><link rel="prefetch" href="/notes/assets/new-vue.html.7c8d36e5.js"><link rel="prefetch" href="/notes/assets/render.html.bd00a2e2.js"><link rel="prefetch" href="/notes/assets/update.html.5a743eba.js"><link rel="prefetch" href="/notes/assets/virtual-dom.html.c87aa170.js"><link rel="prefetch" href="/notes/assets/event.html.d2b1c069.js"><link rel="prefetch" href="/notes/assets/keep-alive.html.68610d99.js"><link rel="prefetch" href="/notes/assets/outline.html.9ae192c4.js"><link rel="prefetch" href="/notes/assets/slot.html.4e52b941.js"><link rel="prefetch" href="/notes/assets/tansition-group.html.1387778f.js"><link rel="prefetch" href="/notes/assets/tansition.html.cfd54472.js"><link rel="prefetch" href="/notes/assets/v-model.html.299a288b.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.a93e345b.js"><link rel="prefetch" href="/notes/assets/baseInterviewSecond.html.7cb6b06a.js"><link rel="prefetch" href="/notes/assets/componentCommunication.html.7fdffd0b.js"><link rel="prefetch" href="/notes/assets/detailedResponsiveness.html.f0b69e92.js"><link rel="prefetch" href="/notes/assets/diff.html.919044f4.js"><link rel="prefetch" href="/notes/assets/eventBinding.html.d2f17522.js"><link rel="prefetch" href="/notes/assets/eventMechanism.html.16c36a6d.js"><link rel="prefetch" href="/notes/assets/key.html.4e1d5985.js"><link rel="prefetch" href="/notes/assets/knowledgeSystem.html.6d4893e5.js"><link rel="prefetch" href="/notes/assets/slot.html.23ee1901.js"><link rel="prefetch" href="/notes/assets/sourceCodeAsyncDomUpdateNextTick.html.ba474e1a.js"><link rel="prefetch" href="/notes/assets/sourceCodeElementBroadcastDispatch.html.77e7fd1d.js"><link rel="prefetch" href="/notes/assets/sourceCodeKeepAlive.html.f85576eb.js"><link rel="prefetch" href="/notes/assets/sourceCodeResponsiveness.html.72159302.js"><link rel="prefetch" href="/notes/assets/sourceCodeTemplateCompilation.html.0f59312c.js"><link rel="prefetch" href="/notes/assets/sourceCodeTemplateDom.html.08c8bf27.js"><link rel="prefetch" href="/notes/assets/sourceCodeVuex.html.f483d2b3.js"><link rel="prefetch" href="/notes/assets/templateCompilation.html.3868b20f.js"><link rel="prefetch" href="/notes/assets/vNode.html.d329b05c.js"><link rel="prefetch" href="/notes/assets/vNodeDiff.html.7d8d6567.js"><link rel="prefetch" href="/notes/assets/build.html.abdb4d1d.js"><link rel="prefetch" href="/notes/assets/directory.html.cdebbfe6.js"><link rel="prefetch" href="/notes/assets/entrance.html.4583bd33.js"><link rel="prefetch" href="/notes/assets/flow.html.2a144393.js"><link rel="prefetch" href="/notes/assets/component-update.html.e4747ead.js"><link rel="prefetch" href="/notes/assets/computed-watcher.html.90c4d8e5.js"><link rel="prefetch" href="/notes/assets/getters.html.2542a832.js"><link rel="prefetch" href="/notes/assets/next-tick.html.15510355.js"><link rel="prefetch" href="/notes/assets/outline.html.38c21cbb.js"><link rel="prefetch" href="/notes/assets/props.html.5061cd6c.js"><link rel="prefetch" href="/notes/assets/questions.html.fcfa9be9.js"><link rel="prefetch" href="/notes/assets/reactive-object.html.014f950c.js"><link rel="prefetch" href="/notes/assets/setters.html.8b8d3dd8.js"><link rel="prefetch" href="/notes/assets/summary.html.2000549a.js"><link rel="prefetch" href="/notes/assets/install.html.04f2d62f.js"><link rel="prefetch" href="/notes/assets/matcher.html.1b21ca3e.js"><link rel="prefetch" href="/notes/assets/outline.html.923374bb.js"><link rel="prefetch" href="/notes/assets/router.html.cc8385ed.js"><link rel="prefetch" href="/notes/assets/transition-to.html.36eed136.js"><link rel="prefetch" href="/notes/assets/api.html.c79a6862.js"><link rel="prefetch" href="/notes/assets/idex.html.52fadb25.js"><link rel="prefetch" href="/notes/assets/init.html.496ea084.js"><link rel="prefetch" href="/notes/assets/plugin.html.602df11c.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.c627935b.js"><link rel="prefetch" href="/notes/assets/configuration.html.3ce4cb1d.js"><link rel="prefetch" href="/notes/assets/entryPoints.html.c894de62.js"><link rel="prefetch" href="/notes/assets/loader.html.6a1315c0.js"><link rel="prefetch" href="/notes/assets/output.html.847d8cf1.js"><link rel="prefetch" href="/notes/assets/plugin.html.b5b10c15.js"><link rel="prefetch" href="/notes/assets/webpackInterview.html.c67a2f18.js"><link rel="prefetch" href="/notes/assets/reactApi.html.5c2e6439.js"><link rel="prefetch" href="/notes/assets/reactChildren.html.312d90ce.js"><link rel="prefetch" href="/notes/assets/reactElement.html.afb6bd42.js"><link rel="prefetch" href="/notes/assets/reactFiber.html.891ef802.js"><link rel="prefetch" href="/notes/assets/commitAllHostEffects.html.a62d51da.js"><link rel="prefetch" href="/notes/assets/commitAllLifeCycles.html.65a4839f.js"><link rel="prefetch" href="/notes/assets/commitBeforeMutationLifecycles.html.0e4d785b.js"><link rel="prefetch" href="/notes/assets/commitDeletion.html.5a9644e3.js"><link rel="prefetch" href="/notes/assets/commitPlacement.html.6dbbabfc.js"><link rel="prefetch" href="/notes/assets/commitRoot.html.5945a7e3.js"><link rel="prefetch" href="/notes/assets/commitWork.html.8ea8a3c9.js"><link rel="prefetch" href="/notes/assets/invokeGuardedCallback.html.0e0752da.js"><link rel="prefetch" href="/notes/assets/expirationTime.html.f4a8f557.js"><link rel="prefetch" href="/notes/assets/reactDomRender.html.a8d5ae9c.js"><link rel="prefetch" href="/notes/assets/setStateForceUpdate.html.b8b76e1f.js"><link rel="prefetch" href="/notes/assets/context.html.c4179e21.js"><link rel="prefetch" href="/notes/assets/evenInit.html.f6f33889.js"><link rel="prefetch" href="/notes/assets/eventBind.html.b4855c4a.js"><link rel="prefetch" href="/notes/assets/eventCreateEventObject.html.e6ed4041.js"><link rel="prefetch" href="/notes/assets/eventDispath.html.494d8733.js"><link rel="prefetch" href="/notes/assets/hydrate.html.8ec7fa18.js"><link rel="prefetch" href="/notes/assets/ref.html.b1504748.js"><link rel="prefetch" href="/notes/assets/suspense.html.ad3f96c0.js"><link rel="prefetch" href="/notes/assets/suspenseLazy.html.0b619ac8.js"><link rel="prefetch" href="/notes/assets/suspenseWork.html.7996ac34.js"><link rel="prefetch" href="/notes/assets/hooksCommon.html.c16b51dd.js"><link rel="prefetch" href="/notes/assets/hooksOther.html.a5a0a25e.js"><link rel="prefetch" href="/notes/assets/start.html.51978aaa.js"><link rel="prefetch" href="/notes/assets/useEffect.html.1bff98bd.js"><link rel="prefetch" href="/notes/assets/useState.html.a4c6be3a.js"><link rel="prefetch" href="/notes/assets/base.html.135cc47e.js"><link rel="prefetch" href="/notes/assets/commpontDiff.html.8c054011.js"><link rel="prefetch" href="/notes/assets/componentUpdate.html.9398fa8f.js"><link rel="prefetch" href="/notes/assets/renderProcess.html.d7ff87fc.js"><link rel="prefetch" href="/notes/assets/schedulingPrinciple.html.78eb1e22.js"><link rel="prefetch" href="/notes/assets/beginWork.html.eb7a1a04.js"><link rel="prefetch" href="/notes/assets/globalVariable.html.d475bd72.js"><link rel="prefetch" href="/notes/assets/mountIndeterminateComponent.html.e277994c.js"><link rel="prefetch" href="/notes/assets/mountLazyCompont.html.b540ec2f.js"><link rel="prefetch" href="/notes/assets/performUnitOfWork.html.5b11df6f.js"><link rel="prefetch" href="/notes/assets/performWork.html.12cd8c4d.js"><link rel="prefetch" href="/notes/assets/reactScheduler.html.17ec9374.js"><link rel="prefetch" href="/notes/assets/reconcileChildren.html.294ea1aa.js"><link rel="prefetch" href="/notes/assets/reconcileChildrenArray.html.9b94a2e8.js"><link rel="prefetch" href="/notes/assets/reconcileSingleElement.html.756fa24e.js"><link rel="prefetch" href="/notes/assets/renderRoot.html.64bde106.js"><link rel="prefetch" href="/notes/assets/scheduleWork.html.f0994327.js"><link rel="prefetch" href="/notes/assets/throwException.html.ca925ef8.js"><link rel="prefetch" href="/notes/assets/updateClassComponent.html.08ae0977.js"><link rel="prefetch" href="/notes/assets/updateContextConsumer.html.888519a1.js"><link rel="prefetch" href="/notes/assets/updateContextProvider.html.36912d50.js"><link rel="prefetch" href="/notes/assets/updateForwardRef.html.6f5870fc.js"><link rel="prefetch" href="/notes/assets/updateFragment.html.fc6d1961.js"><link rel="prefetch" href="/notes/assets/updateFunctionalComponent.html.81da8076.js"><link rel="prefetch" href="/notes/assets/updateHostComponent.html.83d91f15.js"><link rel="prefetch" href="/notes/assets/updateHostRoot.html.45d949cd.js"><link rel="prefetch" href="/notes/assets/updateHostText.html.cba3a336.js"><link rel="prefetch" href="/notes/assets/updateMode.html.01659055.js"><link rel="prefetch" href="/notes/assets/updatePortalComponent.html.783abbd3.js"><link rel="prefetch" href="/notes/assets/updateProfiler.html.ef1c77eb.js"><link rel="prefetch" href="/notes/assets/updateSuspenseComponent.html.639ec87b.js"><link rel="prefetch" href="/notes/assets/interview1.html.fea064db.js"><link rel="prefetch" href="/notes/assets/interview2.html.1fde555d.js"><link rel="prefetch" href="/notes/assets/interview3.html.d2ff4a51.js"><link rel="prefetch" href="/notes/assets/interview51.html.57ddd5f0.js"><link rel="prefetch" href="/notes/assets/interview52.html.0c830c8b.js"><link rel="prefetch" href="/notes/assets/interview53.html.be604923.js"><link rel="prefetch" href="/notes/assets/interview54.html.39b138f4.js"><link rel="prefetch" href="/notes/assets/interview55.html.d388ffed.js"><link rel="prefetch" href="/notes/assets/interview56.html.70a6ce91.js"><link rel="prefetch" href="/notes/assets/interview57.html.2879019d.js"><link rel="prefetch" href="/notes/assets/interview1.html.503d72ef.js"><link rel="prefetch" href="/notes/assets/interview10.html.fab93590.js"><link rel="prefetch" href="/notes/assets/interview11.html.f2c6bf82.js"><link rel="prefetch" href="/notes/assets/interview12.html.d1720372.js"><link rel="prefetch" href="/notes/assets/interview13.html.a2df30dc.js"><link rel="prefetch" href="/notes/assets/interview14.html.bdda1829.js"><link rel="prefetch" href="/notes/assets/interview15.html.01df7e5b.js"><link rel="prefetch" href="/notes/assets/interview16.html.88b79f2c.js"><link rel="prefetch" href="/notes/assets/interview17.html.0b59cd91.js"><link rel="prefetch" href="/notes/assets/interview18.html.9d5a0863.js"><link rel="prefetch" href="/notes/assets/interview19.html.0d35c8b9.js"><link rel="prefetch" href="/notes/assets/interview2.html.441ec65f.js"><link rel="prefetch" href="/notes/assets/interview20.html.af86a67e.js"><link rel="prefetch" href="/notes/assets/interview21.html.04efd949.js"><link rel="prefetch" href="/notes/assets/interview22.html.4d218142.js"><link rel="prefetch" href="/notes/assets/interview23.html.2556b1ac.js"><link rel="prefetch" href="/notes/assets/interview24.html.3e638e8f.js"><link rel="prefetch" href="/notes/assets/interview25.html.b1c7810a.js"><link rel="prefetch" href="/notes/assets/interview26.html.e295d32f.js"><link rel="prefetch" href="/notes/assets/interview27.html.f94037df.js"><link rel="prefetch" href="/notes/assets/interview28.html.d0d1d5fe.js"><link rel="prefetch" href="/notes/assets/interview29.html.b3f46c09.js"><link rel="prefetch" href="/notes/assets/interview3.html.6cb4fe1f.js"><link rel="prefetch" href="/notes/assets/interview30.html.1bf1d12f.js"><link rel="prefetch" href="/notes/assets/interview31.html.b4803f6a.js"><link rel="prefetch" href="/notes/assets/interview32.html.316d4716.js"><link rel="prefetch" href="/notes/assets/interview33.html.23142a19.js"><link rel="prefetch" href="/notes/assets/interview34.html.ad74b4ad.js"><link rel="prefetch" href="/notes/assets/interview35.html.408f079f.js"><link rel="prefetch" href="/notes/assets/interview36.html.6ba47abb.js"><link rel="prefetch" href="/notes/assets/interview37.html.6a75262f.js"><link rel="prefetch" href="/notes/assets/interview38.html.882a5df7.js"><link rel="prefetch" href="/notes/assets/interview39.html.6d16aef4.js"><link rel="prefetch" href="/notes/assets/interview4.html.958fd4a4.js"><link rel="prefetch" href="/notes/assets/interview40.html.62917300.js"><link rel="prefetch" href="/notes/assets/interview41.html.2fd7905b.js"><link rel="prefetch" href="/notes/assets/interview42.html.249a4215.js"><link rel="prefetch" href="/notes/assets/interview43.html.6badd4f5.js"><link rel="prefetch" href="/notes/assets/interview44.html.f6b7a099.js"><link rel="prefetch" href="/notes/assets/interview45.html.5437019a.js"><link rel="prefetch" href="/notes/assets/interview46.html.34596c65.js"><link rel="prefetch" href="/notes/assets/interview47.html.04849c73.js"><link rel="prefetch" href="/notes/assets/interview48.html.445f8cd9.js"><link rel="prefetch" href="/notes/assets/interview49.html.fa449e7a.js"><link rel="prefetch" href="/notes/assets/interview5.html.fa15c3d6.js"><link rel="prefetch" href="/notes/assets/interview50.html.9f7c5425.js"><link rel="prefetch" href="/notes/assets/interview6.html.efd9b095.js"><link rel="prefetch" href="/notes/assets/interview7.html.b5451ac9.js"><link rel="prefetch" href="/notes/assets/interview8.html.2b8cf583.js"><link rel="prefetch" href="/notes/assets/interview9.html.c2498a46.js"><link rel="prefetch" href="/notes/assets/404.html.93146c89.js"><link rel="prefetch" href="/notes/assets/index.html.490f5661.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.6f7cea15.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.deb35cd4.js"><link rel="prefetch" href="/notes/assets/base.html.6c62b6fb.js"><link rel="prefetch" href="/notes/assets/customCli.html.cdd55483.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.815e192d.js"><link rel="prefetch" href="/notes/assets/adapter.html.a44ceaeb.js"><link rel="prefetch" href="/notes/assets/amd.html.20b22c04.js"><link rel="prefetch" href="/notes/assets/builder.html.819856d4.js"><link rel="prefetch" href="/notes/assets/censorJquery.html.12e36907.js"><link rel="prefetch" href="/notes/assets/combination.html.ef660e53.js"><link rel="prefetch" href="/notes/assets/command.html.c56bc8a3.js"><link rel="prefetch" href="/notes/assets/commonJS.html.c8483a81.js"><link rel="prefetch" href="/notes/assets/constructor.html.116e462a.js"><link rel="prefetch" href="/notes/assets/decoration.html.74053abb.js"><link rel="prefetch" href="/notes/assets/esHarmony.html.4782bd07.js"><link rel="prefetch" href="/notes/assets/exposed.html.6d801a89.js"><link rel="prefetch" href="/notes/assets/exterior.html.3ba015c0.js"><link rel="prefetch" href="/notes/assets/factory.html.74fb7de3.js"><link rel="prefetch" href="/notes/assets/flyweight.html.bbb92476.js"><link rel="prefetch" href="/notes/assets/functionalProgramming.html.2dc39613.js"><link rel="prefetch" href="/notes/assets/intermediary.html.de413166.js"><link rel="prefetch" href="/notes/assets/iterator.html.dfdf87d0.js"><link rel="prefetch" href="/notes/assets/lazyInitial.html.978d9fc4.js"><link rel="prefetch" href="/notes/assets/mixin.html.473a1e8a.js"><link rel="prefetch" href="/notes/assets/module.html.7d441d98.js"><link rel="prefetch" href="/notes/assets/mvc.html.aabc12fa.js"><link rel="prefetch" href="/notes/assets/mvp.html.65c40ef6.js"><link rel="prefetch" href="/notes/assets/mvvm.html.05a91e80.js"><link rel="prefetch" href="/notes/assets/observer.html.a094c412.js"><link rel="prefetch" href="/notes/assets/outward.html.364e95dd.js"><link rel="prefetch" href="/notes/assets/overview.html.201c5b55.js"><link rel="prefetch" href="/notes/assets/prototype.html.dcf648bb.js"><link rel="prefetch" href="/notes/assets/proxy.html.10d5c3f2.js"><link rel="prefetch" href="/notes/assets/singleton.html.42a93eb7.js"><link rel="prefetch" href="/notes/assets/axios.html.938d3c1e.js"><link rel="prefetch" href="/notes/assets/createUnderscore.html.819c95ff.js"><link rel="prefetch" href="/notes/assets/jquery.html.f5b08555.js"><link rel="prefetch" href="/notes/assets/lodash.html.b00465a3.js"><link rel="prefetch" href="/notes/assets/sentry.html.7073f6ef.js"><link rel="prefetch" href="/notes/assets/underscore.html.c0163642.js"><link rel="prefetch" href="/notes/assets/vuex.html.841ee230.js"><link rel="prefetch" href="/notes/assets/customCli.html.a3c51029.js"><link rel="prefetch" href="/notes/assets/description.html.90555f47.js"><link rel="prefetch" href="/notes/assets/indx.html.73e86f54.js"><link rel="prefetch" href="/notes/assets/rebase.html.e26c2550.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.1c565126.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.fa0f4627.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.3e2206fb.js"><link rel="prefetch" href="/notes/assets/44Questions.html.812f00cd.js"><link rel="prefetch" href="/notes/assets/asyncAwait.html.c8dca514.js"><link rel="prefetch" href="/notes/assets/babelCompile.html.38d2ca76.js"><link rel="prefetch" href="/notes/assets/base.html.362c13f9.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.9d04aad8.js"><link rel="prefetch" href="/notes/assets/baseWebpack.html.cd027195.js"><link rel="prefetch" href="/notes/assets/codeSeparation.html.064742b9.js"><link rel="prefetch" href="/notes/assets/cycle.html.080737a8.js"><link rel="prefetch" href="/notes/assets/cycleOtherWay.html.c975c52f.js"><link rel="prefetch" href="/notes/assets/executionMechanism.html.47af2c8e.js"><link rel="prefetch" href="/notes/assets/hybrid.html.ab7ca6c0.js"><link rel="prefetch" href="/notes/assets/jsHandwriting.html.19f93e80.js"><link rel="prefetch" href="/notes/assets/jsonStringify.html.60c8adae.js"><link rel="prefetch" href="/notes/assets/largeFileResumableUpload.html.8c926620.js"><link rel="prefetch" href="/notes/assets/performance.html.766c2ce4.js"><link rel="prefetch" href="/notes/assets/promise.html.96594892.js"><link rel="prefetch" href="/notes/assets/promiseAll.html.f8a9b0e4.js"><link rel="prefetch" href="/notes/assets/spa.html.89bc2f0b.js"><link rel="prefetch" href="/notes/assets/tsBaseInterview.html.4d937f73.js"><link rel="prefetch" href="/notes/assets/useEs6.html.9c6907ce.js"><link rel="prefetch" href="/notes/assets/webAnimations.html.c43bb4c6.js"><link rel="prefetch" href="/notes/assets/webpackInterview.html.1442669e.js"><link rel="prefetch" href="/notes/assets/webpackLoader.html.0583e552.js"><link rel="prefetch" href="/notes/assets/webpackPublic.html.48df7e36.js"><link rel="prefetch" href="/notes/assets/weird.html.eba91fd8.js"><link rel="prefetch" href="/notes/assets/es10News.html.6d233dee.js"><link rel="prefetch" href="/notes/assets/es11News.html.b7d9dfeb.js"><link rel="prefetch" href="/notes/assets/es6Interview1.html.473d2feb.js"><link rel="prefetch" href="/notes/assets/es6Interview2.html.192f14ef.js"><link rel="prefetch" href="/notes/assets/es6Interview3.html.67c220ac.js"><link rel="prefetch" href="/notes/assets/es6News.html.613b82d1.js"><link rel="prefetch" href="/notes/assets/es7News.html.0a52655f.js"><link rel="prefetch" href="/notes/assets/es8News.html.239d0a43.js"><link rel="prefetch" href="/notes/assets/es9News.html.61220f9e.js"><link rel="prefetch" href="/notes/assets/base.html.b7cbce50.js"><link rel="prefetch" href="/notes/assets/nginxComprehensiveScene.html.8805f1cb.js"><link rel="prefetch" href="/notes/assets/commonlyUsed.html.8bceadbc.js"><link rel="prefetch" href="/notes/assets/inelegantHook.html.6e361e60.js"><link rel="prefetch" href="/notes/assets/interview1.html.fca7f3c2.js"><link rel="prefetch" href="/notes/assets/interview2.html.110e4242.js"><link rel="prefetch" href="/notes/assets/interview3.html.5c05dbaf.js"><link rel="prefetch" href="/notes/assets/interview4.html.080430ad.js"><link rel="prefetch" href="/notes/assets/base.html.f61f93ec.js"><link rel="prefetch" href="/notes/assets/introduction.html.8057e837.js"><link rel="prefetch" href="/notes/assets/base.html.3fa98e5d.js"><link rel="prefetch" href="/notes/assets/summarize.html.d84cf4b3.js"><link rel="prefetch" href="/notes/assets/_sidebar.html.3fbe7b5e.js"><link rel="prefetch" href="/notes/assets/index.html.63f1e95e.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.8fe24fcf.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.faf49d8c.js"><link rel="prefetch" href="/notes/assets/bigDataRender.html.f24c2232.js"><link rel="prefetch" href="/notes/assets/progress.html.b2e59e77.js"><link rel="prefetch" href="/notes/assets/quirksStandards.html.fb66ac67.js"><link rel="prefetch" href="/notes/assets/redrawReflow.html.5518b388.js"><link rel="prefetch" href="/notes/assets/storageSpace.html.6bd3c7b4.js"><link rel="prefetch" href="/notes/assets/webComLink.html.ecc63f7c.js"><link rel="prefetch" href="/notes/assets/webUrl.html.e4c89367.js"><link rel="prefetch" href="/notes/assets/spanWidthHeight.html.5067481d.js"><link rel="prefetch" href="/notes/assets/baseCss.html.dcc81bb8.js"><link rel="prefetch" href="/notes/assets/blockFormattingContext.html.772fb95c.js"><link rel="prefetch" href="/notes/assets/containingBlock.html.41f148e9.js"><link rel="prefetch" href="/notes/assets/cssBeforeAfter.html.0fc62737.js"><link rel="prefetch" href="/notes/assets/cssBoxModal.html.9ec5f588.js"><link rel="prefetch" href="/notes/assets/cssCollapsing.html.8b27516e.js"><link rel="prefetch" href="/notes/assets/cssCompatible.html.6d3a03eb.js"><link rel="prefetch" href="/notes/assets/cssFlexDemo.html.5fb1558e.js"><link rel="prefetch" href="/notes/assets/cssFlexLayout.html.3e370525.js"><link rel="prefetch" href="/notes/assets/cssGridLayout.html.a639e09f.js"><link rel="prefetch" href="/notes/assets/cssHack.html.c445635a.js"><link rel="prefetch" href="/notes/assets/cssInlineBlock.html.0e06234d.js"><link rel="prefetch" href="/notes/assets/cssPriority.html.f7aa0fb4.js"><link rel="prefetch" href="/notes/assets/cssPseudo.html.bfd67c47.js"><link rel="prefetch" href="/notes/assets/cssPseudoClass.html.1ae4cb11.js"><link rel="prefetch" href="/notes/assets/cssSelector.html.28ca85a2.js"><link rel="prefetch" href="/notes/assets/cssTutorial.html.41582e07.js"><link rel="prefetch" href="/notes/assets/fieldInvalid.html.32761861.js"><link rel="prefetch" href="/notes/assets/frame.html.db6233fd.js"><link rel="prefetch" href="/notes/assets/knowledgePoints.html.24831c15.js"><link rel="prefetch" href="/notes/assets/linkImport.html.a4f7bba4.js"><link rel="prefetch" href="/notes/assets/stackingContext.html.c02d3ed4.js"><link rel="prefetch" href="/notes/assets/tools.html.703c8658.js"><link rel="prefetch" href="/notes/assets/units.html.5d8e3b7a.js"><link rel="prefetch" href="/notes/assets/transform.html.45c91d6f.js"><link rel="prefetch" href="/notes/assets/content.html.e52e89d4.js"><link rel="prefetch" href="/notes/assets/plugins.html.256adedc.js"><link rel="prefetch" href="/notes/assets/accesskey.html.da8aa9f7.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.062d1237.js"><link rel="prefetch" href="/notes/assets/canvasSvg.html.d052369b.js"><link rel="prefetch" href="/notes/assets/deviceAPI.html.3d5fc100.js"><link rel="prefetch" href="/notes/assets/globalAttr.html.b8e7a52b.js"><link rel="prefetch" href="/notes/assets/htmlDatalist.html.47d6056d.js"><link rel="prefetch" href="/notes/assets/htmlElement.html.ec6e7628.js"><link rel="prefetch" href="/notes/assets/interview10.html.96d54bfe.js"><link rel="prefetch" href="/notes/assets/interview11.html.508e7002.js"><link rel="prefetch" href="/notes/assets/interview12.html.7f1477a2.js"><link rel="prefetch" href="/notes/assets/interview13.html.e0323486.js"><link rel="prefetch" href="/notes/assets/interview14.html.64a4406b.js"><link rel="prefetch" href="/notes/assets/interview15.html.cdcdbd6e.js"><link rel="prefetch" href="/notes/assets/interview16.html.ba4eefd4.js"><link rel="prefetch" href="/notes/assets/interview17.html.a0a69f68.js"><link rel="prefetch" href="/notes/assets/interview18.html.a1a1e1f2.js"><link rel="prefetch" href="/notes/assets/interview19.html.7965539b.js"><link rel="prefetch" href="/notes/assets/interview20.html.24f749e1.js"><link rel="prefetch" href="/notes/assets/interview21.html.af7e3b01.js"><link rel="prefetch" href="/notes/assets/interview22.html.b32ae096.js"><link rel="prefetch" href="/notes/assets/interview23.html.c1fd2491.js"><link rel="prefetch" href="/notes/assets/interview24.html.545861a4.js"><link rel="prefetch" href="/notes/assets/interview25.html.513b8677.js"><link rel="prefetch" href="/notes/assets/interview26.html.a8f70d07.js"><link rel="prefetch" href="/notes/assets/interview27.html.05225641.js"><link rel="prefetch" href="/notes/assets/interview28.html.f99e6c67.js"><link rel="prefetch" href="/notes/assets/interview29.html.1d910c4e.js"><link rel="prefetch" href="/notes/assets/interview30.html.86d51a5c.js"><link rel="prefetch" href="/notes/assets/interview31.html.43f72f68.js"><link rel="prefetch" href="/notes/assets/interview32.html.2270b378.js"><link rel="prefetch" href="/notes/assets/interview33.html.c9227354.js"><link rel="prefetch" href="/notes/assets/interview34.html.89a77d11.js"><link rel="prefetch" href="/notes/assets/interview35.html.5cf030b5.js"><link rel="prefetch" href="/notes/assets/interview36.html.d9bba4f2.js"><link rel="prefetch" href="/notes/assets/interview37.html.7d514dd5.js"><link rel="prefetch" href="/notes/assets/interview38.html.dab0e78e.js"><link rel="prefetch" href="/notes/assets/interview39.html.7e573dba.js"><link rel="prefetch" href="/notes/assets/interview40.html.181ab8d8.js"><link rel="prefetch" href="/notes/assets/interview41.html.95372d7c.js"><link rel="prefetch" href="/notes/assets/interview42.html.6873d68e.js"><link rel="prefetch" href="/notes/assets/interview43.html.5420d92c.js"><link rel="prefetch" href="/notes/assets/interview44.html.deac5c68.js"><link rel="prefetch" href="/notes/assets/interview45.html.b3fbb359.js"><link rel="prefetch" href="/notes/assets/interview46.html.e1467a48.js"><link rel="prefetch" href="/notes/assets/interview47.html.ee410aa1.js"><link rel="prefetch" href="/notes/assets/interview48.html.44033252.js"><link rel="prefetch" href="/notes/assets/interview49.html.b4a66320.js"><link rel="prefetch" href="/notes/assets/interview5.html.22a02e88.js"><link rel="prefetch" href="/notes/assets/interview50.html.100767e7.js"><link rel="prefetch" href="/notes/assets/interview51.html.34b9f987.js"><link rel="prefetch" href="/notes/assets/interview52.html.b6942ada.js"><link rel="prefetch" href="/notes/assets/interview53.html.3277511f.js"><link rel="prefetch" href="/notes/assets/interview54.html.5988413b.js"><link rel="prefetch" href="/notes/assets/interview55.html.e4dd71d9.js"><link rel="prefetch" href="/notes/assets/interview56.html.3d5bb2d9.js"><link rel="prefetch" href="/notes/assets/interview57.html.028e8cd6.js"><link rel="prefetch" href="/notes/assets/interview58.html.616efa26.js"><link rel="prefetch" href="/notes/assets/interview59.html.7143742d.js"><link rel="prefetch" href="/notes/assets/interview6.html.18a3f49e.js"><link rel="prefetch" href="/notes/assets/interview7.html.10a3f4fc.js"><link rel="prefetch" href="/notes/assets/interview8.html.68ff31a2.js"><link rel="prefetch" href="/notes/assets/interview9.html.04bcd669.js"><link rel="prefetch" href="/notes/assets/linkImport.html.3f2fa6c5.js"><link rel="prefetch" href="/notes/assets/offlineStorage.html.d28d82d1.js"><link rel="prefetch" href="/notes/assets/regular.html.9400b725.js"><link rel="prefetch" href="/notes/assets/shake.html.1aa12c44.js"><link rel="prefetch" href="/notes/assets/webWorker.html.2f1c0995.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.70e8e4f5.js"><link rel="prefetch" href="/notes/assets/cors.html.269cbfc6.js"><link rel="prefetch" href="/notes/assets/crossDomainCookie.html.51da8d94.js"><link rel="prefetch" href="/notes/assets/fetch.html.29b8b3a9.js"><link rel="prefetch" href="/notes/assets/nestAxios.html.3980ab63.js"><link rel="prefetch" href="/notes/assets/debounce.html.16f53fa8.js"><link rel="prefetch" href="/notes/assets/lodashPrinciple.html.c044c52e.js"><link rel="prefetch" href="/notes/assets/lodashThrottleDebounce.html.e1f271a7.js"><link rel="prefetch" href="/notes/assets/throttle.html.2f03a279.js"><link rel="prefetch" href="/notes/assets/throttleDebounceReact.html.7fa98635.js"><link rel="prefetch" href="/notes/assets/cloneIntroduction.html.b3373c50.js"><link rel="prefetch" href="/notes/assets/deepClone.html.c575c0a6.js"><link rel="prefetch" href="/notes/assets/lodashDeepClone.html.9e5d6224.js"><link rel="prefetch" href="/notes/assets/objectAssign.html.8da47e2c.js"><link rel="prefetch" href="/notes/assets/arraySourceCode.html.76e3129a.js"><link rel="prefetch" href="/notes/assets/baseHigh.html.32031919.js"><link rel="prefetch" href="/notes/assets/currying.html.54d12e53.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.262c3846.js"><link rel="prefetch" href="/notes/assets/eventLoop.html.78723c36.js"><link rel="prefetch" href="/notes/assets/iife.html.9622683e.js"><link rel="prefetch" href="/notes/assets/interview1.html.eb84f468.js"><link rel="prefetch" href="/notes/assets/jsCompatible.html.748bedd8.js"><link rel="prefetch" href="/notes/assets/baseProyotype.html.c354ec80.js"><link rel="prefetch" href="/notes/assets/functionObjectResource.html.a069ec2c.js"><link rel="prefetch" href="/notes/assets/prototypeInherit.html.1913d643.js"><link rel="prefetch" href="/notes/assets/closureInterview.html.140f1ba1.js"><link rel="prefetch" href="/notes/assets/scopeChain.html.0f32c944.js"><link rel="prefetch" href="/notes/assets/understandingClosures.html.00574a41.js"><link rel="prefetch" href="/notes/assets/executionStack.html.c9fff070.js"><link rel="prefetch" href="/notes/assets/memoryLeak.html.633d8a38.js"><link rel="prefetch" href="/notes/assets/memoryMechanism.html.7aa51c23.js"><link rel="prefetch" href="/notes/assets/memorySpace.html.c9b7f878.js"><link rel="prefetch" href="/notes/assets/precompiled.html.f0b91c9d.js"><link rel="prefetch" href="/notes/assets/variableObject.html.cf446c8d.js"><link rel="prefetch" href="/notes/assets/arrowFunctionThis.html.790b85fb.js"><link rel="prefetch" href="/notes/assets/bindSimulation.html.76305037.js"><link rel="prefetch" href="/notes/assets/callApply.html.9fb10f4f.js"><link rel="prefetch" href="/notes/assets/newSimulation.html.7bf853f6.js"><link rel="prefetch" href="/notes/assets/thisBind.html.2c050b84.js"><link rel="prefetch" href="/notes/assets/interview1.html.d4f626fd.js"><link rel="prefetch" href="/notes/assets/interview10.html.6ca6973c.js"><link rel="prefetch" href="/notes/assets/interview11.html.17c4f8b4.js"><link rel="prefetch" href="/notes/assets/interview12.html.ed141ff8.js"><link rel="prefetch" href="/notes/assets/interview13.html.1a636d53.js"><link rel="prefetch" href="/notes/assets/interview14.html.79e3ebe2.js"><link rel="prefetch" href="/notes/assets/interview15.html.7de48d46.js"><link rel="prefetch" href="/notes/assets/interview16.html.5f2949b4.js"><link rel="prefetch" href="/notes/assets/interview17.html.312445b3.js"><link rel="prefetch" href="/notes/assets/interview18.html.a4ede7f9.js"><link rel="prefetch" href="/notes/assets/interview19.html.28abb805.js"><link rel="prefetch" href="/notes/assets/interview2.html.d4a510fa.js"><link rel="prefetch" href="/notes/assets/interview20.html.7234cb26.js"><link rel="prefetch" href="/notes/assets/interview21.html.09576fb5.js"><link rel="prefetch" href="/notes/assets/interview22.html.6f359bff.js"><link rel="prefetch" href="/notes/assets/interview23.html.a2f5672e.js"><link rel="prefetch" href="/notes/assets/interview24.html.8d5a9fce.js"><link rel="prefetch" href="/notes/assets/interview25.html.15afa4a4.js"><link rel="prefetch" href="/notes/assets/interview26.html.c8065d3a.js"><link rel="prefetch" href="/notes/assets/interview27.html.8115f361.js"><link rel="prefetch" href="/notes/assets/interview28.html.11460093.js"><link rel="prefetch" href="/notes/assets/interview29.html.c7307464.js"><link rel="prefetch" href="/notes/assets/interview3.html.d29006d4.js"><link rel="prefetch" href="/notes/assets/interview30.html.10fa13a5.js"><link rel="prefetch" href="/notes/assets/interview4.html.045f02cc.js"><link rel="prefetch" href="/notes/assets/interview5.html.9e6041fd.js"><link rel="prefetch" href="/notes/assets/interview6.html.64635db7.js"><link rel="prefetch" href="/notes/assets/interview7.html.6de5626d.js"><link rel="prefetch" href="/notes/assets/interview8.html.616112bd.js"><link rel="prefetch" href="/notes/assets/interview9.html.23fac0ea.js"><link rel="prefetch" href="/notes/assets/adjacentSiblingCombinator.html.2f2b12ad.js"><link rel="prefetch" href="/notes/assets/attributeSelectors.html.a81a5ada.js"><link rel="prefetch" href="/notes/assets/charset.html.d9de35c1.js"><link rel="prefetch" href="/notes/assets/childCombinator.html.833101e7.js"><link rel="prefetch" href="/notes/assets/classSelectors.html.d8d3d32a.js"><link rel="prefetch" href="/notes/assets/descendantCombinator.html.0b643d73.js"><link rel="prefetch" href="/notes/assets/generalSiblingCombinator.html.aa07b272.js"><link rel="prefetch" href="/notes/assets/iDSelectors.html.d5dbbdc1.js"><link rel="prefetch" href="/notes/assets/pseudoClasses.html.cd943327.js"><link rel="prefetch" href="/notes/assets/pseudoElements.html.c50b5f7f.js"><link rel="prefetch" href="/notes/assets/selectorList.html.34628479.js"><link rel="prefetch" href="/notes/assets/typeSelectors.html.477de8dc.js"><link rel="prefetch" href="/notes/assets/universalSelectors.html.937ca9e9.js"><link rel="prefetch" href="/notes/assets/IterationProtocols.html.f4765781.js"><link rel="prefetch" href="/notes/assets/arrayFlat.html.0dfde823.js"><link rel="prefetch" href="/notes/assets/asyncHistory.html.52a318e9.js"><link rel="prefetch" href="/notes/assets/eventLoop.html.c59bde25.js"><link rel="prefetch" href="/notes/assets/fileReader.html.4d5c3e37.js"><link rel="prefetch" href="/notes/assets/formData.html.6abfb9ed.js"><link rel="prefetch" href="/notes/assets/functionGenerator.html.3ede89d4.js"><link rel="prefetch" href="/notes/assets/generator.html.1fdcf07f.js"><link rel="prefetch" href="/notes/assets/intersectionObserver.html.ae95effd.js"><link rel="prefetch" href="/notes/assets/map.html.baf8011b.js"><link rel="prefetch" href="/notes/assets/promise.html.0e60cf53.js"><link rel="prefetch" href="/notes/assets/set.html.4acb8e4f.js"><link rel="prefetch" href="/notes/assets/string.html.9d57fff7.js"><link rel="prefetch" href="/notes/assets/symbol.html.2a6ac0b4.js"><link rel="prefetch" href="/notes/assets/xMLHttpRequest.html.7bcb8ef8.js"><link rel="prefetch" href="/notes/assets/spreadSyntax.html.68280666.js"><link rel="prefetch" href="/notes/assets/strictMode.html.210a4c95.js"><link rel="prefetch" href="/notes/assets/cache.html.c537e5a5.js"><link rel="prefetch" href="/notes/assets/drag1.html.e559af1c.js"><link rel="prefetch" href="/notes/assets/oneLineCode.html.36316d19.js"><link rel="prefetch" href="/notes/assets/oneLineCodeArray.html.8640761f.js"><link rel="prefetch" href="/notes/assets/oneLineCodeDOM.html.31496e47.js"><link rel="prefetch" href="/notes/assets/oneLineCodeDateTime.html.7f53b6ef.js"><link rel="prefetch" href="/notes/assets/oneLineCodeFunction.html.32c7ebad.js"><link rel="prefetch" href="/notes/assets/oneLineCodeMath.html.dc638368.js"><link rel="prefetch" href="/notes/assets/oneLineCodeMisc.html.ef0f5454.js"><link rel="prefetch" href="/notes/assets/oneLineCodeNumber.html.48d9ddaa.js"><link rel="prefetch" href="/notes/assets/oneLineCodeObject.html.0710e654.js"><link rel="prefetch" href="/notes/assets/oneLineCodeRandom.html.dfe334c0.js"><link rel="prefetch" href="/notes/assets/oneLineCodeString.html.ea148b8a.js"><link rel="prefetch" href="/notes/assets/oneLineCodeValidator.html.119505df.js"><link rel="prefetch" href="/notes/assets/typeScriptCache.html.73a6a8b8.js"><link rel="prefetch" href="/notes/assets/reactBase.html.f45b86cf.js"><link rel="prefetch" href="/notes/assets/reactTypescript.html.0d3065c2.js"><link rel="prefetch" href="/notes/assets/vue2Base.html.e8913744.js"><link rel="prefetch" href="/notes/assets/vue2Table.html.7978fc0e.js"><link rel="prefetch" href="/notes/assets/vue2offsetTop.html.5812fa63.js"><link rel="prefetch" href="/notes/assets/componentWillXXX.html.9241f27d.js"><link rel="prefetch" href="/notes/assets/disrupt.html.eeef9302.js"><link rel="prefetch" href="/notes/assets/lane.html.ae995fd8.js"><link rel="prefetch" href="/notes/assets/prepare.html.2e1027a7.js"><link rel="prefetch" href="/notes/assets/redux.html.4142d7bc.js"><link rel="prefetch" href="/notes/assets/scheduler.html.6a76181d.js"><link rel="prefetch" href="/notes/assets/multi.html.000b6325.js"><link rel="prefetch" href="/notes/assets/one.html.2042dda9.js"><link rel="prefetch" href="/notes/assets/prepare.html.d5bc7c64.js"><link rel="prefetch" href="/notes/assets/create.html.2f2964c6.js"><link rel="prefetch" href="/notes/assets/prepare.html.bd4cd1fe.js"><link rel="prefetch" href="/notes/assets/structure.html.ba5586dd.js"><link rel="prefetch" href="/notes/assets/useeffect.html.69f0f281.js"><link rel="prefetch" href="/notes/assets/usememo.html.3492fe61.js"><link rel="prefetch" href="/notes/assets/useref.html.628e47a9.js"><link rel="prefetch" href="/notes/assets/usestate.html.5b6c62d5.js"><link rel="prefetch" href="/notes/assets/file.html.c53ada72.js"><link rel="prefetch" href="/notes/assets/idea.html.c18385c7.js"><link rel="prefetch" href="/notes/assets/jsx.html.7afa535a.js"><link rel="prefetch" href="/notes/assets/newConstructure.html.05f3fa00.js"><link rel="prefetch" href="/notes/assets/oldConstructure.html.a1d30de1.js"><link rel="prefetch" href="/notes/assets/source.html.1e3826d0.js"><link rel="prefetch" href="/notes/assets/summary.html.769f4f91.js"><link rel="prefetch" href="/notes/assets/basePrinciple.html.f6f4b699.js"><link rel="prefetch" href="/notes/assets/componentApi.html.417c5bda.js"><link rel="prefetch" href="/notes/assets/domApi.html.f3f850a1.js"><link rel="prefetch" href="/notes/assets/hoc.html.a980dc10.js"><link rel="prefetch" href="/notes/assets/hookApi.html.15a4bb84.js"><link rel="prefetch" href="/notes/assets/hookCustom.html.0a96b5bb.js"><link rel="prefetch" href="/notes/assets/hookUse.html.890d61b2.js"><link rel="prefetch" href="/notes/assets/reactKeeplive.html.3492d199.js"><link rel="prefetch" href="/notes/assets/reactRedux.html.c6030672.js"><link rel="prefetch" href="/notes/assets/reactRouter.html.29bf3afe.js"><link rel="prefetch" href="/notes/assets/toolApi.html.09a22669.js"><link rel="prefetch" href="/notes/assets/beginWork.html.16572520.js"><link rel="prefetch" href="/notes/assets/completeWork.html.b2481b74.js"><link rel="prefetch" href="/notes/assets/doubleBuffer.html.7f8506ce.js"><link rel="prefetch" href="/notes/assets/fiber-mental.html.0f46dff2.js"><link rel="prefetch" href="/notes/assets/fiber.html.0f3211d1.js"><link rel="prefetch" href="/notes/assets/reconciler.html.893e8e2a.js"><link rel="prefetch" href="/notes/assets/beforeMutation.html.befe255b.js"><link rel="prefetch" href="/notes/assets/layout.html.5fcbef7f.js"><link rel="prefetch" href="/notes/assets/mutation.html.79a6db98.js"><link rel="prefetch" href="/notes/assets/prepare.html.4621d2ad.js"><link rel="prefetch" href="/notes/assets/mental.html.b088e182.js"><link rel="prefetch" href="/notes/assets/prepare.html.4a78c076.js"><link rel="prefetch" href="/notes/assets/priority.html.8cc1b0ad.js"><link rel="prefetch" href="/notes/assets/reactdom.html.abb1862f.js"><link rel="prefetch" href="/notes/assets/setstate.html.3c87f076.js"><link rel="prefetch" href="/notes/assets/update.html.39ad4b31.js"><link rel="prefetch" href="/notes/assets/bitfiled.html.19112655.js"><link rel="prefetch" href="/notes/assets/dfs.html.0fded7e3.js"><link rel="prefetch" href="/notes/assets/diff.html.7e5632e4.js"><link rel="prefetch" href="/notes/assets/heapsort.html.429b793c.js"><link rel="prefetch" href="/notes/assets/linkedlist.html.89f4eb0d.js"><link rel="prefetch" href="/notes/assets/stack.html.f99cb916.js"><link rel="prefetch" href="/notes/assets/bootstrap.html.4c75b725.js"><link rel="prefetch" href="/notes/assets/context.html.bf7b6610.js"><link rel="prefetch" href="/notes/assets/fibertree-commit.html.9d54f8bd.js"><link rel="prefetch" href="/notes/assets/fibertree-create.html.43781cf9.js"><link rel="prefetch" href="/notes/assets/fibertree-prepare.html.cfaca4d8.js"><link rel="prefetch" href="/notes/assets/fibertree-update.html.14f0b51e.js"><link rel="prefetch" href="/notes/assets/hook-effect.html.5dea0406.js"><link rel="prefetch" href="/notes/assets/hook-state.html.017f0942.js"><link rel="prefetch" href="/notes/assets/hook-summary.html.0e9fa807.js"><link rel="prefetch" href="/notes/assets/macro-structure.html.0e7b1078.js"><link rel="prefetch" href="/notes/assets/object-structure.html.373e3aa3.js"><link rel="prefetch" href="/notes/assets/priority.html.5088560f.js"><link rel="prefetch" href="/notes/assets/reconciler-workflow.html.ab748b05.js"><link rel="prefetch" href="/notes/assets/scheduler.html.e9274295.js"><link rel="prefetch" href="/notes/assets/state-effects.html.4ae51cd9.js"><link rel="prefetch" href="/notes/assets/synthetic-event.html.2ddae420.js"><link rel="prefetch" href="/notes/assets/workloop.html.d65c520e.js"><link rel="prefetch" href="/notes/assets/ast.html.beb11b17.js"><link rel="prefetch" href="/notes/assets/binder.html.cba4f2e3.js"><link rel="prefetch" href="/notes/assets/checker.html.2006d21a.js"><link rel="prefetch" href="/notes/assets/emitter.html.c6bb5bb4.js"><link rel="prefetch" href="/notes/assets/overview.html.2e3c5709.js"><link rel="prefetch" href="/notes/assets/parser.html.c289e4d0.js"><link rel="prefetch" href="/notes/assets/program.html.4f545673.js"><link rel="prefetch" href="/notes/assets/scanner.html.4fff7664.js"><link rel="prefetch" href="/notes/assets/common.html.1a6cd9c1.js"><link rel="prefetch" href="/notes/assets/interpreting.html.f60147b2.js"><link rel="prefetch" href="/notes/assets/class.html.d3afb35f.js"><link rel="prefetch" href="/notes/assets/commandline-behavior.html.7643ba47.js"><link rel="prefetch" href="/notes/assets/comments.html.e61c259d.js"><link rel="prefetch" href="/notes/assets/common-bug-not-bugs.html.7597801d.js"><link rel="prefetch" href="/notes/assets/common-feature-request.html.2ba00cd2.js"><link rel="prefetch" href="/notes/assets/decorators.html.c8f938ae.js"><link rel="prefetch" href="/notes/assets/enums.html.e2b7057c.js"><link rel="prefetch" href="/notes/assets/function.html.ab869b45.js"><link rel="prefetch" href="/notes/assets/generics.html.56c6e0dc.js"><link rel="prefetch" href="/notes/assets/glossary-and-terms.html.47f01422.js"><link rel="prefetch" href="/notes/assets/jsx-and-react.html.bd38035c.js"><link rel="prefetch" href="/notes/assets/modules.html.95addf8a.js"><link rel="prefetch" href="/notes/assets/thing-that-dont-work.html.f33c8f68.js"><link rel="prefetch" href="/notes/assets/tsconfig-behavior.html.28317f21.js"><link rel="prefetch" href="/notes/assets/type-guards.html.b78f4e3e.js"><link rel="prefetch" href="/notes/assets/type-system-behavior.html.52904985.js"><link rel="prefetch" href="/notes/assets/nonReactJSX.html.cd63d8f2.js"><link rel="prefetch" href="/notes/assets/reactJSX.html.37657602.js"><link rel="prefetch" href="/notes/assets/support.html.0bd44cc9.js"><link rel="prefetch" href="/notes/assets/typescript-3.7.html.c25445c7.js"><link rel="prefetch" href="/notes/assets/typescript-3.8.html.a9925605.js"><link rel="prefetch" href="/notes/assets/typescript-3.9.html.7ea8730d.js"><link rel="prefetch" href="/notes/assets/compilationContext.html.2b401923.js"><link rel="prefetch" href="/notes/assets/declarationspaces.html.b284d50e.js"><link rel="prefetch" href="/notes/assets/dynamicImportExpressions.html.2bd44034.js"><link rel="prefetch" href="/notes/assets/inDepthTs.html.17f49163.js"><link rel="prefetch" href="/notes/assets/modules.html.ceb9d4fa.js"><link rel="prefetch" href="/notes/assets/namespaces.html.ca6ba8d4.js"><link rel="prefetch" href="/notes/assets/unknownAny.html.265213c0.js"><link rel="prefetch" href="/notes/assets/avoidExportDefault.html.ad898344.js"><link rel="prefetch" href="/notes/assets/barrel.html.4acd9adb.js"><link rel="prefetch" href="/notes/assets/bind.html.fd111e0e.js"><link rel="prefetch" href="/notes/assets/buildToggles.html.110b3f69.js"><link rel="prefetch" href="/notes/assets/classAreUseful.html.f81e28b6.js"><link rel="prefetch" href="/notes/assets/covarianceAndContravariance.html.6608b24b.js"><link rel="prefetch" href="/notes/assets/createArrays.html.d56cea9f.js"><link rel="prefetch" href="/notes/assets/curry.html.6d118bcf.js"><link rel="prefetch" href="/notes/assets/functionParameters.html.380c1f14.js"><link rel="prefetch" href="/notes/assets/infer.html.307b5a67.js"><link rel="prefetch" href="/notes/assets/lazyObjectLiteralInitialization.html.38c4fa31.js"><link rel="prefetch" href="/notes/assets/limitPropertySetters.html.9a3aadab.js"><link rel="prefetch" href="/notes/assets/metadata.html.fd7fb31b.js"><link rel="prefetch" href="/notes/assets/nominalTyping.html.791dfe74.js"><link rel="prefetch" href="/notes/assets/outFileCaution.html.b372f00f.js"><link rel="prefetch" href="/notes/assets/singletonPatern.html.2477cb96.js"><link rel="prefetch" href="/notes/assets/statefulFunctions.html.2e4a766d.js"><link rel="prefetch" href="/notes/assets/staticConstructors.html.79db4608.js"><link rel="prefetch" href="/notes/assets/stringBasedEmuns.html.ec2b7d1a.js"><link rel="prefetch" href="/notes/assets/truthy.html.19dc22d4.js"><link rel="prefetch" href="/notes/assets/typeInstantiation.html.c8b25c9f.js"><link rel="prefetch" href="/notes/assets/typesafeEventEmitter.html.90ad8a9c.js"><link rel="prefetch" href="/notes/assets/ambient.html.8e6349df.js"><link rel="prefetch" href="/notes/assets/callable.html.edfba65f.js"><link rel="prefetch" href="/notes/assets/discrominatedUnion.html.b05c13a6.js"><link rel="prefetch" href="/notes/assets/enums.html.0eef83c1.js"><link rel="prefetch" href="/notes/assets/exceptionsHanding.html.481d9cdb.js"><link rel="prefetch" href="/notes/assets/freshness.html.e30e89a4.js"><link rel="prefetch" href="/notes/assets/functions.html.bb08d776.js"><link rel="prefetch" href="/notes/assets/generices.html.f07340ea.js"><link rel="prefetch" href="/notes/assets/indexSignatures.html.794ebca7.js"><link rel="prefetch" href="/notes/assets/interfaces.html.b297dfd6.js"><link rel="prefetch" href="/notes/assets/lib.html.955bbbf4.js"><link rel="prefetch" href="/notes/assets/literals.html.2ad48f43.js"><link rel="prefetch" href="/notes/assets/migrating.html.d2cb01d0.js"><link rel="prefetch" href="/notes/assets/mixins.html.7489d6a5.js"><link rel="prefetch" href="/notes/assets/movingTypes.html.9b70bc29.js"><link rel="prefetch" href="/notes/assets/neverType.html.6130dbe7.js"><link rel="prefetch" href="/notes/assets/overview.html.bbc2135c.js"><link rel="prefetch" href="/notes/assets/readonly.html.57ed9d2e.js"><link rel="prefetch" href="/notes/assets/thisType.html.27a581e2.js"><link rel="prefetch" href="/notes/assets/typeAssertion.html.ea197ccc.js"><link rel="prefetch" href="/notes/assets/typeCompatibility.html.3a8dfb8a.js"><link rel="prefetch" href="/notes/assets/typeGuard.html.cff9a703.js"><link rel="prefetch" href="/notes/assets/typeInference.html.3673be84.js"><link rel="prefetch" href="/notes/assets/types.html.9ff3d722.js"><link rel="prefetch" href="/notes/assets/pluginDva.html.01ddaa16.js"><link rel="prefetch" href="/notes/assets/pluginQiankun.html.0ac0ccad.js"><link rel="prefetch" href="/notes/assets/codegen.html.015ee716.js"><link rel="prefetch" href="/notes/assets/entrance.html.f4bef46d.js"><link rel="prefetch" href="/notes/assets/optimize.html.a57d3184.js"><link rel="prefetch" href="/notes/assets/outline.html.c783922a.js"><link rel="prefetch" href="/notes/assets/parse.html.96cccf1a.js"><link rel="prefetch" href="/notes/assets/async-component.html.dc3c8e06.js"><link rel="prefetch" href="/notes/assets/component-register.html.50a70cdb.js"><link rel="prefetch" href="/notes/assets/create-component.html.16be7d51.js"><link rel="prefetch" href="/notes/assets/lifecycle.html.07fa9884.js"><link rel="prefetch" href="/notes/assets/merge-option.html.65eb0328.js"><link rel="prefetch" href="/notes/assets/outline.html.94924ef1.js"><link rel="prefetch" href="/notes/assets/patch.html.975445bb.js"><link rel="prefetch" href="/notes/assets/_index.html.e72f1c53.js"><link rel="prefetch" href="/notes/assets/create-element.html.e9fe6e7a.js"><link rel="prefetch" href="/notes/assets/mounted.html.0034300c.js"><link rel="prefetch" href="/notes/assets/new-vue.html.87e50362.js"><link rel="prefetch" href="/notes/assets/render.html.584c75bd.js"><link rel="prefetch" href="/notes/assets/update.html.2fb8f98e.js"><link rel="prefetch" href="/notes/assets/virtual-dom.html.b3efca06.js"><link rel="prefetch" href="/notes/assets/event.html.778baae3.js"><link rel="prefetch" href="/notes/assets/keep-alive.html.b44cd112.js"><link rel="prefetch" href="/notes/assets/outline.html.eae55f37.js"><link rel="prefetch" href="/notes/assets/slot.html.63c0f12e.js"><link rel="prefetch" href="/notes/assets/tansition-group.html.af83611b.js"><link rel="prefetch" href="/notes/assets/tansition.html.df64aa94.js"><link rel="prefetch" href="/notes/assets/v-model.html.38480dd4.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.24820dd8.js"><link rel="prefetch" href="/notes/assets/baseInterviewSecond.html.850775ab.js"><link rel="prefetch" href="/notes/assets/componentCommunication.html.22120838.js"><link rel="prefetch" href="/notes/assets/detailedResponsiveness.html.fb738a2b.js"><link rel="prefetch" href="/notes/assets/diff.html.25c285a2.js"><link rel="prefetch" href="/notes/assets/eventBinding.html.53c6e5f4.js"><link rel="prefetch" href="/notes/assets/eventMechanism.html.650dcddd.js"><link rel="prefetch" href="/notes/assets/key.html.6208fa05.js"><link rel="prefetch" href="/notes/assets/knowledgeSystem.html.ef1ce801.js"><link rel="prefetch" href="/notes/assets/slot.html.78d03985.js"><link rel="prefetch" href="/notes/assets/sourceCodeAsyncDomUpdateNextTick.html.1df23d03.js"><link rel="prefetch" href="/notes/assets/sourceCodeElementBroadcastDispatch.html.5007afc2.js"><link rel="prefetch" href="/notes/assets/sourceCodeKeepAlive.html.9d39071a.js"><link rel="prefetch" href="/notes/assets/sourceCodeResponsiveness.html.fc1aa282.js"><link rel="prefetch" href="/notes/assets/sourceCodeTemplateCompilation.html.e90c4c46.js"><link rel="prefetch" href="/notes/assets/sourceCodeTemplateDom.html.86fa8425.js"><link rel="prefetch" href="/notes/assets/sourceCodeVuex.html.a53218fb.js"><link rel="prefetch" href="/notes/assets/templateCompilation.html.1a0c7440.js"><link rel="prefetch" href="/notes/assets/vNode.html.1643de77.js"><link rel="prefetch" href="/notes/assets/vNodeDiff.html.f7dc373a.js"><link rel="prefetch" href="/notes/assets/build.html.7d8627b9.js"><link rel="prefetch" href="/notes/assets/directory.html.cfa26962.js"><link rel="prefetch" href="/notes/assets/entrance.html.d3fc78a2.js"><link rel="prefetch" href="/notes/assets/flow.html.f99c7abb.js"><link rel="prefetch" href="/notes/assets/component-update.html.f00de781.js"><link rel="prefetch" href="/notes/assets/computed-watcher.html.d4c60d4f.js"><link rel="prefetch" href="/notes/assets/getters.html.c61d2259.js"><link rel="prefetch" href="/notes/assets/next-tick.html.c76b2c3c.js"><link rel="prefetch" href="/notes/assets/outline.html.3f41402f.js"><link rel="prefetch" href="/notes/assets/props.html.2a3bccf3.js"><link rel="prefetch" href="/notes/assets/questions.html.426b2bde.js"><link rel="prefetch" href="/notes/assets/reactive-object.html.c6526cd3.js"><link rel="prefetch" href="/notes/assets/setters.html.8156f736.js"><link rel="prefetch" href="/notes/assets/summary.html.feb9ae5a.js"><link rel="prefetch" href="/notes/assets/install.html.03b44091.js"><link rel="prefetch" href="/notes/assets/matcher.html.fab2e72c.js"><link rel="prefetch" href="/notes/assets/outline.html.61d9b9af.js"><link rel="prefetch" href="/notes/assets/router.html.1f96e420.js"><link rel="prefetch" href="/notes/assets/transition-to.html.2275aa3d.js"><link rel="prefetch" href="/notes/assets/api.html.9bdf9996.js"><link rel="prefetch" href="/notes/assets/idex.html.cab0ff28.js"><link rel="prefetch" href="/notes/assets/init.html.30ad0cc6.js"><link rel="prefetch" href="/notes/assets/plugin.html.95963be7.js"><link rel="prefetch" href="/notes/assets/baseInterview.html.17fdbee3.js"><link rel="prefetch" href="/notes/assets/configuration.html.a994f90e.js"><link rel="prefetch" href="/notes/assets/entryPoints.html.65860ed3.js"><link rel="prefetch" href="/notes/assets/loader.html.bc60d1ae.js"><link rel="prefetch" href="/notes/assets/output.html.d4a59162.js"><link rel="prefetch" href="/notes/assets/plugin.html.f57f18c8.js"><link rel="prefetch" href="/notes/assets/webpackInterview.html.1366bafe.js"><link rel="prefetch" href="/notes/assets/reactApi.html.4c32bf7f.js"><link rel="prefetch" href="/notes/assets/reactChildren.html.26b5b3d4.js"><link rel="prefetch" href="/notes/assets/reactElement.html.12bfa0e7.js"><link rel="prefetch" href="/notes/assets/reactFiber.html.3f2f7c58.js"><link rel="prefetch" href="/notes/assets/commitAllHostEffects.html.03d28d6e.js"><link rel="prefetch" href="/notes/assets/commitAllLifeCycles.html.a84e1f86.js"><link rel="prefetch" href="/notes/assets/commitBeforeMutationLifecycles.html.eb999914.js"><link rel="prefetch" href="/notes/assets/commitDeletion.html.92026acc.js"><link rel="prefetch" href="/notes/assets/commitPlacement.html.496396a1.js"><link rel="prefetch" href="/notes/assets/commitRoot.html.340302c2.js"><link rel="prefetch" href="/notes/assets/commitWork.html.39487f3d.js"><link rel="prefetch" href="/notes/assets/invokeGuardedCallback.html.1751ae39.js"><link rel="prefetch" href="/notes/assets/expirationTime.html.0e149da5.js"><link rel="prefetch" href="/notes/assets/reactDomRender.html.a00334f9.js"><link rel="prefetch" href="/notes/assets/setStateForceUpdate.html.7f20667e.js"><link rel="prefetch" href="/notes/assets/context.html.3057bf2a.js"><link rel="prefetch" href="/notes/assets/evenInit.html.590ab88f.js"><link rel="prefetch" href="/notes/assets/eventBind.html.187326a9.js"><link rel="prefetch" href="/notes/assets/eventCreateEventObject.html.e9a7fe55.js"><link rel="prefetch" href="/notes/assets/eventDispath.html.22d8c683.js"><link rel="prefetch" href="/notes/assets/hydrate.html.e6027159.js"><link rel="prefetch" href="/notes/assets/ref.html.0491bcff.js"><link rel="prefetch" href="/notes/assets/suspense.html.89f19629.js"><link rel="prefetch" href="/notes/assets/suspenseLazy.html.b08e3dae.js"><link rel="prefetch" href="/notes/assets/suspenseWork.html.3bd0f66d.js"><link rel="prefetch" href="/notes/assets/hooksCommon.html.4b2e33a0.js"><link rel="prefetch" href="/notes/assets/hooksOther.html.f52a7b31.js"><link rel="prefetch" href="/notes/assets/start.html.1b7dd548.js"><link rel="prefetch" href="/notes/assets/useEffect.html.07d34f83.js"><link rel="prefetch" href="/notes/assets/useState.html.63d89c1a.js"><link rel="prefetch" href="/notes/assets/base.html.4044ba85.js"><link rel="prefetch" href="/notes/assets/commpontDiff.html.794f4e5a.js"><link rel="prefetch" href="/notes/assets/componentUpdate.html.114c492a.js"><link rel="prefetch" href="/notes/assets/renderProcess.html.5fc2f3f5.js"><link rel="prefetch" href="/notes/assets/schedulingPrinciple.html.401a0c9a.js"><link rel="prefetch" href="/notes/assets/beginWork.html.94ecc1c5.js"><link rel="prefetch" href="/notes/assets/globalVariable.html.f2e81f6d.js"><link rel="prefetch" href="/notes/assets/mountIndeterminateComponent.html.daf086f5.js"><link rel="prefetch" href="/notes/assets/mountLazyCompont.html.01edd27e.js"><link rel="prefetch" href="/notes/assets/performUnitOfWork.html.ff5d5869.js"><link rel="prefetch" href="/notes/assets/performWork.html.ce3b42de.js"><link rel="prefetch" href="/notes/assets/reactScheduler.html.cbe1fcd2.js"><link rel="prefetch" href="/notes/assets/reconcileChildren.html.1067ac44.js"><link rel="prefetch" href="/notes/assets/reconcileChildrenArray.html.bc784b2a.js"><link rel="prefetch" href="/notes/assets/reconcileSingleElement.html.1100cde6.js"><link rel="prefetch" href="/notes/assets/renderRoot.html.2f13788a.js"><link rel="prefetch" href="/notes/assets/scheduleWork.html.2c574843.js"><link rel="prefetch" href="/notes/assets/throwException.html.def4890d.js"><link rel="prefetch" href="/notes/assets/updateClassComponent.html.80402cb8.js"><link rel="prefetch" href="/notes/assets/updateContextConsumer.html.8a8b1437.js"><link rel="prefetch" href="/notes/assets/updateContextProvider.html.05062107.js"><link rel="prefetch" href="/notes/assets/updateForwardRef.html.95f9d1ee.js"><link rel="prefetch" href="/notes/assets/updateFragment.html.2a5e0286.js"><link rel="prefetch" href="/notes/assets/updateFunctionalComponent.html.900aa60f.js"><link rel="prefetch" href="/notes/assets/updateHostComponent.html.5d50dcab.js"><link rel="prefetch" href="/notes/assets/updateHostRoot.html.507e51f2.js"><link rel="prefetch" href="/notes/assets/updateHostText.html.5dfa53d0.js"><link rel="prefetch" href="/notes/assets/updateMode.html.b29f20e8.js"><link rel="prefetch" href="/notes/assets/updatePortalComponent.html.22b845fe.js"><link rel="prefetch" href="/notes/assets/updateProfiler.html.0aee3d58.js"><link rel="prefetch" href="/notes/assets/updateSuspenseComponent.html.7fdba0d1.js"><link rel="prefetch" href="/notes/assets/interview1.html.6118a7fa.js"><link rel="prefetch" href="/notes/assets/interview2.html.2a30007a.js"><link rel="prefetch" href="/notes/assets/interview3.html.2b85efb0.js"><link rel="prefetch" href="/notes/assets/interview51.html.f807c755.js"><link rel="prefetch" href="/notes/assets/interview52.html.89209997.js"><link rel="prefetch" href="/notes/assets/interview53.html.bf8fed05.js"><link rel="prefetch" href="/notes/assets/interview54.html.c4164a46.js"><link rel="prefetch" href="/notes/assets/interview55.html.ff6f61ed.js"><link rel="prefetch" href="/notes/assets/interview56.html.b48da598.js"><link rel="prefetch" href="/notes/assets/interview57.html.fb1d6f93.js"><link rel="prefetch" href="/notes/assets/interview1.html.720a0492.js"><link rel="prefetch" href="/notes/assets/interview10.html.caf66c2d.js"><link rel="prefetch" href="/notes/assets/interview11.html.073fd121.js"><link rel="prefetch" href="/notes/assets/interview12.html.64419556.js"><link rel="prefetch" href="/notes/assets/interview13.html.2861df59.js"><link rel="prefetch" href="/notes/assets/interview14.html.443d35aa.js"><link rel="prefetch" href="/notes/assets/interview15.html.958e6161.js"><link rel="prefetch" href="/notes/assets/interview16.html.9caa52b3.js"><link rel="prefetch" href="/notes/assets/interview17.html.d469f27b.js"><link rel="prefetch" href="/notes/assets/interview18.html.0cb9b512.js"><link rel="prefetch" href="/notes/assets/interview19.html.bd20de38.js"><link rel="prefetch" href="/notes/assets/interview2.html.7955e2d9.js"><link rel="prefetch" href="/notes/assets/interview20.html.b2153f39.js"><link rel="prefetch" href="/notes/assets/interview21.html.3ea4b263.js"><link rel="prefetch" href="/notes/assets/interview22.html.8af5f653.js"><link rel="prefetch" href="/notes/assets/interview23.html.847ebc12.js"><link rel="prefetch" href="/notes/assets/interview24.html.3b03dc30.js"><link rel="prefetch" href="/notes/assets/interview25.html.d237a436.js"><link rel="prefetch" href="/notes/assets/interview26.html.16019f71.js"><link rel="prefetch" href="/notes/assets/interview27.html.50a578de.js"><link rel="prefetch" href="/notes/assets/interview28.html.7d521b58.js"><link rel="prefetch" href="/notes/assets/interview29.html.4d1aa0bc.js"><link rel="prefetch" href="/notes/assets/interview3.html.81a8645d.js"><link rel="prefetch" href="/notes/assets/interview30.html.5beb26bd.js"><link rel="prefetch" href="/notes/assets/interview31.html.362f87fe.js"><link rel="prefetch" href="/notes/assets/interview32.html.6cca9b7a.js"><link rel="prefetch" href="/notes/assets/interview33.html.dd671634.js"><link rel="prefetch" href="/notes/assets/interview34.html.83633e6c.js"><link rel="prefetch" href="/notes/assets/interview35.html.23ce1184.js"><link rel="prefetch" href="/notes/assets/interview36.html.560be096.js"><link rel="prefetch" href="/notes/assets/interview37.html.79e9ae5e.js"><link rel="prefetch" href="/notes/assets/interview38.html.ce447c2f.js"><link rel="prefetch" href="/notes/assets/interview39.html.0e62b1fe.js"><link rel="prefetch" href="/notes/assets/interview4.html.c380b1d8.js"><link rel="prefetch" href="/notes/assets/interview40.html.3063301a.js"><link rel="prefetch" href="/notes/assets/interview41.html.a47bdf8e.js"><link rel="prefetch" href="/notes/assets/interview42.html.7f58ccc8.js"><link rel="prefetch" href="/notes/assets/interview43.html.be398793.js"><link rel="prefetch" href="/notes/assets/interview44.html.0c24cb42.js"><link rel="prefetch" href="/notes/assets/interview45.html.9f78450b.js"><link rel="prefetch" href="/notes/assets/interview46.html.b63b527e.js"><link rel="prefetch" href="/notes/assets/interview47.html.5cf6dba7.js"><link rel="prefetch" href="/notes/assets/interview48.html.61d64358.js"><link rel="prefetch" href="/notes/assets/interview49.html.5816a89d.js"><link rel="prefetch" href="/notes/assets/interview5.html.260d42b0.js"><link rel="prefetch" href="/notes/assets/interview50.html.e5c1fd10.js"><link rel="prefetch" href="/notes/assets/interview6.html.03faa28d.js"><link rel="prefetch" href="/notes/assets/interview7.html.fa4e6289.js"><link rel="prefetch" href="/notes/assets/interview8.html.a373cb27.js"><link rel="prefetch" href="/notes/assets/interview9.html.ec5640fe.js"><link rel="prefetch" href="/notes/assets/404.html.b74f05eb.js"><link rel="prefetch" href="/notes/assets/404.71e2c0d1.js"><link rel="prefetch" href="/notes/assets/Layout.d883adee.js">
    <link rel="stylesheet" href="/notes/assets/style.742f5b36.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/notes/" class=""><!----><!----></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading"> <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/react/principle/hookPrinciple.html#概述" class="router-link-active router-link-exact-active sidebar-item" aria-label="概述"><!--[--><!--]--> 概述 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/react/principle/hookPrinciple.html#function组件和class组件本质的区别" class="router-link-active router-link-exact-active sidebar-item" aria-label="function组件和class组件本质的区别"><!--[--><!--]--> function组件和class组件本质的区别 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/react/principle/hookPrinciple.html#引入hooks" class="router-link-active router-link-exact-active sidebar-item" aria-label="引入hooks"><!--[--><!--]--> 引入hooks <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/react/principle/hookPrinciple.html#renderwithhooks-执行函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="renderWithHooks 执行函数"><!--[--><!--]--> renderWithHooks 执行函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/react/principle/hookPrinciple.html#不同的hooks对象" class="router-link-active router-link-exact-active sidebar-item" aria-label="不同的hooks对象"><!--[--><!--]--> 不同的hooks对象 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/react/principle/hookPrinciple.html#mountworkinprogresshook" class="router-link-active router-link-exact-active sidebar-item" aria-label="mountWorkInProgressHook"><!--[--><!--]--> mountWorkInProgressHook <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/react/principle/hookPrinciple.html#初始化usestate-mountstate" class="router-link-active router-link-exact-active sidebar-item" aria-label="初始化useState -&gt; mountState"><!--[--><!--]--> 初始化useState -&gt; mountState <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/react/principle/hookPrinciple.html#mountstate" class="router-link-active router-link-exact-active sidebar-item" aria-label="mountState"><!--[--><!--]--> mountState <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/react/principle/hookPrinciple.html#dispatchaction-无状态组件更新机制" class="router-link-active router-link-exact-active sidebar-item" aria-label="dispatchAction 无状态组件更新机制"><!--[--><!--]--> dispatchAction 无状态组件更新机制 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/react/principle/hookPrinciple.html#初始化useeffect-mounteffect" class="router-link-active router-link-exact-active sidebar-item" aria-label="初始化useEffect -&gt; mountEffect"><!--[--><!--]--> 初始化useEffect -&gt; mountEffect <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/react/principle/hookPrinciple.html#初始化usememo-mountmemo" class="router-link-active router-link-exact-active sidebar-item" aria-label="初始化useMemo -&gt; mountMemo"><!--[--><!--]--> 初始化useMemo -&gt; mountMemo <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/react/principle/hookPrinciple.html#初始化useref-mountref" class="router-link-active router-link-exact-active sidebar-item" aria-label="初始化useRef -&gt; mountRef"><!--[--><!--]--> 初始化useRef -&gt; mountRef <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/react/principle/hookPrinciple.html#mounted-阶段-hooks-总结" class="router-link-active router-link-exact-active sidebar-item" aria-label="mounted 阶段 hooks 总结"><!--[--><!--]--> mounted 阶段 hooks 总结 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/react/principle/hookPrinciple.html#_1-updateworkinprogresshook" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. updateWorkInProgressHook"><!--[--><!--]--> 1. updateWorkInProgressHook <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/react/principle/hookPrinciple.html#_2-updatestate" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. updateState"><!--[--><!--]--> 2. updateState <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/react/principle/hookPrinciple.html#_3-updateeffect" class="router-link-active router-link-exact-active sidebar-item" aria-label="3 updateEffect"><!--[--><!--]--> 3 updateEffect <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/react/principle/hookPrinciple.html#_4-updatememo" class="router-link-active router-link-exact-active sidebar-item" aria-label="4 updateMemo"><!--[--><!--]--> 4 updateMemo <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/react/principle/hookPrinciple.html#_5-updateref" class="router-link-active router-link-exact-active sidebar-item" aria-label="5 updateRef"><!--[--><!--]--> 5 updateRef <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="" tabindex="-1"><a class="header-anchor" href="#" aria-hidden="true">#</a></h1><h1 id="react-hooks原理" tabindex="-1"><a class="header-anchor" href="#react-hooks原理" aria-hidden="true">#</a> react-hooks原理</h1><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述" aria-hidden="true">#</a> 概述</h2><hr><ol><li><p>在无状态组件每一次函数上下文执行的时候，<code>react</code>用什么方式记录了<code>hooks</code>的状态？</p></li><li><p>多个<code>react-hooks</code>用什么来记录每一个<code>hooks</code>的顺序的 ？ 换个问法！为什么不能条件语句中，声明<code>hooks</code>? <code>hooks</code>声明为什么在组件的最顶部？</p></li><li><p><code>function</code>函数组件中的<code>useState</code>，和 <code>class</code>类组件 <code>setState</code>有什么区别？</p></li><li><p><code>react</code> 是怎么捕获到<code>hooks</code>的执行上下文，是在函数组件内部的？</p></li><li><p><code>useEffect</code>,<code>useMemo</code> 中，为什么<code>useRef</code>不需要依赖注入，就能访问到最新的改变值？</p></li><li><p><code>useMemo</code>是怎么对值做缓存的？如何应用它优化性能？</p></li><li><p>为什么两次传入<code>useState</code>的值相同，函数组件不更新?</p></li></ol><img src="/notes/assets/react/d99a12ad708647d4bfd075a59d518c8b_tplv-k3u1fbpfcp-watermark.image" alt="demo"><h2 id="function组件和class组件本质的区别" tabindex="-1"><a class="header-anchor" href="#function组件和class组件本质的区别" aria-hidden="true">#</a> function组件和class组件本质的区别</h2><hr><p>在解释<code>react-hooks</code>原理的之前，要加深理解一下， <strong>函数组件和类组件到底有什么区别</strong>，废话不多说，先看 两个代码片段。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token operator">&lt;</span>any<span class="token punctuation">,</span>any<span class="token operator">&gt;</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token operator">=</span><span class="token punctuation">{</span>
            <span class="token literal-property property">number</span><span class="token operator">:</span><span class="token number">0</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">handerClick</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
               <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">number</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number<span class="token operator">+</span><span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
               console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>number<span class="token punctuation">)</span>
           <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handerClick <span class="token punctuation">}</span> <span class="token operator">&gt;</span>num<span class="token operator">++</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>函数组件中：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span> num <span class="token punctuation">,</span>setNumber <span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handerClick</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
           <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">setNumber</span><span class="token punctuation">(</span>num<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
           <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span> handerClick <span class="token punctuation">}</span> <span class="token operator">&gt;</span><span class="token punctuation">{</span> num <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>------------公布答案-------------</p><p>在第一个例子🌰打印结果： 1 2 3 4 5</p><p>在第二个例子🌰打印结果： 0 0 0 0 0</p><p><strong>分析</strong></p><p>第一个类组件中，由于执行上<code>setState</code>没有在<code>react</code>正常的函数执行上下文上执行，而是<code>setTimeout</code>中执行的，<strong>批量更新</strong>条件被破坏。原理这里就不讲了,所以可以直接获取到变化后的<code>state</code>。</p><p>第二个函数组件种，但是在无状态组件中，似乎没有生效。原因很简单，在<code>class</code>状态中，通过一个实例化的<code>class</code>，去维护组件中的各种状态；但是在<code>function</code>组件中，没有一个状态去保存这些信息，每一次函数上下文执行，所有变量，常量都重新声明，执行完毕，再被垃圾机制回收。所以如上，无论<code>setTimeout</code>执行多少次，都是在当前函数上下文执行,此时<code>num = 0</code>不会变，之后<code>setNumber</code>执行，函数组件重新执行之后，<code>num</code>才变化。</p><p>所以， 对于<code>class</code>组件，只需要实例化一次，实例中保存了组件的<code>state</code>等状态。对于每一次更新只需要调用<code>render</code>方法就可以。但是在<code>function</code>组件中，每一次更新都是一次新的函数执行,为了保存一些状态,执行一些副作用钩子,<code>react-hooks</code>应运而生，去帮助记录组件的状态，处理一些额外的副作用。</p><h2 id="引入hooks" tabindex="-1"><a class="header-anchor" href="#引入hooks" aria-hidden="true">#</a> 引入hooks</h2><p>从引入 <code>hooks</code>开始，以<code>useState</code>为例子，当从项目中这么写：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>react/src/ReactHooks.js</p></blockquote><p><strong>useState</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token parameter">initialState</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> dispatcher <span class="token operator">=</span> <span class="token function">resolveDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> dispatcher<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span>initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>useState()</code> 的执行等于 <code>dispatcher.useState(initialState)</code> 这里面引入了一个<code>dispatcher</code>，看一下<code>resolveDispatcher</code>做了些什么？</p><p><strong>resolveDispatcher</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">resolveDispatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> dispatcher <span class="token operator">=</span> ReactCurrentDispatcher<span class="token punctuation">.</span>current
    <span class="token keyword">return</span> dispatcher
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ReactCurrentDispatcher</strong></p><blockquote><p>react/src/ReactCurrentDispatcher.js</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> ReactCurrentDispatcher <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">current</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>看到<code>ReactCurrentDispatcher.current</code>初始化的时候为<code>null</code>，然后就没任何下文了。暂且只能把<code>**ReactCurrentDispatcher**</code>记下来。看看<code>ReactCurrentDispatcher</code>什么时候用到的 ？</p><h2 id="renderwithhooks-执行函数" tabindex="-1"><a class="header-anchor" href="#renderwithhooks-执行函数" aria-hidden="true">#</a> renderWithHooks 执行函数</h2><p>对于<code>function</code>组件执行</p><blockquote><p>react-reconciler/src/ReactFiberBeginWork.js</p></blockquote><p><code>function</code>组件初始化：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">renderWithHooks</span><span class="token punctuation">(</span>
    <span class="token keyword">null</span><span class="token punctuation">,</span>                <span class="token comment">// current Fiber</span>
    workInProgress<span class="token punctuation">,</span>      <span class="token comment">// workInProgress Fiber</span>
    Component<span class="token punctuation">,</span>           <span class="token comment">// 函数组件本身</span>
    props<span class="token punctuation">,</span>               <span class="token comment">// props</span>
    context<span class="token punctuation">,</span>             <span class="token comment">// 上下文</span>
    renderExpirationTime<span class="token punctuation">,</span><span class="token comment">// 渲染 ExpirationTime</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对于初始化是没有<code>current</code>树的，之后完成一次组件更新后，会把当前<code>workInProgress</code>树赋值给<code>current</code>树。</p><p><code>function</code>组件更新：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">renderWithHooks</span><span class="token punctuation">(</span>
    current<span class="token punctuation">,</span>
    workInProgress<span class="token punctuation">,</span>
    render<span class="token punctuation">,</span>
    nextProps<span class="token punctuation">,</span>
    context<span class="token punctuation">,</span>
    renderExpirationTime<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从上边可以看出来，<code>renderWithHooks</code>函数作用是<strong>调用</strong><code>function</code><strong>组件函数</strong>的主要函数。</p><p><strong>renderWithHooks</strong></p><blockquote><p>react-reconciler/src/ReactFiberHooks.js</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">renderWithHooks</span><span class="token punctuation">(</span>
    <span class="token parameter">current<span class="token punctuation">,</span>
    workInProgress<span class="token punctuation">,</span>
    Component<span class="token punctuation">,</span>
    props<span class="token punctuation">,</span>
    secondArg<span class="token punctuation">,</span>
    nextRenderExpirationTime<span class="token punctuation">,</span></span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    renderExpirationTime <span class="token operator">=</span> nextRenderExpirationTime<span class="token punctuation">;</span>
    currentlyRenderingFiber <span class="token operator">=</span> workInProgress<span class="token punctuation">;</span>

    workInProgress<span class="token punctuation">.</span>memoizedState <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    workInProgress<span class="token punctuation">.</span>updateQueue <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    workInProgress<span class="token punctuation">.</span>expirationTime <span class="token operator">=</span> NoWork<span class="token punctuation">;</span>

    ReactCurrentDispatcher<span class="token punctuation">.</span>current <span class="token operator">=</span>
        current <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> current<span class="token punctuation">.</span>memoizedState <span class="token operator">===</span> <span class="token keyword">null</span>
            <span class="token operator">?</span> HooksDispatcherOnMount
            <span class="token operator">:</span> HooksDispatcherOnUpdate<span class="token punctuation">;</span>

    <span class="token keyword">let</span> children <span class="token operator">=</span> <span class="token function">Component</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> secondArg<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>workInProgress<span class="token punctuation">.</span>expirationTime <span class="token operator">===</span> renderExpirationTime<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token comment">// ....这里的逻辑先放一放</span>
    <span class="token punctuation">}</span>

    ReactCurrentDispatcher<span class="token punctuation">.</span>current <span class="token operator">=</span> ContextOnlyDispatcher<span class="token punctuation">;</span>

    renderExpirationTime <span class="token operator">=</span> NoWork<span class="token punctuation">;</span>
    currentlyRenderingFiber <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    currentHook <span class="token operator">=</span> <span class="token keyword">null</span>
    workInProgressHook <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    didScheduleRenderPhaseUpdate <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> children<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>所有的函数组件执行，都是在这里方法中</strong>,首先应该明白几个感念，这对于后续理解<code>useState</code>是很有帮助的。</p><p><code>current fiber树</code>: 当完成一次渲染之后，会产生一个<code>current</code>树,<code>current</code>会在<code>commit</code>阶段替换成真实的<code>Dom</code>树。</p><p><code>workInProgress fiber树</code>: 即将调和渲染的 <code>fiber</code> 树。再一次新的组件更新过程中，会从<code>current</code>复制一份作为<code>workInProgress</code>,更新完毕后，将当前的<code>workInProgress</code>树赋值给<code>current</code>树。</p><p><code>workInProgress.memoizedState</code>: 在<code>class</code>组件中，<code>memoizedState</code>存放<code>state</code>信息，在<code>function</code>组件中，<strong>这里可以提前透漏一下，<code>memoizedState</code>在一次调和渲染过程中，以链表的形式存放<code>hooks</code>信息。</strong></p><p><code>workInProgress.expirationTime</code>: <code>react</code>用不同的<code>expirationTime</code>,来确定更新的优先级。</p><p><code>currentHook</code> : 可以理解 <code>current</code>树上的指向的当前调度的 <code>hooks</code>节点。</p><p><code>workInProgressHook</code> : 可以理解 <code>workInProgress</code>树上指向的当前调度的 <code>hooks</code>节点。</p><p><code>renderWithHooks</code><strong>函数主要作用:</strong></p><p>首先先置空即将调和渲染的<code>workInProgress</code>树的<code>memoizedState</code>和<code>updateQueue</code>，为什么这么做，因为在接下来的函数组件执行过程中，要把新的<code>hooks</code>信息挂载到这两个属性上，然后在组件<code>commit</code>阶段，将<code>workInProgress</code>树替换成<code>current</code>树，替换真实的<code>DOM</code>元素节点。并在<code>current</code>树保存<code>hooks</code>信息。</p><p>然后根据当前函数组件是否是第一次渲染，赋予<code>ReactCurrentDispatcher.current</code>不同的<code>hooks</code>,终于和上面讲到的<code>ReactCurrentDispatcher</code>联系到一起。对于第一次渲染组件，那么用的是<code>HooksDispatcherOnMount</code> <strong>hooks</strong>对象。</p><p>对于渲染后，需要更新的函数组件，则是<code>HooksDispatcherOnUpdate</code>对象，那么两个不同就是通过<code>current</code>树上是否<code>memoizedState</code>（<code>hook</code>信息）来判断的。如果<code>current</code>不存在，证明是第一次渲染函数组件。</p><p>接下来，<strong>调用<code>Component(props, secondArg);</code>执行的函数组件，的函数组件在这里真正的被执行了，然后，写的<code>hooks</code>被依次执行，把<code>hooks</code>信息依次保存到<code>workInProgress</code>树上。</strong> 至于它是怎么保存的，马上会讲到。</p><p>接下来，也很重要，将<code>ContextOnlyDispatcher</code>赋值给 <code>ReactCurrentDispatcher.current</code>，由于<code>js</code>是单线程的，也就是说没有在函数组件中，调用的<code>hooks</code>，都是<code>ContextOnlyDispatcher</code>对象上<code>hooks</code>,看看<code>ContextOnlyDispatcherhooks</code>，到底是什么。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> ContextOnlyDispatcher <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">useState</span><span class="token operator">:</span>throwInvalidHookError
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">throwInvalidHookError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">invariant</span><span class="token punctuation">(</span>
        <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token string">&#39;Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for&#39;</span> <span class="token operator">+</span>
        <span class="token string">&#39; one of the following reasons:\n&#39;</span> <span class="token operator">+</span>
        <span class="token string">&#39;1. You might have mismatching versions of React and the renderer (such as React DOM)\n&#39;</span> <span class="token operator">+</span>
        <span class="token string">&#39;2. You might be breaking the Rules of Hooks\n&#39;</span> <span class="token operator">+</span>
        <span class="token string">&#39;3. You might have more than one copy of React in the same app\n&#39;</span> <span class="token operator">+</span>
        <span class="token string">&#39;See https://fb.me/react-invalid-hook-call for tips about how to debug and fix this problem.&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>原来如此，<code>react-hooks</code>就是通过这种函数组件执行赋值不同的<code>hooks</code>对象方式，判断在<code>hooks</code>执行是否在函数组件内部，捕获并抛出异常的。</p><p>最后，重新置空一些变量比如<code>currentHook</code>，<code>currentlyRenderingFiber</code>, <code>workInProgressHook</code>等。</p><h2 id="不同的hooks对象" tabindex="-1"><a class="header-anchor" href="#不同的hooks对象" aria-hidden="true">#</a> 不同的hooks对象</h2><p>上述讲到在函数第一次渲染组件和更新组件分别调用不同的<code>hooks</code>对象，现在就来看看<code>HooksDispatcherOnMount</code> 和 <code>HooksDispatcherOnUpdate</code>。</p><p><strong>第一次渲染(这里只展示了常用的<code>hooks</code>)：</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> HooksDispatcherOnMount <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">useCallback</span><span class="token operator">:</span> mountCallback<span class="token punctuation">,</span>
    <span class="token literal-property property">useEffect</span><span class="token operator">:</span> mountEffect<span class="token punctuation">,</span>
    <span class="token literal-property property">useLayoutEffect</span><span class="token operator">:</span> mountLayoutEffect<span class="token punctuation">,</span>
    <span class="token literal-property property">useMemo</span><span class="token operator">:</span> mountMemo<span class="token punctuation">,</span>
    <span class="token literal-property property">useReducer</span><span class="token operator">:</span> mountReducer<span class="token punctuation">,</span>
    <span class="token literal-property property">useRef</span><span class="token operator">:</span> mountRef<span class="token punctuation">,</span>
    <span class="token literal-property property">useState</span><span class="token operator">:</span> mountState<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>更新组件：</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> HooksDispatcherOnUpdate <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">useCallback</span><span class="token operator">:</span> updateCallback<span class="token punctuation">,</span>
    <span class="token literal-property property">useEffect</span><span class="token operator">:</span> updateEffect<span class="token punctuation">,</span>
    <span class="token literal-property property">useLayoutEffect</span><span class="token operator">:</span> updateLayoutEffect<span class="token punctuation">,</span>
    <span class="token literal-property property">useMemo</span><span class="token operator">:</span> updateMemo<span class="token punctuation">,</span>
    <span class="token literal-property property">useReducer</span><span class="token operator">:</span> updateReducer<span class="token punctuation">,</span>
    <span class="token literal-property property">useRef</span><span class="token operator">:</span> updateRef<span class="token punctuation">,</span>
    <span class="token literal-property property">useState</span><span class="token operator">:</span> updateState
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>看来对于第一次渲染组件，和更新组件，<code>react-hooks</code>采用了两套<code>Api</code>，本文的第二部分和第三部分，将重点两者的联系。</p><p>用流程图来描述整个过程：</p><img src="/notes/assets/react/adcbd09984f84d0d97a15df124e83c09_tplv-k3u1fbpfcp-watermark.image" alt="demo"><h1 id="hooks初始化" tabindex="-1"><a class="header-anchor" href="#hooks初始化" aria-hidden="true">#</a> hooks初始化</h1><p>四个中重点<code>hooks</code>展开，分别是负责组件更新的<code>useState</code>，负责执行副作用<code>useEffect</code> ,负责保存数据的<code>useRef</code>,负责缓存优化的<code>useMemo</code>， 至于<code>useCallback</code>,<code>useReducer</code>,<code>useLayoutEffect</code>原理和那四个重点<code>hooks</code>比较相近，就不一一解释了。</p><p>先写一个组件，并且用到上述四个主要<code>hooks</code>：</p><p><strong>请记住如下代码片段，后面讲解将以如下代码段展开</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">,</span> useState <span class="token punctuation">,</span> useRef <span class="token punctuation">,</span> useMemo  <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span> number <span class="token punctuation">,</span> setNumber <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> DivDemo <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span> hello <span class="token punctuation">,</span> i am useMemo <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> curRef  <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>curRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token punctuation">{</span> curRef <span class="token punctuation">}</span> <span class="token operator">&gt;</span>
        hello<span class="token punctuation">,</span>world <span class="token punctuation">{</span> number <span class="token punctuation">}</span> 
        <span class="token punctuation">{</span> DivDemo <span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setNumber</span><span class="token punctuation">(</span>number<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token operator">&gt;</span>number<span class="token operator">++</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mountworkinprogresshook" tabindex="-1"><a class="header-anchor" href="#mountworkinprogresshook" aria-hidden="true">#</a> mountWorkInProgressHook</h2><p>在组件初始化的时候,每一次<code>hooks</code>执行，如<code>useState()</code>,<code>useRef()</code>,都会调用<code>mountWorkInProgressHook</code>,<code>mountWorkInProgressHook</code>到底做了写什么，让一起来分析一下：</p><blockquote><p>react-reconciler/src/ReactFiberHooks.js -&gt; <code>mountWorkInProgressHook</code></p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">mountWorkInProgressHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token literal-property property">hook</span><span class="token operator">:</span> Hook <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">memoizedState</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>  <span class="token comment">// useState中 保存 state信息 ｜ useEffect 中 保存着 effect 对象 ｜ useMemo 中 保存的是缓存的值和deps ｜ useRef中保存的是ref 对象</span>
        <span class="token literal-property property">baseState</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        <span class="token literal-property property">baseQueue</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        <span class="token literal-property property">queue</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        <span class="token literal-property property">next</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>workInProgressHook <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 例子中的第一个`hooks`-&gt; useState(0) 走的就是这样。</span>
        currentlyRenderingFiber<span class="token punctuation">.</span>memoizedState <span class="token operator">=</span> workInProgressHook <span class="token operator">=</span> hook<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        workInProgressHook <span class="token operator">=</span> workInProgressHook<span class="token punctuation">.</span>next <span class="token operator">=</span> hook<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> workInProgressHook<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>mountWorkInProgressHook</code>这个函数做的事情很简单，首先每次执行一个<code>hooks</code>函数，都产生一个<code>hook</code>对象，里面保存了当前<code>hook</code>信息,然后将每个<code>hooks</code>以链表形式串联起来，并赋值给<code>workInProgress</code>的<code>memoizedState</code>。也就证实了上述所说的，函数组件用<code>memoizedState</code>存放<code>hooks</code>链表。</p><p>至于<code>hook</code>对象中都保留了那些信息？这里先分别介绍一下:</p><ul><li><p><code>memoizedState</code>： <code>useState</code>中 保存 <code>state</code> 信息 ｜ <code>useEffect</code> 中 保存着 <code>effect</code> 对象 ｜ <code>useMemo</code> 中 保存的是缓存的值和 <code>deps</code> ｜ <code>useRef</code> 中保存的是 <code>ref</code> 对象。</p></li><li><p><code>baseQueue</code> : <code>usestate</code>和<code>useReducer</code>中 保存最新的更新队列。</p></li><li><p><code>baseState</code> ： <code>usestate</code>和<code>useReducer</code>中,一次更新中 ，产生的最新<code>state</code>值。</p></li><li><p><code>queue</code> ： 保存待更新队列 <code>pendingQueue</code> ，更新函数 <code>dispatch</code> 等信息。</p></li><li><p><code>next</code>: 指向下一个 <code>hooks</code>对象。</p></li></ul><p>那么当函数组件执行之后，四个<code>hooks</code>和<code>workInProgress</code>将是如图的关系。</p><img src="/notes/assets/react/5660f1be680140239a8cf4e34cfccc90_tplv-k3u1fbpfcp-watermark.image" alt="demo"><p>知道每个<code>hooks</code>关系之后，应该理解了，为什么不能条件语句中，声明<code>hooks</code>。</p><p>用一幅图表示如果在条件语句中声明会出现什么情况发生。</p><p>如果将上述<code>demo</code>其中的一个 <code>useRef</code> 放入条件语句中，</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> curRef  <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>isFisrt<span class="token punctuation">)</span><span class="token punctuation">{</span>
    curRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="/notes/assets/react/54a38675154a483885a3c5c9a80f360e_tplv-k3u1fbpfcp-watermark.image" alt="demo"><p><strong>因为一旦在条件语句中声明<code>hooks</code>，在下一次函数组件更新，<code>hooks</code>链表结构，将会被破坏，<code>current</code>树的<code>memoizedState</code>缓存<code>hooks</code>信息，和当前<code>workInProgress</code>不一致，如果涉及到读取<code>state</code>等操作，就会发生异常。</strong></p><p>上述介绍了 <code>hooks</code>通过什么来证明唯一性的，答案 ，通过<code>hooks</code>链表顺序。和为什么不能在条件语句中，声明<code>hooks</code>，接下来按照四个方向，分别介绍初始化的时候发生了什么？</p><h2 id="初始化usestate-mountstate" tabindex="-1"><a class="header-anchor" href="#初始化usestate-mountstate" aria-hidden="true">#</a> 初始化useState -&gt; mountState</h2><hr><h2 id="mountstate" tabindex="-1"><a class="header-anchor" href="#mountstate" aria-hidden="true">#</a> mountState</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">mountState</span><span class="token punctuation">(</span>
    <span class="token parameter">initialState</span>
<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> hook <span class="token operator">=</span> <span class="token function">mountWorkInProgressHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> initialState <span class="token operator">===</span> <span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果 useState 第一个参数为函数，执行函数得到state</span>
        initialState <span class="token operator">=</span> <span class="token function">initialState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    hook<span class="token punctuation">.</span>memoizedState <span class="token operator">=</span> hook<span class="token punctuation">.</span>baseState <span class="token operator">=</span> initialState<span class="token punctuation">;</span>
    <span class="token keyword">const</span> queue <span class="token operator">=</span> <span class="token punctuation">(</span>hook<span class="token punctuation">.</span>queue <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">pending</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>  <span class="token comment">// 带更新的</span>
        <span class="token literal-property property">dispatch</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// 负责更新函数</span>
        <span class="token literal-property property">lastRenderedReducer</span><span class="token operator">:</span> basicStateReducer<span class="token punctuation">,</span> <span class="token comment">//用于得到最新的 state ,</span>
        <span class="token literal-property property">lastRenderedState</span><span class="token operator">:</span> initialState<span class="token punctuation">,</span> <span class="token comment">// 最后一次得到的 state</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span>dispatch <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">dispatchAction</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span> <span class="token comment">// 负责更新的函数</span>
        <span class="token keyword">null</span><span class="token punctuation">,</span>
        currentlyRenderingFiber<span class="token punctuation">,</span>
        queue<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>hook<span class="token punctuation">.</span>memoizedState<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>mountState</code>到底做了些什么，首先会得到初始化的<code>state</code>，将它赋值给<code>mountWorkInProgressHook</code>产生的<code>hook</code>对象的<code>memoizedState</code>和<code>baseState</code>属性，然后创建一个<code>queue</code>对象，里面保存了负责更新的信息。</p><p>这里先说一下，在无状态组件中，<code>useState</code>和<code>useReducer</code>触发函数更新的方法都是<code>dispatchAction</code>,<code>useState</code>，可以看成一个简化版的<code>useReducer</code>,至于<code>dispatchAction</code>怎么更新<code>state</code>，更新组件的，接着往下研究<code>dispatchAction</code>。</p><p>在研究之前 <strong>先要弄明白<code>dispatchAction</code>是什么?</strong></p><div class="language-tsx ext-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">dispatchAction</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">S</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  fiber<span class="token operator">:</span> Fiber<span class="token punctuation">,</span>
  queue<span class="token operator">:</span> UpdateQueue<span class="token operator">&lt;</span><span class="token constant">S</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  action<span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">[</span> number <span class="token punctuation">,</span> setNumber <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>dispatchAction</code> 就是 <code>setNumber</code> , <code>dispatchAction</code> 第一个参数和第二个参数，已经被<code>bind</code>给改成<code>currentlyRenderingFiber</code>和 <code>queue</code>,传入的参数是第三个参数<code>action</code></p><h2 id="dispatchaction-无状态组件更新机制" tabindex="-1"><a class="header-anchor" href="#dispatchaction-无状态组件更新机制" aria-hidden="true">#</a> dispatchAction 无状态组件更新机制</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">dispatchAction</span><span class="token punctuation">(</span><span class="token parameter">fiber<span class="token punctuation">,</span> queue<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// 计算 expirationTime 过程略过。</span>
    <span class="token comment">/* 创建一个update */</span>
    <span class="token keyword">const</span> update<span class="token operator">=</span> <span class="token punctuation">{</span>
        expirationTime<span class="token punctuation">,</span>
        suspenseConfig<span class="token punctuation">,</span>
        action<span class="token punctuation">,</span>
        <span class="token literal-property property">eagerReducer</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        <span class="token literal-property property">eagerState</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        <span class="token literal-property property">next</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/* 把创建的update */</span>
    <span class="token keyword">const</span> pending <span class="token operator">=</span> queue<span class="token punctuation">.</span>pending<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pending <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 证明第一次更新</span>
        update<span class="token punctuation">.</span>next <span class="token operator">=</span> update<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 不是第一次更新</span>
        update<span class="token punctuation">.</span>next <span class="token operator">=</span> pending<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        pending<span class="token punctuation">.</span>next <span class="token operator">=</span> update<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    queue<span class="token punctuation">.</span>pending <span class="token operator">=</span> update<span class="token punctuation">;</span>
    <span class="token keyword">const</span> alternate <span class="token operator">=</span> fiber<span class="token punctuation">.</span>alternate<span class="token punctuation">;</span>
    <span class="token comment">/* 判断当前是否在渲染阶段 */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> fiber <span class="token operator">===</span> currentlyRenderingFiber <span class="token operator">||</span> <span class="token punctuation">(</span>alternate <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> alternate <span class="token operator">===</span> currentlyRenderingFiber<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        didScheduleRenderPhaseUpdate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        update<span class="token punctuation">.</span>expirationTime <span class="token operator">=</span> renderExpirationTime<span class="token punctuation">;</span>
        currentlyRenderingFiber<span class="token punctuation">.</span>expirationTime <span class="token operator">=</span> renderExpirationTime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">/* 当前函数组件对应fiber没有处于调和渲染阶段 ，那么获取最新state , 执行更新 */</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>fiber<span class="token punctuation">.</span>expirationTime <span class="token operator">===</span> NoWork <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>alternate <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> alternate<span class="token punctuation">.</span>expirationTime <span class="token operator">===</span> NoWork<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> lastRenderedReducer <span class="token operator">=</span> queue<span class="token punctuation">.</span>lastRenderedReducer<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>lastRenderedReducer <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> prevDispatcher<span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token keyword">const</span> currentState <span class="token operator">=</span> queue<span class="token punctuation">.</span>lastRenderedState<span class="token punctuation">;</span> <span class="token comment">/* 上一次的state */</span>
                    <span class="token keyword">const</span> eagerState <span class="token operator">=</span> <span class="token function">lastRenderedReducer</span><span class="token punctuation">(</span>currentState<span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/**/</span>
                    update<span class="token punctuation">.</span>eagerReducer <span class="token operator">=</span> lastRenderedReducer<span class="token punctuation">;</span>
                    update<span class="token punctuation">.</span>eagerState <span class="token operator">=</span> eagerState<span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is</span><span class="token punctuation">(</span>eagerState<span class="token punctuation">,</span> currentState<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                        <span class="token keyword">return</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span> 
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token function">scheduleUpdateOnFiber</span><span class="token punctuation">(</span>fiber<span class="token punctuation">,</span> expirationTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>无论是类组件调用<code>setState</code>,还是函数组件的<code>dispatchAction</code> ，都会产生一个 <code>update</code>对象，里面记录了此次更新的信息，然后将此<code>update</code>放入待更新的<code>pending</code>队列中，<code>dispatchAction</code>第二步就是判断当前函数组件的<code>fiber</code>对象是否处于渲染阶段，如果处于渲染阶段，那么不需要在更新当前函数组件，只需要更新一下当前<code>update</code>的<code>expirationTime</code>即可。</p><p>如果当前<code>fiber</code>没有处于更新阶段。那么通过调用<code>lastRenderedReducer</code>获取最新的<code>state</code>,和上一次的<code>currentState</code>，进行浅比较，如果相等，那么就退出，这就证实了为什么<code>useState</code>，两次值相等的时候，组件不渲染的原因了，这个机制和<code>Component</code>模式下的<code>setState</code>有一定的区别。</p><p>如果两次<code>state</code>不相等，那么调用<code>scheduleUpdateOnFiber</code>调度渲染当前fiber，<code>scheduleUpdateOnFiber</code>是<code>react</code>渲染更新的主要函数。</p><p>把<strong>初始化<code>mountState</code>和无状态组件更新机制</strong>讲明白了，接下来看一下其他的<strong>hooks</strong>初始化做了些什么操作？</p><h2 id="初始化useeffect-mounteffect" tabindex="-1"><a class="header-anchor" href="#初始化useeffect-mounteffect" aria-hidden="true">#</a> 初始化useEffect -&gt; mountEffect</h2><hr><p>上述讲到了无状态组件中<code>fiber</code>对象<code>memoizedState</code>保存当前的<code>hooks</code>形成的链表。那么<code>updateQueue</code>保存了什么信息呢，会在接下来探索<code>useEffect</code>过程中找到答案。当调用<code>useEffect</code>的时候，在组件第一次渲染的时候会调用<code>mountEffect</code>方法，这个方法到底做了些什么？</p><p><strong>mountEffect</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">mountEffect</span><span class="token punctuation">(</span>
    <span class="token parameter">create<span class="token punctuation">,</span>
    deps<span class="token punctuation">,</span></span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> hook <span class="token operator">=</span> <span class="token function">mountWorkInProgressHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> nextDeps <span class="token operator">=</span> deps <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> deps<span class="token punctuation">;</span>
    hook<span class="token punctuation">.</span>memoizedState <span class="token operator">=</span> <span class="token function">pushEffect</span><span class="token punctuation">(</span>
        HookHasEffect <span class="token operator">|</span> hookEffectTag<span class="token punctuation">,</span> 
        create<span class="token punctuation">,</span> <span class="token comment">// useEffect 第一次参数，就是副作用函数</span>
        <span class="token keyword">undefined</span><span class="token punctuation">,</span>
        nextDeps<span class="token punctuation">,</span> <span class="token comment">// useEffect 第二次参数，deps</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>每个<code>hooks</code>初始化都会创建一个<code>hook</code>对象，然后将<code>hook</code>的<code>memoizedState</code>保存当前<code>effect hook</code>信息。</p><p><strong>有两个<code>memoizedState</code>大家千万别混淆了，这里再友情提示一遍</strong></p><ul><li><p><code>workInProgress / current</code> 树上的 <code>memoizedState</code> 保存的是当前函数组件每个<code>hooks</code>形成的链表。</p></li><li><p>每个<code>hooks</code>上的<code>memoizedState</code> 保存了当前<code>hooks</code>信息，不同种类的<code>hooks</code>的<code>memoizedState</code>内容不同。上述的方法最后执行了一个<code>pushEffect</code>，一起看看<code>pushEffect</code>做了些什么？</p></li></ul><p><strong><code>pushEffect</code> 创建<code>effect</code>对象，挂载<code>updateQueue</code></strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">pushEffect</span><span class="token punctuation">(</span><span class="token parameter">tag<span class="token punctuation">,</span> create<span class="token punctuation">,</span> destroy<span class="token punctuation">,</span> deps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> effect <span class="token operator">=</span> <span class="token punctuation">{</span>
        tag<span class="token punctuation">,</span>
        create<span class="token punctuation">,</span>
        destroy<span class="token punctuation">,</span>
        deps<span class="token punctuation">,</span>
        <span class="token literal-property property">next</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> componentUpdateQueue <span class="token operator">=</span> currentlyRenderingFiber<span class="token punctuation">.</span>updateQueue
    <span class="token keyword">if</span> <span class="token punctuation">(</span>componentUpdateQueue <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果是第一个 useEffect</span>
        componentUpdateQueue <span class="token operator">=</span> <span class="token punctuation">{</span>  <span class="token literal-property property">lastEffect</span><span class="token operator">:</span> <span class="token keyword">null</span>  <span class="token punctuation">}</span>
        currentlyRenderingFiber<span class="token punctuation">.</span>updateQueue <span class="token operator">=</span> componentUpdateQueue
        componentUpdateQueue<span class="token punctuation">.</span>lastEffect <span class="token operator">=</span> effect<span class="token punctuation">.</span>next <span class="token operator">=</span> effect<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>  <span class="token comment">// 存在多个effect</span>
        <span class="token keyword">const</span> lastEffect <span class="token operator">=</span> componentUpdateQueue<span class="token punctuation">.</span>lastEffect<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>lastEffect <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            componentUpdateQueue<span class="token punctuation">.</span>lastEffect <span class="token operator">=</span> effect<span class="token punctuation">.</span>next <span class="token operator">=</span> effect<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> firstEffect <span class="token operator">=</span> lastEffect<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            lastEffect<span class="token punctuation">.</span>next <span class="token operator">=</span> effect<span class="token punctuation">;</span>
            effect<span class="token punctuation">.</span>next <span class="token operator">=</span> firstEffect<span class="token punctuation">;</span>
            componentUpdateQueue<span class="token punctuation">.</span>lastEffect <span class="token operator">=</span> effect<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> effect<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这一段实际很简单，首先创建一个 <code>effect</code> ，判断组件如果第一次渲染，那么创建 <code>componentUpdateQueue</code> ，就是<code>workInProgress</code>的<code>updateQueue</code>。然后将<code>effect</code>放入<code>updateQueue</code>中。</p><p>假设在一个函数组件中这么写：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span> props<span class="token punctuation">.</span>a <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最后<code>workInProgress.updateQueue</code>会以这样的形式保存：</p><img src="/notes/assets/react/14ac9e04c10e45e5b93fc76d47a5fdd5_tplv-k3u1fbpfcp-watermark.image" alt="demo"><p><strong>拓展:<code>effectList</code></strong></p><ul><li><p><code>effect list</code> 可以理解为是一个存储 <code>effectTag</code> 副作用列表容器。它是由 <code>fiber</code> 节点和指针 <code>nextEffect</code> 构成的单链表结构，这其中还包括第一个节点 <code>firstEffect</code> ，和最后一个节点 <code>lastEffect</code>。</p></li><li><p><code>React</code> 采用深度优先搜索算法，在 <code>render</code> 阶段遍历 <code>fiber</code> 树时，把每一个有副作用的 <code>fiber</code> 筛选出来，最后构建生成一个只带副作用的 <code>effect list</code> 链表。</p></li><li><p>在 <code>commit</code> 阶段，<code>React</code> 拿到 <code>effect list</code> 数据后，通过遍历 <code>effect list</code>，并根据每一个 <code>effect</code> 节点的 <code>effectTag</code> 类型，执行每个<code>effect</code>，从而对相应的 <code>DOM</code> 树执行更改。</p></li></ul><h2 id="初始化usememo-mountmemo" tabindex="-1"><a class="header-anchor" href="#初始化usememo-mountmemo" aria-hidden="true">#</a> 初始化useMemo -&gt; mountMemo</h2><hr><p>不知道大家是否把 <code>useMemo</code> 想象的过于复杂了，实际相比其他 <code>useState</code> , <code>useEffect</code>等，它的逻辑实际简单的很。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">mountMemo</span><span class="token punctuation">(</span><span class="token parameter">nextCreate<span class="token punctuation">,</span>deps</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> hook <span class="token operator">=</span> <span class="token function">mountWorkInProgressHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> nextDeps <span class="token operator">=</span> deps <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> deps<span class="token punctuation">;</span>
    <span class="token keyword">const</span> nextValue <span class="token operator">=</span> <span class="token function">nextCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    hook<span class="token punctuation">.</span>memoizedState <span class="token operator">=</span> <span class="token punctuation">[</span>nextValue<span class="token punctuation">,</span> nextDeps<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> nextValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>初始化<code>useMemo</code>，就是创建一个<code>hook</code>，然后执行<code>useMemo</code>的第一个参数,得到需要缓存的值，然后将值和<code>deps</code>记录下来，赋值给当前<code>hook</code>的<code>memoizedState</code>。整体上并没有复杂的逻辑。</p><h2 id="初始化useref-mountref" tabindex="-1"><a class="header-anchor" href="#初始化useref-mountref" aria-hidden="true">#</a> 初始化useRef -&gt; mountRef</h2><hr><p>对于<code>useRef</code>初始化处理，似乎更是简单，一起来看一下：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">mountRef</span><span class="token punctuation">(</span><span class="token parameter">initialValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> hook <span class="token operator">=</span> <span class="token function">mountWorkInProgressHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">current</span><span class="token operator">:</span> initialValue<span class="token punctuation">}</span><span class="token punctuation">;</span>
    hook<span class="token punctuation">.</span>memoizedState <span class="token operator">=</span> ref<span class="token punctuation">;</span>
    <span class="token keyword">return</span> ref<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>mountRef</code>初始化很简单, 创建一个<code>ref</code>对象， 对象的<code>current</code> 属性来保存初始化的值，最后用<code>memoizedState</code>保存<code>ref</code>，完成整个操作。</p><h2 id="mounted-阶段-hooks-总结" tabindex="-1"><a class="header-anchor" href="#mounted-阶段-hooks-总结" aria-hidden="true">#</a> mounted 阶段 hooks 总结</h2><p>来总结一下初始化阶段,<code>react-hooks</code>做的事情，在一个函数组件第一次渲染执行上下文过程中，每个<code>react-hooks</code>执行，都会产生一个<code>hook</code>对象，并形成链表结构，绑定在<code>workInProgress</code>的<code>memoizedState</code>属性上，然后<code>react-hooks</code>上的状态，绑定在当前<code>hooks</code>对象的<code>memoizedState</code>属性上。对于<code>effect</code>副作用钩子，会绑定在<code>workInProgress.updateQueue</code>上，等到<code>commit</code>阶段，<code>dom</code>树构建完成，在执行每个 <code>effect</code> 副作用钩子。</p><h1 id="hooks更新阶段" tabindex="-1"><a class="header-anchor" href="#hooks更新阶段" aria-hidden="true">#</a> hooks更新阶段</h1><p>上述介绍了第一次渲染函数组件，<code>react-hooks</code>初始化都做些什么，接下来，分析一下，</p><p>对于更新阶段，说明上一次 <code>workInProgress</code> 树已经赋值给了 <code>current</code> 树。存放<code>hooks</code>信息的<code>memoizedState</code>，此时已经存在<code>current</code>树上，<code>react</code>对于<code>hooks</code>的处理逻辑和<code>fiber</code>树逻辑类似。</p><p>对于一次函数组件更新，当再次执行<code>hooks</code>函数的时候，比如 <code>useState(0)</code> ，首先要从<code>current</code>的<code>hooks</code>中找到与当前<code>workInProgressHook</code>，对应的<code>currentHooks</code>，然后复制一份<code>currentHooks</code>给<code>workInProgressHook</code>,接下来<code>hooks</code>函数执行的时候,把最新的状态更新到<code>workInProgressHook</code>，保证<code>hooks</code>状态不丢失。</p><p>所以函数组件每次更新，每一次<code>react-hooks</code>函数执行，都需要有一个函数去做上面的操作，这个函数就是<code>updateWorkInProgressHook</code>,接下来一起看这个<code>updateWorkInProgressHook</code>。</p><h2 id="_1-updateworkinprogresshook" tabindex="-1"><a class="header-anchor" href="#_1-updateworkinprogresshook" aria-hidden="true">#</a> 1. updateWorkInProgressHook</h2><hr><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">updateWorkInProgressHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> nextCurrentHook<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>currentHook <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">/* 如果 currentHook = null 证明它是第一个hooks */</span>
        <span class="token keyword">const</span> current <span class="token operator">=</span> currentlyRenderingFiber<span class="token punctuation">.</span>alternate<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            nextCurrentHook <span class="token operator">=</span> current<span class="token punctuation">.</span>memoizedState<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            nextCurrentHook <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">/* 不是第一个hooks，那么指向下一个 hooks */</span>
        nextCurrentHook <span class="token operator">=</span> currentHook<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> nextWorkInProgressHook
    <span class="token keyword">if</span> <span class="token punctuation">(</span>workInProgressHook <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//第一次执行hooks</span>
        <span class="token comment">// 这里应该注意一下，当函数组件更新也是调用 renderWithHooks ,memoizedState属性是置空的</span>
        nextWorkInProgressHook <span class="token operator">=</span> currentlyRenderingFiber<span class="token punctuation">.</span>memoizedState<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> 
        nextWorkInProgressHook <span class="token operator">=</span> workInProgressHook<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>nextWorkInProgressHook <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token comment">/* 这个情况说明 renderWithHooks 执行 过程发生多次函数组件的执行 ，暂时先不考虑 */</span>
        workInProgressHook <span class="token operator">=</span> nextWorkInProgressHook<span class="token punctuation">;</span>
        nextWorkInProgressHook <span class="token operator">=</span> workInProgressHook<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        currentHook <span class="token operator">=</span> nextCurrentHook<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">invariant</span><span class="token punctuation">(</span>
            nextCurrentHook <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
            <span class="token string">&#39;Rendered more hooks than during the previous render.&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        currentHook <span class="token operator">=</span> nextCurrentHook<span class="token punctuation">;</span>
        <span class="token keyword">const</span> newHook <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">//创建一个新的hook</span>
            <span class="token literal-property property">memoizedState</span><span class="token operator">:</span> currentHook<span class="token punctuation">.</span>memoizedState<span class="token punctuation">,</span>
            <span class="token literal-property property">baseState</span><span class="token operator">:</span> currentHook<span class="token punctuation">.</span>baseState<span class="token punctuation">,</span>
            <span class="token literal-property property">baseQueue</span><span class="token operator">:</span> currentHook<span class="token punctuation">.</span>baseQueue<span class="token punctuation">,</span>
            <span class="token literal-property property">queue</span><span class="token operator">:</span> currentHook<span class="token punctuation">.</span>queue<span class="token punctuation">,</span>
            <span class="token literal-property property">next</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>workInProgressHook <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果是第一个hooks</span>
            currentlyRenderingFiber<span class="token punctuation">.</span>memoizedState <span class="token operator">=</span> workInProgressHook <span class="token operator">=</span> newHook<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 重新更新 hook</span>
            workInProgressHook <span class="token operator">=</span> workInProgressHook<span class="token punctuation">.</span>next <span class="token operator">=</span> newHook<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> workInProgressHook<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这一段的逻辑大致是这样的：</p><ul><li><p>首先如果是第一次执行<code>hooks</code>函数，那么从<code>current</code>树上取出<code>memoizedState</code> ，也就是旧的<code>hooks</code>。</p></li><li><p>然后声明变量<code>nextWorkInProgressHook</code>，这里应该值得注意，正常情况下，一次<code>renderWithHooks</code>执行，<code>workInProgress</code>上的<code>memoizedState</code>会被置空，<code>hooks</code>函数顺序执行，<code>nextWorkInProgressHook</code>应该一直为<code>null</code>，那么什么情况下<code>nextWorkInProgressHook</code>不为<code>null</code>,也就是当一次<code>renderWithHooks</code>执行过程中，执行了多次函数组件，也就是在<code>renderWithHooks</code>中这段逻辑。</p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>workInProgress<span class="token punctuation">.</span>expirationTime <span class="token operator">===</span> renderExpirationTime<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment">// ....这里的逻辑先放一放</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里面的逻辑，实际就是判定，如果当前函数组件执行后，当前函数组件的还是处于渲染优先级，说明函数组件又有了新的更新任务，那么循坏执行函数组件。这就造成了上述的，<code>nextWorkInProgressHook</code>不为 <code>null</code> 的情况。</p><ul><li>最后复制<code>current</code>的<code>hooks</code>，把它赋值给<code>workInProgressHook</code>,用于更新新的一轮<code>hooks</code>状态。</li></ul><h2 id="_2-updatestate" tabindex="-1"><a class="header-anchor" href="#_2-updatestate" aria-hidden="true">#</a> 2. updateState</h2><hr><p><strong>useState</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">updateReducer</span><span class="token punctuation">(</span>
    <span class="token parameter">reducer<span class="token punctuation">,</span>
    initialArg<span class="token punctuation">,</span>
    init<span class="token punctuation">,</span></span>
<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> hook <span class="token operator">=</span> <span class="token function">updateWorkInProgressHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> queue <span class="token operator">=</span> hook<span class="token punctuation">.</span>queue<span class="token punctuation">;</span>
    queue<span class="token punctuation">.</span>lastRenderedReducer <span class="token operator">=</span> reducer<span class="token punctuation">;</span>
    <span class="token keyword">const</span> current <span class="token operator">=</span> currentHook<span class="token punctuation">;</span>
    <span class="token keyword">let</span> baseQueue <span class="token operator">=</span> current<span class="token punctuation">.</span>baseQueue<span class="token punctuation">;</span>
    <span class="token keyword">const</span> pendingQueue <span class="token operator">=</span> queue<span class="token punctuation">.</span>pending<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pendingQueue <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这里省略... 第一步：将 pending  queue 合并到 basequeue</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>baseQueue <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> first <span class="token operator">=</span> baseQueue<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        <span class="token keyword">let</span> newState <span class="token operator">=</span> current<span class="token punctuation">.</span>baseState<span class="token punctuation">;</span>
        <span class="token keyword">let</span> newBaseState <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> newBaseQueueFirst <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> newBaseQueueLast <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> update <span class="token operator">=</span> first<span class="token punctuation">;</span>
        <span class="token keyword">do</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> updateExpirationTime <span class="token operator">=</span> update<span class="token punctuation">.</span>expirationTime<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>updateExpirationTime <span class="token operator">&lt;</span> renderExpirationTime<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//优先级不足</span>
            <span class="token keyword">const</span> clone  <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">expirationTime</span><span class="token operator">:</span> update<span class="token punctuation">.</span>expirationTime<span class="token punctuation">,</span>
                <span class="token operator">...</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>newBaseQueueLast <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                newBaseQueueFirst <span class="token operator">=</span> newBaseQueueLast <span class="token operator">=</span> clone<span class="token punctuation">;</span>
                newBaseState <span class="token operator">=</span> newState<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                newBaseQueueLast <span class="token operator">=</span> newBaseQueueLast<span class="token punctuation">.</span>next <span class="token operator">=</span> clone<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>  <span class="token comment">//此更新确实具有足够的优先级。</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>newBaseQueueLast <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> clone<span class="token operator">=</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">expirationTime</span><span class="token operator">:</span> Sync<span class="token punctuation">,</span> 
                    <span class="token operator">...</span>
                <span class="token punctuation">}</span><span class="token punctuation">;</span>
                newBaseQueueLast <span class="token operator">=</span> newBaseQueueLast<span class="token punctuation">.</span>next <span class="token operator">=</span> clone<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">/* 得到新的 state */</span>
            newState <span class="token operator">=</span> <span class="token function">reducer</span><span class="token punctuation">(</span>newState<span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        update <span class="token operator">=</span> update<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>update <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> update <span class="token operator">!==</span> first<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>newBaseQueueLast <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            newBaseState <span class="token operator">=</span> newState<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            newBaseQueueLast<span class="token punctuation">.</span>next <span class="token operator">=</span> newBaseQueueFirst<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        hook<span class="token punctuation">.</span>memoizedState <span class="token operator">=</span> newState<span class="token punctuation">;</span>
        hook<span class="token punctuation">.</span>baseState <span class="token operator">=</span> newBaseState<span class="token punctuation">;</span>
        hook<span class="token punctuation">.</span>baseQueue <span class="token operator">=</span> newBaseQueueLast<span class="token punctuation">;</span>
        queue<span class="token punctuation">.</span>lastRenderedState <span class="token operator">=</span> newState<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> dispatch <span class="token operator">=</span> queue<span class="token punctuation">.</span>dispatch
    <span class="token keyword">return</span> <span class="token punctuation">[</span>hook<span class="token punctuation">.</span>memoizedState<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这一段看起来很复杂，让慢慢吃透，首先将上一次更新的<code>pending queue</code> 合并到 <code>basequeue</code>，为什么要这么做，比如再一次点击事件中这么写，</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">const</span> <span class="token punctuation">[</span> number <span class="token punctuation">,</span>setNumber <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
   <span class="token keyword">const</span> <span class="token function-variable function">handerClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//    setNumber(1)</span>
    <span class="token comment">//    setNumber(2)</span>
    <span class="token comment">//    setNumber(3)</span>
       <span class="token function">setNumber</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token operator">=&gt;</span>state<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
       <span class="token comment">// 获取上次 state = 1 </span>
       <span class="token function">setNumber</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token operator">=&gt;</span>state<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
       <span class="token comment">// 获取上次 state = 2</span>
       <span class="token function">setNumber</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token operator">=&gt;</span>state<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span> <span class="token comment">// 3 </span>
   <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span> number <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token function">handerClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token operator">&gt;</span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>点击按钮， 打印 3</strong></p><p>三次<code>setNumber</code>产生的<code>update</code>会暂且放入<code>pending queue</code>，在下一次函数组件执行时候，三次 <code>update</code>被合并到 <code>baseQueue</code>。结构如下图：</p><img src="/notes/assets/react/52ed6118238d412aa20044ad33f25827_tplv-k3u1fbpfcp-watermark.image" alt="demo"><p>接下来会把当前<code>useState</code>或是<code>useReduer</code>对应的<code>hooks</code>上的<code>baseState</code>和<code>baseQueue</code>更新到最新的状态。会循环<code>baseQueue</code>的<code>update</code>，复制一份<code>update</code>,更新<code>expirationTime</code>，对于有足够优先级的<code>update</code>（上述三个<code>setNumber</code>产生的<code>update</code>都具有足够的优先级），要获取最新的<code>state</code>状态。，会一次执行<code>useState</code>上的每一个<code>action</code>。得到最新的<code>state</code>。</p><p><strong>更新state</strong></p><img src="/notes/assets/react/6d78fac49ce648ea89bce06a25e1128d_tplv-k3u1fbpfcp-watermark.image" alt="demo"><p>这里有会有两个疑问🤔️:</p><ul><li>问题一：这里不是执行最后一个<code>action</code>不就可以了嘛?</li></ul><p>答案： 原因很简单，上面说了 <code>useState</code>逻辑和<code>useReducer</code>差不多。如果第一个参数是一个函数，会引用上一次 <code>update</code>产生的 <code>state</code>, 所以需要<strong>循环调用，每一个<code>update</code>的<code>reducer</code></strong>，如果<code>setNumber(2)</code>是这种情况，那么只用更新值，如果是<code>setNumber(state=&gt;state+1)</code>,那么传入上一次的 <code>state</code> 得到最新<code>state</code>。</p><ul><li>问题二：什么情况下会有优先级不足的情况(<code>updateExpirationTime &lt; renderExpirationTime</code>)？</li></ul><p>答案： 这种情况，一般会发生在，当调用<code>setNumber</code>时候，调用<code>scheduleUpdateOnFiber</code>渲染当前组件时，又产生了一次新的更新，所以把最终执行<code>reducer</code>更新<code>state</code>任务交给下一次更新。</p><h2 id="_3-updateeffect" tabindex="-1"><a class="header-anchor" href="#_3-updateeffect" aria-hidden="true">#</a> 3 updateEffect</h2><hr><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">updateEffect</span><span class="token punctuation">(</span><span class="token parameter">create<span class="token punctuation">,</span> deps</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> hook <span class="token operator">=</span> <span class="token function">updateWorkInProgressHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> nextDeps <span class="token operator">=</span> deps <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> deps<span class="token punctuation">;</span>
    <span class="token keyword">let</span> destroy <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>currentHook <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> prevEffect <span class="token operator">=</span> currentHook<span class="token punctuation">.</span>memoizedState<span class="token punctuation">;</span>
        destroy <span class="token operator">=</span> prevEffect<span class="token punctuation">.</span>destroy<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nextDeps <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> prevDeps <span class="token operator">=</span> prevEffect<span class="token punctuation">.</span>deps<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">areHookInputsEqual</span><span class="token punctuation">(</span>nextDeps<span class="token punctuation">,</span> prevDeps<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">pushEffect</span><span class="token punctuation">(</span>hookEffectTag<span class="token punctuation">,</span> create<span class="token punctuation">,</span> destroy<span class="token punctuation">,</span> nextDeps<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    currentlyRenderingFiber<span class="token punctuation">.</span>effectTag <span class="token operator">|=</span> fiberEffectTag
    hook<span class="token punctuation">.</span>memoizedState <span class="token operator">=</span> <span class="token function">pushEffect</span><span class="token punctuation">(</span>
        HookHasEffect <span class="token operator">|</span> hookEffectTag<span class="token punctuation">,</span>
        create<span class="token punctuation">,</span>
        destroy<span class="token punctuation">,</span>
        nextDeps<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>useEffect</code> 做的事很简单，判断两次<code>deps</code> 相等，如果相等说明此次更新不需要执行，则直接调用 <code>pushEffect</code>,这里注意 <code>effect</code>的标签，<code>hookEffectTag</code>,如果不相等，那么更新 <code>effect</code> ,并且赋值给<code>hook.memoizedState</code>，这里标签是 <code>HookHasEffect | hookEffectTag</code>,然后在<code>commit</code>阶段，<code>react</code>会通过标签来判断，是否执行当前的 <code>effect</code> 函数。</p><h2 id="_4-updatememo" tabindex="-1"><a class="header-anchor" href="#_4-updatememo" aria-hidden="true">#</a> 4 updateMemo</h2><hr><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">updateMemo</span><span class="token punctuation">(</span>
    <span class="token parameter">nextCreate<span class="token punctuation">,</span>
    deps<span class="token punctuation">,</span></span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> hook <span class="token operator">=</span> <span class="token function">updateWorkInProgressHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> nextDeps <span class="token operator">=</span> deps <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> deps<span class="token punctuation">;</span> <span class="token comment">// 新的 deps 值</span>
    <span class="token keyword">const</span> prevState <span class="token operator">=</span> hook<span class="token punctuation">.</span>memoizedState<span class="token punctuation">;</span> 
    <span class="token keyword">if</span> <span class="token punctuation">(</span>prevState <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nextDeps <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> prevDeps <span class="token operator">=</span> prevState<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 之前保存的 deps 值</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">areHookInputsEqual</span><span class="token punctuation">(</span>nextDeps<span class="token punctuation">,</span> prevDeps<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//判断两次 deps 值</span>
            <span class="token keyword">return</span> prevState<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> nextValue <span class="token operator">=</span> <span class="token function">nextCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    hook<span class="token punctuation">.</span>memoizedState <span class="token operator">=</span> <span class="token punctuation">[</span>nextValue<span class="token punctuation">,</span> nextDeps<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> nextValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在组件更新过程中，执行<code>useMemo</code>函数，做的事情实际很简单，就是判断两次 <code>deps</code>是否相等，如果不想等，证明依赖项发生改变，那么执行 <code>useMemo</code>的第一个函数，得到新的值，然后重新赋值给<code>hook.memoizedState</code>,如果相等 证明没有依赖项改变，那么直接获取缓存的值。</p><p>不过这里有一点，值得注意，<code>nextCreate()</code>执行，如果里面引用了<code>usestate</code>等信息，变量会被引用，无法被垃圾回收机制回收，就是闭包原理，那么访问的属性有可能不是最新的值，所以需要把引用的值，添加到依赖项 <code>dep</code> 数组中。每一次<code>dep</code>改变，重新执行，就不会出现问题了。</p><p><strong>温馨小提示： 有很多同学说 <code>useMemo</code>怎么用，到底什么场景用，用了会不会起到反作用，通过对源码原理解析，可以明确的说，基本上可以放心使用，说白了就是可以定制化缓存，存值取值而已。</strong></p><h2 id="_5-updateref" tabindex="-1"><a class="header-anchor" href="#_5-updateref" aria-hidden="true">#</a> 5 updateRef</h2><hr><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">updateRef</span><span class="token punctuation">(</span><span class="token parameter">initialValue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> hook <span class="token operator">=</span> <span class="token function">updateWorkInProgressHook</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> hook<span class="token punctuation">.</span>memoizedState
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>函数组件更新<code>useRef</code>做的事情更简单，就是返回了缓存下来的值，也就是无论函数组件怎么执行，执行多少次，<code>hook.memoizedState</code>内存中都指向了一个对象，所以解释了<code>useEffect</code>,<code>useMemo</code> 中，为什么<code>useRef</code>不需要依赖注入，就能访问到最新的改变值。</p><p><strong>一次点击事件更新</strong></p><img src="/notes/assets/react/a02c58be8c6f455f96c2e691b2ac6f7b_tplv-k3u1fbpfcp-watermark.image" alt="demo"></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: dean@57blocks.com">DeanSui</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/notes/assets/app.11072343.js" defer></script>
  </body>
</html>
