<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.36">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title></title><meta name="description" content="å›å­è—å™¨äºèº« å¾…æ—¶è€ŒåŠ¨ å¤©ä¸‹æœ‰é“åˆ™è§ æ— é“åˆ™éš">
    <link rel="modulepreload" href="/notes/assets/app.9d3046e8.js"><link rel="modulepreload" href="/notes/assets/reactKeeplive.html.ced8ef6c.js"><link rel="modulepreload" href="/notes/assets/reactKeeplive.html.8045ed24.js">
    <link rel="stylesheet" href="/notes/assets/style.3c840394.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/notes/" class=""><img class="logo" src="https://vuejs.org/images/logo.png" alt><!----></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="æŠ€æœ¯"><span class="title">æŠ€æœ¯</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="æŠ€æœ¯"><span class="title">æŠ€æœ¯</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/notes/technology/base.md" class="" aria-label="æŠ€æœ¯å‰ç»"><!--[--><!--]--> æŠ€æœ¯å‰ç» <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="js"><span class="title">js</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="js"><span class="title">js</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/notes/mozillajs/baseObject/symbol.md" class="" aria-label="mozillaï¼šåŸºæœ¬å¯¹è±¡"><!--[--><!--]--> mozillaï¼šåŸºæœ¬å¯¹è±¡ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/jsInterview/baseInterview.md" class="" aria-label="åŸºç¡€é¢è¯•é¢˜"><!--[--><!--]--> åŸºç¡€é¢è¯•é¢˜ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/js/stack/executionStack.md" class="" aria-label="js æ¦‚å¿µ"><!--[--><!--]--> js æ¦‚å¿µ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/ts/jsx/support" class="" aria-label="JSX"><!--[--><!--]--> JSX <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/ts/project/inDepthTs.md" class="" aria-label="TypeScript é¡¹ç›®"><!--[--><!--]--> TypeScript é¡¹ç›® <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/jsNews/es6News.md" class="" aria-label="js æ–°æ¦‚å¿µ"><!--[--><!--]--> js æ–°æ¦‚å¿µ <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="æŠ€æœ¯"><span class="title">æŠ€æœ¯</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="æŠ€æœ¯"><span class="title">æŠ€æœ¯</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/notes/technology/base.md" class="" aria-label="æŠ€æœ¯å‰ç»"><!--[--><!--]--> æŠ€æœ¯å‰ç» <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="js"><span class="title">js</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="js"><span class="title">js</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/notes/mozillajs/baseObject/symbol.md" class="" aria-label="mozillaï¼šåŸºæœ¬å¯¹è±¡"><!--[--><!--]--> mozillaï¼šåŸºæœ¬å¯¹è±¡ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/jsInterview/baseInterview.md" class="" aria-label="åŸºç¡€é¢è¯•é¢˜"><!--[--><!--]--> åŸºç¡€é¢è¯•é¢˜ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/js/stack/executionStack.md" class="" aria-label="js æ¦‚å¿µ"><!--[--><!--]--> js æ¦‚å¿µ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/ts/jsx/support" class="" aria-label="JSX"><!--[--><!--]--> JSX <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/ts/project/inDepthTs.md" class="" aria-label="TypeScript é¡¹ç›®"><!--[--><!--]--> TypeScript é¡¹ç›® <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/notes/jsNews/es6News.md" class="" aria-label="js æ–°æ¦‚å¿µ"><!--[--><!--]--> js æ–°æ¦‚å¿µ <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">ç¬¬ 1 æœŸï¼šReactç†å¿µ <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/notes/react/preparation/idea.md" class="sidebar-item" aria-label="Reactç†å¿µ"><!--[--><!--]--> Reactç†å¿µ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/preparation/oldConstructure.md" class="sidebar-item" aria-label="è€çš„Reactæ¶æ„"><!--[--><!--]--> è€çš„Reactæ¶æ„ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/preparation/newConstructure.md" class="sidebar-item" aria-label="æ–°çš„Reactæ¶æ„"><!--[--><!--]--> æ–°çš„Reactæ¶æ„ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/process/fiber-mental.md" class="sidebar-item" aria-label="Fiberæ¶æ„çš„å¿ƒæ™ºæ¨¡å‹"><!--[--><!--]--> Fiberæ¶æ„çš„å¿ƒæ™ºæ¨¡å‹ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/process/fiber.md" class="sidebar-item" aria-label="Fiberæ¶æ„çš„å®ç°åŸç†"><!--[--><!--]--> Fiberæ¶æ„çš„å®ç°åŸç† <!--[--><!--]--></a><!----></li><li><a href="/notes/react/process/doubleBuffer.md" class="sidebar-item" aria-label="Fiberæ¶æ„çš„å·¥ä½œåŸç†"><!--[--><!--]--> Fiberæ¶æ„çš„å·¥ä½œåŸç† <!--[--><!--]--></a><!----></li><li><a href="/notes/react/preparation/summary.md" class="sidebar-item" aria-label="æ€»ç»“"><!--[--><!--]--> æ€»ç»“ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">ç¬¬2æœŸï¼šå‰ç½®çŸ¥è¯† <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/notes/react/preparation/file.md" class="sidebar-item" aria-label="æºç çš„æ–‡ä»¶ç»“æ„"><!--[--><!--]--> æºç çš„æ–‡ä»¶ç»“æ„ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/preparation/source.md" class="sidebar-item" aria-label="è°ƒè¯•æºç "><!--[--><!--]--> è°ƒè¯•æºç  <!--[--><!--]--></a><!----></li><li><a href="/notes/react/preparation/jsx.md" class="sidebar-item" aria-label="æ·±å…¥ç†è§£JSX"><!--[--><!--]--> æ·±å…¥ç†è§£JSX <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">ç¬¬3æœŸï¼šrenderé˜¶æ®µ <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/notes/react/process/reconciler.md" class="sidebar-item" aria-label="æµç¨‹æ¦‚è§ˆ"><!--[--><!--]--> æµç¨‹æ¦‚è§ˆ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/process/beginWork.md" class="sidebar-item" aria-label="beginWork"><!--[--><!--]--> beginWork <!--[--><!--]--></a><!----></li><li><a href="/notes/react/process/completeWork.md" class="sidebar-item" aria-label="completeWork"><!--[--><!--]--> completeWork <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">ç¬¬4æœŸï¼šcommité˜¶æ®µ <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/notes/react/renderer/prepare.md" class="sidebar-item" aria-label="æµç¨‹æ¦‚è§ˆ"><!--[--><!--]--> æµç¨‹æ¦‚è§ˆ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/renderer/beforeMutation.md" class="sidebar-item" aria-label="beforemutationé˜¶æ®µ"><!--[--><!--]--> beforemutationé˜¶æ®µ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/renderer/mutation.md" class="sidebar-item" aria-label="mutationé˜¶æ®µ"><!--[--><!--]--> mutationé˜¶æ®µ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/renderer/layout.md" class="sidebar-item" aria-label="layouté˜¶æ®µ"><!--[--><!--]--> layouté˜¶æ®µ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">ç¬¬5æœŸï¼šDiffç®—æ³• <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/notes/react/diff/prepare.md" class="sidebar-item" aria-label="æ¦‚è§ˆ"><!--[--><!--]--> æ¦‚è§ˆ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/diff/one.md" class="sidebar-item" aria-label="å•èŠ‚ç‚¹Diff"><!--[--><!--]--> å•èŠ‚ç‚¹Diff <!--[--><!--]--></a><!----></li><li><a href="/notes/react/diff/multi.md" class="sidebar-item" aria-label="å¤šèŠ‚ç‚¹Diff"><!--[--><!--]--> å¤šèŠ‚ç‚¹Diff <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">ç¬¬6æœŸï¼šçŠ¶æ€æ›´æ–° <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/notes/react/state/prepare.md" class="sidebar-item" aria-label="æµç¨‹æ¦‚è§ˆ"><!--[--><!--]--> æµç¨‹æ¦‚è§ˆ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/state/mental.md" class="sidebar-item" aria-label="å¿ƒæ™ºæ¨¡å‹"><!--[--><!--]--> å¿ƒæ™ºæ¨¡å‹ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/state/update.md" class="sidebar-item" aria-label="Update"><!--[--><!--]--> Update <!--[--><!--]--></a><!----></li><li><a href="/notes/react/state/priority.md" class="sidebar-item" aria-label="æ·±å…¥ç†è§£ä¼˜å…ˆçº§"><!--[--><!--]--> æ·±å…¥ç†è§£ä¼˜å…ˆçº§ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/state/reactdom.md" class="sidebar-item" aria-label="ReactDOM.render"><!--[--><!--]--> ReactDOM.render <!--[--><!--]--></a><!----></li><li><a href="/notes/react/state/setstate.md" class="sidebar-item" aria-label="this.setState"><!--[--><!--]--> this.setState <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">ç¬¬7æœŸï¼šHooks <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/notes/react/hooks/prepare.md" class="sidebar-item" aria-label="Hooksç†å¿µ"><!--[--><!--]--> Hooksç†å¿µ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/hooks/create.md" class="sidebar-item" aria-label="æç®€Hookså®ç°"><!--[--><!--]--> æç®€Hookså®ç° <!--[--><!--]--></a><!----></li><li><a href="/notes/react/hooks/structure.md" class="sidebar-item" aria-label="Hooksæ•°æ®ç»“æ„"><!--[--><!--]--> Hooksæ•°æ®ç»“æ„ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/hooks/usestate.md" class="sidebar-item" aria-label="useStateä¸useReducer"><!--[--><!--]--> useStateä¸useReducer <!--[--><!--]--></a><!----></li><li><a href="/notes/react/hooks/useeffect.md" class="sidebar-item" aria-label="useEffect"><!--[--><!--]--> useEffect <!--[--><!--]--></a><!----></li><li><a href="/notes/react/hooks/useref.md" class="sidebar-item" aria-label="useRef"><!--[--><!--]--> useRef <!--[--><!--]--></a><!----></li><li><a href="/notes/react/hooks/usememo.md" class="sidebar-item" aria-label="useMemoä¸useCallback"><!--[--><!--]--> useMemoä¸useCallback <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">ç¬¬8æœŸï¼šConcurrentMode <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/notes/react/concurrent/prepare.md" class="sidebar-item" aria-label="æ¦‚è§ˆ"><!--[--><!--]--> æ¦‚è§ˆ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/concurrent/scheduler.md" class="sidebar-item" aria-label="Schedulerçš„åŸç†ä¸å®ç°"><!--[--><!--]--> Schedulerçš„åŸç†ä¸å®ç° <!--[--><!--]--></a><!----></li><li><a href="/notes/react/concurrent/lane.md" class="sidebar-item" aria-label="laneæ¨¡å‹"><!--[--><!--]--> laneæ¨¡å‹ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/concurrent/componentWillXXX.md" class="sidebar-item" aria-label="æ·±å…¥æºç å‰–æcomponentWillXXXä¸ºä»€ä¹ˆUNSAFE"><!--[--><!--]--> æ·±å…¥æºç å‰–æcomponentWillXXXä¸ºä»€ä¹ˆUNSAFE <!--[--><!--]--></a><!----></li><li><a href="/notes/react/concurrent/redux.html" class="sidebar-item" aria-label="redux æºç è§£è¯»"><!--[--><!--]--> redux æºç è§£è¯» <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">ç¬¬9æœŸï¼šåŸºç¡€æ¦‚å¿µ <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/notes/react/principle/basePrinciple.md" class="sidebar-item" aria-label="æ¦‚è¿°"><!--[--><!--]--> æ¦‚è¿° <!--[--><!--]--></a><!----></li><li><a href="/notes/react/principle/componentApi.md" class="sidebar-item" aria-label="ç»„ä»¶ç±»-api"><!--[--><!--]--> ç»„ä»¶ç±»-api <!--[--><!--]--></a><!----></li><li><a href="/notes/react/principle/toolApi.md" class="sidebar-item" aria-label="å·¥å…·ç±»-api"><!--[--><!--]--> å·¥å…·ç±»-api <!--[--><!--]--></a><!----></li><li><a href="/notes/react/principle/hookApi.md" class="sidebar-item" aria-label="hooks-api"><!--[--><!--]--> hooks-api <!--[--><!--]--></a><!----></li><li><a href="/notes/react/principle/domApi.md" class="sidebar-item" aria-label="react-dom-api"><!--[--><!--]--> react-dom-api <!--[--><!--]--></a><!----></li><li><a href="/notes/react/principle/hookUse.md" class="sidebar-item" aria-label="react-hookä½¿ç”¨"><!--[--><!--]--> react-hookä½¿ç”¨ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/principle/hookCustom.md" class="sidebar-item" aria-label="react-hookè‡ªå®šä¹‰"><!--[--><!--]--> react-hookè‡ªå®šä¹‰ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/principle/hookPrinciple.md" class="sidebar-item" aria-label="react-hookåŸç†"><!--[--><!--]--> react-hookåŸç† <!--[--><!--]--></a><!----></li><li><a href="/notes/react/principle/hoc.md" class="sidebar-item" aria-label="æ·±å…¥hoc"><!--[--><!--]--> æ·±å…¥hoc <!--[--><!--]--></a><!----></li><li><a href="/notes/react/principle/reactRedux.md" class="sidebar-item" aria-label="React-reduxæºç "><!--[--><!--]--> React-reduxæºç  <!--[--><!--]--></a><!----></li><li><a href="/notes/react/principle/reactKeeplive.md" class="sidebar-item active" aria-label="reactç¼“å­˜é¡µé¢"><!--[--><!--]--> reactç¼“å­˜é¡µé¢ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/principle/reactRouter.md" class="sidebar-item" aria-label="react-routerè·¯ç”±åŸç†"><!--[--><!--]--> react-routerè·¯ç”±åŸç† <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">ç¬¬10æœŸï¼šåŸºç¡€é¢è¯•é¢˜ <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/notes/react/interview/50/interview1.md" class="sidebar-item" aria-label="ä»€ä¹ˆæ—¶å€™ä½¿ç”¨çŠ¶æ€ç®¡ç†å™¨?"><!--[--><!--]--> ä»€ä¹ˆæ—¶å€™ä½¿ç”¨çŠ¶æ€ç®¡ç†å™¨? <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview2.md" class="sidebar-item" aria-label="renderå‡½æ•°ä¸­returnå¦‚æœæ²¡æœ‰ä½¿ç”¨()ä¼šæœ‰ä»€ä¹ˆé—®é¢˜?"><!--[--><!--]--> renderå‡½æ•°ä¸­returnå¦‚æœæ²¡æœ‰ä½¿ç”¨()ä¼šæœ‰ä»€ä¹ˆé—®é¢˜? <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview3.md" class="sidebar-item" aria-label="componentWillUpdateå¯ä»¥ç›´æ¥ä¿®æ”¹stateçš„å€¼å—?"><!--[--><!--]--> componentWillUpdateå¯ä»¥ç›´æ¥ä¿®æ”¹stateçš„å€¼å—? <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview4.md" class="sidebar-item" aria-label="è¯´è¯´å¯¹Reactçš„æ¸²æŸ“åŸç†çš„ç†è§£?"><!--[--><!--]--> è¯´è¯´å¯¹Reactçš„æ¸²æŸ“åŸç†çš„ç†è§£? <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview5.md" class="sidebar-item" aria-label="ä»€ä¹ˆæ¸²æŸ“åŠ«æŒï¼Ÿ"><!--[--><!--]--> ä»€ä¹ˆæ¸²æŸ“åŠ«æŒï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview6.md" class="sidebar-item" aria-label="ReactIntlï¼Ÿ"><!--[--><!--]--> ReactIntlï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview7.md" class="sidebar-item" aria-label="Contextï¼Ÿ"><!--[--><!--]--> Contextï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview12.md" class="sidebar-item" aria-label="Contextå®ä¾‹ï¼Ÿ"><!--[--><!--]--> Contextå®ä¾‹ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview8.md" class="sidebar-item" aria-label="RenderPropsï¼Ÿ"><!--[--><!--]--> RenderPropsï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview9.md" class="sidebar-item" aria-label="é«˜é˜¶ç»„ä»¶ï¼Ÿ"><!--[--><!--]--> é«˜é˜¶ç»„ä»¶ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview10.md" class="sidebar-item" aria-label="Refsè½¬å‘ï¼Ÿ"><!--[--><!--]--> Refsè½¬å‘ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview11.md" class="sidebar-item" aria-label="Reacté¡¶å±‚APIï¼Ÿ"><!--[--><!--]--> Reacté¡¶å±‚APIï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview13.md" class="sidebar-item" aria-label="contextTypeï¼Ÿ"><!--[--><!--]--> contextTypeï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview14.md" class="sidebar-item" aria-label="é™¤äº†å®ä¾‹çš„å±æ€§å¯ä»¥è·å–Contextå¤–å“ªäº›åœ°æ–¹è¿˜èƒ½ç›´æ¥è·å–Contextï¼Ÿ"><!--[--><!--]--> é™¤äº†å®ä¾‹çš„å±æ€§å¯ä»¥è·å–Contextå¤–å“ªäº›åœ°æ–¹è¿˜èƒ½ç›´æ¥è·å–Contextï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview15.md" class="sidebar-item" aria-label="Consumerï¼Ÿ"><!--[--><!--]--> Consumerï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview16.md" class="sidebar-item" aria-label="windowingï¼Ÿ"><!--[--><!--]--> windowingï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview17.md" class="sidebar-item" aria-label="ReactDOM-Reactçš„æ’æ§½(Portals)ï¼Ÿ"><!--[--><!--]--> ReactDOM-Reactçš„æ’æ§½(Portals)ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview18.md" class="sidebar-item" aria-label="Reactçš„æ’æ§½(Portals)ï¼Ÿ"><!--[--><!--]--> Reactçš„æ’æ§½(Portals)ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview19.md" class="sidebar-item" aria-label="æ„é€ å‡½æ•°ï¼Ÿ"><!--[--><!--]--> æ„é€ å‡½æ•°ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview20.md" class="sidebar-item" aria-label="Reactæ‹†åˆ†ç»„ä»¶ï¼Ÿ"><!--[--><!--]--> Reactæ‹†åˆ†ç»„ä»¶ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview21.md" class="sidebar-item" aria-label="Reactçš„ä¸¥æ ¼æ¨¡å¼ï¼Ÿ"><!--[--><!--]--> Reactçš„ä¸¥æ ¼æ¨¡å¼ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview22.md" class="sidebar-item" aria-label="relayï¼Ÿ"><!--[--><!--]--> relayï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview23.md" class="sidebar-item" aria-label="æ•è·é”™è¯¯ï¼Ÿ"><!--[--><!--]--> æ•è·é”™è¯¯ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview24" class="sidebar-item" aria-label="å¦‚æœç»„ä»¶çš„å±æ€§æ²¡æœ‰ä¼ å€¼ï¼Œé‚£ä¹ˆå®ƒçš„é»˜è®¤å€¼æ˜¯ä»€ä¹ˆï¼Ÿ"><!--[--><!--]--> å¦‚æœç»„ä»¶çš„å±æ€§æ²¡æœ‰ä¼ å€¼ï¼Œé‚£ä¹ˆå®ƒçš„é»˜è®¤å€¼æ˜¯ä»€ä¹ˆï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview25.md" class="sidebar-item" aria-label="Reactçš„è¡¨å•åº“ï¼Ÿ"><!--[--><!--]--> Reactçš„è¡¨å•åº“ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview26.md" class="sidebar-item" aria-label="suspenseç»„ä»¶ï¼Ÿ"><!--[--><!--]--> suspenseç»„ä»¶ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview27.md" class="sidebar-item" aria-label="`super()`å’Œ`super(props)`ï¼Ÿ"><!--[--><!--]--> `super()`å’Œ`super(props)`ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview28.md" class="sidebar-item" aria-label="åŠ¨æ€å¯¼å…¥ç»„ä»¶ï¼Ÿ"><!--[--><!--]--> åŠ¨æ€å¯¼å…¥ç»„ä»¶ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview29.md" class="sidebar-item" aria-label="ç»™éæ§ç»„ä»¶è®¾ç½®é»˜è®¤çš„å€¼ï¼Ÿ"><!--[--><!--]--> ç»™éæ§ç»„ä»¶è®¾ç½®é»˜è®¤çš„å€¼ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview30.md" class="sidebar-item" aria-label="ä½¿ç”¨Hooksè·å–æœåŠ¡ç«¯æ•°æ®ï¼Ÿ"><!--[--><!--]--> ä½¿ç”¨Hooksè·å–æœåŠ¡ç«¯æ•°æ®ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview31.md" class="sidebar-item" aria-label="renderæ–¹æ³•çš„åŸç†ï¼Ÿ"><!--[--><!--]--> renderæ–¹æ³•çš„åŸç†ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview32.md" class="sidebar-item" aria-label="ä½¿ç”¨Hooksï¼Ÿ"><!--[--><!--]--> ä½¿ç”¨Hooksï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview33.md" class="sidebar-item" aria-label="useEffectå’ŒuseLayoutEffectï¼Ÿ"><!--[--><!--]--> useEffectå’ŒuseLayoutEffectï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview34.md" class="sidebar-item" aria-label="è‡ªå®šä¹‰ç»„ä»¶æ—¶renderæ˜¯å¦ä¸ºå¯é€‰çš„ï¼Ÿ"><!--[--><!--]--> è‡ªå®šä¹‰ç»„ä»¶æ—¶renderæ˜¯å¦ä¸ºå¯é€‰çš„ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview35.md" class="sidebar-item" aria-label="Reactå¿…é¡»ä½¿ç”¨JSXï¼Ÿ"><!--[--><!--]--> Reactå¿…é¡»ä½¿ç”¨JSXï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview36.md" class="sidebar-item" aria-label="éœ€è¦æŠŠkeysè®¾ç½®ä¸ºå…¨å±€å”¯ä¸€ï¼Ÿ"><!--[--><!--]--> éœ€è¦æŠŠkeysè®¾ç½®ä¸ºå…¨å±€å”¯ä¸€ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview37.md" class="sidebar-item" aria-label="æ€ä¹ˆå®šæ—¶æ›´æ–°ä¸€ä¸ªç»„ä»¶ï¼Ÿ"><!--[--><!--]--> æ€ä¹ˆå®šæ—¶æ›´æ–°ä¸€ä¸ªç»„ä»¶ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview38.md" class="sidebar-item" aria-label="ä½¿ç”¨webpackæ‰“åŒ…Reacté¡¹ç›®ä¼˜åŒ–ï¼Ÿ"><!--[--><!--]--> ä½¿ç”¨webpackæ‰“åŒ…Reacté¡¹ç›®ä¼˜åŒ–ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview39.md" class="sidebar-item" aria-label="Reactæ ¹æ®ä¸åŒçš„ç¯å¢ƒæ‰“åŒ…ï¼Ÿ"><!--[--><!--]--> Reactæ ¹æ®ä¸åŒçš„ç¯å¢ƒæ‰“åŒ…ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview40.md" class="sidebar-item" aria-label="éReactçš„æºç "><!--[--><!--]--> éReactçš„æºç  <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview41.md" class="sidebar-item" aria-label="React.forwardRef"><!--[--><!--]--> React.forwardRef <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview42.md" class="sidebar-item" aria-label="Reactäº‹ä»¶"><!--[--><!--]--> Reactäº‹ä»¶ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview43.md" class="sidebar-item" aria-label="Reactçš„reconciliationï¼ˆä¸€è‡´åŒ–ç®—æ³•ï¼‰"><!--[--><!--]--> Reactçš„reconciliationï¼ˆä¸€è‡´åŒ–ç®—æ³•ï¼‰ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview44.md" class="sidebar-item" aria-label="Fragment|DOMå…ƒç´ |å®‰å…¨æ³¨å…¥"><!--[--><!--]--> Fragment|DOMå…ƒç´ |å®‰å…¨æ³¨å…¥ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview45.md" class="sidebar-item" aria-label="Reactä¸­å¦‚ä½•ç›‘å¬state"><!--[--><!--]--> Reactä¸­å¦‚ä½•ç›‘å¬state <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview46.md" class="sidebar-item" aria-label="ä¸ºä»€ä¹ˆpropså¤åˆ¶ç»™stateä¼šäº§ç”Ÿbug"><!--[--><!--]--> ä¸ºä»€ä¹ˆpropså¤åˆ¶ç»™stateä¼šäº§ç”Ÿbug <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview47.md" class="sidebar-item" aria-label="Reactä¸ºä»€ä¹ˆä¸è¦ç›´æ¥ä¿®æ”¹state|ReactFiber"><!--[--><!--]--> Reactä¸ºä»€ä¹ˆä¸è¦ç›´æ¥ä¿®æ”¹state|ReactFiber <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview48.md" class="sidebar-item" aria-label="è£…é¥°å™¨(Decorator)React"><!--[--><!--]--> è£…é¥°å™¨(Decorator)React <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview49.md" class="sidebar-item" aria-label="reactæ‰‹åŠ¨æ¸…é™¤|forå’ŒhtmlFor"><!--[--><!--]--> reactæ‰‹åŠ¨æ¸…é™¤|forå’ŒhtmlFor <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/50/interview50.md" class="sidebar-item" aria-label="ReactçŠ¶æ€ç®¡ç†"><!--[--><!--]--> ReactçŠ¶æ€ç®¡ç† <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/100/interview51.md" class="sidebar-item" aria-label="Reactæ–°ç‰¹æ€§"><!--[--><!--]--> Reactæ–°ç‰¹æ€§ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/100/interview52.md" class="sidebar-item" aria-label="Reactäº‹ä»¶å¼•ç”¨"><!--[--><!--]--> Reactäº‹ä»¶å¼•ç”¨ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/100/interview53.md" class="sidebar-item" aria-label="constructorå’ŒgetInitialState|å¼•å…¥æœ¬åœ°å›¾ç‰‡"><!--[--><!--]--> constructorå’ŒgetInitialState|å¼•å…¥æœ¬åœ°å›¾ç‰‡ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/100/interview54.md" class="sidebar-item" aria-label="ImmutableData"><!--[--><!--]--> ImmutableData <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/100/interview55.md" class="sidebar-item" aria-label="æé«˜ç»„ä»¶çš„æ¸²æŸ“æ•ˆç‡"><!--[--><!--]--> æé«˜ç»„ä»¶çš„æ¸²æŸ“æ•ˆç‡ <!--[--><!--]--></a><!----></li><li><a href="/notes/react/interview/100/interview56.md" class="sidebar-item" aria-label="reactæ¨è¡Œå‡½æ•°å¼ç»„ä»¶"><!--[--><!--]--> reactæ¨è¡Œå‡½æ•°å¼ç»„ä»¶ <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="" tabindex="-1"><a class="header-anchor" href="#" aria-hidden="true">#</a></h1><h1 id="éœ€æ±‚åˆ†æ" tabindex="-1"><a class="header-anchor" href="#éœ€æ±‚åˆ†æ" aria-hidden="true">#</a> éœ€æ±‚åˆ†æ</h1><p>åœºæ™¯ä¸€ï¼š</p><img src="/notes/assets/react/81a080864616489cba0372f49d5730ad_tplv-k3u1fbpfcp-watermark.image" alt="demo"><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“åœ¨æ•°ä¸‡çº§åˆ«çš„æ•°æ®ä¸­ï¼Œé€‰æ‹©ä¸€æ¡ï¼Œç‚¹å‡»<strong>æŸ¥çœ‹</strong>ï¼Œè·³è½¬åˆ°å½“å‰æ•°æ®çš„è¯¦æƒ…é¡µï¼Œå½“ç‚¹å‡»æŒ‰é’®<strong>è¿”å›</strong>è¿”å›æ¥ï¼Œæˆ–è€…æ˜¯æµè§ˆå™¨å‰è¿›åé€€ç­‰å…¶ä»–æ“ä½œï¼Œè¿”å›åˆ°åˆ—è¡¨é¡µçš„æ—¶å€™ã€‚è¦è®°å½•å½“å‰åˆ—è¡¨çš„ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¦è¿˜åŸç‚¹å‡»æŸ¥çœ‹<strong>æŸ¥çœ‹</strong>å‰çš„é¡µé¢ã€‚ä½†æ˜¯å½“ç‚¹å‡»tabèœå•æŒ‰é’®çš„æ—¶å€™ï¼Œè¦æ¸…é™¤é¡µé¢ä¿¡æ¯ã€‚</p><p>åœºæ™¯äºŒï¼š</p><img src="/notes/assets/react/d23019cf79d347a4b3f3e02352f1c971_tplv-k3u1fbpfcp-watermark.image" alt="demo"><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“ç¼–è¾‘å†…å®¹çš„æ—¶å€™ï¼Œä¸€äº›æ•°æ®å¯èƒ½ä»å…¶ä»–é¡µé¢è·å¾—ï¼Œæ‰€ä»¥è¦æ±‚ï¼Œæ— è®ºåˆ‡æ¢è·¯ç”±ï¼Œåˆ‡æ¢é¡µé¢ï¼Œå½“å‰é¡µé¢çš„ç¼–è¾‘ä¿¡æ¯å‡ä¸èƒ½è¢«ç½®ç©ºï¼Œåªæœ‰ç‚¹å‡»<strong>ç¡®å®š</strong> ï¼Œ<strong>é‡ç½®</strong>ï¼Œè¡¨å•æ‰å†…å®¹ç½®ç©ºã€‚</p><p>åœºæ™¯ä¸‰ï¼š</p><p>åœºæ™¯ä¸€ + åœºæ™¯äºŒ æ˜¯æ›´å¤æ‚çš„ç¼“å­˜é¡µé¢ä¿¡æ¯åœºæ™¯ã€‚</p><h1 id="äºŒ-æ¢³ç†éœ€æ±‚" tabindex="-1"><a class="header-anchor" href="#äºŒ-æ¢³ç†éœ€æ±‚" aria-hidden="true">#</a> äºŒ æ¢³ç†éœ€æ±‚</h1><h2 id="_1-è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#_1-è§£å†³æ–¹æ¡ˆ" aria-hidden="true">#</a> 1 è§£å†³æ–¹æ¡ˆ</h2><h3 id="_1-æ•°æ®çŠ¶æ€ç¼“å­˜åˆ°å…¬å…±ç®¡ç†å¯è¡Œæ€§" tabindex="-1"><a class="header-anchor" href="#_1-æ•°æ®çŠ¶æ€ç¼“å­˜åˆ°å…¬å…±ç®¡ç†å¯è¡Œæ€§" aria-hidden="true">#</a> 1 æ•°æ®çŠ¶æ€ç¼“å­˜åˆ°å…¬å…±ç®¡ç†å¯è¡Œæ€§</h3><p>è¿™ä¸ªéœ€æ±‚é¦–å…ˆè®©æƒ³åˆ°çš„æ˜¯ç”¨<code>redux</code>æˆ–è€…æ˜¯<code>mobx</code>æ¥æŠŠé¡µé¢çš„çŠ¶æ€ç¼“å­˜èµ·æ¥ï¼Œç„¶ååˆ‡æ¢é¡µé¢çš„æ—¶å€™ï¼ŒæŠŠè¿™äº›æ•°æ®ç¼“å­˜è¿›å»ï¼Œå†æ¬¡åˆ‡æ¢å›æ¥çš„æ—¶å€™ï¼Œå°†æ•°æ®å–å‡ºæ¥ï¼Œè¿™æ ·å°±ä¸€ä¸ªé—®é¢˜ï¼Œå³ä¾¿èƒ½ç¼“å­˜<code>state</code>å±‚ï¼Œä½†æ˜¯å¦‚æœä¸€äº›è¡¨å•ç»„ä»¶æ˜¯éå—æ§ç»„ä»¶ï¼Œæ˜¯æ— æ³•ç¼“å­˜ä¸‹æ¥çš„ï¼Œè¿˜æœ‰ä¸€äº›<code>dom</code>çŠ¶æ€æ˜¯ç¼“å­˜ä¸äº†çš„ï¼Œæ¯”å¦‚æ‰‹åŠ¨æ·»åŠ çš„ä¸€äº›æ ·å¼ç­‰ã€‚è¿˜æœ‰å°±æ˜¯å®é™…æƒ…å†µæ¯”è¾ƒå¤æ‚ï¼Œæœ‰å¯Œæ–‡æœ¬ç»„ä»¶ï¼Œä½ æ˜¯æ— æ³•ç›´æ¥è·å–ç»‘å®šçš„<code>state</code>çš„ã€‚</p><p>ç¬¬äºŒä¸ªåŸå› å°±æ˜¯æœ‰å¥½å‡ ä¸ªé¡¹ç›®ï¼Œè€Œä¸”é¡µé¢æ¯”è¾ƒå¤šï¼Œå¦‚æœéƒ½å»ºç«‹æ•°æ®ç®¡ç†ï¼Œé‚£ä¹ˆå·¥ä½œé‡ä¼šéå¸¸çš„å¤§ã€‚</p><p>æ‰€ä»¥æ•°æ®çŠ¶æ€ç¼“å­˜çš„å¯è¡Œæ€§ä¸é«˜ï¼Œå³ä¾¿å¯ä»¥å®ç°ï¼Œä¹Ÿéœ€è¦å¤§é‡çš„å¤åˆ¶ç²˜è´´ï¼Œè¿™ä¸æ˜¯çš„è¿½æ±‚ã€‚</p><h3 id="_2-react-keepalive-routerè¯ç”Ÿ" tabindex="-1"><a class="header-anchor" href="#_2-react-keepalive-routerè¯ç”Ÿ" aria-hidden="true">#</a> 2 react-keepalive-routerè¯ç”Ÿ</h3><p>å¯¹<code>Route</code> å’Œ <code>Switch</code> ç»„ä»¶åšä¸€äº›åŠŸèƒ½æ€§çš„æ‹“å±•</p><h1 id="ä¸‰è®¾è®¡é˜¶æ®µ" tabindex="-1"><a class="header-anchor" href="#ä¸‰è®¾è®¡é˜¶æ®µ" aria-hidden="true">#</a> ä¸‰è®¾è®¡é˜¶æ®µ</h1><hr><h2 id="_1-äº†è§£react-fiber" tabindex="-1"><a class="header-anchor" href="#_1-äº†è§£react-fiber" aria-hidden="true">#</a> 1 äº†è§£react-fiber</h2><p>ä¸ºä»€ä¹ˆçš„é¡¹ç›®è¦æåˆ°<code>react-fiber</code>å‘¢ï¼Œè¿™é‡Œå…ˆè¯´ä¸€ä¸‹ï¼Œ<code>react-fiber</code>ï¼Œ <code>React Fiber</code> æ˜¯ä» v16 ç‰ˆæœ¬å¼€å§‹å¯¹ <code>Stack Reconciler</code> è¿›è¡Œçš„é‡å†™ï¼Œæ˜¯ v16 ç‰ˆæœ¬çš„æ ¸å¿ƒç®—æ³•å®ç°ã€‚<code>react</code>åœ¨åˆå§‹åŒ–æ„å»ºè¿‡ç¨‹ä¸­ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªç”±<code>child</code>æŒ‡å‘å­<code>fiber</code>,<code>sibling</code>æŒ‡å‘å…„å¼Ÿ<code>fiber</code>,<code>return</code>æŒ‡å‘çˆ¶<code>fiber</code>ä¸‰ä¸ªæŒ‡é’ˆæ„å»ºçš„<code>fiber</code>æ ‘ç»“æ„ï¼Œé‡Œé¢ä¿å­˜ç€<code>dom</code>ä¿¡æ¯ï¼Œ<code>update</code>ä¿¡æ¯ï¼Œ<code>props</code>ä¿¡æ¯ç­‰ï¼Œæ ¸å¿ƒæ€æƒ³å°±æ˜¯ï¼Œåœ¨åˆ‡æ¢é¡µé¢çš„æ—¶å€™,ç»„ä»¶é”€æ¯ï¼Œä½†æ˜¯ä½œä¸ºæ¸²æŸ“è°ƒåº¦çš„<code>react fiber</code>ä¿å­˜<code>keepalive</code>çŠ¶æ€ã€‚åªè¦<code>fiber</code>å­˜æ´»ï¼Œå°±èƒ½è·å–åˆ°<code>dom</code>å…ƒç´ ï¼Œæ•°æ®å±‚<code>state</code>ç­‰ä¿¡æ¯ã€‚</p><img src="/notes/assets/react/7e28dff7b51a4c8ea54631be0e796904_tplv-k3u1fbpfcp-watermark.image" alt="demo"><h2 id="_2-åŸºäº-react-router-dom-å’Œ-react-16-8" tabindex="-1"><a class="header-anchor" href="#_2-åŸºäº-react-router-dom-å’Œ-react-16-8" aria-hidden="true">#</a> 2 åŸºäº react-router-dom å’Œ react 16.8</h2><p>é¦–å…ˆéœ€è¦å¯¹<code>react-router</code>åº“ä¸­çš„ <code>Route</code>ç»„ä»¶å’Œ<code>Switch</code>ç»„ä»¶ä½œå‡ºæ”¹é€ ï¼Œå¯ä»¥é€šè¿‡è·¯ç”±å±‚é¢å®ç°ç¼“å­˜è·¯ç”±åŠŸèƒ½ã€‚å› ä¸ºåœ¨è®¾è®¡ä¹‹åˆï¼Œå°±æƒ³ç€å°†ç”¨ä¸åŒçš„çŠ¶æ€ç®¡ç†<code>keepalive</code>çŠ¶æ€ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œåç»­å¯ä»¥ç»™ç¼“å­˜è·¯ç”±ç»„ä»¶ï¼Œå¢åŠ ä¸€äº›é¢å¤–çš„å£°æ˜å‘¨æœŸï¼Œæ¯”å¦‚è¯´<code>vue</code>ä¸­ <code>activated</code> å’Œ <code>deactivated</code>ä¸€æ ·ã€‚å› ä¸ºè®¾è®¡æ€æƒ³æ˜¯çŠ¶æ€ç®¡ç†ï¼Œé¡¹ç›®ä¾èµ–ä¸­ä¸æƒ³å¼•å…¥<code>redux</code>ç­‰ç¬¬ä¸‰æ–¹åº“ï¼Œæ‰€ä»¥è¿™é‡Œé€‰äº†<code>react-hooks</code>ä¸­ <code>useReducer</code>æ°åˆ°å¥½å¤„ã€‚è¿™å°±æ˜¯<code>react</code>åŸºç¡€åº“ <code>16.8+</code>çš„åŸå› ä¹‹ä¸€ã€‚å¦å¤–ä¸€ä¸ªåŸå› å°±æ˜¯<code>hooks</code>ä¸­æœ‰<code>useMemo</code>è¿™æ ·é˜²æ­¢æ¸²æŸ“ç©¿é€çš„api,æœ‰åŠ©äºè°ƒèŠ‚è·¯ç”±ç»„ä»¶çš„æ›´æ–°æ¬¡æ•°ã€‚</p><h2 id="å·¥ä½œæµç¨‹åˆ†æ" tabindex="-1"><a class="header-anchor" href="#å·¥ä½œæµç¨‹åˆ†æ" aria-hidden="true">#</a> å·¥ä½œæµç¨‹åˆ†æ</h2><p>å—åˆ°<code>react-router-cache-route</code>å¼€æºé¡¹ç›®çš„å¯å‘ï¼Œåœ¨è®¾è®¡æ•´ä¸ªæµç¨‹çš„æ—¶å€™ï¼Œé‡‡å–äº†<strong>äº¤æ¢<code>dom</code>æ ‘</strong>çš„æ–¹å¼ã€‚</p><h3 id="åˆå§‹åŒ–" tabindex="-1"><a class="header-anchor" href="#åˆå§‹åŒ–" aria-hidden="true">#</a> åˆå§‹åŒ–ï¼š</h3><p>æ•´ä½“è®¾è®¡æ€è·¯ç¬¬ä¸€æ¬¡åˆ‡å…¥ç¼“å­˜é¡µé¢çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå®¹å™¨ç»„ä»¶ï¼Œç¼“å­˜<code>Route</code>ä¼šæŠŠç»„ä»¶ï¼Œäº¤ç»™å®¹å™¨ç»„ä»¶æ¥æŒ‚è½½ï¼Œç„¶åå®¹å™¨ç»„ä»¶ç”Ÿæˆ<code>fiber</code>,<code>render</code>ä¹‹åç”Ÿæˆå¯¹åº”çš„<code>dom</code>æ ‘ï¼Œå°†<code>dom</code>æ ‘äº¤ç»™<code>Route</code>ç»„ä»¶ï¼ˆä¹Ÿå°±æ˜¯çš„æ­£å¸¸çš„é¡µé¢ï¼‰ã€‚</p><h3 id="åˆ‡æ¢é¡µé¢" tabindex="-1"><a class="header-anchor" href="#åˆ‡æ¢é¡µé¢" aria-hidden="true">#</a> åˆ‡æ¢é¡µé¢ï¼š</h3><p>åˆ‡æ¢é¡µé¢çš„æ—¶å€™ï¼Œè·¯ç”±ç»„ä»¶æ˜¯è‚¯å®šå¸è½½çš„ï¼Œè¿™æ—¶å€™éœ€è¦å°†çš„<code>dom</code>è¿˜ç»™å®¹å™¨ç»„ä»¶ï¼Œç„¶åå®¹å™¨ç»„ä»¶è¿›å…¥å†»ç»“çŠ¶æ€ã€‚</p><h3 id="å†æ¬¡åˆ‡æ¢åˆ°ç¼“å­˜é¡µé¢" tabindex="-1"><a class="header-anchor" href="#å†æ¬¡åˆ‡æ¢åˆ°ç¼“å­˜é¡µé¢" aria-hidden="true">#</a> å†æ¬¡åˆ‡æ¢åˆ°ç¼“å­˜é¡µé¢ï¼š</h3><p>å†æ¬¡è¿›å…¥è·¯ç”±é¡µé¢çš„æ—¶å€™,é¦–å…ˆä»å®¹å™¨ä¸­ï¼Œå‘ç°æœ‰è¯¥é¡µé¢çš„ç¼“å­˜ï¼Œé‚£ä¹ˆå°†å®¹å™¨è§£å°çŠ¶æ€ï¼Œç„¶åå°†<code>dom</code>æ ‘ï¼Œè¿˜ç»™å½“å‰è·¯ç”±é¡µé¢ã€‚å®Œæˆ<code>keepalive</code>çŠ¶æ€ã€‚</p><h3 id="ç¼“å­˜é”€æ¯" tabindex="-1"><a class="header-anchor" href="#ç¼“å­˜é”€æ¯" aria-hidden="true">#</a> ç¼“å­˜é”€æ¯ï¼š</h3><p>é¡¹ç›®æ”¯æŒé”€æ¯ç¼“å­˜åŠŸèƒ½ï¼Œè°ƒç”¨é”€æ¯æ–¹æ³•,ä¼šå¸è½½å½“å‰ç¼“å­˜å®¹å™¨ï¼Œè¿›ä¸€æ­¥é”€æ¯<code>fiber</code> å’Œ <code>dom</code> ï¼Œå®Œæˆæ•´ä¸ªé”€æ¯åŠŸèƒ½ã€‚</p><h3 id="å·¥ä½œæµç¨‹å›¾" tabindex="-1"><a class="header-anchor" href="#å·¥ä½œæµç¨‹å›¾" aria-hidden="true">#</a> å·¥ä½œæµç¨‹å›¾</h3><img src="/notes/assets/react/d8984d3899644b86bf9ecb3f4e5324e1_tplv-k3u1fbpfcp-watermark.image" alt="demo"><h2 id="å·¥ä½œåŸç†å›¾" tabindex="-1"><a class="header-anchor" href="#å·¥ä½œåŸç†å›¾" aria-hidden="true">#</a> å·¥ä½œåŸç†å›¾</h2><img src="/notes/assets/react/2d85d06f66fe4c009c6e9c45b75e045f_tplv-k3u1fbpfcp-watermark.image" alt="demo"><h2 id="è®¾è®¡çš„ä¼˜åŠ¿" tabindex="-1"><a class="header-anchor" href="#è®¾è®¡çš„ä¼˜åŠ¿" aria-hidden="true">#</a> è®¾è®¡çš„ä¼˜åŠ¿</h2><ol><li><p>å› ä¸ºå†…éƒ¨è¿ç”¨äº† <code>useReducer</code> çŠ¶æ€ç®¡ç†ï¼Œç®¡ç†ç¼“å­˜çŠ¶æ€ï¼Œå¯ä»¥æ›´çµæ´»ï¼Œæ“çºµç¼“å­˜è·¯ç”±ç»„ä»¶ï¼Œé‡‡ç”¨<code>react hooks</code>å…¨æ–°<code>api</code>,æ¸²æŸ“èŠ‚æµï¼Œæ‰‹åŠ¨è§£é™¤ç¼“å­˜ï¼Œå¢åŠ äº†ç¼“å­˜çš„çŠ¶æ€å‘¨æœŸï¼Œç›‘å¬å‡½æ•°ç­‰ã€‚</p></li><li><p>è¿™å¥—ç¼“å­˜é¡µé¢çš„æ€æƒ³ï¼Œä¸ä»…ä»…å¯ä»¥ç”¨åœ¨è·¯ç”±é¡µé¢çº§åˆ«ï¼ŒåæœŸå¯ä»¥è¿ç§»çš„<code>component</code>ç»„ä»¶çº§åˆ«ä¸Šæ¥ã€‚ä¹Ÿæ˜¯åç»­ç»´æŠ¤å’Œå¼€å‘çš„æ–¹å‘ã€‚</p></li></ol><h1 id="å››-ä½¿ç”¨ç®€ä»‹-å¿«é€Ÿä¸Šæ‰‹" tabindex="-1"><a class="header-anchor" href="#å››-ä½¿ç”¨ç®€ä»‹-å¿«é€Ÿä¸Šæ‰‹" aria-hidden="true">#</a> å›› ä½¿ç”¨ç®€ä»‹ + å¿«é€Ÿä¸Šæ‰‹</h1><hr><h2 id="ä¸‹è½½" tabindex="-1"><a class="header-anchor" href="#ä¸‹è½½" aria-hidden="true">#</a> ä¸‹è½½</h2><p>å› ä¸ºæ˜¯æŠŠé¡¹ç›®ä¸Šä¼ åˆ°äº†<code>npm</code>æ–¹ä¾¿å…¶ä»–é¡¹ç›®ç”¨ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä» <code>npm</code> ä¸Šä¸‹è½½ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> react-keepalive-router --save
<span class="token comment"># or</span>
<span class="token function">yarn</span> <span class="token function">add</span> react-keepalive-router
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_1-åŸºæœ¬ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#_1-åŸºæœ¬ç”¨æ³•" aria-hidden="true">#</a> 1 åŸºæœ¬ç”¨æ³•</h2><h3 id="keepaliverouterswitch" tabindex="-1"><a class="header-anchor" href="#keepaliverouterswitch" aria-hidden="true">#</a> KeepaliveRouterSwitch</h3><p><code>KeepaliveRouterSwitch</code>å¯ä»¥ç†è§£ä¸ºå¸¸è§„çš„Switch,ä¹Ÿå¯ä»¥ç†è§£ä¸º <code>keepaliveScope</code>,<strong>ç¡®ä¿æ•´ä¸ªç¼“å­˜ä½œç”¨åŸŸï¼Œåªæœ‰ä¸€ä¸ª <code>KeepaliveRouterSwitch</code> å°±å¯ä»¥äº†ã€‚</strong></p><h3 id="å¸¸è§„ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#å¸¸è§„ç”¨æ³•" aria-hidden="true">#</a> å¸¸è§„ç”¨æ³•</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Redirect <span class="token punctuation">,</span>useHistory  <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> KeepaliveRouterSwitch <span class="token punctuation">,</span>KeepaliveRoute <span class="token punctuation">,</span>addKeeperListener <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-keepalive-router&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">index</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">/* å¢åŠ ç¼“å­˜ç›‘å¬å™¨ */</span>
    <span class="token function">addKeeperListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">history<span class="token punctuation">,</span>cacheKey</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>history<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;å½“å‰æ¿€æ´»çŠ¶æ€ç¼“å­˜ç»„ä»¶ï¼š&#39;</span><span class="token operator">+</span> cacheKey <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Router  <span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Meuns<span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>KeepaliveRouterSwitch<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&#39;/index&#39;</span><span class="token punctuation">}</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Index<span class="token punctuation">}</span> <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&#39;/list&#39;</span><span class="token punctuation">}</span> component<span class="token operator">=</span><span class="token punctuation">{</span>List<span class="token punctuation">}</span> <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span> <span class="token comment">/* å°†è¯¦æƒ…é¡µåŠ å…¥ç¼“å­˜ */</span> <span class="token punctuation">}</span>
          <span class="token operator">&lt;</span>KeepaliveRoute path<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&#39;/detail&#39;</span><span class="token punctuation">}</span> component<span class="token operator">=</span><span class="token punctuation">{</span> Detail <span class="token punctuation">}</span> <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>KeepaliveRoute<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Redirect from<span class="token operator">=</span><span class="token string">&#39;/*&#39;</span> to<span class="token operator">=</span><span class="token string">&#39;/index&#39;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span><span class="token operator">/</span>KeepaliveRouterSwitch<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>è¿™é‡Œåº”è¯¥æ³¨æ„âš ï¸çš„æ˜¯å¯¹äºå¤æ‚çš„è·¯ç”±ç»“æ„ã€‚æˆ–è€…<code>KeepaliveRouterSwitch</code> åŒ…è£¹çš„å­ç»„ä»¶ä¸æ˜¯<code>Route</code> ,è¦ç»™ <code>KeepaliveRouterSwitch</code> å¢åŠ ç‰¹æœ‰çš„å±æ€§ <code>withoutRoute</code> å°±å¯ä»¥äº†ã€‚å¦‚ä¸‹ä¾‹å­ğŸŒ°ğŸŒ°ğŸŒ°ï¼š</p><p><strong>ä¾‹å­ä¸€</strong></p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">KeepaliveRouterSwitch</span></span> <span class="token attr-name">withoutRoute</span> <span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
     </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/a<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ComponentA<span class="token punctuation">}</span></span>  <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
     </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/b<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ComponentB<span class="token punctuation">}</span></span>  <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
     </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">KeepaliveRoute</span></span> <span class="token attr-name">path</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&#39;/detail&#39;</span><span class="token punctuation">}</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span> Detail <span class="token punctuation">}</span></span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">KeepaliveRoute</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">KeepaliveRouterSwitch</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>ä¾‹å­äºŒ</strong></p><p>æˆ–è€…å¯ä»¥ä½¿ç”¨ <code>renderRoutes</code> ç­‰<code>api</code>é…åˆ <code>KeepliveRouterSwitch</code> ä½¿ç”¨ ã€‚</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>renderRoutes<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-config&quot;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">KeepliveRouterSwitch</span></span> <span class="token attr-name">withoutRoute</span>  <span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span> <span class="token function">renderRoutes</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">KeepliveRouterSwitch</span></span><span class="token punctuation">&gt;</span></span> 
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="keepaliveroute" tabindex="-1"><a class="header-anchor" href="#keepaliveroute" aria-hidden="true">#</a> KeepaliveRoute</h3><p><code>KeepaliveRoute</code> åŸºæœ¬ä½¿ç”¨å’Œ <code>Route</code>æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚</p><p><strong>åœ¨å½“å‰ç‰ˆæœ¬ä¸­âš ï¸âš ï¸âš ï¸å¦‚æœ <code>KeepaliveRoute</code> å¦‚æœæ²¡æœ‰è¢« <code>KeepaliveRouterSwitch</code>åŒ…è£¹å°±ä¼šå¤±å»ç¼“å­˜ä½œç”¨ã€‚</strong></p><p><strong>æ•ˆæœ</strong></p><img src="/notes/assets/react/d29a133700134541b8bc0586e8951ab4_tplv-k3u1fbpfcp-watermark.image" alt="demo"><h2 id="_2-å…¶ä»–åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#_2-å…¶ä»–åŠŸèƒ½" aria-hidden="true">#</a> 2 å…¶ä»–åŠŸèƒ½</h2><h3 id="_1-ç¼“å­˜ç»„ä»¶æ¿€æ´»ç›‘å¬å™¨" tabindex="-1"><a class="header-anchor" href="#_1-ç¼“å­˜ç»„ä»¶æ¿€æ´»ç›‘å¬å™¨" aria-hidden="true">#</a> 1 ç¼“å­˜ç»„ä»¶æ¿€æ´»ç›‘å¬å™¨</h3><p>å¦‚æœå¸Œæœ›å¯¹å½“å‰æ¿€æ´»çš„ç»„ä»¶ï¼Œæœ‰ä¸€äº›é¢å¤–çš„æ“ä½œï¼Œå¯ä»¥æ·»åŠ ç›‘å¬å™¨ï¼Œç”¨æ¥ç›‘å¬ç¼“å­˜ç»„ä»¶çš„æ¿€æ´»çŠ¶æ€ã€‚</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token function">addKeeperListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">history<span class="token punctuation">,</span>cacheKey</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>history<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;å½“å‰æ¿€æ´»çŠ¶æ€ç¼“å­˜ç»„ä»¶ï¼š&#39;</span><span class="token operator">+</span> cacheKey <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ç¬¬ä¸€ä¸ªå‚æ•°æœª<code>history</code>å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå½“å‰ç¼“å­˜è·¯ç”±çš„å”¯ä¸€æ ‡è¯†<code>cacheKey</code></p><h3 id="_2-æ¸…é™¤ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#_2-æ¸…é™¤ç¼“å­˜" aria-hidden="true">#</a> 2 æ¸…é™¤ç¼“å­˜</h3><p>ç¼“å­˜çš„ç»„ä»¶ï¼Œæˆ–æ˜¯è¢«<code>route</code>åŒ…è£¹çš„ç»„ä»¶ï¼Œä¼šåœ¨<code>props</code>å¢åŠ é¢å¤–çš„æ–¹æ³•<code>cacheDispatch</code>ç”¨æ¥æ¸…é™¤ç¼“å­˜ã€‚</p><p>å¦‚æœ<code>props</code>æ²¡æœ‰<code>cacheDispatch</code>æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡</p><div class="language-jsx ext-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useCacheDispatch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-keepalive-router&#39;</span>

<span class="token keyword">function</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> cacheDispatch <span class="token operator">=</span> <span class="token function">useCacheDispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ˜¯é¦–é¡µ
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token function">cacheDispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&#39;reset&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span></span> <span class="token punctuation">&gt;</span></span><span class="token plain-text">æ¸…é™¤ç¼“å­˜</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> index
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol><li>æ¸…é™¤æ‰€æœ‰ç¼“å­˜</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">cacheDispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&#39;reset&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="2"><li>æ¸…é™¤å•ä¸ªç¼“å­˜</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">cacheDispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&#39;reset&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">payload</span><span class="token operator">:</span><span class="token string">&#39;cacheId&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="3"><li>æ¸…é™¤å¤šä¸ªç¼“å­˜</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">cacheDispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&#39;reset&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">payload</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&#39;cacheId1&#39;</span>ï¼Œ<span class="token string">&#39;cacheId2&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h1 id="äº”-éªŒè¯é˜¶æ®µ" tabindex="-1"><a class="header-anchor" href="#äº”-éªŒè¯é˜¶æ®µ" aria-hidden="true">#</a> äº” éªŒè¯é˜¶æ®µ</h1><p>ç¬¬ä¸€ä¸ªéœ€æ±‚ï¼š</p><img src="/notes/assets/react/8f4cfd3824314a36b71c26f76e7549d4_tplv-k3u1fbpfcp-watermark.image" alt="demo"><p>ç¬¬äºŒä¸ªéœ€æ±‚:</p><img src="/notes/assets/react/fabcfb104f6443d991db06b764369bf9_tplv-k3u1fbpfcp-watermark.image" alt="demo"><h1 id="å…­-æ‰“åŒ…é˜¶æ®µ-å‘å¸ƒnpmé˜¶æ®µ" tabindex="-1"><a class="header-anchor" href="#å…­-æ‰“åŒ…é˜¶æ®µ-å‘å¸ƒnpmé˜¶æ®µ" aria-hidden="true">#</a> å…­ æ‰“åŒ…é˜¶æ®µ + å‘å¸ƒnpmé˜¶æ®µ</h1><h2 id="rollupæ‰“åŒ…" tabindex="-1"><a class="header-anchor" href="#rollupæ‰“åŒ…" aria-hidden="true">#</a> rollupæ‰“åŒ…</h2><p>æ¥ä¸‹æ¥å°±æ˜¯ <code>rollup</code> æ‰“åŒ…é˜¶æ®µï¼Œ<code>rollup</code>æ‰“åŒ…é˜¶æ®µã€‚é¡¹ç›®ç»“æ„æ˜¯è¿™æ ·çš„ã€‚</p><img src="/notes/assets/react/153608040d3d4fc7b520fd65c6fa3aa1_tplv-k3u1fbpfcp-watermark.image" alt="demo"><p><code>rollup.config.js</code>æ˜¯æ•´ä¸ª<code>rollup</code>çš„é…ç½®æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ <code>rollup</code> æ‰“åŒ…åçš„æ–‡ä»¶å­˜åœ¨ <code>lib</code>æ–‡ä»¶å¤¹ä¸‹ã€‚</p><img src="/notes/assets/react/1d705258f2654d9188516f6d15a1233c_tplv-k3u1fbpfcp-watermark.image" alt="demo"><p><code>rollup.config.js</code> å†…å®¹å¦‚ä¸‹</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> resolve <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-node-resolve&#39;</span>
<span class="token keyword">import</span> babel <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-babel&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> uglify <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;rollup-plugin-uglify&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">input</span><span class="token operator">:</span> <span class="token string">&#39;src/index.js&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;keepaliveRouter&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">file</span><span class="token operator">:</span> <span class="token string">&#39;lib/index.js&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;cjs&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">sourcemap</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">external</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&#39;react&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;react-router-dom&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;invariant&#39;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">babel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token string">&#39;node_modules/**&#39;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">/* å‹ç¼©` */</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">input</span><span class="token operator">:</span> <span class="token string">&#39;src/index.js&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;keepaliveRouter&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">file</span><span class="token operator">:</span> <span class="token string">&#39;lib/index.min.js&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">&#39;umd&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">external</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&#39;react&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;react-router-dom&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;invariant&#39;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">babel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token string">&#39;node_modules/**&#39;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">uglify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h2 id="å‘å¸ƒnpm" tabindex="-1"><a class="header-anchor" href="#å‘å¸ƒnpm" aria-hidden="true">#</a> å‘å¸ƒnpm</h2><p>å¯¹äºå‘å¸ƒnpm</p><p>ç¬¬ä¸€æ­¥ï¼šéœ€è¦åœ¨<code>npm</code>æ³¨å†Œè´¦å·ã€‚<code>https://www.npmjs.com/signup</code></p><p>ç¬¬äºŒæ­¥ï¼š ç™»é™† <code>npm login</code></p><p>ç¬¬ä¸‰æ­¥ï¼šåˆ›å»º <code>package.json</code></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-keepalive-router&quot;</span><span class="token punctuation">,</span> <span class="token comment">/* åç§° */</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.1.0&quot;</span><span class="token punctuation">,</span>  <span class="token comment">/* ç‰ˆæœ¬å· */</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;åŸºäº`react 16.8+` ,`react-router 4+` å¼€å‘çš„`react`ç¼“å­˜ç»„ä»¶ï¼Œå¯ä»¥ç”¨äºç¼“å­˜é¡µé¢ç»„ä»¶ï¼Œç±»ä¼¼`vue`çš„`keepalive`åŒ…è£¹`vue-router`çš„æ•ˆæœåŠŸèƒ½ã€‚&quot;</span><span class="token punctuation">,</span> <span class="token comment">/* æè¿° */</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">/* å…¥å£æ–‡ä»¶ */</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rollup --config&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>  <span class="token comment">/* npm å…³é”®è¯ */</span>
    <span class="token string">&quot;keep alive&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;react router&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;react keep alive route&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;react hooks&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;homepage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://github.com/GoodLuckAlien/react-keepalive-router&quot;</span><span class="token punctuation">,</span> <span class="token comment">/* æŒ‡å‘ github  */</span>
  <span class="token property">&quot;peerDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">/* npm é¡¹ç›®ä¾èµ– */</span>
    <span class="token property">&quot;react&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&gt;=16.8&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;react-router-dom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&gt;=4&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;invariant&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&gt;=2&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;alien&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">/* å¼€å‘ç¯å¢ƒä¸‹ä¾èµ– */</span>
    <span class="token property">&quot;@babel/core&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.12.3&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@babel/preset-react&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.12.5&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@babel/preset-env&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.12.1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@babel/plugin-proposal-class-properties&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.12.1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;rollup&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.33.3&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;rollup-plugin-node-resolve&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;rollup-plugin-babel&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.4.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;rollup-plugin-uglify&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^6.0.4&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">/* ç”Ÿäº§ç¯å¢ƒä¾èµ– */</span>
    <span class="token property">&quot;invariant&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.2.4&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p>ç¬¬å››æ­¥ï¼šä¸‡äº‹ä¿±å¤‡ä¹‹åï¼Œç”¨ <code>npm publish</code> å‘å¸ƒã€‚</p><p>ç¬¬äº”æ­¥ï¼šå‡çº§ç‰ˆæœ¬ï¼Œå‡çº§ç‰ˆæœ¬å¾ˆç®€å•ï¼Œéœ€è¦åœ¨<code>package.json</code> å‡çº§ç‰ˆæœ¬å·ï¼Œç„¶åé‡æ–° <code>npm publish</code> å°±å¯ä»¥äº†ã€‚</p><p><strong>åºŸå¼ƒç‰ˆæœ¬å·</strong></p><p>å¦‚æœæƒ³åºŸå¼ƒæŸä¸ªç‰ˆæœ¬ , æ‰§è¡Œå‘½ä»¤ <code>npm deprecate &lt;pkg&gt;[@&lt;version&gt;] &lt;message&gt;</code></p><p><strong>åºŸå¼ƒåŒ…</strong></p><p>å¦‚æœæƒ³åºŸå¼ƒåŒ… <code>npm unpublish &lt;pkg&gt; --force</code></p><p><strong><code>.npmignore</code></strong></p><p><code>.npmignore</code>é‡Œé¢å£°æ˜çš„æ–‡ä»¶å’Œæ–‡ä»¶ä»·åç§°ï¼Œä¸ä¼šè¢«ä¸Šä¼ åˆ° <code>npm</code> , çš„é¡¹ç›®é™¤äº† <code>README.md</code> ,<code>package.json</code> å’Œ <code>lib</code> ä¸‹æ‰“åŒ…çš„æ–‡ä»¶ä¹‹å¤–ï¼Œå¤§éƒ¨åˆ†æ–‡ä»¶æ˜¯å¼€å‘æ—¶å€™æˆ–è€…ç¼–è¯‘é˜¶æ®µç”¨åˆ°çš„ï¼Œä¸éœ€è¦ä¸Šä¼ åˆ°<code>npm</code>ï¼Œæ‰€ä»¥éœ€è¦åœ¨ <code>.npmignore</code> è¿™ä¹ˆå†™</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>docs
node_modules
src
md
<span class="token punctuation">.</span>babelrc
<span class="token punctuation">.</span>gitignore
<span class="token punctuation">.</span>npmignore
<span class="token punctuation">.</span>prettierrc
rollup<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
yarn<span class="token punctuation">.</span>lock
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><a href="https://github.com/GoodLuckAlien/react-keepalive-router" target="_blank" rel="noopener noreferrer">react-keepalive-router<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: dean@57blocks.com">DeanSui</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/notes/assets/app.9d3046e8.js" defer></script>
  </body>
</html>
